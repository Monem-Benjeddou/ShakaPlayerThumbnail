/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
(function () {
    var innerGlobal = typeof window != "undefined" ? window : global;
    var exportTo = {};
    (function (window, global, module) {/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
        var r;

        function ba(a) {
            var b = 0;
            return function () {
                return b < a.length ? {done: !1, value: a[b++]} : {done: !0}
            }
        }

        var ca = "function" == typeof Object.defineProperties ? Object.defineProperty : function (a, b, c) {
            if (a == Array.prototype || a == Object.prototype) return a;
            a[b] = c.value;
            return a
        };

        function da(a) {
            a = ["object" == typeof globalThis && globalThis, a, "object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global];
            for (var b = 0; b < a.length; ++b) {
                var c = a[b];
                if (c && c.Math == Math) return c
            }
            throw Error("Cannot find global object");
        }

        var ea = da(this);

        function fa(a, b) {
            if (b) a:{
                var c = ea;
                a = a.split(".");
                for (var d = 0; d < a.length - 1; d++) {
                    var e = a[d];
                    if (!(e in c)) break a;
                    c = c[e]
                }
                a = a[a.length - 1];
                d = c[a];
                b = b(d);
                b != d && null != b && ca(c, a, {configurable: !0, writable: !0, value: b})
            }
        }

        fa("Symbol", function (a) {
            function b(f) {
                if (this instanceof b) throw new TypeError("Symbol is not a constructor");
                return new c(d + (f || "") + "_" + e++, f)
            }

            function c(f, g) {
                this.g = f;
                ca(this, "description", {configurable: !0, writable: !0, value: g})
            }

            if (a) return a;
            c.prototype.toString = function () {
                return this.g
            };
            var d = "jscomp_symbol_" + (1E9 * Math.random() >>> 0) + "_", e = 0;
            return b
        });
        fa("Symbol.iterator", function (a) {
            if (a) return a;
            a = Symbol("Symbol.iterator");
            for (var b = "Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "), c = 0; c < b.length; c++) {
                var d = ea[b[c]];
                "function" === typeof d && "function" != typeof d.prototype[a] && ca(d.prototype, a, {
                    configurable: !0,
                    writable: !0,
                    value: function () {
                        return ha(ba(this))
                    }
                })
            }
            return a
        });

        function ha(a) {
            a = {next: a};
            a[Symbol.iterator] = function () {
                return this
            };
            return a
        }

        function t(a) {
            var b = "undefined" != typeof Symbol && Symbol.iterator && a[Symbol.iterator];
            return b ? b.call(a) : {next: ba(a)}
        }

        function x(a) {
            if (!(a instanceof Array)) {
                a = t(a);
                for (var b, c = []; !(b = a.next()).done;) c.push(b.value);
                a = c
            }
            return a
        }

        var ia = "function" == typeof Object.create ? Object.create : function (a) {
            function b() {
            }

            b.prototype = a;
            return new b
        }, ja;
        if ("function" == typeof Object.setPrototypeOf) ja = Object.setPrototypeOf; else {
            var ka;
            a:{
                var la = {a: !0}, ma = {};
                try {
                    ma.__proto__ = la;
                    ka = ma.a;
                    break a
                } catch (a) {
                }
                ka = !1
            }
            ja = ka ? function (a, b) {
                a.__proto__ = b;
                if (a.__proto__ !== b) throw new TypeError(a + " is not extensible");
                return a
            } : null
        }
        var na = ja;

        function oa(a, b) {
            a.prototype = ia(b.prototype);
            a.prototype.constructor = a;
            if (na) na(a, b); else for (var c in b) if ("prototype" != c) if (Object.defineProperties) {
                var d = Object.getOwnPropertyDescriptor(b, c);
                d && Object.defineProperty(a, c, d)
            } else a[c] = b[c];
            a.pk = b.prototype
        }

        function pa() {
            this.o = !1;
            this.l = null;
            this.h = void 0;
            this.g = 1;
            this.j = this.m = 0;
            this.A = this.i = null
        }

        function qa(a) {
            if (a.o) throw new TypeError("Generator is already running");
            a.o = !0
        }

        pa.prototype.s = function (a) {
            this.h = a
        };

        function ra(a, b) {
            a.i = {Gg: b, Tg: !0};
            a.g = a.m || a.j
        }

        pa.prototype.return = function (a) {
            this.i = {return: a};
            this.g = this.j
        };

        function G(a, b, c) {
            a.g = c;
            return {value: b}
        }

        pa.prototype.u = function (a) {
            this.g = a
        };

        function H(a) {
            a.g = 0
        }

        function sa(a, b, c) {
            a.m = b;
            void 0 != c && (a.j = c)
        }

        function ua(a, b) {
            a.m = 0;
            a.j = b || 0
        }

        function va(a, b, c) {
            a.g = b;
            a.m = c || 0
        }

        function wa(a, b) {
            a.m = b || 0;
            b = a.i.Gg;
            a.i = null;
            return b
        }

        function xa(a) {
            a.A = [a.i];
            a.m = 0;
            a.j = 0
        }

        function ya(a, b) {
            var c = a.A.splice(0)[0];
            (c = a.i = a.i || c) ? c.Tg ? a.g = a.m || a.j : void 0 != c.u && a.j < c.u ? (a.g = c.u, a.i = null) : a.g = a.j : a.g = b
        }

        function za(a) {
            this.g = new pa;
            this.h = a
        }

        function Aa(a, b) {
            qa(a.g);
            var c = a.g.l;
            if (c) return Ba(a, "return" in c ? c["return"] : function (d) {
                return {value: d, done: !0}
            }, b, a.g.return);
            a.g.return(b);
            return Ca(a)
        }

        function Ba(a, b, c, d) {
            try {
                var e = b.call(a.g.l, c);
                if (!(e instanceof Object)) throw new TypeError("Iterator result " + e + " is not an object");
                if (!e.done) return a.g.o = !1, e;
                var f = e.value
            } catch (g) {
                return a.g.l = null, ra(a.g, g), Ca(a)
            }
            a.g.l = null;
            d.call(a.g, f);
            return Ca(a)
        }

        function Ca(a) {
            for (; a.g.g;) try {
                var b = a.h(a.g);
                if (b) return a.g.o = !1, {value: b.value, done: !1}
            } catch (c) {
                a.g.h = void 0, ra(a.g, c)
            }
            a.g.o = !1;
            if (a.g.i) {
                b = a.g.i;
                a.g.i = null;
                if (b.Tg) throw b.Gg;
                return {value: b.return, done: !0}
            }
            return {value: void 0, done: !0}
        }

        function Da(a) {
            this.next = function (b) {
                qa(a.g);
                a.g.l ? b = Ba(a, a.g.l.next, b, a.g.s) : (a.g.s(b), b = Ca(a));
                return b
            };
            this.throw = function (b) {
                qa(a.g);
                a.g.l ? b = Ba(a, a.g.l["throw"], b, a.g.s) : (ra(a.g, b), b = Ca(a));
                return b
            };
            this.return = function (b) {
                return Aa(a, b)
            };
            this[Symbol.iterator] = function () {
                return this
            }
        }

        function Ea(a) {
            function b(d) {
                return a.next(d)
            }

            function c(d) {
                return a.throw(d)
            }

            return new Promise(function (d, e) {
                function f(g) {
                    g.done ? d(g.value) : Promise.resolve(g.value).then(b, c).then(f, e)
                }

                f(a.next())
            })
        }

        function O(a) {
            return Ea(new Da(new za(a)))
        }

        function Fa() {
            for (var a = Number(this), b = [], c = a; c < arguments.length; c++) b[c - a] = arguments[c];
            return b
        }

        fa("Promise", function (a) {
            function b(g) {
                this.h = 0;
                this.i = void 0;
                this.g = [];
                this.o = !1;
                var h = this.j();
                try {
                    g(h.resolve, h.reject)
                } catch (k) {
                    h.reject(k)
                }
            }

            function c() {
                this.g = null
            }

            function d(g) {
                return g instanceof b ? g : new b(function (h) {
                    h(g)
                })
            }

            if (a) return a;
            c.prototype.h = function (g) {
                if (null == this.g) {
                    this.g = [];
                    var h = this;
                    this.i(function () {
                        h.l()
                    })
                }
                this.g.push(g)
            };
            var e = ea.setTimeout;
            c.prototype.i = function (g) {
                e(g, 0)
            };
            c.prototype.l = function () {
                for (; this.g && this.g.length;) {
                    var g = this.g;
                    this.g = [];
                    for (var h = 0; h < g.length; ++h) {
                        var k =
                            g[h];
                        g[h] = null;
                        try {
                            k()
                        } catch (l) {
                            this.j(l)
                        }
                    }
                }
                this.g = null
            };
            c.prototype.j = function (g) {
                this.i(function () {
                    throw g;
                })
            };
            b.prototype.j = function () {
                function g(l) {
                    return function (m) {
                        k || (k = !0, l.call(h, m))
                    }
                }

                var h = this, k = !1;
                return {resolve: g(this.F), reject: g(this.l)}
            };
            b.prototype.F = function (g) {
                if (g === this) this.l(new TypeError("A Promise cannot resolve to itself")); else if (g instanceof b) this.H(g); else {
                    a:switch (typeof g) {
                        case "object":
                            var h = null != g;
                            break a;
                        case "function":
                            h = !0;
                            break a;
                        default:
                            h = !1
                    }
                    h ? this.C(g) : this.m(g)
                }
            };
            b.prototype.C = function (g) {
                var h = void 0;
                try {
                    h = g.then
                } catch (k) {
                    this.l(k);
                    return
                }
                "function" == typeof h ? this.I(h, g) : this.m(g)
            };
            b.prototype.l = function (g) {
                this.s(2, g)
            };
            b.prototype.m = function (g) {
                this.s(1, g)
            };
            b.prototype.s = function (g, h) {
                if (0 != this.h) throw Error("Cannot settle(" + g + ", " + h + "): Promise already settled in state" + this.h);
                this.h = g;
                this.i = h;
                2 === this.h && this.G();
                this.A()
            };
            b.prototype.G = function () {
                var g = this;
                e(function () {
                    if (g.B()) {
                        var h = ea.console;
                        "undefined" !== typeof h && h.error(g.i)
                    }
                }, 1)
            };
            b.prototype.B =
                function () {
                    if (this.o) return !1;
                    var g = ea.CustomEvent, h = ea.Event, k = ea.dispatchEvent;
                    if ("undefined" === typeof k) return !0;
                    "function" === typeof g ? g = new g("unhandledrejection", {cancelable: !0}) : "function" === typeof h ? g = new h("unhandledrejection", {cancelable: !0}) : (g = ea.document.createEvent("CustomEvent"), g.initCustomEvent("unhandledrejection", !1, !0, g));
                    g.promise = this;
                    g.reason = this.i;
                    return k(g)
                };
            b.prototype.A = function () {
                if (null != this.g) {
                    for (var g = 0; g < this.g.length; ++g) f.h(this.g[g]);
                    this.g = null
                }
            };
            var f = new c;
            b.prototype.H = function (g) {
                var h = this.j();
                g.be(h.resolve, h.reject)
            };
            b.prototype.I = function (g, h) {
                var k = this.j();
                try {
                    g.call(h, k.resolve, k.reject)
                } catch (l) {
                    k.reject(l)
                }
            };
            b.prototype.then = function (g, h) {
                function k(p, q) {
                    return "function" == typeof p ? function (u) {
                        try {
                            l(p(u))
                        } catch (w) {
                            m(w)
                        }
                    } : q
                }

                var l, m, n = new b(function (p, q) {
                    l = p;
                    m = q
                });
                this.be(k(g, l), k(h, m));
                return n
            };
            b.prototype.catch = function (g) {
                return this.then(void 0, g)
            };
            b.prototype.be = function (g, h) {
                function k() {
                    switch (l.h) {
                        case 1:
                            g(l.i);
                            break;
                        case 2:
                            h(l.i);
                            break;
                        default:
                            throw Error("Unexpected state: " + l.h);
                    }
                }

                var l = this;
                null == this.g ? f.h(k) : this.g.push(k);
                this.o = !0
            };
            b.resolve = d;
            b.reject = function (g) {
                return new b(function (h, k) {
                    k(g)
                })
            };
            b.race = function (g) {
                return new b(function (h, k) {
                    for (var l = t(g), m = l.next(); !m.done; m = l.next()) d(m.value).be(h, k)
                })
            };
            b.all = function (g) {
                var h = t(g), k = h.next();
                return k.done ? d([]) : new b(function (l, m) {
                    function n(u) {
                        return function (w) {
                            p[u] = w;
                            q--;
                            0 == q && l(p)
                        }
                    }

                    var p = [], q = 0;
                    do p.push(void 0), q++, d(k.value).be(n(p.length - 1), m), k = h.next();
                    while (!k.done)
                })
            };
            return b
        });

        function Ga(a, b) {
            return Object.prototype.hasOwnProperty.call(a, b)
        }

        fa("WeakMap", function (a) {
            function b(k) {
                this.g = (h += Math.random() + 1).toString();
                if (k) {
                    k = t(k);
                    for (var l; !(l = k.next()).done;) l = l.value, this.set(l[0], l[1])
                }
            }

            function c() {
            }

            function d(k) {
                var l = typeof k;
                return "object" === l && null !== k || "function" === l
            }

            function e(k) {
                if (!Ga(k, g)) {
                    var l = new c;
                    ca(k, g, {value: l})
                }
            }

            function f(k) {
                var l = Object[k];
                l && (Object[k] = function (m) {
                    if (m instanceof c) return m;
                    Object.isExtensible(m) && e(m);
                    return l(m)
                })
            }

            if (function () {
                if (!a || !Object.seal) return !1;
                try {
                    var k = Object.seal({}), l = Object.seal({}),
                        m = new a([[k, 2], [l, 3]]);
                    if (2 != m.get(k) || 3 != m.get(l)) return !1;
                    m.delete(k);
                    m.set(l, 4);
                    return !m.has(k) && 4 == m.get(l)
                } catch (n) {
                    return !1
                }
            }()) return a;
            var g = "$jscomp_hidden_" + Math.random();
            f("freeze");
            f("preventExtensions");
            f("seal");
            var h = 0;
            b.prototype.set = function (k, l) {
                if (!d(k)) throw Error("Invalid WeakMap key");
                e(k);
                if (!Ga(k, g)) throw Error("WeakMap key fail: " + k);
                k[g][this.g] = l;
                return this
            };
            b.prototype.get = function (k) {
                return d(k) && Ga(k, g) ? k[g][this.g] : void 0
            };
            b.prototype.has = function (k) {
                return d(k) && Ga(k,
                    g) && Ga(k[g], this.g)
            };
            b.prototype.delete = function (k) {
                return d(k) && Ga(k, g) && Ga(k[g], this.g) ? delete k[g][this.g] : !1
            };
            return b
        });
        fa("Map", function (a) {
            function b() {
                var h = {};
                return h.Ob = h.next = h.head = h
            }

            function c(h, k) {
                var l = h.g;
                return ha(function () {
                    if (l) {
                        for (; l.head != h.g;) l = l.Ob;
                        for (; l.next != l.head;) return l = l.next, {done: !1, value: k(l)};
                        l = null
                    }
                    return {done: !0, value: void 0}
                })
            }

            function d(h, k) {
                var l = k && typeof k;
                "object" == l || "function" == l ? f.has(k) ? l = f.get(k) : (l = "" + ++g, f.set(k, l)) : l = "p_" + k;
                var m = h.h[l];
                if (m && Ga(h.h, l)) for (h = 0; h < m.length; h++) {
                    var n = m[h];
                    if (k !== k && n.key !== n.key || k === n.key) return {id: l, list: m, index: h, entry: n}
                }
                return {
                    id: l,
                    list: m, index: -1, entry: void 0
                }
            }

            function e(h) {
                this.h = {};
                this.g = b();
                this.size = 0;
                if (h) {
                    h = t(h);
                    for (var k; !(k = h.next()).done;) k = k.value, this.set(k[0], k[1])
                }
            }

            if (function () {
                if (!a || "function" != typeof a || !a.prototype.entries || "function" != typeof Object.seal) return !1;
                try {
                    var h = Object.seal({x: 4}), k = new a(t([[h, "s"]]));
                    if ("s" != k.get(h) || 1 != k.size || k.get({x: 4}) || k.set({x: 4}, "t") != k || 2 != k.size) return !1;
                    var l = k.entries(), m = l.next();
                    if (m.done || m.value[0] != h || "s" != m.value[1]) return !1;
                    m = l.next();
                    return m.done || 4 != m.value[0].x ||
                    "t" != m.value[1] || !l.next().done ? !1 : !0
                } catch (n) {
                    return !1
                }
            }()) return a;
            var f = new WeakMap;
            e.prototype.set = function (h, k) {
                h = 0 === h ? 0 : h;
                var l = d(this, h);
                l.list || (l.list = this.h[l.id] = []);
                l.entry ? l.entry.value = k : (l.entry = {
                    next: this.g,
                    Ob: this.g.Ob,
                    head: this.g,
                    key: h,
                    value: k
                }, l.list.push(l.entry), this.g.Ob.next = l.entry, this.g.Ob = l.entry, this.size++);
                return this
            };
            e.prototype.delete = function (h) {
                h = d(this, h);
                return h.entry && h.list ? (h.list.splice(h.index, 1), h.list.length || delete this.h[h.id], h.entry.Ob.next = h.entry.next,
                    h.entry.next.Ob = h.entry.Ob, h.entry.head = null, this.size--, !0) : !1
            };
            e.prototype.clear = function () {
                this.h = {};
                this.g = this.g.Ob = b();
                this.size = 0
            };
            e.prototype.has = function (h) {
                return !!d(this, h).entry
            };
            e.prototype.get = function (h) {
                return (h = d(this, h).entry) && h.value
            };
            e.prototype.entries = function () {
                return c(this, function (h) {
                    return [h.key, h.value]
                })
            };
            e.prototype.keys = function () {
                return c(this, function (h) {
                    return h.key
                })
            };
            e.prototype.values = function () {
                return c(this, function (h) {
                    return h.value
                })
            };
            e.prototype.forEach =
                function (h, k) {
                    for (var l = this.entries(), m; !(m = l.next()).done;) m = m.value, h.call(k, m[1], m[0], this)
                };
            e.prototype[Symbol.iterator] = e.prototype.entries;
            var g = 0;
            return e
        });
        fa("Set", function (a) {
            function b(c) {
                this.g = new Map;
                if (c) {
                    c = t(c);
                    for (var d; !(d = c.next()).done;) this.add(d.value)
                }
                this.size = this.g.size
            }

            if (function () {
                if (!a || "function" != typeof a || !a.prototype.entries || "function" != typeof Object.seal) return !1;
                try {
                    var c = Object.seal({x: 4}), d = new a(t([c]));
                    if (!d.has(c) || 1 != d.size || d.add(c) != d || 1 != d.size || d.add({x: 4}) != d || 2 != d.size) return !1;
                    var e = d.entries(), f = e.next();
                    if (f.done || f.value[0] != c || f.value[1] != c) return !1;
                    f = e.next();
                    return f.done || f.value[0] == c || 4 != f.value[0].x ||
                    f.value[1] != f.value[0] ? !1 : e.next().done
                } catch (g) {
                    return !1
                }
            }()) return a;
            b.prototype.add = function (c) {
                c = 0 === c ? 0 : c;
                this.g.set(c, c);
                this.size = this.g.size;
                return this
            };
            b.prototype.delete = function (c) {
                c = this.g.delete(c);
                this.size = this.g.size;
                return c
            };
            b.prototype.clear = function () {
                this.g.clear();
                this.size = 0
            };
            b.prototype.has = function (c) {
                return this.g.has(c)
            };
            b.prototype.entries = function () {
                return this.g.entries()
            };
            b.prototype.values = function () {
                return this.g.values()
            };
            b.prototype.keys = b.prototype.values;
            b.prototype[Symbol.iterator] =
                b.prototype.values;
            b.prototype.forEach = function (c, d) {
                var e = this;
                this.g.forEach(function (f) {
                    return c.call(d, f, f, e)
                })
            };
            return b
        });

        function Ha(a, b) {
            a instanceof String && (a += "");
            var c = 0, d = !1, e = {
                next: function () {
                    if (!d && c < a.length) {
                        var f = c++;
                        return {value: b(f, a[f]), done: !1}
                    }
                    d = !0;
                    return {done: !0, value: void 0}
                }
            };
            e[Symbol.iterator] = function () {
                return e
            };
            return e
        }

        fa("Array.prototype.keys", function (a) {
            return a ? a : function () {
                return Ha(this, function (b) {
                    return b
                })
            }
        });

        function Ia(a, b, c) {
            a instanceof String && (a = String(a));
            for (var d = a.length, e = 0; e < d; e++) {
                var f = a[e];
                if (b.call(c, f, e, a)) return {Rg: e, v: f}
            }
            return {Rg: -1, v: void 0}
        }

        fa("Array.prototype.findIndex", function (a) {
            return a ? a : function (b, c) {
                return Ia(this, b, c).Rg
            }
        });
        fa("Array.from", function (a) {
            return a ? a : function (b, c, d) {
                c = null != c ? c : function (h) {
                    return h
                };
                var e = [], f = "undefined" != typeof Symbol && Symbol.iterator && b[Symbol.iterator];
                if ("function" == typeof f) {
                    b = f.call(b);
                    for (var g = 0; !(f = b.next()).done;) e.push(c.call(d, f.value, g++))
                } else for (f = b.length, g = 0; g < f; g++) e.push(c.call(d, b[g], g));
                return e
            }
        });
        fa("Array.prototype.values", function (a) {
            return a ? a : function () {
                return Ha(this, function (b, c) {
                    return c
                })
            }
        });
        fa("Object.is", function (a) {
            return a ? a : function (b, c) {
                return b === c ? 0 !== b || 1 / b === 1 / c : b !== b && c !== c
            }
        });
        fa("Array.prototype.includes", function (a) {
            return a ? a : function (b, c) {
                var d = this;
                d instanceof String && (d = String(d));
                var e = d.length;
                c = c || 0;
                for (0 > c && (c = Math.max(c + e, 0)); c < e; c++) {
                    var f = d[c];
                    if (f === b || Object.is(f, b)) return !0
                }
                return !1
            }
        });

        function Ja(a, b, c) {
            if (null == a) throw new TypeError("The 'this' value for String.prototype." + c + " must not be null or undefined");
            if (b instanceof RegExp) throw new TypeError("First argument to String.prototype." + c + " must not be a regular expression");
            return a + ""
        }

        fa("String.prototype.includes", function (a) {
            return a ? a : function (b, c) {
                return -1 !== Ja(this, b, "includes").indexOf(b, c || 0)
            }
        });
        fa("String.fromCodePoint", function (a) {
            return a ? a : function (b) {
                for (var c = "", d = 0; d < arguments.length; d++) {
                    var e = Number(arguments[d]);
                    if (0 > e || 1114111 < e || e !== Math.floor(e)) throw new RangeError("invalid_code_point " + e);
                    65535 >= e ? c += String.fromCharCode(e) : (e -= 65536, c += String.fromCharCode(e >>> 10 & 1023 | 55296), c += String.fromCharCode(e & 1023 | 56320))
                }
                return c
            }
        });
        fa("Array.prototype.find", function (a) {
            return a ? a : function (b, c) {
                return Ia(this, b, c).v
            }
        });
        fa("String.prototype.startsWith", function (a) {
            return a ? a : function (b, c) {
                var d = Ja(this, b, "startsWith"), e = d.length, f = b.length;
                c = Math.max(0, Math.min(c | 0, d.length));
                for (var g = 0; g < f && c < e;) if (d[c++] != b[g++]) return !1;
                return g >= f
            }
        });
        fa("WeakSet", function (a) {
            function b(c) {
                this.g = new WeakMap;
                if (c) {
                    c = t(c);
                    for (var d; !(d = c.next()).done;) this.add(d.value)
                }
            }

            if (function () {
                if (!a || !Object.seal) return !1;
                try {
                    var c = Object.seal({}), d = Object.seal({}), e = new a([c]);
                    if (!e.has(c) || e.has(d)) return !1;
                    e.delete(c);
                    e.add(d);
                    return !e.has(c) && e.has(d)
                } catch (f) {
                    return !1
                }
            }()) return a;
            b.prototype.add = function (c) {
                this.g.set(c, !0);
                return this
            };
            b.prototype.has = function (c) {
                return this.g.has(c)
            };
            b.prototype.delete = function (c) {
                return this.g.delete(c)
            };
            return b
        });
        var Ka = "function" == typeof Object.assign ? Object.assign : function (a, b) {
            for (var c = 1; c < arguments.length; c++) {
                var d = arguments[c];
                if (d) for (var e in d) Ga(d, e) && (a[e] = d[e])
            }
            return a
        };
        fa("Object.assign", function (a) {
            return a || Ka
        });
        fa("Promise.prototype.finally", function (a) {
            return a ? a : function (b) {
                return this.then(function (c) {
                    return Promise.resolve(b()).then(function () {
                        return c
                    })
                }, function (c) {
                    return Promise.resolve(b()).then(function () {
                        throw c;
                    })
                })
            }
        });
        fa("Array.prototype.entries", function (a) {
            return a ? a : function () {
                return Ha(this, function (b, c) {
                    return [b, c]
                })
            }
        });
        fa("Number.isNaN", function (a) {
            return a ? a : function (b) {
                return "number" === typeof b && isNaN(b)
            }
        });
        fa("String.prototype.repeat", function (a) {
            return a ? a : function (b) {
                var c = Ja(this, null, "repeat");
                if (0 > b || 1342177279 < b) throw new RangeError("Invalid count value");
                b |= 0;
                for (var d = ""; b;) if (b & 1 && (d += c), b >>>= 1) c += c;
                return d
            }
        });
        fa("Number.isFinite", function (a) {
            return a ? a : function (b) {
                return "number" !== typeof b ? !1 : !isNaN(b) && Infinity !== b && -Infinity !== b
            }
        });
        fa("Object.values", function (a) {
            return a ? a : function (b) {
                var c = [], d;
                for (d in b) Ga(b, d) && c.push(b[d]);
                return c
            }
        });
        fa("Math.log2", function (a) {
            return a ? a : function (b) {
                return Math.log(b) / Math.LN2
            }
        });
        fa("Number.MAX_SAFE_INTEGER", function () {
            return 9007199254740991
        });
        fa("Math.trunc", function (a) {
            return a ? a : function (b) {
                b = Number(b);
                if (isNaN(b) || Infinity === b || -Infinity === b || 0 === b) return b;
                var c = Math.floor(Math.abs(b));
                return 0 > b ? -c : c
            }
        });
        fa("Object.entries", function (a) {
            return a ? a : function (b) {
                var c = [], d;
                for (d in b) Ga(b, d) && c.push([d, b[d]]);
                return c
            }
        });
        var La = this || self;

        function S(a, b) {
            a = a.split(".");
            var c = La;
            a[0] in c || "undefined" == typeof c.execScript || c.execScript("var " + a[0]);
            for (var d; a.length && (d = a.shift());) a.length || void 0 === b ? c[d] && c[d] !== Object.prototype[d] ? c = c[d] : c = c[d] = {} : c[d] = b
        };/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
        function Na() {
        }

        function Pa() {
        };

        function Qa(a) {
            this.g = Math.exp(Math.log(.5) / a);
            this.i = this.h = 0
        }

        Qa.prototype.sample = function (a, b) {
            var c = Math.pow(this.g, a);
            b = b * (1 - c) + c * this.h;
            isNaN(b) || (this.h = b, this.i += a)
        };

        function Ra(a) {
            return a.h / (1 - Math.pow(a.g, a.i))
        };

        function Va() {
            this.h = new Qa(2);
            this.j = new Qa(5);
            this.g = 0;
            this.i = 128E3;
            this.l = 16E3
        }

        Va.prototype.configure = function (a) {
            this.i = a.minTotalBytes;
            this.l = a.minBytes;
            this.h.g = Math.exp(Math.log(.5) / a.fastHalfLife);
            this.j.g = Math.exp(Math.log(.5) / a.slowHalfLife)
        };
        Va.prototype.sample = function (a, b) {
            if (!(b < this.l)) {
                var c = 8E3 * b / a;
                a /= 1E3;
                this.g += b;
                this.h.sample(a, c);
                this.j.sample(a, c)
            }
        };
        Va.prototype.getBandwidthEstimate = function (a) {
            return this.g < this.i ? a : Math.min(Ra(this.h), Ra(this.j))
        };

        function Xa() {
        }

        function Za() {
        }

        function $a() {
        }

        function ab(a) {
            var b = Fa.apply(1, arguments);
            bb.has(a) || (bb.add(a), $a.apply(Xa, x(b)))
        }

        function cb() {
        }

        function db() {
        }

        function eb() {
        }

        var bb = new Set;
        window.console && ($a = function () {
            return console.warn.apply(console, x(Fa.apply(0, arguments)))
        }, Za = function () {
            console.error.apply(console, x(Fa.apply(0, arguments)))
        });

        function fb() {
            this.g = {}
        }

        r = fb.prototype;
        r.push = function (a, b) {
            this.g.hasOwnProperty(a) ? this.g[a].push(b) : this.g[a] = [b]
        };
        r.get = function (a) {
            return (a = this.g[a]) ? a.slice() : null
        };
        r.remove = function (a, b) {
            a in this.g && (this.g[a] = this.g[a].filter(function (c) {
                return c != b
            }), 0 == this.g[a].length && delete this.g[a])
        };
        r.forEach = function (a) {
            for (var b in this.g) a(b, this.g[b])
        };
        r.size = function () {
            return Object.keys(this.g).length
        };
        r.keys = function () {
            return Object.keys(this.g)
        };

        function gb() {
            this.g = new fb
        }

        r = gb.prototype;
        r.release = function () {
            this.Ra();
            this.g = null
        };
        r.D = function (a, b, c, d) {
            this.g && (a = new ib(a, b, c, d), this.g.push(b, a))
        };
        r.ha = function (a, b, c, d) {
            function e(g) {
                f.lb(a, b, e);
                c(g)
            }

            var f = this;
            this.D(a, b, e, d)
        };
        r.lb = function (a, b, c) {
            if (this.g) {
                var d = this.g.get(b) || [];
                d = t(d);
                for (var e = d.next(); !e.done; e = d.next()) e = e.value, e.target != a || c != e.listener && c || (e.lb(), this.g.remove(b, e))
            }
        };
        r.Ra = function () {
            if (this.g) {
                var a = this.g, b = [], c;
                for (c in a.g) b.push.apply(b, x(a.g[c]));
                a = t(b);
                for (b = a.next(); !b.done; b = a.next()) b.value.lb();
                this.g.g = {}
            }
        };
        S("shaka.util.EventManager", gb);
        gb.prototype.removeAll = gb.prototype.Ra;
        gb.prototype.unlisten = gb.prototype.lb;
        gb.prototype.listenOnce = gb.prototype.ha;
        gb.prototype.listen = gb.prototype.D;
        gb.prototype.release = gb.prototype.release;

        function ib(a, b, c, d) {
            this.target = a;
            this.type = b;
            this.listener = c;
            this.g = jb(a, d);
            this.target.addEventListener(b, c, this.g)
        }

        ib.prototype.lb = function () {
            this.target.removeEventListener(this.type, this.listener, this.g);
            this.listener = this.target = null;
            this.g = !1
        };

        function jb(a, b) {
            if (void 0 == b) return !1;
            if ("boolean" == typeof b) return b;
            var c = new Set(["passive", "capture"]);
            Object.keys(b).filter(function (d) {
                return !c.has(d)
            });
            return kb(a) ? b : b.capture || !1
        }

        function kb(a) {
            var b = mb;
            if (void 0 == b) {
                b = !1;
                try {
                    var c = {}, d = {
                        get: function () {
                            b = !0;
                            return !1
                        }
                    };
                    Object.defineProperty(c, "passive", d);
                    Object.defineProperty(c, "capture", d);
                    d = function () {
                    };
                    a.addEventListener("test", d, c);
                    a.removeEventListener("test", d, c)
                } catch (e) {
                    b = !1
                }
                mb = b
            }
            return b || !1
        }

        var mb = void 0;

        function nb(a) {
            if (ob.has(a)) return ob.get(a);
            if (window.ManagedMediaSource) {
                var b = ManagedMediaSource.isTypeSupported(a);
                ob.set(a, b);
                return b
            }
            return window.MediaSource ? (b = MediaSource.isTypeSupported(a), ob.set(a, b), b) : !1
        }

        function pb() {
            return !!window.SourceBuffer && !!SourceBuffer.prototype && !!SourceBuffer.prototype.changeType
        }

        var ob = new Map;

        function qb(a, b) {
            this.g = a;
            this.h = b
        }

        qb.prototype.toString = function () {
            return "v" + this.g + "." + this.h
        };

        function rb(a, b) {
            var c = new qb(5, 0), d = sb, e = d.g, f = c.h - e.h;
            (0 < (c.g - e.g || f) ? d.i : d.h)(d.g, c, a, b)
        }

        function tb(a, b, c, d) {
            $a([c, "has been deprecated and will be removed in", b, ". We are currently at version", a, ". Additional information:", d].join(" "))
        }

        function ub(a, b, c, d) {
            Za([c, "has been deprecated and has been removed in", b, ". We are now at version", a, ". Additional information:", d].join(" "))
        }

        var sb = null;

        function vb() {
        }

        vb.prototype.extract = function () {
        };
        vb.prototype.decode = function () {
            return []
        };
        vb.prototype.clear = function () {
        };
        vb.prototype.getStreams = function () {
            return []
        };

        function wb() {
        }

        wb.prototype.init = function () {
        };
        wb.prototype.parse = function () {
            return []
        };

        function xb() {
        }

        function yb(a, b) {
            if (!a && !b) return !0;
            if (!a || !b || a.byteLength != b.byteLength) return !1;
            if (zb(a) == zb(b) && (a.byteOffset || 0) == (b.byteOffset || 0)) return !0;
            var c = Ab(a);
            b = Ab(b);
            for (var d = 0; d < a.byteLength; d++) if (c[d] != b[d]) return !1;
            return !0
        }

        function zb(a) {
            return a instanceof ArrayBuffer ? a : a.buffer
        }

        function Cb(a) {
            return a instanceof ArrayBuffer ? a : 0 == a.byteOffset && a.byteLength == a.buffer.byteLength ? a.buffer : (new Uint8Array(a)).buffer
        }

        function Ab(a, b, c) {
            c = void 0 === c ? Infinity : c;
            return Db(a, void 0 === b ? 0 : b, c, Uint8Array)
        }

        function Eb(a, b, c) {
            c = void 0 === c ? Infinity : c;
            return Db(a, void 0 === b ? 0 : b, c, Uint16Array)
        }

        function Fb(a, b, c) {
            c = void 0 === c ? Infinity : c;
            return Db(a, void 0 === b ? 0 : b, c, DataView)
        }

        function Db(a, b, c, d) {
            var e = zb(a), f = 1;
            "BYTES_PER_ELEMENT" in d && (f = d.BYTES_PER_ELEMENT);
            var g = ((a.byteOffset || 0) + a.byteLength) / f;
            a = Math.floor(Math.max(0, Math.min(((a.byteOffset || 0) + b) / f, g)));
            return new d(e, a, Math.floor(Math.min(a + Math.max(c, 0), g)) - a)
        }

        S("shaka.util.BufferUtils", xb);
        xb.toDataView = Fb;
        xb.toUint16 = Eb;
        xb.toUint8 = Ab;
        xb.toArrayBuffer = Cb;
        xb.equal = yb;

        function Gb() {
        }

        Gb.prototype.init = function () {
        };
        Gb.prototype.i = function () {
        };
        Gb.prototype.g = function () {
        };
        Gb.prototype.j = function () {
        };
        S("shaka.media.IClosedCaptionParser", Gb);

        function Hb(a) {
            this.l = new wb;
            if (a = Ib[a.toLowerCase()]) this.l = a();
            this.h = new vb;
            if (a = Jb) this.h = a()
        }

        Hb.prototype.init = function (a, b) {
            void 0 !== b && b || (this.g(), this.l.init(a))
        };
        Hb.prototype.i = function (a) {
            a = this.l.parse(a);
            a = t(a);
            for (var b = a.next(); !b.done; b = a.next()) {
                b = b.value;
                var c = Ab(b.packet);
                0 < c.length && this.h.extract(c, b.pts)
            }
            return this.h.decode()
        };
        Hb.prototype.g = function () {
            this.h.clear()
        };
        Hb.prototype.j = function () {
            return this.h.getStreams()
        };
        S("shaka.media.ClosedCaptionParser", Hb);
        Hb.findDecoder = function () {
            return Jb
        };
        Hb.unregisterDecoder = function () {
            Jb = null
        };
        Hb.registerDecoder = function (a) {
            Jb = a
        };
        Hb.findParser = function (a) {
            return Ib[a]
        };
        Hb.unregisterParser = function (a) {
            delete Ib[a]
        };
        Hb.registerParser = function (a, b) {
            Ib[a] = b
        };
        var Ib = {}, Jb = null;

        function Kb() {
            this.id = "";
            this.regionAnchorY = this.regionAnchorX = this.viewportAnchorY = this.viewportAnchorX = 0;
            this.height = this.width = 100;
            this.viewportAnchorUnits = this.widthUnits = this.heightUnits = Lb;
            this.scroll = Mb
        }

        S("shaka.text.CueRegion", Kb);
        var Lb = 1;
        Kb.units = {PX: 0, PERCENTAGE: Lb, LINES: 2};
        var Mb = "";
        Kb.scrollMode = {NONE: Mb, UP: "up"};

        function Nb(a, b) {
            return "number" === typeof a && "number" === typeof b && isNaN(a) && isNaN(b) ? !0 : a === b
        }

        function Ob(a, b) {
            b = a.indexOf(b);
            -1 < b && a.splice(b, 1)
        }

        function Qb(a, b, c) {
            c || (c = Nb);
            if (a.length != b.length) return !1;
            b = b.slice();
            var d = {};
            a = t(a);
            for (var e = a.next(); !e.done; d = {Qe: d.Qe}, e = a.next()) {
                d.Qe = e.value;
                e = b.findIndex(function (f) {
                    return function (g) {
                        return c(f.Qe, g)
                    }
                }(d));
                if (-1 == e) return !1;
                b[e] = b[b.length - 1];
                b.pop()
            }
            return 0 == b.length
        }

        function Rb(a, b, c) {
            c || (c = Nb);
            if (a.length != b.length) return !1;
            for (var d = 0; d < a.length; d++) if (!c(a[d], b[d])) return !1;
            return !0
        };

        function Sb(a, b, c) {
            this.startTime = a;
            this.endTime = b;
            this.payload = c;
            this.region = new Kb;
            this.position = null;
            this.positionAlign = Tb;
            this.size = 0;
            this.textAlign = Ub;
            this.direction = Vb;
            this.writingMode = Wb;
            this.lineInterpretation = Xb;
            this.line = null;
            this.lineHeight = "";
            this.lineAlign = Yb;
            this.displayAlign = Zb;
            this.fontSize = this.border = this.backgroundImage = this.backgroundColor = this.color = "";
            this.fontWeight = $b;
            this.fontStyle = ac;
            this.linePadding = this.letterSpacing = this.fontFamily = "";
            this.opacity = 1;
            this.textCombineUpright =
                "";
            this.textDecoration = [];
            this.textStrokeWidth = this.textStrokeColor = this.textShadow = "";
            this.wrapLine = !0;
            this.id = "";
            this.nestedCues = [];
            this.lineBreak = this.isContainer = !1;
            this.rubyTag = null;
            this.cellResolution = {kc: 32, rows: 15}
        }

        function bc(a, b) {
            a = new Sb(a, b, "");
            a.lineBreak = !0;
            return a
        }

        Sb.prototype.clone = function () {
            var a = new Sb(0, 0, ""), b;
            for (b in this) a[b] = this[b], a[b] && a[b].constructor == Array && (a[b] = a[b].slice());
            return a
        };

        function cc(a, b) {
            if (a.startTime != b.startTime || a.endTime != b.endTime || a.payload != b.payload) return !1;
            for (var c in a) if ("startTime" != c && "endTime" != c && "payload" != c) if ("nestedCues" == c) {
                if (!Rb(a.nestedCues, b.nestedCues, cc)) return !1
            } else if ("region" == c || "cellResolution" == c) for (var d in a[c]) {
                if (a[c][d] != b[c][d]) return !1
            } else if (Array.isArray(a[c])) {
                if (!Rb(a[c], b[c])) return !1
            } else if (a[c] != b[c]) return !1;
            return !0
        }

        S("shaka.text.Cue", Sb);
        Sb.equal = cc;
        Sb.prototype.clone = Sb.prototype.clone;
        var Tb = "auto";
        Sb.positionAlign = {LEFT: "line-left", RIGHT: "line-right", CENTER: "center", AUTO: Tb};
        var Ub = "center", dc = {LEFT: "left", RIGHT: "right", CENTER: Ub, START: "start", END: "end"};
        Sb.textAlign = dc;
        var Zb = "after", ec = {BEFORE: "before", CENTER: "center", AFTER: Zb};
        Sb.displayAlign = ec;
        var Vb = "ltr";
        Sb.direction = {HORIZONTAL_LEFT_TO_RIGHT: Vb, HORIZONTAL_RIGHT_TO_LEFT: "rtl"};
        var Wb = "horizontal-tb";
        Sb.writingMode = {
            HORIZONTAL_TOP_TO_BOTTOM: Wb,
            VERTICAL_LEFT_TO_RIGHT: "vertical-lr",
            VERTICAL_RIGHT_TO_LEFT: "vertical-rl"
        };
        var Xb = 0;
        Sb.lineInterpretation = {LINE_NUMBER: Xb, PERCENTAGE: 1};
        var Yb = "start", fc = {CENTER: "center", START: Yb, END: "end"};
        Sb.lineAlign = fc;
        var gc = {
            white: "white",
            lime: "lime",
            cyan: "cyan",
            red: "red",
            yellow: "yellow",
            magenta: "magenta",
            blue: "blue",
            black: "black"
        };
        Sb.defaultTextColor = gc;
        var hc = {
            bg_white: "white",
            bg_lime: "lime",
            bg_cyan: "cyan",
            bg_red: "red",
            bg_yellow: "yellow",
            bg_magenta: "magenta",
            bg_blue: "blue",
            bg_black: "black"
        };
        Sb.defaultTextBackgroundColor = hc;
        var $b = 400;
        Sb.fontWeight = {NORMAL: $b, BOLD: 700};
        var ac = "normal", ic = {NORMAL: ac, ITALIC: "italic", OBLIQUE: "oblique"};
        Sb.fontStyle = ic;
        Sb.textDecoration = {UNDERLINE: "underline", LINE_THROUGH: "lineThrough", OVERLINE: "overline"};

        function jc() {
        }

        jc.prototype.destroy = function () {
        };

        function kc(a, b, c) {
            lc[a.toLowerCase().split(";")[0] + "-" + c] = {priority: c, De: b}
        }

        function oc(a, b) {
            for (var c = a.toLowerCase().split(";")[0], d = t([pc, qc, rc, sc]), e = d.next(); !e.done; e = d.next()) if (e = lc[c + "-" + e.value]) {
                var f = e.De(), g = f.isSupported(a, b);
                f.destroy();
                if (g) return e.De
            }
            return null
        }

        S("shaka.transmuxer.TransmuxerEngine", jc);
        jc.findTransmuxer = oc;
        jc.unregisterTransmuxer = function (a, b) {
            delete lc[a.toLowerCase().split(";")[0] + "-" + b]
        };
        jc.registerTransmuxer = kc;
        jc.prototype.destroy = jc.prototype.destroy;
        var lc = {}, sc = 1, rc = 2, qc = 3, pc = 4;
        jc.PluginPriority = {FALLBACK: sc, PREFERRED_SECONDARY: rc, PREFERRED: qc, APPLICATION: pc};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
        var tc = RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
        function uc(a) {
            var b;
            a instanceof uc ? (vc(this, a.Db), this.yc = a.yc, wc(this, a.Gb), xc(this, a.Pc), this.Pa = a.Pa, yc(this, a.g.clone()), this.lc = a.lc) : a && (b = String(a).match(tc)) ? (vc(this, b[1] || "", !0), this.yc = zc(b[2] || ""), wc(this, b[3] || "", !0), xc(this, b[4]), this.Pa = zc(b[5] || "", !0), yc(this, b[6] || "", !0), this.lc = zc(b[7] || "")) : this.g = new Ac(null)
        }

        r = uc.prototype;
        r.Db = "";
        r.yc = "";
        r.Gb = "";
        r.Pc = null;
        r.Pa = "";
        r.lc = "";
        r.toString = function () {
            var a = [], b = this.Db;
            b && a.push(Bc(b, Cc, !0), ":");
            if (b = this.Gb) {
                a.push("//");
                var c = this.yc;
                c && a.push(Bc(c, Cc, !0), "@");
                a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g, "%$1"));
                b = this.Pc;
                null != b && a.push(":", String(b))
            }
            if (b = this.Pa) this.Gb && "/" != b.charAt(0) && a.push("/"), a.push(Bc(b, "/" == b.charAt(0) ? Dc : Ec, !0));
            (b = this.g.toString()) && a.push("?", b);
            (b = this.lc) && a.push("#", Bc(b, Fc));
            return a.join("")
        };
        r.resolve = function (a) {
            var b = this.clone();
            "data" === b.Db && (b = new uc);
            var c = !!a.Db;
            c ? vc(b, a.Db) : c = !!a.yc;
            c ? b.yc = a.yc : c = !!a.Gb;
            c ? wc(b, a.Gb) : c = null != a.Pc;
            var d = a.Pa;
            if (c) xc(b, a.Pc); else if (c = !!a.Pa) {
                if ("/" != d.charAt(0)) if (this.Gb && !this.Pa) d = "/" + d; else {
                    var e = b.Pa.lastIndexOf("/");
                    -1 != e && (d = b.Pa.substr(0, e + 1) + d)
                }
                if (".." == d || "." == d) d = ""; else if (-1 != d.indexOf("./") || -1 != d.indexOf("/.")) {
                    e = 0 == d.lastIndexOf("/", 0);
                    d = d.split("/");
                    for (var f = [], g = 0; g < d.length;) {
                        var h = d[g++];
                        "." == h ? e && g == d.length && f.push("") : ".." ==
                        h ? ((1 < f.length || 1 == f.length && "" != f[0]) && f.pop(), e && g == d.length && f.push("")) : (f.push(h), e = !0)
                    }
                    d = f.join("/")
                }
            }
            c ? b.Pa = d : c = "" !== a.g.toString();
            c ? yc(b, a.g.clone()) : c = !!a.lc;
            c && (b.lc = a.lc);
            return b
        };
        r.clone = function () {
            return new uc(this)
        };

        function vc(a, b, c) {
            a.Db = c ? zc(b, !0) : b;
            a.Db && (a.Db = a.Db.replace(/:$/, ""))
        }

        function wc(a, b, c) {
            a.Gb = c ? zc(b, !0) : b
        }

        function xc(a, b) {
            if (b) {
                b = Number(b);
                if (isNaN(b) || 0 > b) throw Error("Bad port number " + b);
                a.Pc = b
            } else a.Pc = null
        }

        function yc(a, b, c) {
            b instanceof Ac ? a.g = b : (c || (b = Bc(b, Gc)), a.g = new Ac(b))
        }

        function zc(a, b) {
            return a ? b ? decodeURI(a) : decodeURIComponent(a) : ""
        }

        function Bc(a, b, c) {
            return null != a ? (a = encodeURI(a).replace(b, Hc), c && (a = a.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), a) : null
        }

        function Hc(a) {
            a = a.charCodeAt(0);
            return "%" + (a >> 4 & 15).toString(16) + (a & 15).toString(16)
        }

        var Cc = /[#\/\?@]/g, Ec = /[#\?:]/g, Dc = /[#\?]/g, Gc = /[#\?@]/g, Fc = /#/g;

        function Ac(a) {
            this.g = a || null
        }

        function Ic(a) {
            if (!a.Ka && (a.Ka = {}, a.pd = 0, a.g)) for (var b = a.g.split("&"), c = 0; c < b.length; c++) {
                var d = b[c].indexOf("="), e = null;
                if (0 <= d) {
                    var f = b[c].substring(0, d);
                    e = b[c].substring(d + 1)
                } else f = b[c];
                f = decodeURIComponent(f.replace(/\+/g, " "));
                e = e || "";
                a.add(f, decodeURIComponent(e.replace(/\+/g, " ")))
            }
        }

        r = Ac.prototype;
        r.Ka = null;
        r.pd = null;

        function Jc(a) {
            Ic(a);
            return a.pd
        }

        r.add = function (a, b) {
            Ic(this);
            this.g = null;
            var c = this.Ka.hasOwnProperty(a) ? this.Ka[a] : null;
            c || (this.Ka[a] = c = []);
            c.push(b);
            this.pd++;
            return this
        };
        r.set = function (a, b) {
            Ic(this);
            this.g = null;
            this.Ka.hasOwnProperty(a) ? this.Ka[a] = [b] : this.add(a, b);
            return this
        };
        r.get = function (a) {
            Ic(this);
            return this.Ka[a] || []
        };
        r.toString = function () {
            if (this.g) return this.g;
            if (!this.Ka) return "";
            var a = [], b;
            for (b in this.Ka) for (var c = encodeURIComponent(b), d = this.Ka[b], e = 0; e < d.length; e++) {
                var f = c;
                "" !== d[e] && (f += "=" + encodeURIComponent(d[e]));
                a.push(f)
            }
            return this.g = a.join("&")
        };
        r.clone = function () {
            var a = new Ac;
            a.g = this.g;
            if (this.Ka) {
                var b = {}, c;
                for (c in this.Ka) b[c] = this.Ka[c].concat();
                a.Ka = b;
                a.pd = this.pd
            }
            return a
        };

        function T(a, b, c) {
            var d = Fa.apply(3, arguments);
            this.severity = a;
            this.category = b;
            this.code = c;
            this.data = d;
            this.handled = !1;
            this.message = "Shaka Error " + this.code;
            if (Kc) try {
                throw Error(this.message || "Shaka Error");
            } catch (e) {
                this.stack = e.stack
            }
        }

        T.prototype.toString = function () {
            return "shaka.util.Error " + JSON.stringify(this, null, "  ")
        };
        S("shaka.util.Error", T);
        var Kc = !0;
        T.Severity = {RECOVERABLE: 1, CRITICAL: 2};
        T.Category = {
            NETWORK: 1,
            TEXT: 2,
            MEDIA: 3,
            MANIFEST: 4,
            STREAMING: 5,
            DRM: 6,
            PLAYER: 7,
            CAST: 8,
            STORAGE: 9,
            ADS: 10
        };
        T.Code = {
            UNSUPPORTED_SCHEME: 1E3,
            BAD_HTTP_STATUS: 1001,
            HTTP_ERROR: 1002,
            TIMEOUT: 1003,
            MALFORMED_DATA_URI: 1004,
            REQUEST_FILTER_ERROR: 1006,
            RESPONSE_FILTER_ERROR: 1007,
            MALFORMED_TEST_URI: 1008,
            UNEXPECTED_TEST_REQUEST: 1009,
            ATTEMPTS_EXHAUSTED: 1010,
            SEGMENT_MISSING: 1011,
            INVALID_TEXT_HEADER: 2E3,
            INVALID_TEXT_CUE: 2001,
            UNABLE_TO_DETECT_ENCODING: 2003,
            BAD_ENCODING: 2004,
            INVALID_XML: 2005,
            INVALID_MP4_TTML: 2007,
            INVALID_MP4_VTT: 2008,
            UNABLE_TO_EXTRACT_CUE_START_TIME: 2009,
            INVALID_MP4_CEA: 2010,
            TEXT_COULD_NOT_GUESS_MIME_TYPE: 2011,
            CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS: 2012,
            TEXT_ONLY_WEBVTT_SRC_EQUALS: 2013,
            MISSING_TEXT_PLUGIN: 2014,
            CHAPTERS_TRACK_FAILED: 2015,
            UNSUPPORTED_EXTERNAL_THUMBNAILS_URI: 2017,
            BUFFER_READ_OUT_OF_BOUNDS: 3E3,
            JS_INTEGER_OVERFLOW: 3001,
            EBML_OVERFLOW: 3002,
            EBML_BAD_FLOATING_POINT_SIZE: 3003,
            MP4_SIDX_WRONG_BOX_TYPE: 3004,
            MP4_SIDX_INVALID_TIMESCALE: 3005,
            MP4_SIDX_TYPE_NOT_SUPPORTED: 3006,
            WEBM_CUES_ELEMENT_MISSING: 3007,
            WEBM_EBML_HEADER_ELEMENT_MISSING: 3008,
            WEBM_SEGMENT_ELEMENT_MISSING: 3009,
            WEBM_INFO_ELEMENT_MISSING: 3010,
            WEBM_DURATION_ELEMENT_MISSING: 3011,
            WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012,
            WEBM_CUE_TIME_ELEMENT_MISSING: 3013,
            MEDIA_SOURCE_OPERATION_FAILED: 3014,
            MEDIA_SOURCE_OPERATION_THREW: 3015,
            VIDEO_ERROR: 3016,
            QUOTA_EXCEEDED_ERROR: 3017,
            TRANSMUXING_FAILED: 3018,
            CONTENT_TRANSFORMATION_FAILED: 3019,
            MSS_MISSING_DATA_FOR_TRANSMUXING: 3020,
            MSS_TRANSMUXING_FAILED: 3022,
            TRANSMUXING_NO_VIDEO_DATA: 3023,
            UNABLE_TO_GUESS_MANIFEST_TYPE: 4E3,
            DASH_INVALID_XML: 4001,
            DASH_NO_SEGMENT_INFO: 4002,
            DASH_EMPTY_ADAPTATION_SET: 4003,
            DASH_EMPTY_PERIOD: 4004,
            DASH_WEBM_MISSING_INIT: 4005,
            DASH_UNSUPPORTED_CONTAINER: 4006,
            DASH_PSSH_BAD_ENCODING: 4007,
            DASH_NO_COMMON_KEY_SYSTEM: 4008,
            DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009,
            DASH_CONFLICTING_KEY_IDS: 4010,
            RESTRICTIONS_CANNOT_BE_MET: 4012,
            HLS_PLAYLIST_HEADER_MISSING: 4015,
            INVALID_HLS_TAG: 4016,
            HLS_INVALID_PLAYLIST_HIERARCHY: 4017,
            DASH_DUPLICATE_REPRESENTATION_ID: 4018,
            HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020,
            HLS_REQUIRED_ATTRIBUTE_MISSING: 4023,
            HLS_REQUIRED_TAG_MISSING: 4024,
            HLS_COULD_NOT_GUESS_CODECS: 4025,
            HLS_KEYFORMATS_NOT_SUPPORTED: 4026,
            DASH_UNSUPPORTED_XLINK_ACTUATE: 4027,
            DASH_XLINK_DEPTH_LIMIT: 4028,
            CONTENT_UNSUPPORTED_BY_BROWSER: 4032,
            CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM: 4033,
            NO_VARIANTS: 4036,
            PERIOD_FLATTENING_FAILED: 4037,
            INCONSISTENT_DRM_ACROSS_PERIODS: 4038,
            HLS_VARIABLE_NOT_FOUND: 4039,
            HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED: 4040,
            HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4041,
            NO_WEB_CRYPTO_API: 4042,
            CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM: 4045,
            MSS_INVALID_XML: 4046,
            MSS_LIVE_CONTENT_NOT_SUPPORTED: 4047,
            AES_128_INVALID_IV_LENGTH: 4048,
            AES_128_INVALID_KEY_LENGTH: 4049,
            DASH_CONFLICTING_AES_128: 4050,
            DASH_UNSUPPORTED_AES_128: 4051,
            DASH_INVALID_PATCH: 4052,
            STREAMING_ENGINE_STARTUP_INVALID_STATE: 5006,
            NO_RECOGNIZED_KEY_SYSTEMS: 6E3,
            REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001,
            FAILED_TO_CREATE_CDM: 6002,
            FAILED_TO_ATTACH_TO_VIDEO: 6003,
            INVALID_SERVER_CERTIFICATE: 6004,
            FAILED_TO_CREATE_SESSION: 6005,
            FAILED_TO_GENERATE_LICENSE_REQUEST: 6006,
            LICENSE_REQUEST_FAILED: 6007,
            LICENSE_RESPONSE_REJECTED: 6008,
            ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010,
            NO_LICENSE_SERVER_GIVEN: 6012,
            OFFLINE_SESSION_REMOVED: 6013,
            EXPIRED: 6014,
            SERVER_CERTIFICATE_REQUIRED: 6015,
            INIT_DATA_TRANSFORM_ERROR: 6016,
            SERVER_CERTIFICATE_REQUEST_FAILED: 6017,
            MIN_HDCP_VERSION_NOT_MATCH: 6018,
            ERROR_CHECKING_HDCP_VERSION: 6019,
            LOAD_INTERRUPTED: 7E3,
            OPERATION_ABORTED: 7001,
            NO_VIDEO_ELEMENT: 7002,
            OBJECT_DESTROYED: 7003,
            CONTENT_NOT_LOADED: 7004,
            SRC_EQUALS_PRELOAD_NOT_SUPPORTED: 7005,
            CAST_API_UNAVAILABLE: 8E3,
            NO_CAST_RECEIVERS: 8001,
            ALREADY_CASTING: 8002,
            UNEXPECTED_CAST_ERROR: 8003,
            CAST_CANCELED_BY_USER: 8004,
            CAST_CONNECTION_TIMED_OUT: 8005,
            CAST_RECEIVER_APP_UNAVAILABLE: 8006,
            STORAGE_NOT_SUPPORTED: 9E3,
            INDEXED_DB_ERROR: 9001,
            DEPRECATED_OPERATION_ABORTED: 9002,
            REQUESTED_ITEM_NOT_FOUND: 9003,
            MALFORMED_OFFLINE_URI: 9004,
            CANNOT_STORE_LIVE_OFFLINE: 9005,
            NO_INIT_DATA_FOR_OFFLINE: 9007,
            LOCAL_PLAYER_INSTANCE_REQUIRED: 9008,
            NEW_KEY_OPERATION_NOT_SUPPORTED: 9011,
            KEY_NOT_FOUND: 9012,
            MISSING_STORAGE_CELL: 9013,
            STORAGE_LIMIT_REACHED: 9014,
            DOWNLOAD_SIZE_CALLBACK_ERROR: 9015,
            MODIFY_OPERATION_NOT_SUPPORTED: 9016,
            INDEXED_DB_INIT_TIMED_OUT: 9017,
            CS_IMA_SDK_MISSING: 1E4,
            CS_AD_MANAGER_NOT_INITIALIZED: 10001,
            SS_IMA_SDK_MISSING: 10002,
            SS_AD_MANAGER_NOT_INITIALIZED: 10003,
            CURRENT_DAI_REQUEST_NOT_FINISHED: 10004,
            MT_AD_MANAGER_NOT_INITIALIZED: 10005
        };

        function Lc(a) {
            this.h = a;
            this.g = void 0
        }

        Lc.prototype.value = function () {
            void 0 == this.g && (this.g = this.h());
            return this.g
        };

        function Mc(a, b) {
            return a.length && b.length && a !== b ? 0 < Oc(a, b).length : !0
        }

        function Oc(a, b) {
            if (!a.length) return b;
            if (!b.length) return a;
            var c = [];
            a = t(a);
            for (var d = a.next(); !d.done; d = a.next()) {
                d = d.value;
                for (var e = t(b), f = e.next(); !f.done; f = e.next()) if (f = f.value, d.keySystem == f.keySystem) {
                    e = new Map;
                    for (var g = t((d.initData || []).concat(f.initData || [])), h = g.next(); !h.done; h = g.next()) h = h.value, e.set(h.keyId, h);
                    e = Array.from(e.values());
                    g = d.keyIds && f.keyIds ? new Set([].concat(x(d.keyIds), x(f.keyIds))) : d.keyIds || f.keyIds;
                    c.push({
                        keySystem: d.keySystem,
                        licenseServerUri: d.licenseServerUri ||
                            f.licenseServerUri,
                        distinctiveIdentifierRequired: d.distinctiveIdentifierRequired || f.distinctiveIdentifierRequired,
                        persistentStateRequired: d.persistentStateRequired || f.persistentStateRequired,
                        videoRobustness: d.videoRobustness || f.videoRobustness,
                        audioRobustness: d.audioRobustness || f.audioRobustness,
                        serverCertificate: d.serverCertificate || f.serverCertificate,
                        serverCertificateUri: d.serverCertificateUri || f.serverCertificateUri,
                        initData: e,
                        keyIds: g
                    });
                    break
                }
            }
            return c
        }

        function Pc(a) {
            return a ? !!a.match(/^com\.(microsoft|chromecast)\.playready/) : !1
        }

        var Qc = new Lc(function () {
            return Cb(new Uint8Array([0]))
        }), Rc = new Map;

        function Sc(a) {
            this.h = a;
            this.g = null
        }

        Sc.prototype.Y = function (a) {
            var b = this;
            this.stop();
            var c = !0, d = null;
            this.g = function () {
                window.clearTimeout(d);
                c = !1
            };
            d = window.setTimeout(function () {
                c && b.h()
            }, 1E3 * a);
            return this
        };
        Sc.prototype.stop = function () {
            this.g && (this.g(), this.g = null)
        };

        function Tc(a) {
            this.h = a;
            this.g = null
        }

        Tc.prototype.xc = function () {
            this.stop();
            this.h();
            return this
        };
        Tc.prototype.Y = function (a) {
            var b = this;
            this.stop();
            this.g = (new Sc(function () {
                b.h()
            })).Y(a);
            return this
        };
        Tc.prototype.Sa = function (a) {
            var b = this;
            this.stop();
            this.g = (new Sc(function () {
                b.g.Y(a);
                b.h()
            })).Y(a);
            return this
        };
        Tc.prototype.stop = function () {
            this.g && (this.g.stop(), this.g = null)
        };
        S("shaka.util.Timer", Tc);
        Tc.prototype.stop = Tc.prototype.stop;
        Tc.prototype.tickEvery = Tc.prototype.Sa;
        Tc.prototype.tickAfter = Tc.prototype.Y;
        Tc.prototype.tickNow = Tc.prototype.xc;

        function Uc() {
            var a = window.ManagedMediaSource || window.MediaSource;
            return a && a.isTypeSupported ? !0 : !1
        }

        function Vc(a) {
            return "" != Wc().canPlayType(a)
        }

        function Yc() {
            return navigator.userAgent.match(/Edge?\//) ? !0 : !1
        }

        function Zc() {
            return $c("Xbox One")
        }

        function ad() {
            return $c("Tizen")
        }

        function bd() {
            return $c("Tizen 3")
        }

        function cd() {
            return $c("Tizen 2")
        }

        function dd() {
            return $c("Web0S")
        }

        function ed() {
            return dd() && 38 === fd()
        }

        function gd() {
            return $c("CrKey")
        }

        function fd() {
            if (!$c("Chrome") || navigator.userAgent.match(/Edge\//)) return null;
            var a = navigator.userAgent.match(/Chrome\/(\d+)/);
            return a ? parseInt(a[1], 10) : null
        }

        function hd() {
            return !!navigator.vendor && navigator.vendor.includes("Apple") && !ad() && !$c("PC=EOS") && !$c("PC=APL") && !$c("VirginMedia") && !id() && !jd() && !$c("AFT") && !$c("WPE") && !$c("DT_STB_BCM")
        }

        function kd() {
            return $c("PlayStation 5")
        }

        function jd() {
            return $c("PlayStation 4")
        }

        function ld() {
            return $c("Hisense") || $c("VIDAA")
        }

        function id() {
            return $c("SOPOpenBrowser")
        }

        function md() {
            if (!hd()) return null;
            var a = navigator.userAgent.match(/Version\/(\d+)/);
            return a ? parseInt(a[1], 10) : (a = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/)) ? parseInt(a[1], 10) : null
        }

        function nd() {
            return navigator.userAgentData && navigator.userAgentData.platform ? "windows" == navigator.userAgentData.platform.toLowerCase() : navigator.platform ? navigator.platform.toLowerCase().includes("windows") : !1
        }

        function od() {
            return $c("Android")
        }

        function pd() {
            return ad() || dd() || Zc() || jd() || kd() || $c("AFT") || $c("PC=EOS") || $c("PC=APL") || $c("VirginMedia") || id() || $c("WPE") || gd() || ld() || $c("DT_STB_BCM") ? !0 : !1
        }

        function $c(a) {
            return (navigator.userAgent || "").includes(a)
        }

        function Wc() {
            if (qd) return qd;
            rd || (rd = new Tc(function () {
                qd = null
            }));
            (qd = document.getElementsByTagName("video")[0] || document.getElementsByTagName("audio")[0]) || (qd = document.createElement("video"));
            rd.Y(1);
            return qd
        }

        function sd(a) {
            return a ? a === window.shakaMediaKeysPolyfill : !!window.shakaMediaKeysPolyfill
        }

        function td() {
            var a, b, c, d, e, f, g, h, k, l, m, n, p, q;
            return O(function (u) {
                switch (u.g) {
                    case 1:
                        a = {width: Infinity, height: Infinity};
                        if (gd()) {
                            m = window.cast && cast.__platform__ && cast.__platform__.canDisplayType;
                            a.width = 1280;
                            a.height = 720;
                            sa(u, 15);
                            if (!(n = m)) {
                                u.u(17);
                                break
                            }
                            return G(u, cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'), 18)
                        }
                        if (ad()) {
                            a.width = 1920;
                            a.height = 1080;
                            try {
                                webapis.systeminfo && webapis.systeminfo.getMaxVideoResolution ? (b = webapis.systeminfo.getMaxVideoResolution(),
                                    a.width = b.width, a.height = b.height) : webapis.productinfo.is8KPanelSupported && webapis.productinfo.is8KPanelSupported() ? (a.width = 7680, a.height = 4320) : webapis.productinfo.isUdPanelSupported && webapis.productinfo.isUdPanelSupported() && (a.width = 3840, a.height = 2160)
                            } catch (w) {
                                $a("Tizen: Error detecting screen size, default screen size 1920x1080.")
                            }
                            u.u(3);
                            break
                        }
                        if (Zc()) {
                            a.width = 1920;
                            a.height = 1080;
                            try {
                                c = new Windows.Media.Protection.ProtectionCapabilities;
                                d = Windows.Media.Protection.ProtectionCapabilityResult;
                                e =
                                    null;
                                do e = c.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"', "com.microsoft.playready.recommendation"); while (e === d.maybe);
                                e === d.probably && (a.width = 3840, a.height = 2160)
                            } catch (w) {
                                $a("Xbox: Error detecting screen size, default screen size 1920x1080.")
                            }
                            u.u(3);
                            break
                        }
                        if (dd()) {
                            try {
                                f = JSON.parse(window.PalmSystem.deviceInfo), a.width = Math.max(1920, f.screenWidth), a.height =
                                    Math.max(1080, f.screenHeight)
                            } catch (w) {
                                $a("WebOS: Error detecting screen size, default screen size 1920x1080."), a.width = 1920, a.height = 1080
                            }
                            u.u(3);
                            break
                        }
                        if (ld()) {
                            window.Hisense_Get4KSupportState && window.Hisense_Get4KSupportState() ? (a.width = 3840, a.height = 2160) : (a.width = 1920, a.height = 1080);
                            u.u(3);
                            break
                        }
                        if (!jd() && !kd()) {
                            u.u(3);
                            break
                        }
                        g = !1;
                        sa(u, 9);
                        return G(u, window.msdk.device.getDisplayInfo(), 11);
                    case 11:
                        h = u.h;
                        g = "4K" === h.resolution;
                        va(u, 10);
                        break;
                    case 9:
                        return wa(u), sa(u, 12), G(u, window.msdk.device.getDisplayInfoImmediate(),
                            14);
                    case 14:
                        k = u.h;
                        g = "4K" === k.resolution;
                        va(u, 10);
                        break;
                    case 12:
                        l = wa(u), $a("PlayStation: Failed to get the display info:", l);
                    case 10:
                        g ? (a.width = 3840, a.height = 2160) : (a.width = 1920, a.height = 1080);
                        u.u(3);
                        break;
                    case 18:
                        n = u.h;
                    case 17:
                        if (n) {
                            a.width = 3840;
                            a.height = 2160;
                            u.u(19);
                            break
                        }
                        if (!(p = m)) {
                            u.u(20);
                            break
                        }
                        return G(u, cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'), 21);
                    case 21:
                        p = u.h;
                    case 20:
                        p && (a.width = 1920, a.height = 1080);
                    case 19:
                        va(u, 3);
                        break;
                    case 15:
                        q = wa(u), Za("Failed to check canDisplayType:",
                            q);
                    case 3:
                        return u.return(a)
                }
            })
        }

        var rd = null, qd = null;

        function ud() {
        }

        function vd(a) {
            if (!a) return "";
            a = Ab(a);
            239 == a[0] && 187 == a[1] && 191 == a[2] && (a = a.subarray(3));
            if (window.TextDecoder && !jd()) return a = (new TextDecoder).decode(a), a.includes("\ufffd") && Za('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'), a;
            for (var b = "", c = 0; c < a.length; ++c) {
                var d = 65533;
                0 == (a[c] & 128) ? d = a[c] : a.length >= c + 2 && 192 == (a[c] & 224) && 128 == (a[c + 1] & 192) ? (d = (a[c] & 31) << 6 | a[c + 1] & 63, c += 1) : a.length >= c + 3 && 224 == (a[c] & 240) && 128 == (a[c + 1] & 192) && 128 ==
                (a[c + 2] & 192) ? (d = (a[c] & 15) << 12 | (a[c + 1] & 63) << 6 | a[c + 2] & 63, c += 2) : a.length >= c + 4 && 240 == (a[c] & 241) && 128 == (a[c + 1] & 192) && 128 == (a[c + 2] & 192) && 128 == (a[c + 3] & 192) && (d = (a[c] & 7) << 18 | (a[c + 1] & 63) << 12 | (a[c + 2] & 63) << 6 | a[c + 3] & 63, c += 3);
                if (65535 >= d) b += String.fromCharCode(d); else {
                    d -= 65536;
                    var e = d & 1023;
                    b += String.fromCharCode(55296 + (d >> 10));
                    b += String.fromCharCode(56320 + e)
                }
            }
            return b
        }

        function xd(a, b, c) {
            if (!a) return "";
            if (!c && 0 != a.byteLength % 2) throw new T(2, 2, 2004);
            c = Math.floor(a.byteLength / 2);
            var d = new Uint16Array(c);
            a = Fb(a);
            for (var e = 0; e < c; e++) d[e] = a.getUint16(2 * e, b);
            return yd(d)
        }

        function zd(a) {
            function b(d) {
                return c.byteLength <= d || 32 <= c[d] && 126 >= c[d]
            }

            if (!a) return "";
            var c = Ab(a);
            if (239 == c[0] && 187 == c[1] && 191 == c[2]) return vd(c);
            if (254 == c[0] && 255 == c[1]) return xd(c.subarray(2), !1);
            if (255 == c[0] && 254 == c[1]) return xd(c.subarray(2), !0);
            if (0 == c[0] && 0 == c[2]) return xd(a, !1);
            if (0 == c[1] && 0 == c[3]) return xd(a, !0);
            if (b(0) && b(1) && b(2) && b(3)) return vd(a);
            throw new T(2, 2, 2003);
        }

        function Ad(a) {
            if (window.TextEncoder && !jd()) {
                var b = new TextEncoder;
                return Cb(b.encode(a))
            }
            a = encodeURIComponent(a);
            a = unescape(a);
            b = new Uint8Array(a.length);
            for (var c = 0; c < a.length; c++) b[c] = a[c].charCodeAt(0);
            return Cb(b)
        }

        function Bd(a, b) {
            for (var c = new ArrayBuffer(2 * a.length), d = new DataView(c), e = 0; e < a.length; ++e) d.setUint16(2 * e, a.charCodeAt(e), b);
            return c
        }

        function yd(a) {
            return Cd.value()(a)
        }

        function Dd(a) {
            var b = {
                "&amp;": "&",
                "&lt;": "<",
                "&gt;": ">",
                "&quot;": '"',
                "&apos;": "'",
                "&nbsp;": "\u00a0",
                "&lrm;": "\u200e",
                "&rlm;": "\u200f"
            }, c = /&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g, d = RegExp(c.source);
            return a && d.test(a) ? a.replace(c, function (e) {
                return "#" == e[1] ? (e = "x" == e[2] || "X" == e[2] ? parseInt(e.substring(3), 16) : parseInt(e.substring(2), 10), 0 <= e && 1114111 >= e ? String.fromCodePoint(e) : "") : b[e] || "'"
            }) : a || ""
        }

        S("shaka.util.StringUtils", ud);
        ud.resetFromCharCode = function () {
            Cd.g = void 0
        };
        ud.toUTF16 = Bd;
        ud.toUTF8 = Ad;
        ud.fromBytesAutoDetect = zd;
        ud.fromUTF16 = xd;
        ud.fromUTF8 = vd;
        var Cd = new Lc(function () {
            function a(c) {
                try {
                    var d = new Uint8Array(c);
                    return 0 < String.fromCharCode.apply(null, d).length
                } catch (e) {
                    return !1
                }
            }

            for (var b = {Tb: 65536}; 0 < b.Tb; b = {Tb: b.Tb}, b.Tb /= 2) if (a(b.Tb)) return function (c) {
                return function (d) {
                    for (var e = "", f = 0; f < d.length; f += c.Tb) e += String.fromCharCode.apply(null, d.subarray(f, f + c.Tb));
                    return e
                }
            }(b);
            return null
        });

        function Ed() {
        }

        function Fd(a) {
            a = yd(Ab(a));
            return btoa(a)
        }

        function Gd(a, b) {
            b = void 0 == b ? !0 : b;
            a = Fd(a).replace(/\+/g, "-").replace(/\//g, "_");
            return b ? a : a.replace(/[=]*$/, "")
        }

        function Hd(a) {
            a = window.atob(a.replace(/-/g, "+").replace(/_/g, "/"));
            for (var b = new Uint8Array(a.length), c = 0; c < a.length; ++c) b[c] = a.charCodeAt(c);
            return b
        }

        function Id(a) {
            for (var b = a.length / 2, c = new Uint8Array(b), d = 0; d < b; d++) c[d] = window.parseInt(a.substr(2 * d, 2), 16);
            return c
        }

        function Jd(a) {
            var b = Ab(a);
            a = "";
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, c = c.toString(16), 1 == c.length && (c = "0" + c), a += c;
            return a
        }

        function Md() {
            for (var a = Fa.apply(0, arguments), b = 0, c = 0; c < a.length; ++c) b += a[c].byteLength;
            b = new Uint8Array(b);
            for (var d = c = 0; d < a.length; ++d) {
                var e = a[d];
                e instanceof Uint8Array ? b.set(e, c) : b.set(Ab(e), c);
                c += e.byteLength
            }
            return b
        }

        S("shaka.util.Uint8ArrayUtils", Ed);
        Ed.concat = Md;
        Ed.toHex = Jd;
        Ed.fromHex = Id;
        Ed.fromBase64 = Hd;
        Ed.toBase64 = Gd;
        Ed.toStandardBase64 = Fd;

        function Nd(a, b) {
            if (0 == b.length) return a;
            if (1 == a.length && 1 == b.length) {
                var c = new uc(a[0]);
                b = new uc(b[0]);
                return [c.resolve(b).toString()]
            }
            b = b.map(function (g) {
                return new uc(g)
            });
            c = [];
            a = t(a);
            for (var d = a.next(); !d.done; d = a.next()) {
                d = new uc(d.value);
                for (var e = t(b), f = e.next(); !f.done; f = e.next()) c.push(d.resolve(f.value).toString())
            }
            return c
        }

        function Qd(a, b, c, d) {
            a = {
                keySystem: a,
                encryptionScheme: b,
                licenseServerUri: "",
                distinctiveIdentifierRequired: !1,
                persistentStateRequired: !1,
                audioRobustness: "",
                videoRobustness: "",
                serverCertificate: null,
                serverCertificateUri: "",
                sessionType: "",
                initData: c || [],
                keyIds: new Set
            };
            d && (a.keySystemUris = new Set([d]));
            return a
        }

        function Rd(a, b) {
            b = void 0 === b ? "cenc" : b;
            var c = [], d = [], e = [];
            a.forEach(function (g, h) {
                var k = h;
                22 != k.length && (k = Gd(Id(h), !1));
                var l = g;
                22 != l.length && (l = Gd(Id(g), !1));
                g = {kty: "oct", kid: k, k: l};
                c.push(g);
                d.push(g.kid);
                e.push(h)
            });
            a = JSON.stringify({keys: c});
            var f = JSON.stringify({kids: d});
            f = [{initData: Ab(Ad(f)), initDataType: "keyids"}];
            return {
                keySystem: "org.w3.clearkey",
                encryptionScheme: b,
                licenseServerUri: "data:application/json;base64," + window.btoa(a),
                distinctiveIdentifierRequired: !1,
                persistentStateRequired: !1,
                audioRobustness: "",
                videoRobustness: "",
                serverCertificate: null,
                serverCertificateUri: "",
                sessionType: "",
                initData: f,
                keyIds: new Set(e)
            }
        }

        function Sd(a, b) {
            if (1 == b.length) return b[0];
            a = Td(a, b);
            if (null != a) return a;
            throw new T(2, 4, 4025, b);
        }

        function Td(a, b) {
            for (var c = t(Ud[a]), d = c.next(); !d.done; d = c.next()) {
                d = d.value;
                for (var e = t(b), f = e.next(); !f.done; f = e.next()) if (f = f.value, d.test(f.trim())) return f.trim()
            }
            return a == Vd ? "" : null
        }

        function Wd(a, b) {
            var c = [];
            a = t(Ud[a]);
            for (var d = a.next(); !d.done; d = a.next()) {
                d = d.value;
                for (var e = t(b), f = e.next(); !f.done; f = e.next()) f = f.value, d.test(f.trim()) && c.push(f.trim())
            }
            return c
        }

        var Vd = "text", Xd = {ga: "video", X: "audio", ta: Vd, Ze: "image", nj: "application"}, Yd = 1 / 15, Ud = {
            audio: [/^vorbis$/, /^Opus$/, /^opus$/, /^fLaC$/, /^flac$/, /^mp4a/, /^[ae]c-3$/, /^ac-4/, /^dts[cex]$/, /^iamf/, /^mhm[12]/],
            video: [/^avc/, /^hev/, /^hvc/, /^vvc/, /^vvi/, /^vp0?[89]/, /^av01/, /^dvh/, /^dva/, /^dav/],
            text: [/^vtt$/, /^wvtt/, /^stpp/]
        };

        function Zd() {
        }

        function $d(a, b) {
            var c = a;
            b && !ae.includes(a) && (c += '; codecs="' + b + '"');
            return c
        }

        function be(a, b) {
            b && (a += '; codecs="' + b + '"');
            return a
        }

        function ce(a, b, c) {
            var d = $d(a, b);
            b = be(a, b);
            oc(b) ? (a = oc(b)) ? (a = a(), c = a.convertCodecs(c, b), a.destroy()) : c = b : c = "video/mp2t" != a && "audio" == c ? d.replace("video", "audio") : d;
            return c
        }

        function de(a, b, c) {
            var d = [b];
            ee.forEach(function (e, f) {
                var g = a[f];
                "codecs" == f ? ae.includes(a.mimeType) || d.push('codecs="' + c + '"') : g && d.push(e + '="' + g + '"')
            });
            "PQ" == a.hdr && d.push('eotf="smpte2084"');
            return d.join(";")
        }

        function fe(a) {
            return a.split(";")[0].split("/")[1]
        }

        function ge(a) {
            var b = he(a);
            a = b[0];
            b = b[1].toLowerCase();
            switch (!0) {
                case "mp4a" === a && "69" === b:
                case "mp4a" === a && "6b" === b:
                case "mp4a" === a && "40.34" === b:
                    return "mp3";
                case "mp4a" === a && "66" === b:
                case "mp4a" === a && "67" === b:
                case "mp4a" === a && "68" === b:
                case "mp4a" === a && "40.2" === b:
                case "mp4a" === a && "40.02" === b:
                case "mp4a" === a && "40.5" === b:
                case "mp4a" === a && "40.05" === b:
                case "mp4a" === a && "40.29" === b:
                case "mp4a" === a && "40.42" === b:
                    return "aac";
                case "mp4a" === a && "a5" === b:
                    return "ac-3";
                case "mp4a" === a && "a6" === b:
                    return "ec-3";
                case "mp4a" ===
                a && "b2" === b:
                    return "dtsx";
                case "mp4a" === a && "a9" === b:
                    return "dtsc";
                case "avc1" === a:
                case "avc3" === a:
                    return "avc";
                case "hvc1" === a:
                case "hev1" === a:
                    return "hevc";
                case "dvh1" === a:
                case "dvhe" === a:
                    return "dovi-hevc";
                case "dvav" === a:
                case "dva1" === a:
                    return "dovi-avc";
                case "dav1" === a:
                    return "dovi-av1"
            }
            return a
        }

        function ie(a) {
            var b = [];
            a = t(a.split(","));
            for (var c = a.next(); !c.done; c = a.next()) c = he(c.value), b.push(c[0]);
            return b.sort().join(",")
        }

        function je(a) {
            return a.split(";")[0]
        }

        function oe(a) {
            a = a.split(/ *; */);
            a.shift();
            return (a = a.find(function (b) {
                return b.startsWith("codecs=")
            })) ? a.split("=")[1].replace(/^"|"$/g, "") : ""
        }

        function pe(a) {
            return "application/x-mpegurl" === a || "application/vnd.apple.mpegurl" === a
        }

        function he(a) {
            a = a.split(".");
            var b = a[0];
            a.shift();
            return [b, a.join(".")]
        }

        S("shaka.util.MimeUtils", Zd);
        Zd.getFullTypeWithAllCodecs = be;
        Zd.getFullType = $d;
        var ee = (new Map).set("codecs", "codecs").set("frameRate", "framerate").set("bandwidth", "bitrate").set("width", "width").set("height", "height").set("channelsCount", "channels"),
            ae = ["audio/aac", "audio/ac3", "audio/ec3", "audio/mpeg"];

        function re(a) {
            this.i = null;
            this.j = a;
            this.B = !1;
            this.l = this.s = 0;
            this.m = Infinity;
            this.h = this.g = null;
            this.C = "";
            this.A = function () {
            };
            this.o = new Map
        }

        function se(a) {
            return te[a] ? !0 : "application/cea-608" == a || "application/cea-708" == a ? !!Jb : !1
        }

        re.prototype.destroy = function () {
            this.j = this.i = null;
            this.o.clear();
            return Promise.resolve()
        };

        function ue(a, b, c, d, e) {
            var f, g, h, k, l, m, n;
            return O(function (p) {
                if (1 == p.g) return G(p, Promise.resolve(), 2);
                if (!a.i || !a.j) return p.return();
                if (null == c || null == d) return a.i.parseInit(Ab(b)), p.return();
                f = a.B ? c : a.s;
                g = {periodStart: a.s, segmentStart: c, segmentEnd: d, vttOffset: f};
                h = a.i.parseMedia(Ab(b), g, e);
                k = t(h);
                for (l = k.next(); !l.done; l = k.next()) m = l.value, a.A(m, e || null, g);
                n = h.filter(function (q) {
                    return q.startTime >= a.l && q.startTime < a.m
                });
                a.j.append(n);
                null == a.g && (a.g = Math.max(c, a.l));
                a.h = Math.min(d, a.m);
                H(p)
            })
        }

        re.prototype.remove = function (a, b) {
            var c = this;
            return O(function (d) {
                if (1 == d.g) return G(d, Promise.resolve(), 2);
                !c.j || !c.j.remove(a, b) || null == c.g || b <= c.g || a >= c.h || (a <= c.g && b >= c.h ? c.g = c.h = null : a <= c.g && b < c.h ? c.g = b : a > c.g && b >= c.h && (c.h = a));
                H(d)
            })
        };

        function ve(a, b, c) {
            a.l = b;
            a.m = c
        }

        function we(a, b, c) {
            a.C = b;
            if (b = a.o.get(b)) for (var d = t(b.keys()), e = d.next(); !e.done; e = d.next()) (e = b.get(e.value).filter(function (f) {
                return f.endTime <= c
            })) && a.j.append(e)
        }

        function xe(a, b, c) {
            b.startTime += c;
            b.endTime += c;
            b = t(b.nestedCues);
            for (var d = b.next(); !d.done; d = b.next()) xe(a, d.value, c)
        }

        function ye(a, b, c, d, e) {
            var f = c + " " + d, g = new Map;
            b = t(b);
            for (var h = b.next(); !h.done; h = b.next()) {
                var k = h.value;
                h = k.stream;
                k = k.cue;
                g.has(h) || g.set(h, new Map);
                g.get(h).has(f) || g.get(h).set(f, []);
                xe(a, k, e);
                k.startTime >= a.l && k.startTime < a.m && (g.get(h).get(f).push(k), h == a.C && a.j.append([k]))
            }
            e = t(g.keys());
            for (f = e.next(); !f.done; f = e.next()) for (f = f.value, a.o.has(f) || a.o.set(f, new Map), b = t(g.get(f).keys()), h = b.next(); !h.done; h = b.next()) h = h.value, k = g.get(f).get(h), a.o.get(f).set(h, k);
            a.g = null == a.g ? Math.max(c,
                a.l) : Math.min(a.g, Math.max(c, a.l));
            a.h = Math.max(a.h, Math.min(d, a.m))
        }

        S("shaka.text.TextEngine", re);
        re.prototype.destroy = re.prototype.destroy;
        re.findParser = function (a) {
            return te[a]
        };
        re.unregisterParser = function (a) {
            delete te[a]
        };
        re.registerParser = function (a, b) {
            te[a] = b
        };
        var te = {};

        function ze(a, b) {
            return a.concat(b)
        }

        function Ae() {
        }

        function Be(a) {
            return null != a
        };

        function Ce() {
        }

        function De(a, b) {
            a = Ee(a);
            b = Ee(b);
            return a.split("-")[0] == b.split("-")[0]
        }

        function Fe(a, b) {
            a = Ee(a);
            b = Ee(b);
            a = a.split("-");
            b = b.split("-");
            return a[0] == b[0] && 1 == a.length && 2 == b.length
        }

        function Ge(a, b) {
            a = Ee(a);
            b = Ee(b);
            a = a.split("-");
            b = b.split("-");
            return 2 == a.length && 2 == b.length && a[0] == b[0]
        }

        function Ee(a) {
            a = t(a.split("-x-"));
            var b = a.next().value;
            b = void 0 === b ? "" : b;
            a = a.next().value;
            a = void 0 === a ? "" : a;
            var c = t(b.split("-"));
            b = c.next().value;
            b = void 0 === b ? "" : b;
            c = c.next().value;
            c = void 0 === c ? "" : c;
            a = a ? "x-" + a : "";
            b = b.toLowerCase();
            b = He.get(b) || b;
            c = c.toUpperCase();
            return (c ? b + "-" + c : b) + (a ? "-" + a : "")
        }

        function Ie(a, b) {
            a = Ee(a);
            b = Ee(b);
            return b == a ? 4 : Fe(b, a) ? 3 : Ge(b, a) ? 2 : Fe(a, b) ? 1 : 0
        }

        function Je(a) {
            var b = a.indexOf("-");
            a = 0 <= b ? a.substring(0, b) : a;
            a = a.toLowerCase();
            return a = He.get(a) || a
        }

        function Ke(a) {
            return a.language ? Ee(a.language) : a.audio && a.audio.language ? Ee(a.audio.language) : a.video && a.video.language ? Ee(a.video.language) : "und"
        }

        function Le(a, b) {
            a = Ee(a);
            var c = new Set, d = t(b);
            for (b = d.next(); !b.done; b = d.next()) c.add(Ee(b.value));
            d = t(c);
            for (b = d.next(); !b.done; b = d.next()) if (b = b.value, b == a) return b;
            d = t(c);
            for (b = d.next(); !b.done; b = d.next()) if (b = b.value, Fe(b, a)) return b;
            d = t(c);
            for (b = d.next(); !b.done; b = d.next()) if (b = b.value, Ge(b, a)) return b;
            c = t(c);
            for (b = c.next(); !b.done; b = c.next()) if (b = b.value, Fe(a, b)) return b;
            return null
        }

        S("shaka.util.LanguageUtils", Ce);
        Ce.findClosestLocale = Le;
        Ce.getLocaleForVariant = Ke;
        Ce.getLocaleForText = function (a) {
            return Ee(a.language || "und")
        };
        Ce.getBase = Je;
        Ce.relatedness = Ie;
        Ce.areSiblings = function (a, b) {
            var c = Je(a), d = Je(b);
            return a != c && b != d && c == d
        };
        Ce.normalize = Ee;
        Ce.isSiblingOf = Ge;
        Ce.isParentOf = Fe;
        Ce.areLanguageCompatible = De;
        Ce.areLocaleCompatible = function (a, b) {
            a = Ee(a);
            b = Ee(b);
            return a == b
        };
        var He = new Map([["aar", "aa"], ["abk", "ab"], ["afr", "af"], ["aka", "ak"], ["alb", "sq"], ["amh", "am"], ["ara", "ar"], ["arg", "an"], ["arm", "hy"], ["asm", "as"], ["ava", "av"], ["ave", "ae"], ["aym", "ay"], ["aze", "az"], ["bak", "ba"], ["bam", "bm"], ["baq", "eu"], ["bel", "be"], ["ben", "bn"], ["bih", "bh"], ["bis", "bi"], ["bod", "bo"], ["bos", "bs"], ["bre", "br"], ["bul", "bg"], ["bur", "my"], ["cat", "ca"], ["ces", "cs"], ["cha", "ch"], ["che", "ce"], ["chi", "zh"], ["chu", "cu"], ["chv", "cv"], ["cor", "kw"], ["cos", "co"], ["cre", "cr"], ["cym", "cy"], ["cze",
            "cs"], ["dan", "da"], ["deu", "de"], ["div", "dv"], ["dut", "nl"], ["dzo", "dz"], ["ell", "el"], ["eng", "en"], ["epo", "eo"], ["est", "et"], ["eus", "eu"], ["ewe", "ee"], ["fao", "fo"], ["fas", "fa"], ["fij", "fj"], ["fin", "fi"], ["fra", "fr"], ["fre", "fr"], ["fry", "fy"], ["ful", "ff"], ["geo", "ka"], ["ger", "de"], ["gla", "gd"], ["gle", "ga"], ["glg", "gl"], ["glv", "gv"], ["gre", "el"], ["grn", "gn"], ["guj", "gu"], ["hat", "ht"], ["hau", "ha"], ["heb", "he"], ["her", "hz"], ["hin", "hi"], ["hmo", "ho"], ["hrv", "hr"], ["hun", "hu"], ["hye", "hy"], ["ibo", "ig"], ["ice",
            "is"], ["ido", "io"], ["iii", "ii"], ["iku", "iu"], ["ile", "ie"], ["ina", "ia"], ["ind", "id"], ["ipk", "ik"], ["isl", "is"], ["ita", "it"], ["jav", "jv"], ["jpn", "ja"], ["kal", "kl"], ["kan", "kn"], ["kas", "ks"], ["kat", "ka"], ["kau", "kr"], ["kaz", "kk"], ["khm", "km"], ["kik", "ki"], ["kin", "rw"], ["kir", "ky"], ["kom", "kv"], ["kon", "kg"], ["kor", "ko"], ["kua", "kj"], ["kur", "ku"], ["lao", "lo"], ["lat", "la"], ["lav", "lv"], ["lim", "li"], ["lin", "ln"], ["lit", "lt"], ["ltz", "lb"], ["lub", "lu"], ["lug", "lg"], ["mac", "mk"], ["mah", "mh"], ["mal", "ml"], ["mao",
            "mi"], ["mar", "mr"], ["may", "ms"], ["mkd", "mk"], ["mlg", "mg"], ["mlt", "mt"], ["mon", "mn"], ["mri", "mi"], ["msa", "ms"], ["mya", "my"], ["nau", "na"], ["nav", "nv"], ["nbl", "nr"], ["nde", "nd"], ["ndo", "ng"], ["nep", "ne"], ["nld", "nl"], ["nno", "nn"], ["nob", "nb"], ["nor", "no"], ["nya", "ny"], ["oci", "oc"], ["oji", "oj"], ["ori", "or"], ["orm", "om"], ["oss", "os"], ["pan", "pa"], ["per", "fa"], ["pli", "pi"], ["pol", "pl"], ["por", "pt"], ["pus", "ps"], ["que", "qu"], ["roh", "rm"], ["ron", "ro"], ["rum", "ro"], ["run", "rn"], ["rus", "ru"], ["sag", "sg"], ["san",
            "sa"], ["sin", "si"], ["slk", "sk"], ["slo", "sk"], ["slv", "sl"], ["sme", "se"], ["smo", "sm"], ["sna", "sn"], ["snd", "sd"], ["som", "so"], ["sot", "st"], ["spa", "es"], ["sqi", "sq"], ["srd", "sc"], ["srp", "sr"], ["ssw", "ss"], ["sun", "su"], ["swa", "sw"], ["swe", "sv"], ["tah", "ty"], ["tam", "ta"], ["tat", "tt"], ["tel", "te"], ["tgk", "tg"], ["tgl", "tl"], ["tha", "th"], ["tib", "bo"], ["tir", "ti"], ["ton", "to"], ["tsn", "tn"], ["tso", "ts"], ["tuk", "tk"], ["tur", "tr"], ["twi", "tw"], ["uig", "ug"], ["ukr", "uk"], ["urd", "ur"], ["uzb", "uz"], ["ven", "ve"], ["vie",
            "vi"], ["vol", "vo"], ["wel", "cy"], ["wln", "wa"], ["wol", "wo"], ["xho", "xh"], ["yid", "yi"], ["yor", "yo"], ["zha", "za"], ["zho", "zh"], ["zul", "zu"]]);

        function Me(a) {
            function b(d) {
                switch (typeof d) {
                    case "undefined":
                    case "boolean":
                    case "number":
                    case "string":
                    case "symbol":
                    case "function":
                        return d;
                    default:
                        if (!d || d.buffer instanceof ArrayBuffer) return d;
                        if (c.has(d)) return null;
                        var e = d.constructor == Array;
                        if (d.constructor != Object && !e) return null;
                        c.add(d);
                        var f = e ? [] : {}, g;
                        for (g in d) f[g] = b(d[g]);
                        e && (f.length = d.length);
                        return f
                }
            }

            var c = new WeakSet;
            return b(a)
        }

        function Ne(a) {
            var b = {}, c;
            for (c in a) b[c] = a[c];
            return b
        };

        function Oe() {
        }

        function Pe(a, b, c, d) {
            var e = a.variants;
            if (b.length || c.length) e = Qe(e, b, c);
            if (d.length) {
                b = new fb;
                c = t(e);
                for (e = c.next(); !e.done; e = c.next()) e = e.value, b.push(String(e.video.width || 0), e);
                var f = [];
                b.forEach(function (u, w) {
                    u = 0;
                    var v = [], A = {};
                    w = t(w);
                    for (var y = w.next(); !y.done; A = {ld: A.ld}, y = w.next()) A.ld = y.value, y = d.filter(function (D) {
                        return function (z) {
                            return D.ld.decodingInfos[0][z]
                        }
                    }(A)).length, y > u ? (u = y, v = [A.ld]) : y == u && v.push(A.ld);
                    f.push.apply(f, x(v))
                });
                e = f
            }
            c = new Set;
            b = new Set;
            var g = t(e);
            for (e = g.next(); !e.done; e =
                g.next()) e = e.value, e.audio && c.add(e.audio), e.video && b.add(e.video);
            c = Array.from(c).sort(function (u, w) {
                return u.bandwidth - w.bandwidth
            });
            var h = [];
            e = new Map;
            c = t(c);
            for (g = c.next(); !g.done; g = c.next()) {
                g = g.value;
                var k = g.language + (g.channelsCount || 0) + (g.audioSamplingRate || 0) + g.roles.join(",") + g.label + g.groupId + g.fastSwitching,
                    l = e.get(k) || [];
                if (l.length) {
                    var m = l[l.length - 1], n = ge(m.codecs), p = ge(g.codecs);
                    n != p || g.bandwidth && m.bandwidth && !(g.bandwidth > m.bandwidth) || (l.push(g), h.push(g.id))
                } else l.push(g), h.push(g.id);
                e.set(k, l)
            }
            c = Array.from(b).sort(function (u, w) {
                return u.bandwidth && w.bandwidth ? u.bandwidth - w.bandwidth : u.width - w.width
            });
            b = pb();
            var q = [];
            e = new Map;
            c = t(c);
            for (g = c.next(); !g.done; g = c.next()) {
                g = g.value;
                k = Math.round(g.frameRate || 0) + (g.hdr || "") + g.fastSwitching;
                l = e.get(k) || [];
                if (l.length) {
                    m = l[l.length - 1];
                    if (!b && (n = ge(m.codecs), p = ge(g.codecs), n !== p)) continue;
                    g.width > m.width || g.height > m.height ? (l.push(g), q.push(g.id)) : g.width == m.width && g.height == m.height && (n = ge(m.codecs), p = ge(g.codecs), n != p || g.bandwidth &&
                    m.bandwidth && !(g.bandwidth > m.bandwidth) || (l.push(g), q.push(g.id)))
                } else l.push(g), q.push(g.id);
                e.set(k, l)
            }
            a.variants = a.variants.filter(function (u) {
                var w = u.audio;
                u = u.video;
                return w && !h.includes(w.id) || u && !q.includes(u.id) ? !1 : !0
            })
        }

        function Qe(a, b, c) {
            var d = {};
            b = t(b);
            for (var e = b.next(); !e.done; d = {Xe: d.Xe}, e = b.next()) if (d.Xe = e.value, e = a.filter(function (f) {
                return function (g) {
                    return g.video && g.video.codecs.startsWith(f.Xe)
                }
            }(d)), e.length) {
                a = e;
                break
            }
            d = {};
            c = t(c);
            for (b = c.next(); !b.done; d = {Pe: d.Pe}, b = c.next()) if (d.Pe = b.value, b = a.filter(function (f) {
                return function (g) {
                    return g.audio && g.audio.codecs.startsWith(f.Pe)
                }
            }(d)), b.length) {
                a = b;
                break
            }
            return a
        }

        function Re(a, b, c) {
            a.variants = a.variants.filter(function (d) {
                return Se(d, b, c)
            })
        }

        function Se(a, b, c) {
            function d(h, k, l) {
                return h >= k && h <= l
            }

            var e = a.video;
            if (e && e.width && e.height) {
                var f = e.width, g = e.height;
                g > f && (g = t([g, f]), f = g.next().value, g = g.next().value);
                if (!d(f, b.minWidth, Math.min(b.maxWidth, c.width)) || !d(g, b.minHeight, Math.min(b.maxHeight, c.height)) || !d(e.width * e.height, b.minPixels, b.maxPixels)) return !1
            }
            return a && a.video && a.video.frameRate && !d(a.video.frameRate, b.minFrameRate, b.maxFrameRate) || a && a.audio && a.audio.channelsCount && !d(a.audio.channelsCount, b.minChannelsCount, b.maxChannelsCount) ||
            !d(a.bandwidth, b.minBandwidth, b.maxBandwidth) ? !1 : !0
        }

        function Te(a, b, c) {
            var d = !1;
            a = t(a);
            for (var e = a.next(); !e.done; e = a.next()) {
                e = e.value;
                var f = e.allowedByApplication;
                e.allowedByApplication = Se(e, b, c);
                f != e.allowedByApplication && (d = !0)
            }
            return d
        }

        function Ue(a, b, c) {
            c = void 0 === c ? [] : c;
            return O(function (d) {
                if (1 == d.g) return G(d, Ve(a, b, 0 < b.offlineSessionIds.length, c), 2);
                We(b);
                return G(d, Xe(b), 0)
            })
        }

        function Ve(a, b, c, d) {
            var e, f;
            return O(function (g) {
                if (1 == g.g) return G(g, Ye(b.variants, c, !1, d), 2);
                e = null;
                a && (f = a.g) && (e = f.keySystem);
                b.variants = b.variants.filter(function (h) {
                    var k = Ze(h, e);
                    if (!k) {
                        var l = [];
                        h.audio && l.push($e(h.audio));
                        h.video && l.push($e(h.video))
                    }
                    return k
                });
                H(g)
            })
        }

        function Ze(a, b) {
            var c = Zc(), d = $c("Firefox") && od(), e = a.video, f = e && e.width || 0, g = e && e.height || 0;
            if (c && e && (1920 < f || 1080 < g) && (e.codecs.includes("avc1.") || e.codecs.includes("avc3."))) return !1;
            if (e) {
                c = af(e.codecs);
                if (e.codecs.includes(",")) {
                    f = e.codecs.split(",");
                    c = Sd("video", f);
                    c = af(c);
                    f = Sd("audio", f);
                    f = bf(f, e.mimeType);
                    g = ce(e.mimeType, f, "audio");
                    if (!nb(g)) return !1;
                    c = [c, f].join()
                }
                f = ce(e.mimeType, c, "video");
                if (!nb(f)) return !1;
                e.codecs = c
            }
            e = a.audio;
            if (d && e && e.encrypted && e.codecs.toLowerCase().includes("opus")) return !1;
            if (e) {
                d = bf(e.codecs, e.mimeType);
                c = ce(e.mimeType, d, "audio");
                if (!nb(c)) return !1;
                e.codecs = d
            }
            return a.decodingInfos.some(function (h) {
                return !h.supported || b && (h = h.keySystemAccess) && h.keySystem != b ? !1 : !0
            })
        }

        function cf(a) {
            var b = [];
            for (c in a) b.push(c);
            b.sort();
            var c = [];
            b = t(b);
            for (var d = b.next(); !d.done; d = b.next()) {
                var e = d.value;
                d = JSON.stringify(e);
                e = a[e];
                e instanceof Object ? (e = cf(e), c.push(d + ":" + e)) : (e = JSON.stringify(e), c.push(d + ":" + e))
            }
            return "{" + c.join(",") + "}"
        }

        function df(a, b) {
            var c, d, e, f, g, h, k;
            return O(function (l) {
                if (1 == l.g) {
                    c = function (m, n) {
                        if (m) {
                            var p = Ne(m);
                            p.supported = m.supported && n.supported;
                            p.powerEfficient = m.powerEfficient && n.powerEfficient;
                            p.smooth = m.smooth && n.smooth;
                            n.keySystemAccess && !p.keySystemAccess && (p.keySystemAccess = n.keySystemAccess);
                            return p
                        }
                        return n
                    };
                    d = null;
                    e = [];
                    f = {};
                    g = t(b);
                    for (h = g.next(); !h.done; f = {
                        Wc: f.Wc,
                        Xc: f.Xc
                    }, h = g.next()) k = h.value, f.Xc = cf(k), f.Wc = ef, f.Wc[f.Xc] ? d = c(d, f.Wc[f.Xc]) : e.push(ff(k).then(function (m) {
                        return function (n) {
                            var p =
                                null;
                            n = t(n || []);
                            for (var q = n.next(); !q.done; q = n.next()) p = c(p, q.value);
                            p && (m.Wc[m.Xc] = p, d = c(d, p))
                        }
                    }(f)));
                    return G(l, Promise.all(e), 2)
                }
                d && a.decodingInfos.push(d);
                H(l)
            })
        }

        function ff(a) {
            var b = [""];
            a.video && (b = oe(a.video.contentType).split(","));
            var c = [""];
            a.audio && (c = oe(a.audio.contentType).split(","));
            var d = [];
            b = t(b);
            for (var e = b.next(); !e.done; e = b.next()) {
                e = e.value;
                for (var f = {}, g = t(c), h = g.next(); !h.done; f = {fc: f.fc}, h = g.next()) h = h.value, f.fc = Me(a), a.video && (f.fc.video.contentType = $d(je(f.fc.video.contentType), e)), a.audio && (f.fc.audio.contentType = $d(je(f.fc.audio.contentType), h)), d.push(new Promise(function (k) {
                    return function (l, m) {
                        navigator.mediaCapabilities.decodingInfo(k.fc).then(function (n) {
                            l(n)
                        }).catch(m)
                    }
                }(f)))
            }
            return Promise.all(d).catch(function () {
                JSON.stringify(a);
                return null
            })
        }

        function Ye(a, b, c, d) {
            var e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z;
            return O(function (B) {
                switch (B.g) {
                    case 1:
                        if (e = a.some(function (C) {
                            return C.decodingInfos.length
                        })) return B.return();
                        f = {};
                        g = t(d);
                        h = g.next();
                    case 2:
                        if (h.done) {
                            B.u(4);
                            break
                        }
                        f.Se = h.value;
                        k = !1;
                        l = t(a);
                        m = l.next();
                    case 5:
                        if (m.done) {
                            B.u(7);
                            break
                        }
                        n = m.value;
                        p = gf(n, b, c).filter(function (C) {
                            return function (F) {
                                F = F[0];
                                return (F.keySystemConfiguration && F.keySystemConfiguration.keySystem) === C.Se
                            }
                        }(f));
                        q = t(p);
                        u = q.next();
                    case 8:
                        if (u.done) {
                            B.u(10);
                            break
                        }
                        w = u.value;
                        return G(B, df(n, w), 9);
                    case 9:
                        u = q.next();
                        B.u(8);
                        break;
                    case 10:
                        n.decodingInfos.length && (k = !0);
                        m = l.next();
                        B.u(5);
                        break;
                    case 7:
                        if (k) return B.return();
                        f = {Se: f.Se};
                        h = g.next();
                        B.u(2);
                        break;
                    case 4:
                        v = t(a), m = v.next();
                    case 12:
                        if (m.done) {
                            B.u(0);
                            break
                        }
                        A = m.value;
                        y = gf(A, b, c).filter(function (C) {
                            C = C[0];
                            C = C.keySystemConfiguration && C.keySystemConfiguration.keySystem;
                            return !C || !d.includes(C)
                        });
                        D = t(y);
                        u = D.next();
                    case 15:
                        if (u.done) {
                            m = v.next();
                            B.u(12);
                            break
                        }
                        z = u.value;
                        return G(B, df(A, z), 16);
                    case 16:
                        u = D.next(), B.u(15)
                }
            })
        }

        function gf(a, b, c) {
            var d = a.audio, e = a.video, f = [], g = [];
            if (e) for (var h = t(e.fullMimeTypes), k = h.next(); !k.done; k = h.next()) {
                k = k.value;
                var l = oe(k);
                if (l.includes(",") && !d) {
                    var m = l.split(","), n = je(k);
                    l = Sd("video", m);
                    m = Sd("audio", m);
                    m = bf(m, n);
                    n = ce(n, m, "audio");
                    g.push({
                        contentType: n,
                        channels: 2,
                        bitrate: a.bandwidth || 1,
                        samplerate: 1,
                        spatialRendering: !1
                    })
                }
                l = af(l);
                k = {
                    contentType: ce(je(k), l, "video"),
                    width: e.width || 64,
                    height: e.height || 64,
                    bitrate: e.bandwidth || a.bandwidth || 1,
                    framerate: e.frameRate || 1
                };
                if (e.hdr) switch (e.hdr) {
                    case "SDR":
                        k.transferFunction =
                            "srgb";
                        break;
                    case "PQ":
                        k.transferFunction = "pq";
                        break;
                    case "HLG":
                        k.transferFunction = "hlg"
                }
                e.colorGamut && (k.colorGamut = e.colorGamut);
                f.push(k)
            }
            if (d) for (h = t(d.fullMimeTypes), k = h.next(); !k.done; k = h.next()) l = k.value, k = je(l), l = bf(oe(l), k), k = ce(k, l, "audio"), g.push({
                contentType: k,
                channels: d.channelsCount || 2,
                bitrate: d.bandwidth || a.bandwidth || 1,
                samplerate: d.audioSamplingRate || 1,
                spatialRendering: d.spatialAudio
            });
            h = [];
            0 == f.length && f.push(null);
            0 == g.length && g.push(null);
            f = t(f);
            for (k = f.next(); !k.done; k = f.next()) for (k =
                                                               k.value, l = t(g), n = l.next(); !n.done; n = l.next()) n = n.value, m = {type: c ? "file" : "media-source"}, k && (m.video = k), n && (m.audio = n), h.push(m);
            g = (a.video ? a.video.drmInfos : []).concat(a.audio ? a.audio.drmInfos : []);
            if (!g.length) return [h];
            a = [];
            c = new Map;
            g = t(g);
            for (var p = g.next(); !p.done; p = g.next()) f = p.value, c.get(f.keySystem) || c.set(f.keySystem, []), c.get(f.keySystem).push(f);
            g = b ? "required" : "optional";
            b = b ? ["persistent-license"] : ["temporary"];
            f = t(c.keys());
            for (k = f.next(); !k.done; k = f.next()) {
                k = k.value;
                l = [];
                n = t(h);
                for (m =
                         n.next(); !m.done; m = n.next()) {
                    m = Object.assign({}, m.value);
                    var q = c.get(k), u = {
                        keySystem: k,
                        initDataType: "cenc",
                        persistentState: g,
                        distinctiveIdentifier: "optional",
                        sessionTypes: b
                    };
                    q = t(q);
                    for (p = q.next(); !p.done; p = q.next()) {
                        p = p.value;
                        if (p.initData && p.initData.length) {
                            for (var w = new Set, v = t(p.initData), A = v.next(); !A.done; A = v.next()) w.add(A.value.initDataType);
                            u.initDataType = p.initData[0].initDataType
                        }
                        p.distinctiveIdentifierRequired && (u.distinctiveIdentifier = "required");
                        p.persistentStateRequired && (u.persistentState =
                            "required");
                        p.sessionType && (u.sessionTypes = [p.sessionType]);
                        d && (u.audio ? (p.encryptionScheme && (u.audio.encryptionScheme = u.audio.encryptionScheme || p.encryptionScheme), u.audio.robustness = u.audio.robustness || p.audioRobustness) : (u.audio = {robustness: p.audioRobustness}, p.encryptionScheme && (u.audio.encryptionScheme = p.encryptionScheme)), "" == u.audio.robustness && delete u.audio.robustness);
                        e && (u.video ? (p.encryptionScheme && (u.video.encryptionScheme = u.video.encryptionScheme || p.encryptionScheme), u.video.robustness =
                            u.video.robustness || p.videoRobustness) : (u.video = {robustness: p.videoRobustness}, p.encryptionScheme && (u.video.encryptionScheme = p.encryptionScheme)), "" == u.video.robustness && delete u.video.robustness)
                    }
                    m.keySystemConfiguration = u;
                    l.push(m)
                }
                a.push(l)
            }
            return a
        }

        function bf(a, b) {
            return "flac" == a.toLowerCase() ? md() ? "fLaC" : "flac" : "opus" === a.toLowerCase() ? md() ? "mp4" == fe(b) ? "Opus" : "opus" : "opus" : a
        }

        function af(a) {
            if (a.includes("avc1")) {
                var b = a.split(".");
                if (3 == b.length) return a = b.shift() + ".", a += parseInt(b.shift(), 10).toString(16), a += ("000" + parseInt(b.shift(), 10).toString(16)).slice(-4)
            } else if ("vp9" == a) return "vp09.00.41.08";
            return a
        }

        function We(a) {
            a.textStreams = a.textStreams.filter(function (b) {
                b = $d(b.mimeType, b.codecs);
                return se(b)
            })
        }

        function Xe(a) {
            var b, c, d, e, f, g, h, k;
            return O(function (l) {
                switch (l.g) {
                    case 1:
                        b = [], c = t(a.imageStreams), d = c.next();
                    case 2:
                        if (d.done) {
                            l.u(4);
                            break
                        }
                        e = d.value;
                        f = e.mimeType;
                        "application/mp4" == f && "mjpg" == e.codecs && (f = "image/jpg");
                        if (hf.has(f)) {
                            l.u(5);
                            break
                        }
                        g = jf.get(f);
                        if (!g) {
                            hf.set(f, !1);
                            l.u(5);
                            break
                        }
                        return G(l, kf(g), 7);
                    case 7:
                        h = l.h, hf.set(f, h);
                    case 5:
                        (k = hf.get(f)) && b.push(e);
                        d = c.next();
                        l.u(2);
                        break;
                    case 4:
                        a.imageStreams = b, H(l)
                }
            })
        }

        function kf(a) {
            return new Promise(function (b) {
                var c = new Image;
                c.src = a;
                "decode" in c ? c.decode().then(function () {
                    b(!0)
                }).catch(function () {
                    b(!1)
                }) : c.onload = c.onerror = function () {
                    b(2 === c.height)
                }
            })
        }

        function lf(a) {
            var b = a.audio, c = a.video, d = b ? b.mimeType : null, e = c ? c.mimeType : null, f = b ? b.codecs : null,
                g = c ? c.codecs : null, h = [];
            g && h.push(g);
            f && h.push(f);
            var k = [];
            c && k.push(c.mimeType);
            b && k.push(b.mimeType);
            k = k[0] || null;
            var l = [];
            b && l.push(b.kind);
            c && l.push(c.kind);
            l = l[0] || null;
            var m = new Set;
            if (b) for (var n = t(b.roles), p = n.next(); !p.done; p = n.next()) m.add(p.value);
            if (c) for (n = t(c.roles), p = n.next(); !p.done; p = n.next()) m.add(p.value);
            a = {
                id: a.id,
                active: !1,
                type: "variant",
                bandwidth: a.bandwidth,
                language: a.language,
                label: null,
                kind: l,
                width: null,
                height: null,
                frameRate: null,
                pixelAspectRatio: null,
                hdr: null,
                colorGamut: null,
                videoLayout: null,
                mimeType: k,
                audioMimeType: d,
                videoMimeType: e,
                codecs: h.join(", "),
                audioCodec: f,
                videoCodec: g,
                primary: a.primary,
                roles: Array.from(m),
                audioRoles: null,
                forced: !1,
                videoId: null,
                audioId: null,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                tilesLayout: null,
                audioBandwidth: null,
                videoBandwidth: null,
                originalVideoId: null,
                originalAudioId: null,
                originalTextId: null,
                originalImageId: null,
                accessibilityPurpose: null,
                originalLanguage: null
            };
            c && (a.videoId = c.id, a.originalVideoId = c.originalId, a.width = c.width || null, a.height = c.height || null, a.frameRate = c.frameRate || null, a.pixelAspectRatio = c.pixelAspectRatio || null, a.videoBandwidth = c.bandwidth || null, a.hdr = c.hdr || null, a.colorGamut = c.colorGamut || null, a.videoLayout = c.videoLayout || null);
            b && (a.audioId = b.id, a.originalAudioId = b.originalId, a.channelsCount = b.channelsCount, a.audioSamplingRate = b.audioSamplingRate, a.audioBandwidth = b.bandwidth || null, a.spatialAudio = b.spatialAudio, a.label =
                b.label, a.audioRoles = b.roles, a.accessibilityPurpose = b.accessibilityPurpose, a.originalLanguage = b.originalLanguage);
            return a
        }

        function mf(a) {
            return {
                id: a.id,
                active: !1,
                type: Vd,
                bandwidth: 0,
                language: a.language,
                label: a.label,
                kind: a.kind || null,
                width: null,
                height: null,
                frameRate: null,
                pixelAspectRatio: null,
                hdr: null,
                colorGamut: null,
                videoLayout: null,
                mimeType: a.mimeType,
                audioMimeType: null,
                videoMimeType: null,
                codecs: a.codecs || null,
                audioCodec: null,
                videoCodec: null,
                primary: a.primary,
                roles: a.roles,
                audioRoles: null,
                forced: a.forced,
                videoId: null,
                audioId: null,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                tilesLayout: null,
                audioBandwidth: null,
                videoBandwidth: null,
                originalVideoId: null,
                originalAudioId: null,
                originalTextId: a.originalId,
                originalImageId: null,
                accessibilityPurpose: a.accessibilityPurpose,
                originalLanguage: a.originalLanguage
            }
        }

        function nf(a) {
            var b = a.width || null, c = a.height || null, d = null;
            a.segmentIndex && (d = a.segmentIndex.get(0));
            var e = a.tilesLayout;
            d && (e = d.tilesLayout || e);
            e && null != b && (b /= Number(e.split("x")[0]));
            e && null != c && (c /= Number(e.split("x")[1]));
            return {
                id: a.id,
                active: !1,
                type: "image",
                bandwidth: a.bandwidth || 0,
                language: "",
                label: null,
                kind: null,
                width: b,
                height: c,
                frameRate: null,
                pixelAspectRatio: null,
                hdr: null,
                colorGamut: null,
                videoLayout: null,
                mimeType: a.mimeType,
                audioMimeType: null,
                videoMimeType: null,
                codecs: a.codecs || null,
                audioCodec: null,
                videoCodec: null,
                primary: !1,
                roles: [],
                audioRoles: null,
                forced: !1,
                videoId: null,
                audioId: null,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                tilesLayout: e || null,
                audioBandwidth: null,
                videoBandwidth: null,
                originalVideoId: null,
                originalAudioId: null,
                originalTextId: null,
                originalImageId: a.originalId,
                accessibilityPurpose: null,
                originalLanguage: null
            }
        }

        function of(a) {
            a.__shaka_id || (a.__shaka_id = pf++);
            return a.__shaka_id
        }

        function qf(a) {
            var b = rf(a);
            b.active = "disabled" != a.mode;
            b.type = "text";
            b.originalTextId = a.id;
            "captions" == a.kind && (b.mimeType = "unknown");
            "subtitles" == a.kind && (b.mimeType = "text/vtt");
            a.kind && (b.roles = [a.kind]);
            "forced" == a.kind && (b.forced = !0);
            return b
        }

        function sf(a) {
            var b = rf(a);
            b.active = a.enabled;
            b.type = "variant";
            b.originalAudioId = a.id;
            "main" == a.kind && (b.primary = !0);
            a.kind && (b.roles = [a.kind], b.audioRoles = [a.kind], b.label = a.label);
            return b
        }

        function rf(a) {
            var b = a.language;
            return {
                id: of(a),
                active: !1,
                type: "",
                bandwidth: 0,
                language: Ee(b || "und"),
                label: a.label,
                kind: a.kind,
                width: null,
                height: null,
                frameRate: null,
                pixelAspectRatio: null,
                hdr: null,
                colorGamut: null,
                videoLayout: null,
                mimeType: null,
                audioMimeType: null,
                videoMimeType: null,
                codecs: null,
                audioCodec: null,
                videoCodec: null,
                primary: !1,
                roles: [],
                forced: !1,
                audioRoles: null,
                videoId: null,
                audioId: null,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                tilesLayout: null,
                audioBandwidth: null,
                videoBandwidth: null,
                originalVideoId: null,
                originalAudioId: null,
                originalTextId: null,
                originalImageId: null,
                accessibilityPurpose: null,
                originalLanguage: b
            }
        }

        function tf(a) {
            return a.allowedByApplication && a.allowedByKeySystem && 0 == a.disabledUntilTime
        }

        function uf(a) {
            return a.filter(function (b) {
                return tf(b)
            })
        }

        function vf(a, b, c, d) {
            var e = a, f = a.filter(function (k) {
                return k.primary
            });
            f.length && (e = f);
            var g = e.length ? e[0].language : "";
            e = e.filter(function (k) {
                return k.language == g
            });
            if (b) {
                var h = Le(Ee(b), a.map(function (k) {
                    return k.language
                }));
                h && (e = a.filter(function (k) {
                    return Ee(k.language) == h
                }))
            }
            e = e.filter(function (k) {
                return k.forced == d
            });
            if (c) {
                if (a = Af(e, c), a.length) return a
            } else if (a = e.filter(function (k) {
                return 0 == k.roles.length
            }), a.length) return a;
            a = e.map(function (k) {
                return k.roles
            }).reduce(ze, []);
            return a.length ?
                Af(e, a[0]) : e
        }

        function Af(a, b) {
            return a.filter(function (c) {
                return c.roles.includes(b)
            })
        }

        function $e(a) {
            return "audio" == a.type ? "type=audio codecs=" + a.codecs + " bandwidth=" + a.bandwidth + " channelsCount=" + a.channelsCount + " audioSamplingRate=" + a.audioSamplingRate : "video" == a.type ? "type=video codecs=" + a.codecs + " bandwidth=" + a.bandwidth + " frameRate=" + a.frameRate + " width=" + a.width + " height=" + a.height : "unexpected stream type"
        }

        S("shaka.util.StreamUtils", Oe);
        Oe.meetsRestrictions = Se;
        var ef = {}, pf = 0,
            hf = (new Map).set("image/svg+xml", !0).set("image/png", !0).set("image/jpeg", !0).set("image/jpg", !0),
            jf = (new Map).set("image/webp", "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif", "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");

        function Bf() {
            var a = this;
            this.A = null;
            this.s = !1;
            this.i = new Va;
            this.F = new gb;
            navigator.connection && navigator.connection.addEventListener && this.F.D(navigator.connection, "change", function () {
                if (a.s && a.g.useNetworkInformation) {
                    a.i = new Va;
                    a.g && a.i.configure(a.g.advanced);
                    var b = a.chooseVariant();
                    b && navigator.onLine && a.A(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch)
                }
            });
            this.o = [];
            this.B = 1;
            this.G = !1;
            this.h = this.m = this.g = this.j = null;
            this.C = new Tc(function () {
                if (a.g.restrictToElementSize) {
                    var b = a.chooseVariant();
                    b && a.A(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch)
                }
            });
            this.l = null
        }

        r = Bf.prototype;
        r.stop = function () {
            this.A = null;
            this.s = !1;
            this.o = [];
            this.B = 1;
            this.m = this.j = null;
            this.h && (this.h.disconnect(), this.h = null);
            this.C.stop();
            this.l = null
        };
        r.release = function () {
            this.F.release();
            this.C = null
        };
        r.init = function (a) {
            this.A = a
        };
        r.chooseVariant = function (a) {
            a = void 0 === a ? !1 : a;
            var b = Infinity, c = Infinity;
            this.g.restrictToScreenSize && (c = this.g.ignoreDevicePixelRatio ? 1 : window.devicePixelRatio, b = window.screen.height * c, c *= window.screen.width);
            if (this.h && this.g.restrictToElementSize) {
                var d = this.g.ignoreDevicePixelRatio ? 1 : window.devicePixelRatio;
                b = Math.min(b, this.m.clientHeight * d);
                c = Math.min(c, this.m.clientWidth * d)
            }
            var e = this.o.filter(function (l) {
                return l && !(l.audio && l.audio.fastSwitching || l.video && l.video.fastSwitching)
            });
            e.length ||
            (e = this.o);
            d = e;
            a && e.length != this.o.length && (d = this.o.filter(function (l) {
                return l && (l.audio && l.audio.fastSwitching || l.video && l.video.fastSwitching ? !0 : !1)
            }));
            a = Cf(this, this.g.restrictions, d, Infinity, Infinity);
            if (Infinity != b || Infinity != c) {
                a = Df(a);
                a = t(a);
                for (e = a.next(); !e.done; e = a.next()) if (e = e.value, e.height >= b && e.width >= c) {
                    b = e.height;
                    c = e.width;
                    break
                }
                a = Cf(this, this.g.restrictions, d, b, c)
            }
            b = this.getBandwidthEstimate();
            d.length && !a.length && (a = Cf(this, null, d, Infinity, Infinity), a = [a[0]]);
            c = a[0] || null;
            for (d =
                     0; d < a.length; d++) {
                e = a[d];
                for (var f = isNaN(this.B) ? 1 : Math.abs(this.B), g = f * e.bandwidth / this.g.bandwidthDowngradeTarget, h = {bandwidth: Infinity}, k = d + 1; k < a.length; k++) if (e.bandwidth != a[k].bandwidth) {
                    h = a[k];
                    break
                }
                f = f * h.bandwidth / this.g.bandwidthUpgradeTarget;
                b >= g && b <= f && (c.bandwidth != e.bandwidth || c.bandwidth == e.bandwidth && c.video && e.video && (c.video.width < e.video.width || c.video.height < e.video.height)) && (c = e)
            }
            this.j = Date.now();
            return c
        };
        r.enable = function () {
            this.s = !0
        };
        r.disable = function () {
            this.s = !1
        };
        r.segmentDownloaded = function (a, b, c) {
            a < this.g.cacheLoadThreshold || (this.i.sample(a, b), c && null != this.j && this.s && Ef(this))
        };
        r.trySuggestStreams = function () {
            null != this.j && this.s && Ef(this)
        };
        r.getBandwidthEstimate = function () {
            var a = this.g.defaultBandwidthEstimate;
            navigator.connection && navigator.connection.downlink && this.g.useNetworkInformation && (a = 1E6 * navigator.connection.downlink);
            a = this.i.getBandwidthEstimate(a);
            return this.l ? this.l.getBandwidthEstimate(a) : a
        };
        r.setVariants = function (a) {
            this.o = a
        };
        r.playbackRateChanged = function (a) {
            this.B = a
        };
        r.setMediaElement = function (a) {
            var b = this;
            this.m = a;
            this.h && (this.h.disconnect(), this.h = null);
            this.m && "ResizeObserver" in window && (this.h = new ResizeObserver(function () {
                b.C.Y(Ff)
            }), this.h.observe(this.m))
        };
        r.setCmsdManager = function (a) {
            this.l = a
        };
        r.configure = function (a) {
            this.g = a;
            this.i && this.g && this.i.configure(this.g.advanced)
        };

        function Ef(a) {
            if (!a.G) {
                var b = a.i;
                if (!(b.g >= b.i)) return;
                a.G = !0;
                a.j -= 1E3 * (a.g.switchInterval - a.g.minTimeToSwitch)
            }
            Date.now() - a.j < 1E3 * a.g.switchInterval || (b = a.chooseVariant(), a.getBandwidthEstimate(), b && a.A(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch))
        }

        function Cf(a, b, c, d, e) {
            if (a.l) {
                var f = a.l.Ng();
                f && (c = c.filter(function (g) {
                    return g.bandwidth && f ? g.bandwidth <= f : !0
                }))
            }
            b && (c = c.filter(function (g) {
                return Se(g, b, {width: e, height: d})
            }));
            return c.sort(function (g, h) {
                return g.bandwidth - h.bandwidth
            })
        }

        function Df(a) {
            var b = [];
            a = t(a);
            for (var c = a.next(); !c.done; c = a.next()) (c = c.value.video) && c.height && c.width && b.push({
                height: c.height,
                width: c.width
            });
            return b.sort(function (d, e) {
                return d.width - e.width
            })
        }

        S("shaka.abr.SimpleAbrManager", Bf);
        Bf.prototype.configure = Bf.prototype.configure;
        Bf.prototype.setCmsdManager = Bf.prototype.setCmsdManager;
        Bf.prototype.setMediaElement = Bf.prototype.setMediaElement;
        Bf.prototype.playbackRateChanged = Bf.prototype.playbackRateChanged;
        Bf.prototype.setVariants = Bf.prototype.setVariants;
        Bf.prototype.getBandwidthEstimate = Bf.prototype.getBandwidthEstimate;
        Bf.prototype.trySuggestStreams = Bf.prototype.trySuggestStreams;
        Bf.prototype.segmentDownloaded = Bf.prototype.segmentDownloaded;
        Bf.prototype.disable = Bf.prototype.disable;
        Bf.prototype.enable = Bf.prototype.enable;
        Bf.prototype.chooseVariant = Bf.prototype.chooseVariant;
        Bf.prototype.init = Bf.prototype.init;
        Bf.prototype.release = Bf.prototype.release;
        Bf.prototype.stop = Bf.prototype.stop;
        var Ff = 1;
        S("shaka.config.AutoShowText", {
            NEVER: 0,
            ALWAYS: 1,
            IF_PREFERRED_TEXT_LANGUAGE: 2,
            IF_SUBTITLES_MAY_BE_NEEDED: 3
        });
        S("shaka.config.CodecSwitchingStrategy", {Qj: "reload", yh: "smooth"});

        function Gf(a, b, c, d) {
            c = void 0 === c ? !0 : c;
            d = void 0 === d ? !1 : d;
            this.h = a;
            this.g = new Set([a]);
            b = b || [];
            a = t(b);
            for (b = a.next(); !b.done; b = a.next()) this.add(b.value, c, d)
        }

        Gf.prototype.add = function (a, b, c) {
            return Hf(this.h, a, void 0 === b ? !0 : b, void 0 === c ? !1 : c) ? (this.g.add(a), !0) : !1
        };

        function Hf(a, b, c, d) {
            var e;
            if (!(e = !!a.audio != !!b.audio || !!a.video != !!b.video || a.language != b.language) && (e = a.audio && b.audio)) {
                e = a.audio;
                var f = b.audio;
                e = !!((!e.channelsCount || !f.channelsCount || 2 < e.channelsCount || 2 < f.channelsCount) && e.channelsCount != f.channelsCount || e.spatialAudio !== f.spatialAudio || c && !If(e, f) || !Jf(e.roles, f.roles) || d && e.groupId !== f.groupId)
            }
            !(d = e) && (d = a.video && b.video) && (a = a.video, b = b.video, d = !((!c || If(a, b)) && Jf(a.roles, b.roles)));
            return d ? !1 : !0
        }

        Gf.prototype.values = function () {
            return this.g.values()
        };

        function If(a, b) {
            if (a.mimeType != b.mimeType) return !1;
            a = a.codecs.split(",").map(function (d) {
                return ie(d)
            });
            b = b.codecs.split(",").map(function (d) {
                return ie(d)
            });
            if (a.length != b.length) return !1;
            a.sort();
            b.sort();
            for (var c = 0; c < a.length; c++) if (a[c] != b[c]) return !1;
            return !0
        }

        function Jf(a, b) {
            a = new Set(a);
            b = new Set(b);
            a.delete("main");
            b.delete("main");
            if (a.size != b.size) return !1;
            a = t(a);
            for (var c = a.next(); !c.done; c = a.next()) if (!b.has(c.value)) return !1;
            return !0
        };

        function Kf(a, b, c) {
            b = void 0 === b ? "reload" : b;
            c = void 0 === c ? !1 : c;
            this.i = a;
            this.h = b;
            this.g = c;
            this.j = new Lf(a.language, "", a.audio && a.audio.channelsCount ? a.audio.channelsCount : 0, "", !1, "", "", "", b, c)
        }

        Kf.prototype.create = function (a) {
            var b = this, c = "smooth" == this.h && pb(), d = a.filter(function (e) {
                return Hf(b.i, e, !c, b.g)
            });
            return d.length ? new Gf(d[0], d, !c, this.g) : this.j.create(a)
        };

        function Lf(a, b, c, d, e, f, g, h, k, l, m) {
            this.A = a;
            this.B = b;
            this.i = c;
            this.j = d;
            this.C = e;
            this.m = f;
            this.h = void 0 === g ? "" : g;
            this.l = void 0 === h ? "" : h;
            this.o = void 0 === k ? "reload" : k;
            this.s = void 0 === l ? !1 : l;
            this.g = void 0 === m ? "" : m
        }

        Lf.prototype.create = function (a) {
            var b = [];
            b = Mf(a, this.A);
            var c = a.filter(function (d) {
                return d.primary
            });
            b = b.length ? b : c.length ? c : a;
            a = Nf(b, this.B);
            a.length && (b = a);
            this.m && (a = Of(b, this.m), a.length && (b = a));
            this.j && (a = Pf(b, this.j), a.length && (b = a));
            this.i && (a = Qf(b, this.i), a.length && (b = a));
            this.h && (a = Rf(b, this.h), a.length && (b = a));
            this.l && (a = Sf(b, this.l), a.length && (b = a));
            a = Tf(b, this.C);
            a.length && (b = a);
            this.g && (a = Uf(b, this.g), a.length && (b = a));
            return new Gf(b[0], b, !("smooth" == this.o && pb()), this.s)
        };

        function Mf(a, b) {
            b = Ee(b);
            var c = Le(b, a.map(function (d) {
                return Ke(d)
            }));
            return c ? a.filter(function (d) {
                return c == Ke(d)
            }) : []
        }

        function Nf(a, b) {
            return a.filter(function (c) {
                return c.audio ? b ? c.audio.roles.includes(b) : 0 == c.audio.roles.length : !1
            })
        }

        function Rf(a, b) {
            return a.filter(function (c) {
                return c.audio && c.audio.label ? c.audio.label.toLowerCase() == b.toLowerCase() : !1
            })
        }

        function Sf(a, b) {
            return a.filter(function (c) {
                return c.video && c.video.label ? c.video.label.toLowerCase() == b.toLowerCase() : !1
            })
        }

        function Qf(a, b) {
            return a.filter(function (c) {
                return c.audio && c.audio.channelsCount && c.audio.channelsCount != b ? !1 : !0
            })
        }

        function Pf(a, b) {
            "AUTO" == b && (b = window.matchMedia("(color-gamut: p3)").matches ? "PQ" : "SDR");
            return a.filter(function (c) {
                return c.video && c.video.hdr && c.video.hdr != b ? !1 : !0
            })
        }

        function Of(a, b) {
            return a.filter(function (c) {
                return c.video && c.video.videoLayout && c.video.videoLayout != b ? !1 : !0
            })
        }

        function Tf(a, b) {
            return a.filter(function (c) {
                return c.audio && c.audio.spatialAudio != b ? !1 : !0
            })
        }

        function Uf(a, b) {
            return a.filter(function (c) {
                return c.audio && c.audio.codecs != b ? !1 : !0
            })
        };

        function Vf() {
            this.g = Wf;
            this.i = (new Map).set(Wf, 2).set(Xf, 1);
            this.h = 0
        }

        function Yf(a, b, c) {
            a.i.set(Wf, c).set(Xf, b)
        }

        var Xf = 0, Wf = 1;

        function Zf(a, b) {
            var c = $f();
            this.l = null == a.maxAttempts ? c.maxAttempts : a.maxAttempts;
            this.j = null == a.baseDelay ? c.baseDelay : a.baseDelay;
            this.o = null == a.fuzzFactor ? c.fuzzFactor : a.fuzzFactor;
            this.m = null == a.backoffFactor ? c.backoffFactor : a.backoffFactor;
            this.g = 0;
            this.h = this.j;
            if (this.i = void 0 === b ? !1 : b) this.g = 1
        }

        function ag(a) {
            var b, c;
            return O(function (d) {
                if (1 == d.g) {
                    if (a.g >= a.l) if (a.i) a.g = 1, a.h = a.j; else throw new T(2, 7, 1010);
                    b = a.g;
                    a.g++;
                    if (0 == b) return d.return();
                    c = a.h * (1 + (2 * Math.random() - 1) * a.o);
                    return G(d, new Promise(function (e) {
                        (new Tc(e)).Y(c / 1E3)
                    }), 2)
                }
                a.h *= a.m;
                H(d)
            })
        }

        function $f() {
            return {
                maxAttempts: 2,
                baseDelay: 1E3,
                backoffFactor: 2,
                fuzzFactor: .5,
                timeout: 3E4,
                stallTimeout: 5E3,
                connectionTimeout: 1E4
            }
        };

        function bg() {
            var a, b, c = new Promise(function (d, e) {
                a = d;
                b = e
            });
            c.resolve = a;
            c.reject = b;
            return c
        }

        bg.prototype.resolve = function () {
        };
        bg.prototype.reject = function () {
        };

        function cg(a, b) {
            this.promise = a;
            this.i = b;
            this.g = !1
        }

        function dg(a) {
            return new cg(Promise.reject(a), function () {
                return Promise.resolve()
            })
        }

        function eg() {
            var a = Promise.reject(new T(2, 7, 7001));
            a.catch(function () {
            });
            return new cg(a, function () {
                return Promise.resolve()
            })
        }

        function fg(a) {
            return new cg(Promise.resolve(a), function () {
                return Promise.resolve()
            })
        }

        function gg(a) {
            return new cg(a, function () {
                return a.catch(function () {
                })
            })
        }

        cg.prototype.abort = function () {
            this.g = !0;
            return this.i()
        };

        function hg(a) {
            return new cg(Promise.all(a.map(function (b) {
                return b.promise
            })), function () {
                return Promise.all(a.map(function (b) {
                    return b.abort()
                }))
            })
        }

        cg.prototype.finally = function (a) {
            this.promise.then(function () {
                return a(!0)
            }, function () {
                return a(!1)
            });
            return this
        };
        cg.prototype.Aa = function (a, b) {
            function c(h) {
                return function (k) {
                    if (e.g && h) f.reject(g); else {
                        var l = h ? a : b;
                        l ? d = ig(l, k, f) : (h ? f.resolve : f.reject)(k)
                    }
                }
            }

            function d() {
                f.reject(g);
                return e.abort()
            }

            var e = this, f = new bg, g = new T(2, 7, 7001);
            this.promise.then(c(!0), c(!1));
            return new cg(f, function () {
                return d()
            })
        };

        function ig(a, b, c) {
            try {
                var d = a(b);
                if (d && d.promise && d.abort) return c.resolve(d.promise), function () {
                    return d.abort()
                };
                c.resolve(d);
                return function () {
                    return Promise.resolve(d).then(function () {
                    }, function () {
                    })
                }
            } catch (e) {
                return c.reject(e), function () {
                    return Promise.resolve()
                }
            }
        }

        S("shaka.util.AbortableOperation", cg);
        cg.prototype.chain = cg.prototype.Aa;
        cg.prototype["finally"] = cg.prototype.finally;
        cg.all = hg;
        cg.prototype.abort = cg.prototype.abort;
        cg.notAbortable = gg;
        cg.completed = fg;
        cg.aborted = eg;
        cg.failed = dg;

        function U(a, b) {
            if (b) if (b instanceof Map) for (var c = t(b.keys()), d = c.next(); !d.done; d = c.next()) d = d.value, Object.defineProperty(this, d, {
                value: b.get(d),
                writable: !0,
                enumerable: !0
            }); else for (c in b) Object.defineProperty(this, c, {value: b[c], writable: !0, enumerable: !0});
            this.defaultPrevented = this.cancelable = this.bubbles = !1;
            this.timeStamp = window.performance && window.performance.now ? window.performance.now() : Date.now();
            this.type = a;
            this.isTrusted = !1;
            this.target = this.currentTarget = null;
            this.g = !1
        }

        function jg(a) {
            var b = new U(a.type), c;
            for (c in a) Object.defineProperty(b, c, {value: a[c], writable: !0, enumerable: !0});
            return b
        }

        U.prototype.preventDefault = function () {
            this.cancelable && (this.defaultPrevented = !0)
        };
        U.prototype.stopImmediatePropagation = function () {
            this.g = !0
        };
        U.prototype.stopPropagation = function () {
        };
        S("shaka.util.FakeEvent", U);
        var kg = {
            pj: "abrstatuschanged",
            qj: "adaptation",
            rj: "audiotrackchanged",
            sj: "buffering",
            tj: "complete",
            uj: "downloadfailed",
            vj: "downloadheadersreceived",
            wj: "drmsessionupdate",
            yj: "emsg",
            Pj: "prft",
            Error: "error",
            zj: "expirationupdated",
            Aj: "firstquartile",
            Bj: "gapjumped",
            Ej: "keystatuschanged",
            Gj: "loaded",
            Hj: "loading",
            Jj: "manifestparsed",
            Kj: "manifestupdated",
            Lj: "mediaqualitychanged",
            Metadata: "metadata",
            Mj: "midpoint",
            Nj: "nospatialvideoinfo",
            Oj: "onstatechange",
            Rj: "ratechange",
            Sj: "segmentappended",
            Tj: "sessiondata",
            Uj: "spatialvideoinfo",
            Vj: "stalldetected",
            Wj: "started",
            Xj: "statechanged",
            Yj: "streaming",
            Zj: "textchanged",
            $j: "texttrackvisibility",
            ak: "thirdquartile",
            bk: "timelineregionadded",
            ck: "timelineregionenter",
            dk: "timelineregionexit",
            ek: "trackschanged",
            gk: "unloading",
            ik: "variantchanged"
        };

        function lg() {
            this.ya = new fb;
            this.Ge = this
        }

        lg.prototype.addEventListener = function (a, b) {
            this.ya && this.ya.push(a, b)
        };
        lg.prototype.removeEventListener = function (a, b) {
            this.ya && this.ya.remove(a, b)
        };
        lg.prototype.dispatchEvent = function (a) {
            if (!this.ya) return !0;
            var b = this.ya.get(a.type) || [], c = this.ya.get("All");
            c && (b = b.concat(c));
            b = t(b);
            for (c = b.next(); !c.done; c = b.next()) {
                c = c.value;
                a.target = this.Ge;
                a.currentTarget = this.Ge;
                try {
                    c.handleEvent ? c.handleEvent(a) : c.call(this, a)
                } catch (d) {
                }
                if (a.g) break
            }
            return a.defaultPrevented
        };
        lg.prototype.release = function () {
            this.ya = null
        };

        function mg() {
            this.g = []
        }

        function ng(a, b) {
            a.g.push(b.finally(function () {
                Ob(a.g, b)
            }))
        }

        mg.prototype.destroy = function () {
            for (var a = [], b = t(this.g), c = b.next(); !c.done; c = b.next()) c = c.value, c.promise.catch(function () {
            }), a.push(c.abort());
            this.g = [];
            return Promise.all(a)
        };

        function og(a, b, c, d, e, f) {
            lg.call(this);
            this.i = !1;
            this.m = new mg;
            this.g = new Set;
            this.h = new Set;
            this.l = a || null;
            this.j = b || null;
            this.A = c || null;
            this.B = d || null;
            this.F = e || null;
            this.C = f || null;
            this.o = this.s = !1
        }

        oa(og, lg);
        r = og.prototype;
        r.fg = function (a) {
            this.s = a
        };
        r.gg = function (a) {
            this.o = a
        };

        function pg(a, b, c, d) {
            c = c || qg;
            var e = rg[a];
            if (!e || c >= e.priority) rg[a] = {priority: c, De: b, Ki: void 0 === d ? !1 : d}
        }

        function sg(a, b) {
            for (var c = t(a.g), d = c.next(); !d.done; d = c.next()) b.g.add(d.value);
            a = t(a.h);
            for (d = a.next(); !d.done; d = a.next()) b.h.add(d.value)
        }

        r.Ni = function (a) {
            this.g.add(a)
        };
        r.ij = function (a) {
            this.g.delete(a)
        };
        r.Ag = function () {
            this.g.clear()
        };
        r.Oi = function (a) {
            this.h.add(a)
        };
        r.jj = function (a) {
            this.h.delete(a)
        };
        r.Bg = function () {
            this.h.clear()
        };

        function tg(a, b, c) {
            return {
                uris: a,
                method: "GET",
                body: null,
                headers: {},
                allowCrossSiteCredentials: !1,
                retryParameters: b,
                licenseRequestType: null,
                sessionId: null,
                drmInfo: null,
                initData: null,
                initDataType: null,
                streamDataCallback: void 0 === c ? null : c
            }
        }

        r.destroy = function () {
            this.i = !0;
            this.g.clear();
            this.h.clear();
            lg.prototype.release.call(this);
            return this.m.destroy()
        };
        r.request = function (a, b, c) {
            var d = this, e = new ug;
            if (this.i) {
                var f = Promise.reject(new T(2, 7, 7001));
                f.catch(function () {
                });
                return new vg(f, function () {
                    return Promise.resolve()
                }, e)
            }
            b.method = b.method || "GET";
            b.headers = b.headers || {};
            b.retryParameters = b.retryParameters ? Me(b.retryParameters) : $f();
            b.uris = Me(b.uris);
            f = wg(this, a, b, c);
            var g = f.Aa(function () {
                return xg(d, a, b, c, new Zf(b.retryParameters, !1), 0, null, e)
            }), h = g.Aa(function (p) {
                return yg(d, a, p, c)
            }), k = Date.now(), l = 0;
            f.promise.then(function () {
                l = Date.now() - k
            }, function () {
            });
            var m = 0;
            g.promise.then(function () {
                m = Date.now()
            }, function () {
            });
            var n = h.Aa(function (p) {
                var q = Date.now() - m, u = p.response;
                u.timeMs += l;
                u.timeMs += q;
                p.pi || !d.l || u.fromCache || "HEAD" == b.method || a != zg || d.l(u.timeMs, u.data.byteLength, Ag(c));
                d.C && d.C(a, u, c);
                return u
            }, function (p) {
                p && (p.severity = 2);
                throw p;
            });
            f = new vg(n.promise, function () {
                return n.abort()
            }, e);
            ng(this.m, f);
            return f
        };

        function wg(a, b, c, d) {
            function e(h) {
                f = f.Aa(function () {
                    c.body && (c.body = Cb(c.body));
                    return h(b, c, d)
                })
            }

            var f = fg(void 0);
            a.B && e(a.B);
            a = t(a.g);
            for (var g = a.next(); !g.done; g = a.next()) e(g.value);
            return f.Aa(void 0, function (h) {
                if (h instanceof T && 7001 == h.code) throw h;
                throw new T(2, 1, 1006, h);
            })
        }

        function xg(a, b, c, d, e, f, g, h) {
            a.s && (c.uris[f] = c.uris[f].replace("https://", "http://"));
            a.o && (c.uris[f] = c.uris[f].replace("http://", "https://"));
            0 < f && a.F && a.F(b, d, c.uris[f], c.uris[f - 1]);
            var k = new uc(c.uris[f]), l = k.Db, m = !1;
            l || (l = location.protocol, l = l.slice(0, -1), vc(k, l), c.uris[f] = k.toString());
            l = l.toLowerCase();
            var n = (l = rg[l]) ? l.De : null;
            if (!n) return dg(new T(2, 1, 1E3, k));
            var p = l.Ki, q = null, u = null, w = !1, v = !1, A;
            return gg(ag(e)).Aa(function () {
                if (a.i) return eg();
                A = Date.now();
                var y = 0;
                c.requestStartTime = Date.now();
                var D = n(c.uris[f], c, b, function (C, F, I) {
                    q && q.stop();
                    u && u.Y(B / 1E3);
                    a.l && b == zg && (y++, c.packetNumber = y, a.l(C, F, Ag(d), c), m = !0, h.g = I)
                }, function (C) {
                    a.j && a.j(C, c, b);
                    v = !0;
                    c.timeToFirstByte = Date.now() - c.requestStartTime
                });
                if (!p) return D;
                var z = c.retryParameters.connectionTimeout;
                z && (q = new Tc(function () {
                    w = !0;
                    D.abort()
                }), q.Y(z / 1E3));
                var B = c.retryParameters.stallTimeout;
                B && (u = new Tc(function () {
                    w = !0;
                    D.abort()
                }));
                return D
            }).Aa(function (y) {
                q && q.stop();
                u && u.stop();
                void 0 == y.timeMs && (y.timeMs = Date.now() - A);
                var D = {
                    response: y,
                    pi: m
                };
                !v && a.j && a.j(y.headers, c, b);
                return D
            }, function (y) {
                q && q.stop();
                u && u.stop();
                if (a.A) {
                    var D = null, z = 0;
                    y instanceof T && (D = y, 1001 == y.code && (z = y.data[1]));
                    a.A(c, D, z, w)
                }
                if (a.i) return eg();
                w && (y = new T(1, 1, 1003, c.uris[f], b));
                if (y instanceof T) {
                    if (7001 == y.code) throw y;
                    if (1010 == y.code) throw g;
                    if (1 == y.severity) return D = (new Map).set("error", y), D = new U("retry", D), a.dispatchEvent(D), f = (f + 1) % c.uris.length, xg(a, b, c, d, e, f, y, h)
                }
                throw y;
            })
        }

        function yg(a, b, c, d) {
            var e = fg(void 0), f = {};
            a = t(a.h);
            for (var g = a.next(); !g.done; f = {Ue: f.Ue}, g = a.next()) f.Ue = g.value, e = e.Aa(function (h) {
                return function () {
                    var k = c.response;
                    k.data && (k.data = Cb(k.data));
                    return h.Ue(b, k, d)
                }
            }(f));
            return e.Aa(function () {
                return c
            }, function (h) {
                var k = 2;
                if (h instanceof T) {
                    if (7001 == h.code) throw h;
                    k = h.severity
                }
                throw new T(k, 1, 1007, h);
            })
        }

        function Ag(a) {
            if (a) {
                var b = a.segment;
                a = a.stream;
                if (b && a && a.fastSwitching && b.Kd) return !1
            }
            return !0
        }

        S("shaka.net.NetworkingEngine", og);
        og.prototype.request = og.prototype.request;
        og.prototype.destroy = og.prototype.destroy;
        og.makeRequest = tg;
        og.defaultRetryParameters = function () {
            return $f()
        };
        og.prototype.clearAllResponseFilters = og.prototype.Bg;
        og.prototype.unregisterResponseFilter = og.prototype.jj;
        og.prototype.registerResponseFilter = og.prototype.Oi;
        og.prototype.clearAllRequestFilters = og.prototype.Ag;
        og.prototype.unregisterRequestFilter = og.prototype.ij;
        og.prototype.registerRequestFilter = og.prototype.Ni;
        og.unregisterScheme = function (a) {
            delete rg[a]
        };
        og.registerScheme = pg;
        og.prototype.setForceHTTPS = og.prototype.gg;
        og.prototype.setForceHTTP = og.prototype.fg;

        function ug() {
            this.g = 0
        }

        og.NumBytesRemainingClass = ug;

        function vg(a, b, c) {
            cg.call(this, a, b);
            this.h = c
        }

        oa(vg, cg);
        og.PendingRequest = vg;
        var zg = 1;
        og.RequestType = {
            MANIFEST: 0,
            SEGMENT: zg,
            LICENSE: 2,
            APP: 3,
            TIMING: 4,
            SERVER_CERTIFICATE: 5,
            KEY: 6,
            ADS: 7,
            CONTENT_STEERING: 8
        };
        og.AdvancedRequestType = {
            INIT_SEGMENT: 0,
            MEDIA_SEGMENT: 1,
            MEDIA_PLAYLIST: 2,
            MASTER_PLAYLIST: 3,
            MPD: 4,
            MSS: 5,
            MPD_PATCH: 6
        };
        var qg = 3;
        og.PluginPriority = {FALLBACK: 1, PREFERRED: 2, APPLICATION: qg};
        var rg = {};

        function Bg(a) {
            this.g = !1;
            this.h = new bg;
            this.i = a
        }

        Bg.prototype.destroy = function () {
            var a = this;
            if (this.g) return this.h;
            this.g = !0;
            return this.i().then(function () {
                a.h.resolve()
            }, function () {
                a.h.resolve()
            })
        };

        function Cg(a, b) {
            if (a.g) {
                if (b instanceof T && 7003 == b.code) throw b;
                throw new T(2, 7, 7003, b);
            }
        };

        function Dg(a, b) {
            var c = [];
            a = t(a);
            for (var d = a.next(); !d.done; d = a.next()) c.push(b(d.value));
            return c
        }

        function Fg(a, b) {
            a = t(a);
            for (var c = a.next(); !c.done; c = a.next()) if (!b(c.value)) return !1;
            return !0
        };

        function Gg(a) {
            for (var b = new Map, c = t(Object.keys(a)), d = c.next(); !d.done; d = c.next()) d = d.value, b.set(d, a[d]);
            return b
        }

        function Hg(a) {
            var b = {};
            a.forEach(function (c, d) {
                b[d] = c
            });
            return b
        };

        function Ig(a, b) {
            this.h = Fb(a);
            this.i = b == Jg;
            this.g = 0
        }

        r = Ig.prototype;
        r.oa = function () {
            return this.g < this.h.byteLength
        };
        r.ua = function () {
            return this.g
        };
        r.getLength = function () {
            return this.h.byteLength
        };
        r.T = function () {
            try {
                var a = this.h.getUint8(this.g);
                this.g += 1;
                return a
            } catch (b) {
                throw Kg();
            }
        };
        r.ka = function () {
            try {
                var a = this.h.getUint16(this.g, this.i);
                this.g += 2;
                return a
            } catch (b) {
                throw Kg();
            }
        };
        r.P = function () {
            try {
                var a = this.h.getUint32(this.g, this.i);
                this.g += 4;
                return a
            } catch (b) {
                throw Kg();
            }
        };
        r.bh = function () {
            try {
                var a = this.h.getInt32(this.g, this.i);
                this.g += 4;
                return a
            } catch (b) {
                throw Kg();
            }
        };
        r.Qc = function () {
            try {
                if (this.i) {
                    var a = this.h.getUint32(this.g, !0);
                    var b = this.h.getUint32(this.g + 4, !0)
                } else b = this.h.getUint32(this.g, !1), a = this.h.getUint32(this.g + 4, !1)
            } catch (c) {
                throw Kg();
            }
            if (2097151 < b) throw new T(2, 3, 3001);
            this.g += 8;
            return b * Math.pow(2, 32) + a
        };
        r.rb = function (a) {
            if (this.g + a > this.h.byteLength) throw Kg();
            var b = Ab(this.h, this.g, a);
            this.g += a;
            return b
        };
        r.skip = function (a) {
            if (this.g + a > this.h.byteLength) throw Kg();
            this.g += a
        };
        r.Vi = function (a) {
            if (this.g < a) throw Kg();
            this.g -= a
        };
        r.seek = function (a) {
            if (0 > a || a > this.h.byteLength) throw Kg();
            this.g = a
        };
        r.tc = function () {
            for (var a = this.g; this.oa() && 0 != this.h.getUint8(this.g);) this.g += 1;
            a = Ab(this.h, a, this.g - a);
            this.g += 1;
            return vd(a)
        };

        function Kg() {
            return new T(2, 3, 3E3)
        }

        S("shaka.util.DataViewReader", Ig);
        Ig.prototype.readTerminatedString = Ig.prototype.tc;
        Ig.prototype.seek = Ig.prototype.seek;
        Ig.prototype.rewind = Ig.prototype.Vi;
        Ig.prototype.skip = Ig.prototype.skip;
        Ig.prototype.readBytes = Ig.prototype.rb;
        Ig.prototype.readUint64 = Ig.prototype.Qc;
        Ig.prototype.readInt32 = Ig.prototype.bh;
        Ig.prototype.readUint32 = Ig.prototype.P;
        Ig.prototype.readUint16 = Ig.prototype.ka;
        Ig.prototype.readUint8 = Ig.prototype.T;
        Ig.prototype.getLength = Ig.prototype.getLength;
        Ig.prototype.getPosition = Ig.prototype.ua;
        Ig.prototype.hasMoreData = Ig.prototype.oa;
        var Jg = 1;
        Ig.Endianness = {BIG_ENDIAN: 0, LITTLE_ENDIAN: Jg};

        function Lg() {
            this.i = [];
            this.h = [];
            this.g = !1
        }

        r = Lg.prototype;
        r.box = function (a, b) {
            a = Mg(a);
            this.i[a] = Ng;
            this.h[a] = b;
            return this
        };
        r.S = function (a, b) {
            a = Mg(a);
            this.i[a] = Og;
            this.h[a] = b;
            return this
        };
        r.stop = function () {
            this.g = !0
        };
        r.parse = function (a, b, c) {
            a = new Ig(a, 0);
            for (this.g = !1; a.oa() && !this.g;) this.Oc(0, a, b, c)
        };
        r.Oc = function (a, b, c, d) {
            var e = b.ua();
            if (d && e + 8 > b.getLength()) this.g = !0; else {
                var f = b.P(), g = b.P(), h = Pg(g), k = !1;
                switch (f) {
                    case 0:
                        f = b.getLength() - e;
                        break;
                    case 1:
                        if (d && b.ua() + 8 > b.getLength()) {
                            this.g = !0;
                            return
                        }
                        f = b.Qc();
                        k = !0
                }
                var l = this.h[g];
                if (l) {
                    var m = null, n = null;
                    if (this.i[g] == Og) {
                        if (d && b.ua() + 4 > b.getLength()) {
                            this.g = !0;
                            return
                        }
                        n = b.P();
                        m = n >>> 24;
                        n &= 16777215
                    }
                    g = e + f;
                    c && g > b.getLength() && (g = b.getLength());
                    d && g > b.getLength() ? this.g = !0 : (d = g - b.ua(), b = 0 < d ? b.rb(d) : new Uint8Array(0), b = new Ig(b, 0), l({
                        name: h, parser: this,
                        partialOkay: c || !1, version: m, flags: n, reader: b, size: f, start: e + a, has64BitSize: k
                    }))
                } else b.skip(Math.min(e + f - b.ua(), b.getLength() - b.ua()))
            }
        };

        function Qg(a) {
            for (var b = Rg(a); a.reader.oa() && !a.parser.g;) a.parser.Oc(a.start + b, a.reader, a.partialOkay)
        }

        function Ug(a) {
            for (var b = Rg(a), c = a.reader.P(), d = 0; d < c && (a.parser.Oc(a.start + b, a.reader, a.partialOkay), !a.parser.g); d++) ;
        }

        function Vg(a) {
            var b = Rg(a);
            for (a.reader.skip(78); a.reader.oa() && !a.parser.g;) a.parser.Oc(a.start + b, a.reader, a.partialOkay)
        }

        function Wg(a) {
            var b = Rg(a);
            a.reader.skip(8);
            var c = a.reader.ka();
            a.reader.skip(6);
            2 == c ? a.reader.skip(48) : a.reader.skip(12);
            for (1 == c && a.reader.skip(16); a.reader.oa() && !a.parser.g;) a.parser.Oc(a.start + b, a.reader, a.partialOkay)
        }

        function Xg(a) {
            return function (b) {
                a(b.reader.rb(b.reader.getLength() - b.reader.ua()))
            }
        }

        function Mg(a) {
            var b = 0;
            a = t(a);
            for (var c = a.next(); !c.done; c = a.next()) b = b << 8 | c.value.charCodeAt(0);
            return b
        }

        function Pg(a) {
            return String.fromCharCode(a >> 24 & 255, a >> 16 & 255, a >> 8 & 255, a & 255)
        }

        function Rg(a) {
            return 8 + (a.has64BitSize ? 8 : 0) + (null != a.flags ? 4 : 0)
        }

        S("shaka.util.Mp4Parser", Lg);
        Lg.headerSize = Rg;
        Lg.typeToString = Pg;
        Lg.allData = Xg;
        Lg.audioSampleEntry = Wg;
        Lg.visualSampleEntry = Vg;
        Lg.sampleDescription = Ug;
        Lg.children = Qg;
        Lg.prototype.parseNext = Lg.prototype.Oc;
        Lg.prototype.parse = Lg.prototype.parse;
        Lg.prototype.stop = Lg.prototype.stop;
        Lg.prototype.fullBox = Lg.prototype.S;
        Lg.prototype.box = Lg.prototype.box;
        var Ng = 0, Og = 1;

        function Yg(a) {
            var b = this;
            this.g = [];
            this.h = [];
            this.data = [];
            (new Lg).box("moov", Qg).box("moof", Qg).S("pssh", function (c) {
                if (!(1 < c.version)) {
                    var d = Ab(c.reader.h, -12, c.size);
                    b.data.push(d);
                    b.g.push(Jd(c.reader.rb(16)));
                    if (0 < c.version) {
                        d = c.reader.P();
                        for (var e = 0; e < d; e++) {
                            var f = Jd(c.reader.rb(16));
                            b.h.push(f)
                        }
                    }
                }
            }).parse(a)
        }

        function Zg(a, b, c, d) {
            var e = a.length, f = b.length + 16 + e;
            0 < d && (f += 4 + 16 * c.size);
            var g = new Uint8Array(f), h = Fb(g), k = 0;
            h.setUint32(k, f);
            k += 4;
            h.setUint32(k, 1886614376);
            k += 4;
            1 > d ? h.setUint32(k, 0) : h.setUint32(k, 16777216);
            k += 4;
            g.set(b, k);
            k += b.length;
            if (0 < d) for (h.setUint32(k, c.size), k += 4, b = t(c), c = b.next(); !c.done; c = b.next()) c = Id(c.value), g.set(c, k), k += c.length;
            h.setUint32(k, e);
            g.set(a, k + 4);
            return g
        };/*
 @license
 tXml
 Copyright 2015 Tobias Nickel
 SPDX-License-Identifier: MIT
*/
        function $g(a, b) {
            a = zd(a);
            return ah(a, b)
        }

        function ah(a, b) {
            a = bh(a);
            return !b && a.length ? a[0] : (a = a.find(function (c) {
                return c.tagName === b
            })) ? a : null
        }

        function ch(a) {
            return dh.has(a) ? dh.get(a) : ""
        }

        function bh(a) {
            function b(e, f) {
                f = void 0 === f ? !1 : f;
                for (var g = []; a[d];) if (60 == a.charCodeAt(d)) {
                    if (47 === a.charCodeAt(d + 1)) {
                        f = d + 2;
                        d = a.indexOf(">", d);
                        f = a.substring(f, d);
                        var h = f.indexOf(e);
                        if (-1 == h) {
                            var k = e.indexOf(".");
                            0 < k && (h = f.indexOf(e.substring(0, k)))
                        }
                        if (-1 == h) throw e = a.substring(0, d).split("\n"), Error("Unexpected close tag\nLine: " + (e.length - 1) + "\nColumn: " + (e[e.length - 1].length + 1) + "\nChar: " + a[d]);
                        d + 1 && (d += 1);
                        break
                    } else if (33 === a.charCodeAt(d + 1)) {
                        if (45 == a.charCodeAt(d + 2)) {
                            for (; -1 !== d && (62 !== a.charCodeAt(d) ||
                                45 != a.charCodeAt(d - 1) || 45 != a.charCodeAt(d - 2) || -1 == d);) d = a.indexOf(">", d + 1);
                            -1 === d && (d = a.length)
                        } else if (91 === a.charCodeAt(d + 2) && 91 === a.charCodeAt(d + 8) && "cdata" === a.substr(d + 3, 5).toLowerCase()) {
                            h = a.indexOf("]]\x3e", d);
                            -1 == h ? (g.push(a.substr(d + 9)), d = a.length) : (g.push(a.substring(d + 9, h)), d = h + 3);
                            continue
                        }
                        d++;
                        continue
                    }
                    a:{
                        k = f;
                        d++;
                        var l = c(), m = {};
                        for (h = []; 62 !== a.charCodeAt(d) && a[d];) {
                            var n = a.charCodeAt(d);
                            if (64 < n && 91 > n || 96 < n && 123 > n) {
                                n = c();
                                for (var p = a.charCodeAt(d); p && 39 !== p && 34 !== p && !(64 < p && 91 > p || 96 < p && 123 >
                                    p) && 62 !== p;) d++, p = a.charCodeAt(d);
                                var q = d + 1;
                                d = a.indexOf(a[d], q);
                                q = a.slice(q, d);
                                if (39 === p || 34 === p) {
                                    if (-1 === d) {
                                        k = {tagName: l, attributes: m, children: h, parent: null};
                                        for (l = 0; l < h.length; l++) "string" !== typeof h[l] && (h[l].parent = k);
                                        h = k;
                                        break a
                                    }
                                } else q = null, d--;
                                n.startsWith("xmlns:") && dh.set(q, n.split(":")[1]);
                                "tt" === l && "xml:space" === n && "preserve" === q && (k = !0);
                                m[n] = q
                            }
                            d++
                        }
                        47 !== a.charCodeAt(d - 1) ? (d++, h = b(l, k)) : d++;
                        k = {tagName: l, attributes: m, children: h, parent: null};
                        l = h.length;
                        for (m = 0; m < l; m++) n = h[m], "string" !== typeof n ?
                            n.parent = k : m == l - 1 && "\n" == n && h.pop();
                        h = k
                    }
                    g.push(h);
                    if ("string" === typeof h) break;
                    "?" === h.tagName[0] && h.children && (g.push.apply(g, x(h.children)), h.children = [])
                } else h = d, d = a.indexOf("<", d) - 1, -2 === d && (d = a.length), h = a.slice(h, d + 1), f ? 0 < h.length && g.push(h) : g.length && 1 == h.length && "\n" == h[0] ? g.push(h) : 0 < h.trim().length && g.push(h), d++;
                return g
            }

            function c() {
                for (var e = d; -1 === "\r\n\t>/= ".indexOf(a[d]) && a[d];) d++;
                return a.slice(e, d)
            }

            var d = 0;
            return b("")
        }

        function eh(a) {
            return "string" === typeof a
        }

        function fh(a) {
            var b = [];
            if (!a.children) return [];
            a = t(a.children);
            for (var c = a.next(); !c.done; c = a.next()) c = c.value, "string" !== typeof c && b.push(c);
            return b
        }

        function gh(a, b) {
            var c = [];
            if (!a.children) return [];
            a = t(a.children);
            for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.tagName === b && c.push(d);
            return c
        }

        function hh(a) {
            if ("string" === typeof a) return Dd(a);
            a = a.children.reduce(function (b, c) {
                return "string" === typeof c ? b + c : b
            }, "");
            return "" === a ? null : Dd(a)
        }

        function ih(a) {
            if (!Array.from(a.children).every(function (b) {
                return "string" === typeof b
            })) return null;
            (a = hh(a)) && (a = a.trim());
            return a
        }

        function jh(a, b, c) {
            c = void 0 === c ? [] : c;
            a.tagName === b && c.push(a);
            if (a.children) {
                a = t(a.children);
                for (var d = a.next(); !d.done; d = a.next()) jh(d.value, b, c)
            }
            return c
        }

        function kh(a, b) {
            a = gh(a, b);
            return 1 != a.length ? null : a[0]
        }

        function lh(a, b, c) {
            a = mh(a, b, c);
            return 1 != a.length ? null : a[0]
        }

        function nh(a, b, c, d) {
            d = void 0 === d ? null : d;
            var e = null;
            a = a.attributes[b];
            null != a && (e = c(a));
            return null == e ? d : e
        }

        function oh(a, b, c) {
            b = ch(b);
            return a.attributes[b + ":" + c] || null
        }

        function mh(a, b, c) {
            b = ch(b);
            var d = [];
            if (a.children) {
                a = t(a.children);
                for (var e = a.next(); !e.done; e = a.next()) (e = e.value) && e.tagName === b + ":" + c && d.push(e)
            }
            return d
        }

        function ph(a, b, c) {
            b = t(b);
            for (var d = b.next(); !d.done; d = b.next()) if (d = oh(a, d.value, c)) return d;
            return null
        }

        function qh(a) {
            if (!a) return null;
            /^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a) && (a += "Z");
            a = Date.parse(a);
            return isNaN(a) ? null : a / 1E3
        }

        function rh(a) {
            if (!a) return null;
            a = RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(a);
            if (!a) return null;
            a = 31536E3 * Number(a[1] || null) + 2592E3 * Number(a[2] || null) + 86400 * Number(a[3] || null) + 3600 * Number(a[4] || null) + 60 * Number(a[5] || null) + Number(a[6] || null);
            return isFinite(a) ? a : null
        }

        function sh(a) {
            var b = /([0-9]+)-([0-9]+)/.exec(a);
            if (!b) return null;
            a = Number(b[1]);
            if (!isFinite(a)) return null;
            b = Number(b[2]);
            return isFinite(b) ? {start: a, end: b} : null
        }

        function th(a) {
            a = Number(a);
            return 0 === a % 1 ? a : null
        }

        function uh(a) {
            a = Number(a);
            return 0 === a % 1 && 0 < a ? a : null
        }

        function vh(a) {
            a = Number(a);
            return 0 === a % 1 && 0 <= a ? a : null
        }

        function wh(a) {
            a = Number(a);
            return isNaN(a) ? null : a
        }

        function xh(a) {
            return a ? "true" === a.toLowerCase() : !1
        }

        function yh(a) {
            var b;
            var c = (b = a.match(/^(\d+)\/(\d+)$/)) ? Number(b[1]) / Number(b[2]) : Number(a);
            return isNaN(c) ? null : c
        }

        function zh(a) {
            var b = [];
            a = Dd(a).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/);
            a = t(a);
            for (var c = a.next(); !c.done; c = a.next()) {
                c = c.value;
                var d = c.match(/^([\w]+)/);
                if (d) {
                    var e = c.match(/(@id='(.*?)')/), f = c.match(/\[(\d+)\]/);
                    b.push({
                        name: d[0],
                        id: e ? e[0].match(/'(.*?)'/)[0].replace(/'/gm, "") : null,
                        position: f ? Number(f[1]) - 1 : null,
                        Vb: c.split("/@")[1] || null
                    })
                } else c.startsWith("@") && b.length && (b[b.length - 1].Vb = c.slice(1))
            }
            return b
        }

        function Ah(a, b) {
            var c = zh(b.attributes.sel || "");
            if (c.length) {
                var d = c[c.length - 1], e = b.attributes.pos || null;
                c = d.position;
                null === c ? c = "prepend" === e ? 0 : a.length : "prepend" === e ? --c : "after" === e && ++c;
                e = b.tagName;
                (d = d.Vb) ? Bh(a[c], e, d, ih(b) || "") : ("remove" !== e && "replace" !== e || a.splice(c, 1), "add" !== e && "replace" !== e || a.splice.apply(a, [c, 0].concat(x(b.children))))
            }
        }

        function Bh(a, b, c, d) {
            if ("remove" === b) delete a.attributes[c]; else if ("add" === b || "replace" === b) a.attributes[c] = d
        }

        function Ch(a, b, c) {
            b = void 0 === b ? !0 : b;
            c = void 0 === c ? !0 : c;
            var d = document.createElement(a.tagName), e;
            for (e in a.attributes) d.setAttribute(e, a.attributes[e]);
            b && a.parent && "?xml" != a.parent.tagName && Ch(a.parent, !0, !1).appendChild(d);
            if (c) for (a = t(a.children), b = a.next(); !b.done; b = a.next()) b = b.value, c = void 0, "string" == typeof b ? c = new Text(b) : c = Ch(b, !1, !0), d.appendChild(c);
            return d
        }

        var dh = new Map([]);

        function Dh(a) {
            var b = this;
            this.C = a;
            this.H = new Set;
            this.m = this.s = null;
            this.fa = this.da = !1;
            this.I = 0;
            this.g = null;
            this.B = new gb;
            this.i = new Map;
            this.A = new Map;
            this.l = new bg;
            this.h = null;
            this.o = function (c) {
                2 == c.severity && b.l.reject(c);
                a.onError(c)
            };
            this.Z = new Map;
            this.ea = new Map;
            this.L = new Tc(function () {
                return Eh(b)
            });
            this.R = !1;
            this.N = [];
            this.U = !1;
            this.K = new Tc(function () {
                Fh(b)
            });
            this.l.catch(function () {
            });
            this.j = new Bg(function () {
                return Gh(b)
            });
            this.aa = !1;
            this.F = this.G = null
        }

        r = Dh.prototype;
        r.destroy = function () {
            return this.j.destroy()
        };

        function Gh(a) {
            return O(function (b) {
                switch (b.g) {
                    case 1:
                        return a.B.release(), a.B = null, a.l.reject(), a.K.stop(), a.K = null, a.L.stop(), a.L = null, G(b, Hh(a), 2);
                    case 2:
                        if (!a.m) {
                            b.u(3);
                            break
                        }
                        sa(b, 4);
                        return G(b, a.m.setMediaKeys(null), 6);
                    case 6:
                        va(b, 5);
                        break;
                    case 4:
                        wa(b);
                    case 5:
                        a.m = null;
                    case 3:
                        a.g = null, a.H.clear(), a.s = null, a.A = new Map, a.h = null, a.o = function () {
                        }, a.C = null, a.aa = !1, a.G = null, H(b)
                }
            })
        }

        r.configure = function (a) {
            this.h = a;
            this.K && this.K.Sa(this.h.updateExpirationTime)
        };

        function Ih(a, b, c) {
            a.fa = !0;
            a.A = new Map;
            a.R = c;
            return Jh(a, b)
        }

        function Kh(a, b, c) {
            a.A = new Map;
            c = t(c);
            for (var d = c.next(); !d.done; d = c.next()) a.A.set(d.value, {initData: null, initDataType: null});
            c = t(a.h.persistentSessionsMetadata);
            for (d = c.next(); !d.done; d = c.next()) d = d.value, a.A.set(d.sessionId, {
                initData: d.initData,
                initDataType: d.initDataType
            });
            a.R = 0 < a.A.size;
            return Jh(a, b)
        }

        function Lh(a, b, c, d, e, f) {
            var g = new Map;
            e = {
                audioCapabilities: e,
                videoCapabilities: f,
                distinctiveIdentifier: "optional",
                persistentState: "required",
                sessionTypes: ["persistent-license"],
                label: b
            };
            e.drmInfos = [{
                keySystem: b,
                licenseServerUri: c,
                distinctiveIdentifierRequired: !1,
                persistentStateRequired: !0,
                audioRobustness: "",
                videoRobustness: "",
                serverCertificate: d,
                serverCertificateUri: "",
                initData: null,
                keyIds: null
            }];
            g.set(b, e);
            return Mh(a, g, [])
        }

        function Jh(a, b) {
            var c, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y;
            return O(function (D) {
                if (1 == D.g) {
                    if (c = Nh(a)) for (d = t(b), e = d.next(); !e.done; e = d.next()) f = e.value, f.video && (f.video.drmInfos = [c]), f.audio && (f.audio.drmInfos = [c]);
                    g = b.some(function (z) {
                        return z.video && z.video.drmInfos.length || z.audio && z.audio.drmInfos.length ? !0 : !1
                    });
                    g || (h = Gg(a.h.servers), Oh(b, h));
                    k = new Set;
                    l = t(b);
                    for (e = l.next(); !e.done; e = l.next()) for (m = e.value, n = Ph(m), p = t(n), q = p.next(); !q.done; q = p.next()) u = q.value, k.add(u);
                    w = t(k);
                    for (q = w.next(); !q.done; q =
                        w.next()) v = q.value, Qh(v, Gg(a.h.servers), Gg(a.h.advanced || {}), a.h.keySystemsMapping);
                    return G(D, Ye(b, a.R, a.aa, a.h.preferredKeySystems), 2)
                }
                Cg(a.j);
                A = g || Object.keys(a.h.servers).length;
                if (!A) return a.da = !0, D.return(Promise.resolve());
                y = Mh(a, void 0, b);
                return D.return(g ? y : y.catch(function () {
                }))
            })
        }

        function Rh(a) {
            var b;
            return O(function (c) {
                switch (c.g) {
                    case 1:
                        if (a.m.mediaKeys) return c.return();
                        if (!a.G) {
                            c.u(2);
                            break
                        }
                        return G(c, a.G, 3);
                    case 3:
                        return Cg(a.j), c.return();
                    case 2:
                        return sa(c, 4), a.G = a.m.setMediaKeys(a.s), G(c, a.G, 6);
                    case 6:
                        va(c, 5);
                        break;
                    case 4:
                        b = wa(c), a.o(new T(2, 6, 6003, b.message));
                    case 5:
                        Cg(a.j), H(c)
                }
            })
        }

        function Sh(a, b) {
            return O(function (c) {
                if (1 == c.g) return G(c, Rh(a), 2);
                Th(a, b.initDataType, Ab(b.initData));
                H(c)
            })
        }

        r.Ub = function (a) {
            var b = this;
            return O(function (c) {
                if (1 == c.g) {
                    if (!b.s) return b.B.ha(a, "encrypted", function () {
                        b.o(new T(2, 6, 6010))
                    }), c.return();
                    b.m = a;
                    b.B.ha(b.m, "play", function () {
                        for (var d = t(b.N), e = d.next(); !e.done; e = d.next()) Uh(b, e.value);
                        b.U = !0;
                        b.N = []
                    });
                    "webkitCurrentPlaybackTargetIsWireless" in b.m && b.B.D(b.m, "webkitcurrentplaybacktargetiswirelesschanged", function () {
                        return Hh(b)
                    });
                    b.F = b.g ? b.g.initData.find(function (d) {
                        return 0 < d.initData.length
                    }) || null : null;
                    return b.F || "com.apple.fps" !== b.g.keySystem ||
                    b.A.size ? G(c, Rh(b), 2) : c.u(2)
                }
                Vh(b).catch(function () {
                });
                b.F || b.A.size || b.h.parseInbandPsshEnabled || b.B.D(b.m, "encrypted", function (d) {
                    return Sh(b, d)
                });
                H(c)
            })
        };

        function Wh(a) {
            var b, c, d, e, f;
            return O(function (g) {
                switch (g.g) {
                    case 1:
                        if (!a.s || !a.g) return g.return();
                        if (!a.g.serverCertificateUri || a.g.serverCertificate && a.g.serverCertificate.length) {
                            g.u(2);
                            break
                        }
                        b = tg([a.g.serverCertificateUri], a.h.retryParameters);
                        sa(g, 3);
                        c = a.C.Nb.request(5, b);
                        return G(g, c.promise, 5);
                    case 5:
                        d = g.h;
                        a.g.serverCertificate = Ab(d.data);
                        va(g, 4);
                        break;
                    case 3:
                        throw e = wa(g), new T(2, 6, 6017, e);
                    case 4:
                        if (a.j.g) return g.return();
                    case 2:
                        if (!a.g.serverCertificate || !a.g.serverCertificate.length) return g.return();
                        sa(g, 6);
                        return G(g, a.s.setServerCertificate(a.g.serverCertificate), 8);
                    case 8:
                        va(g, 0);
                        break;
                    case 6:
                        throw f = wa(g), new T(2, 6, 6004, f.message);
                }
            })
        }

        function Xh(a, b) {
            var c, d, e;
            return O(function (f) {
                if (1 == f.g) return G(f, Yh(a, b, {initData: null, initDataType: null}), 2);
                if (3 != f.g) {
                    c = f.h;
                    if (!c) return f.return();
                    d = [];
                    if (e = a.i.get(c)) e.mb = new bg, d.push(e.mb);
                    d.push(c.remove());
                    return G(f, Promise.all(d), 3)
                }
                a.i.delete(c);
                H(f)
            })
        }

        function Vh(a) {
            var b, c, d, e, f;
            return O(function (g) {
                if (1 == g.g) {
                    if (!a.A.size) return g.u(2);
                    a.A.forEach(function (h, k) {
                        Yh(a, k, h)
                    });
                    return G(g, a.l, 3)
                }
                if (2 != g.g) {
                    b = a.g && a.g.keyIds || new Set([]);
                    if (0 < b.size && Zh(a)) return g.return(a.l);
                    a.l = new bg;
                    a.l.catch(function () {
                    })
                }
                c = (a.g ? a.g.initData : []) || [];
                d = t(c);
                for (e = d.next(); !e.done; e = d.next()) f = e.value, Th(a, f.initDataType, f.initData);
                $h(a) && a.l.resolve();
                return g.return(a.l)
            })
        }

        function Th(a, b, c) {
            if (c.length) {
                if (a.h.ignoreDuplicateInitData) {
                    var d = a.i.values();
                    d = t(d);
                    for (var e = d.next(); !e.done; e = d.next()) if (yb(c, e.value.initData)) return
                }
                0 < a.i.size && $h(a) && (a.l.resolve(), a.l = new bg, a.l.catch(function () {
                }));
                ai(a, b, c, a.g.sessionType)
            }
        }

        function bi(a) {
            a = a.i.keys();
            a = Dg(a, function (b) {
                return b.sessionId
            });
            return Array.from(a)
        }

        r.Df = function () {
            var a = this, b = this.i.keys();
            b = Dg(b, function (c) {
                var d = a.i.get(c);
                return {sessionId: c.sessionId, sessionType: d.type, initData: d.initData, initDataType: d.initDataType}
            });
            return Array.from(b)
        };
        r.td = function () {
            var a = Infinity, b = this.i.keys();
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, isNaN(c.expiration) || (a = Math.min(a, c.expiration));
            return a
        };
        r.ge = function () {
            return Hg(this.ea)
        };

        function Mh(a, b, c) {
            var d, e, f, g, h, k, l, m, n, p, q, u, w, v, A;
            return O(function (y) {
                switch (y.g) {
                    case 1:
                        d = new Map;
                        if (c.length) {
                            e = ci(a, c, d);
                            y.u(2);
                            break
                        }
                        return G(y, di(a, b), 3);
                    case 3:
                        e = y.h;
                    case 2:
                        f = e;
                        if (!f) throw new T(2, 6, 6001);
                        Cg(a.j);
                        sa(y, 4);
                        a.H.clear();
                        g = f.getConfiguration();
                        h = g.audioCapabilities || [];
                        k = g.videoCapabilities || [];
                        l = t(h);
                        for (m = l.next(); !m.done; m = l.next()) n = m.value, a.H.add(n.contentType.toLowerCase());
                        p = t(k);
                        for (m = p.next(); !m.done; m = p.next()) q = m.value, a.H.add(q.contentType.toLowerCase());
                        if (c.length) {
                            var D =
                                f.keySystem;
                            var z = d.get(f.keySystem);
                            var B = [], C = [], F = [], I = [], L = [], J = new Set, E = new Set;
                            ei(z, B, C, I, F, L, J, E);
                            var K = a.R ? "persistent-license" : "temporary";
                            D = {
                                keySystem: D,
                                encryptionScheme: B[0],
                                licenseServerUri: C[0],
                                distinctiveIdentifierRequired: z[0].distinctiveIdentifierRequired,
                                persistentStateRequired: z[0].persistentStateRequired,
                                sessionType: z[0].sessionType || K,
                                audioRobustness: z[0].audioRobustness || "",
                                videoRobustness: z[0].videoRobustness || "",
                                serverCertificate: I[0],
                                serverCertificateUri: F[0],
                                initData: L,
                                keyIds: J
                            };
                            0 < E.size && (D.keySystemUris = E);
                            z = t(z);
                            for (E = z.next(); !E.done; E = z.next()) E = E.value, E.distinctiveIdentifierRequired && (D.distinctiveIdentifierRequired = E.distinctiveIdentifierRequired), E.persistentStateRequired && (D.persistentStateRequired = E.persistentStateRequired);
                            z = D
                        } else z = f.keySystem, E = b.get(f.keySystem), D = [], B = [], C = [], F = [], I = [], L = new Set, ei(E.drmInfos, D, B, F, C, I, L), z = {
                            keySystem: z,
                            encryptionScheme: D[0],
                            licenseServerUri: B[0],
                            distinctiveIdentifierRequired: "required" == E.distinctiveIdentifier,
                            persistentStateRequired: "required" ==
                                E.persistentState,
                            sessionType: E.sessionTypes[0] || "temporary",
                            audioRobustness: (E.audioCapabilities ? E.audioCapabilities[0].robustness : "") || "",
                            videoRobustness: (E.videoCapabilities ? E.videoCapabilities[0].robustness : "") || "",
                            serverCertificate: F[0],
                            serverCertificateUri: C[0],
                            initData: I,
                            keyIds: L
                        };
                        a.g = z;
                        if (!a.g.licenseServerUri) throw new T(2, 6, 6012, a.g.keySystem);
                        return G(y, f.createMediaKeys(), 6);
                    case 6:
                        u = y.h;
                        Cg(a.j);
                        a.s = u;
                        if (!("" != a.h.minHdcpVersion && "getStatusForPolicy" in a.s)) {
                            y.u(7);
                            break
                        }
                        sa(y, 8);
                        return G(y,
                            a.s.getStatusForPolicy({minHdcpVersion: a.h.minHdcpVersion}), 10);
                    case 10:
                        w = y.h;
                        if ("usable" != w) throw new T(2, 6, 6018);
                        Cg(a.j);
                        va(y, 7, 4);
                        break;
                    case 8:
                        v = wa(y, 4);
                        if (v instanceof T) throw v;
                        throw new T(2, 6, 6019, v.message);
                    case 7:
                        return a.da = !0, G(y, Wh(a), 11);
                    case 11:
                        Cg(a.j);
                        va(y, 0);
                        break;
                    case 4:
                        A = wa(y);
                        Cg(a.j, A);
                        a.g = null;
                        a.H.clear();
                        if (A instanceof T) throw A;
                        throw new T(2, 6, 6002, A.message);
                }
            })
        }

        function ci(a, b, c) {
            for (var d = t(b), e = d.next(); !e.done; e = d.next()) {
                var f = t(Ph(e.value));
                for (e = f.next(); !e.done; e = f.next()) e = e.value, c.has(e.keySystem) || c.set(e.keySystem, []), c.get(e.keySystem).push(e)
            }
            if (1 == c.size && c.has("")) throw new T(2, 6, 6E3);
            d = {};
            a = t(a.h.preferredKeySystems);
            for (e = a.next(); !e.done; d = {Te: d.Te}, e = a.next()) for (d.Te = e.value, f = t(b), e = f.next(); !e.done; e = f.next()) if (e = e.value.decodingInfos.find(function (l) {
                return function (m) {
                    return m.supported && null != m.keySystemAccess && m.keySystemAccess.keySystem ==
                        l.Te
                }
            }(d))) return e.keySystemAccess;
            a = t([!0, !1]);
            for (e = a.next(); !e.done; e = a.next()) for (d = e.value, f = t(b), e = f.next(); !e.done; e = f.next()) {
                var g = t(e.value.decodingInfos);
                for (e = g.next(); !e.done; e = g.next()) {
                    var h = e.value;
                    if (h.supported && h.keySystemAccess) {
                        e = c.get(h.keySystemAccess.keySystem);
                        var k = t(e);
                        for (e = k.next(); !e.done; e = k.next()) if (!!e.value.licenseServerUri == d) return h.keySystemAccess
                    }
                }
            }
            return null
        }

        function di(a, b) {
            var c, d, e, f, g, h, k, l, m, n, p, q, u, w, v;
            return O(function (A) {
                switch (A.g) {
                    case 1:
                        if (1 == b.size && b.has("")) throw new T(2, 6, 6E3);
                        d = t(b.values());
                        for (e = d.next(); !e.done; e = d.next()) f = e.value, 0 == f.audioCapabilities.length && delete f.audioCapabilities, 0 == f.videoCapabilities.length && delete f.videoCapabilities;
                        g = t(a.h.preferredKeySystems);
                        h = g.next();
                    case 2:
                        if (h.done) {
                            A.u(4);
                            break
                        }
                        k = h.value;
                        if (!b.has(k)) {
                            A.u(3);
                            break
                        }
                        l = b.get(k);
                        sa(A, 6);
                        return G(A, navigator.requestMediaKeySystemAccess(k, [l]), 8);
                    case 8:
                        return c =
                            A.h, A.return(c);
                    case 6:
                        wa(A);
                    case 7:
                        Cg(a.j);
                    case 3:
                        h = g.next();
                        A.u(2);
                        break;
                    case 4:
                        m = t([!0, !1]), n = m.next();
                    case 9:
                        if (n.done) {
                            A.u(11);
                            break
                        }
                        p = n.value;
                        q = t(b.keys());
                        h = q.next();
                    case 12:
                        if (h.done) {
                            n = m.next();
                            A.u(9);
                            break
                        }
                        u = h.value;
                        w = b.get(u);
                        v = w.drmInfos.some(function (y) {
                            return !!y.licenseServerUri
                        });
                        if (v != p) {
                            A.u(13);
                            break
                        }
                        sa(A, 15);
                        return G(A, navigator.requestMediaKeySystemAccess(u, [w]), 17);
                    case 17:
                        return c = A.h, A.return(c);
                    case 15:
                        wa(A);
                    case 16:
                        Cg(a.j);
                    case 13:
                        h = q.next();
                        A.u(12);
                        break;
                    case 11:
                        return A.return(c)
                }
            })
        }

        function Nh(a) {
            a = Gg(a.h.clearKeys);
            return 0 == a.size ? null : Rd(a)
        }

        function fi(a) {
            $h(a) && a.l.resolve()
        }

        function gi(a, b) {
            (new Tc(function () {
                b.loaded = !0;
                fi(a)
            })).Y(hi)
        }

        function Yh(a, b, c) {
            var d, e, f, g, h, k, l;
            return O(function (m) {
                switch (m.g) {
                    case 1:
                        try {
                            d = a.s.createSession("persistent-license")
                        } catch (n) {
                            return e = new T(2, 6, 6005, n.message), a.o(e), m.return(Promise.reject(e))
                        }
                        a.B.D(d, "message", function (n) {
                            a.m && a.h.delayLicenseRequestUntilPlayed && a.m.paused && !a.U ? a.N.push(n) : Uh(a, n)
                        });
                        a.B.D(d, "keystatuseschange", function (n) {
                            return ii(a, n)
                        });
                        f = {
                            initData: c.initData,
                            initDataType: c.initDataType,
                            loaded: !1,
                            Rf: Infinity,
                            mb: null,
                            type: "persistent-license"
                        };
                        a.i.set(d, f);
                        sa(m, 2);
                        return G(m,
                            d.load(b), 4);
                    case 4:
                        return g = m.h, Cg(a.j), g || (a.i.delete(d), h = a.h.persistentSessionOnlinePlayback ? 1 : 2, a.o(new T(h, 6, 6013)), f.loaded = !0), gi(a, f), fi(a), m.return(d);
                    case 2:
                        k = wa(m), Cg(a.j, k), a.i.delete(d), l = a.h.persistentSessionOnlinePlayback ? 1 : 2, a.o(new T(l, 6, 6005, k.message)), f.loaded = !0, fi(a);
                    case 3:
                        return m.return(Promise.resolve())
                }
            })
        }

        function ai(a, b, c, d) {
            try {
                var e = a.s.createSession(d)
            } catch (f) {
                a.o(new T(2, 6, 6005, f.message));
                return
            }
            a.B.D(e, "message", function (f) {
                a.m && a.h.delayLicenseRequestUntilPlayed && a.m.paused && !a.U ? a.N.push(f) : Uh(a, f)
            });
            a.B.D(e, "keystatuseschange", function (f) {
                return ii(a, f)
            });
            a.i.set(e, {initData: c, initDataType: b, loaded: !1, Rf: Infinity, mb: null, type: d});
            try {
                c = a.h.initDataTransform(c, b, a.g)
            } catch (f) {
                b = f;
                f instanceof T || (b = new T(2, 6, 6016, f));
                a.o(b);
                return
            }
            a.h.logLicenseExchange && Gd(c);
            e.generateRequest(b, c).catch(function (f) {
                if (!a.j.g) {
                    a.i.delete(e);
                    var g = f.errorCode;
                    if (g && g.systemCode) {
                        var h = g.systemCode;
                        0 > h && (h += Math.pow(2, 32));
                        h = "0x" + h.toString(16)
                    }
                    a.o(new T(2, 6, 6006, f.message, f, h))
                }
            })
        }

        function Uh(a, b) {
            var c, d, e, f, g, h, k, l, m, n, p, q, u, w;
            O(function (v) {
                switch (v.g) {
                    case 1:
                        c = b.target;
                        a.h.logLicenseExchange && Gd(b.message);
                        d = a.i.get(c);
                        e = a.g.licenseServerUri;
                        f = a.h.advanced[a.g.keySystem];
                        "individualization-request" == b.messageType && f && f.individualizationServer && (e = f.individualizationServer);
                        g = tg([e], a.h.retryParameters);
                        g.body = b.message;
                        g.method = "POST";
                        g.licenseRequestType = b.messageType;
                        g.sessionId = c.sessionId;
                        g.drmInfo = a.g;
                        d && (g.initData = d.initData, g.initDataType = d.initDataType);
                        if (f && f.headers) for (h in f.headers) g.headers[h] =
                            f.headers[h];
                        if (Pc(a.g.keySystem)) {
                            var A = xd(g.body, !0, !0);
                            if (A.includes("PlayReadyKeyMessage")) {
                                A = ah(A, "PlayReadyKeyMessage");
                                var y = jh(A, "HttpHeader");
                                y = t(y);
                                for (var D = y.next(); !D.done; D = y.next()) {
                                    var z = D.value;
                                    D = jh(z, "name")[0];
                                    z = jh(z, "value")[0];
                                    g.headers[hh(D)] = hh(z)
                                }
                                A = jh(A, "Challenge")[0];
                                g.body = Hd(hh(A))
                            } else g.headers["Content-Type"] = "text/xml; charset=utf-8"
                        }
                        k = Date.now();
                        sa(v, 2);
                        m = a.C.Nb.request(2, g);
                        return G(v, m.promise, 4);
                    case 4:
                        l = v.h;
                        va(v, 3);
                        break;
                    case 2:
                        n = wa(v);
                        if (a.j.g) return v.return();
                        p = new T(2, 6, 6007, n);
                        1 == a.i.size ? (a.o(p), d && d.mb && d.mb.reject(p)) : (d && d.mb && d.mb.reject(p), a.i.delete(c), $h(a) && (a.l.resolve(), a.L.Y(.1)));
                        return v.return();
                    case 3:
                        if (a.j.g) return v.return();
                        a.I += (Date.now() - k) / 1E3;
                        a.h.logLicenseExchange && Gd(l.data);
                        sa(v, 5);
                        return G(v, c.update(l.data), 7);
                    case 7:
                        va(v, 6);
                        break;
                    case 5:
                        return q = wa(v), u = new T(2, 6, 6008, q.message), a.o(u), d && d.mb && d.mb.reject(u), v.return();
                    case 6:
                        if (a.j.g) return v.return();
                        w = new U("drmsessionupdate");
                        a.C.onEvent(w);
                        d && (d.mb && d.mb.resolve(),
                            gi(a, d));
                        H(v)
                }
            })
        }

        function ii(a, b) {
            b = b.target;
            var c = a.i.get(b), d = !1;
            b.keyStatuses.forEach(function (f, g) {
                if ("string" == typeof g) {
                    var h = g;
                    g = f;
                    f = h
                }
                if (Pc(a.g.keySystem) && 16 == g.byteLength && (Yc() || jd())) {
                    h = Fb(g);
                    var k = h.getUint32(0, !0), l = h.getUint16(4, !0), m = h.getUint16(6, !0);
                    h.setUint32(0, k, !1);
                    h.setUint16(4, l, !1);
                    h.setUint16(6, m, !1)
                }
                "status-pending" != f && (c.loaded = !0);
                "expired" == f && (d = !0);
                g = Jd(g).slice(0, 32);
                a.Z.set(g, f)
            });
            var e = b.expiration - Date.now();
            (0 > e || d && 1E3 > e) && c && !c.mb && (a.i.delete(b), b.close().catch(function () {
            }));
            $h(a) &&
            (a.l.resolve(), a.L.Y(ji))
        }

        function Eh(a) {
            var b = a.Z, c = a.ea;
            c.clear();
            b.forEach(function (d, e) {
                return c.set(e, d)
            });
            b = Array.from(c.values());
            b.length && b.every(function (d) {
                return "expired" == d
            }) && a.o(new T(2, 6, 6014));
            a.C.Ae(Hg(c))
        }

        function ki() {
            var a, b, c, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L;
            return O(function (J) {
                if (1 == J.g) {
                    a = "org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" ");
                    b = ["SW_SECURE_CRYPTO", "SW_SECURE_DECODE", "HW_SECURE_CRYPTO", "HW_SECURE_DECODE", "HW_SECURE_ALL"];
                    c = ["150", "2000", "3000"];
                    d = {"com.widevine.alpha": b, "com.microsoft.playready.recommendation": c};
                    e = [{contentType: 'video/mp4; codecs="avc1.42E01E"'},
                        {contentType: 'video/webm; codecs="vp8"'}];
                    f = [{contentType: 'audio/mp4; codecs="mp4a.40.2"'}, {contentType: 'audio/webm; codecs="opus"'}];
                    g = {videoCapabilities: e, audioCapabilities: f, initDataTypes: ["cenc", "sinf", "skd", "keyids"]};
                    h = [null, "cenc", "cbcs", "cbcs-1-9"];
                    k = new Map;
                    l = function (E, K) {
                        var N, M, P, R, Q, W, aa, Sa;
                        return O(function (ta) {
                            switch (ta.g) {
                                case 1:
                                    return sa(ta, 2), G(ta, K.createMediaKeys(), 4);
                                case 4:
                                    va(ta, 3);
                                    break;
                                case 2:
                                    return wa(ta), ta.return();
                                case 3:
                                    M = (N = K.getConfiguration().sessionTypes) ? N.includes("persistent-license") :
                                        !1, bd() && (M = !1), P = K.getConfiguration().videoCapabilities, R = K.getConfiguration().audioCapabilities, Q = {
                                        persistentState: M,
                                        encryptionSchemes: [],
                                        videoRobustnessLevels: [],
                                        audioRobustnessLevels: []
                                    }, k.has(E) && k.get(E) ? Q = k.get(E) : k.set(E, Q), (W = P[0].encryptionScheme) && !Q.encryptionSchemes.includes(W) && Q.encryptionSchemes.push(W), (aa = P[0].robustness) && !Q.videoRobustnessLevels.includes(aa) && Q.videoRobustnessLevels.push(aa), (Sa = R[0].robustness) && !Q.audioRobustnessLevels.includes(Sa) && Q.audioRobustnessLevels.push(Sa),
                                        H(ta)
                            }
                        })
                    };
                    m = function (E, K, N, M) {
                        var P, R, Q, W, aa, Sa, ta, Ma, Ya;
                        return O(function (Ta) {
                            switch (Ta.g) {
                                case 1:
                                    sa(Ta, 2);
                                    P = Me(g);
                                    R = t(P.videoCapabilities);
                                    for (Q = R.next(); !Q.done; Q = R.next()) W = Q.value, W.encryptionScheme = K, W.robustness = N;
                                    aa = t(P.audioCapabilities);
                                    for (Q = aa.next(); !Q.done; Q = aa.next()) Sa = Q.value, Sa.encryptionScheme = K, Sa.robustness = M;
                                    ta = Me(P);
                                    ta.persistentState = "required";
                                    ta.sessionTypes = ["persistent-license"];
                                    Ma = [ta, P];
                                    return G(Ta, navigator.requestMediaKeySystemAccess(E, Ma), 4);
                                case 4:
                                    return Ya = Ta.h,
                                        G(Ta, l(E, Ya), 5);
                                case 5:
                                    va(Ta, 0);
                                    break;
                                case 2:
                                    wa(Ta), H(Ta)
                            }
                        })
                    };
                    n = function (E, K, N, M) {
                        var P, R, Q;
                        return O(function (W) {
                            switch (W.g) {
                                case 1:
                                    return sa(W, 2), P = {
                                        type: "media-source",
                                        video: {
                                            contentType: e[0].contentType,
                                            width: 640,
                                            height: 480,
                                            bitrate: 1,
                                            framerate: 1
                                        },
                                        audio: {contentType: f[0].contentType, channels: 2, bitrate: 1, samplerate: 1},
                                        keySystemConfiguration: {
                                            keySystem: E,
                                            video: {encryptionScheme: K, robustness: N},
                                            audio: {encryptionScheme: K, robustness: M}
                                        }
                                    }, G(W, navigator.mediaCapabilities.decodingInfo(P), 4);
                                case 4:
                                    return R =
                                        W.h, Q = R.keySystemAccess, G(W, l(E, Q), 5);
                                case 5:
                                    va(W, 0);
                                    break;
                                case 2:
                                    wa(W), H(W)
                            }
                        })
                    };
                    p = t(a);
                    for (q = p.next(); !q.done; q = p.next()) u = q.value, k.set(u, null);
                    w = [];
                    v = t(h);
                    for (A = v.next(); !A.done; A = v.next()) for (y = A.value, D = t(a), q = D.next(); !q.done; q = D.next()) z = q.value, "org.w3.clearkey" === z && md() || (w.push(m(z, y, "", "")), w.push(n(z, y, "", "")));
                    B = t(a);
                    for (q = B.next(); !q.done; q = B.next()) for (C = q.value, F = t(d[C] || []), I = F.next(); !I.done; I = F.next()) L = I.value, w.push(m(C, null, L, "")), w.push(m(C, null, "", L)), w.push(n(C, null, L, "")),
                        w.push(n(C, null, "", L));
                    return G(J, Promise.all(w), 2)
                }
                return J.return(Hg(k))
            })
        }

        function li(a) {
            var b;
            return O(function (c) {
                if (1 == c.g) return b = new Promise(function (d, e) {
                    (new Tc(e)).Y(mi)
                }), sa(c, 2), G(c, Promise.race([Promise.all([a.close(), a.closed]), b]), 4);
                if (2 != c.g) return va(c, 0);
                wa(c);
                H(c)
            })
        }

        function Hh(a) {
            var b;
            return O(function (c) {
                b = Array.from(a.i.entries());
                a.i.clear();
                return G(c, Promise.all(b.map(function (d) {
                    d = t(d);
                    var e = d.next().value, f = d.next().value;
                    return O(function (g) {
                        if (1 == g.g) return sa(g, 2), a.fa || a.A.has(e.sessionId) || "persistent-license" !== f.type || a.h.persistentSessionOnlinePlayback ? G(g, li(e), 5) : G(g, e.remove(), 5);
                        if (2 != g.g) return va(g, 0);
                        wa(g);
                        H(g)
                    })
                })), 0)
            })
        }

        function Ph(a) {
            return (a.video ? a.video.drmInfos : []).concat(a.audio ? a.audio.drmInfos : [])
        }

        function Fh(a) {
            a.i.forEach(function (b, c) {
                var d = b.Rf, e = c.expiration;
                isNaN(e) && (e = Infinity);
                e != d && (a.C.onExpirationUpdated(c.sessionId, e), b.Rf = e)
            })
        }

        function $h(a) {
            a = a.i.values();
            return Fg(a, function (b) {
                return b.loaded
            })
        }

        function Zh(a) {
            for (var b = t(a.g && a.g.keyIds || new Set([])), c = b.next(); !c.done; c = b.next()) if ("usable" !== a.Z.get(c.value)) return !1;
            return !0
        }

        function Oh(a, b) {
            var c = [];
            b.forEach(function (d, e) {
                c.push({
                    keySystem: e,
                    licenseServerUri: d,
                    distinctiveIdentifierRequired: !1,
                    persistentStateRequired: !1,
                    audioRobustness: "",
                    videoRobustness: "",
                    serverCertificate: null,
                    serverCertificateUri: "",
                    initData: [],
                    keyIds: new Set
                })
            });
            a = t(a);
            for (b = a.next(); !b.done; b = a.next()) b = b.value, b.video && (b.video.drmInfos = c), b.audio && (b.audio.drmInfos = c)
        }

        function ei(a, b, c, d, e, f, g, h) {
            var k = [], l = {};
            a = t(a);
            for (var m = a.next(); !m.done; l = {na: l.na}, m = a.next()) {
                l.na = m.value;
                b.includes(l.na.encryptionScheme) || b.push(l.na.encryptionScheme);
                "org.w3.clearkey" == l.na.keySystem && l.na.licenseServerUri.startsWith("data:application/json;base64,") ? k.includes(l.na.licenseServerUri) || k.push(l.na.licenseServerUri) : c.includes(l.na.licenseServerUri) || c.push(l.na.licenseServerUri);
                e.includes(l.na.serverCertificateUri) || e.push(l.na.serverCertificateUri);
                l.na.serverCertificate &&
                (d.some(function (q) {
                    return function (u) {
                        return yb(u, q.na.serverCertificate)
                    }
                }(l)) || d.push(l.na.serverCertificate));
                if (l.na.initData) {
                    m = {};
                    for (var n = t(l.na.initData), p = n.next(); !p.done; m = {Ud: m.Ud}, p = n.next()) m.Ud = p.value, f.some(function (q) {
                        return function (u) {
                            var w = q.Ud;
                            return u.keyId && u.keyId == w.keyId ? !0 : u.initDataType == w.initDataType && yb(u.initData, w.initData)
                        }
                    }(m)) || f.push(m.Ud)
                }
                if (l.na.keyIds) for (m = t(l.na.keyIds), n = m.next(); !n.done; n = m.next()) g.add(n.value);
                if (l.na.keySystemUris && h) for (m = t(l.na.keySystemUris),
                                                      n = m.next(); !n.done; n = m.next()) h.add(n.value)
            }
            if (1 == k.length) c.push(k[0]); else if (0 < k.length) {
                b = [];
                k = t(k);
                for (d = k.next(); !d.done; d = k.next()) d = window.atob(d.value.split("data:application/json;base64,").pop()), d = JSON.parse(d), b.push.apply(b, x(d.keys));
                k = JSON.stringify({keys: b});
                c.push("data:application/json;base64," + window.btoa(k))
            }
        }

        function Qh(a, b, c, d) {
            var e = a.keySystem;
            if (e && ("org.w3.clearkey" != e || !a.licenseServerUri)) {
                b.size && (b = b.get(e) || "", a.licenseServerUri = b);
                a.keyIds || (a.keyIds = new Set);
                if (c = c.get(e)) a.distinctiveIdentifierRequired || (a.distinctiveIdentifierRequired = c.distinctiveIdentifierRequired), a.persistentStateRequired || (a.persistentStateRequired = c.persistentStateRequired), a.videoRobustness || (a.videoRobustness = c.videoRobustness), a.audioRobustness || (a.audioRobustness = c.audioRobustness), a.serverCertificate || (a.serverCertificate =
                    c.serverCertificate), c.sessionType && (a.sessionType = c.sessionType), a.serverCertificateUri || (a.serverCertificateUri = c.serverCertificateUri);
                d[e] && (a.keySystem = d[e]);
                window.cast && window.cast.__platform__ && "com.microsoft.playready" == e && (a.keySystem = "com.chromecast.playready")
            }
        }

        var mi = 1, hi = 5, ji = .5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
        function ni(a, b, c) {
            this.h = a;
            this.i = b;
            this.g = c
        }

        function oi(a, b) {
            return O(function (c) {
                if (1 == c.g) return G(c, Ue(a.g, b, a.h.drm.preferredKeySystems), 2);
                a.h.streaming.dontChooseCodecs || Pe(b, a.h.preferredVideoCodecs, a.h.preferredAudioCodecs, a.h.preferredDecodingAttributes);
                if (!b.variants.some(tf)) throw new T(2, 4, 4032);
                return c.return(pi(a, b))
            })
        }

        function pi(a, b) {
            var c = Te(b.variants, a.h.restrictions, a.i);
            if (b) {
                var d = a.g ? a.g.g : null;
                if (d && a.g.s) for (var e = t(b.variants), f = e.next(); !f.done; f = e.next()) f = f.value, qi(a, d.keySystem, f.video), qi(a, d.keySystem, f.audio);
                ri(a, b)
            }
            return c
        }

        function qi(a, b, c) {
            if (c) {
                c = t(c.drmInfos);
                for (var d = c.next(); !d.done; d = c.next()) if (d = d.value, d.keySystem == b) {
                    d = t(d.initData || []);
                    for (var e = d.next(); !e.done; e = d.next()) e = e.value, Th(a.g, e.initDataType, e.initData)
                }
            }
        }

        function ri(a, b) {
            a = a.g ? a.g.ge() : {};
            var c = Object.keys(a);
            c = c.length && "00" == c[0];
            var d = !1, e = !1, f = new Set, g = new Set;
            b = t(b.variants);
            for (var h = b.next(); !h.done; h = b.next()) {
                h = h.value;
                var k = [];
                h.audio && k.push(h.audio);
                h.video && k.push(h.video);
                k = t(k);
                for (var l = k.next(); !l.done; l = k.next()) if (l = l.value, l.keyIds.size) {
                    l = t(l.keyIds);
                    for (var m = l.next(); !m.done; m = l.next()) {
                        m = m.value;
                        var n = a[c ? "00" : m];
                        n ? si.includes(n) && g.add(n) : f.add(m)
                    }
                }
                h.allowedByApplication ? h.allowedByKeySystem && (d = !0) : e = !0
            }
            if (!d) throw a = {
                hasAppRestrictions: e,
                missingKeys: Array.from(f), restrictedKeyStatuses: Array.from(g)
            }, new T(2, 4, 4012, a);
        }

        var si = ["output-restricted", "internal-error"];

        function ti() {
        }

        function ui(a, b) {
            if (b) {
                var c = vi[b.toLowerCase()];
                if (c) return c
            }
            throw new T(2, 4, 4E3, a, b);
        }

        S("shaka.media.ManifestParser", ti);
        ti.unregisterParserByMime = function (a) {
            delete vi[a]
        };
        ti.registerParserByMime = function (a, b) {
            vi[a] = b
        };
        ti.registerParserByExtension = function () {
            rb("ManifestParser.registerParserByExtension", "Please use an ManifestParser with registerParserByMime function.")
        };
        ti.AccessibilityPurpose = {hk: "visually impaired", Cj: "hard of hearing"};
        var vi = {};

        function wi(a, b) {
            function c() {
                f = !0
            }

            function d(m) {
                h.push(m);
                Qg(m)
            }

            var e = a = Ab(a), f = !1, g, h = [], k = [];
            (new Lg).box("moov", d).box("trak", d).box("mdia", d).box("minf", d).box("stbl", d).S("stsd", function (m) {
                g = m;
                h.push(m);
                Ug(m)
            }).S("encv", c).S("enca", c).S("dvav", function (m) {
                k.push({box: m, jb: 1701733238})
            }).S("dva1", function (m) {
                k.push({box: m, jb: 1701733238})
            }).S("dvh1", function (m) {
                k.push({box: m, jb: 1701733238})
            }).S("dvhe", function (m) {
                k.push({box: m, jb: 1701733238})
            }).S("hev1", function (m) {
                k.push({box: m, jb: 1701733238})
            }).S("hvc1",
                function (m) {
                    k.push({box: m, jb: 1701733238})
                }).S("avc1", function (m) {
                k.push({box: m, jb: 1701733238})
            }).S("avc3", function (m) {
                k.push({box: m, jb: 1701733238})
            }).S("ac-3", function (m) {
                k.push({box: m, jb: 1701733217})
            }).S("ec-3", function (m) {
                k.push({box: m, jb: 1701733217})
            }).S("ac-4", function (m) {
                k.push({box: m, jb: 1701733217})
            }).S("mp4a", function (m) {
                k.push({box: m, jb: 1701733217})
            }).parse(a);
            if (f) return a;
            if (0 == k.length || !g) throw eb(Jd(a)), new T(2, 3, 3019, b);
            k.reverse();
            b = t(k);
            for (var l = b.next(); !l.done; l = b.next()) l = l.value,
                e = xi(e, g, l.box, h, l.jb);
            return Yc() && nd() ? (b = new Uint8Array(a.byteLength + e.byteLength), b.set(e), b.set(a, e.byteLength), b) : e
        }

        function xi(a, b, c, d, e) {
            var f = yi.value(), g = a.subarray(c.start, c.start + c.size), h = Fb(g),
                k = new Uint8Array(c.size + f.byteLength);
            k.set(g, 0);
            g = Fb(k);
            g.setUint32(4, e);
            k.set(f, c.size);
            e = h.getUint32(4);
            g.setUint32(c.size + 16, e);
            zi(k, 0, k.byteLength);
            e = new Uint8Array(a.byteLength + k.byteLength);
            c = Zc() || Yc() ? c.start : c.start + c.size;
            f = a.subarray(c);
            e.set(a.subarray(0, c));
            e.set(k, c);
            e.set(f, c + k.byteLength);
            a = t(d);
            for (d = a.next(); !d.done; d = a.next()) d = d.value, zi(e, d.start, d.size + k.byteLength);
            k = Fb(e, b.start);
            b = Rg(b);
            a = k.getUint32(b);
            k.setUint32(b, a + 1);
            return e
        }

        function zi(a, b, c) {
            a = Fb(a, b);
            b = a.getUint32(0);
            0 != b && (1 == b ? (a.setUint32(8, c >> 32), a.setUint32(12, c & 4294967295)) : a.setUint32(0, c))
        }

        var yi = new Lc(function () {
            return new Uint8Array([0, 0, 0, 80, 115, 105, 110, 102, 0, 0, 0, 12, 102, 114, 109, 97, 0, 0, 0, 0, 0, 0, 0, 20, 115, 99, 104, 109, 0, 0, 0, 0, 99, 101, 110, 99, 0, 1, 0, 0, 0, 0, 0, 40, 115, 99, 104, 105, 0, 0, 0, 32, 116, 101, 110, 99, 0, 0, 0, 0, 0, 0, 1, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])
        });

        function Ai(a, b, c, d, e, f, g) {
            this.M = a;
            this.Ha = b;
            this.sa = c;
            this.Lc = void 0 === d ? null : d;
            this.timescale = void 0 === e ? null : e;
            this.g = void 0 === f ? null : f;
            this.aesKey = void 0 === g ? null : g;
            this.mimeType = this.codecs = null
        }

        Ai.prototype.$b = function () {
            return this.Ha
        };
        Ai.prototype.Xb = function () {
            return this.sa
        };
        Ai.prototype.vd = function () {
            return this.g
        };

        function Bi(a, b) {
            return a === b ? !0 : a && b ? a.$b() == b.$b() && a.Xb() == b.Xb() && Rb(a.M().sort(), b.M().sort()) && yb(a.vd(), b.vd()) : a == b
        }

        S("shaka.media.InitSegmentReference", Ai);
        Ai.prototype.getEndByte = Ai.prototype.Xb;
        Ai.prototype.getStartByte = Ai.prototype.$b;

        function Ci(a, b, c, d, e, f, g, h, k, l, m, n, p, q, u, w) {
            l = void 0 === l ? [] : l;
            q = void 0 === q ? Di : q;
            this.startTime = a;
            this.j = this.endTime = b;
            this.C = c;
            this.Ha = d;
            this.sa = e;
            this.$ = f;
            this.timestampOffset = g;
            this.appendWindowStart = h;
            this.appendWindowEnd = k;
            this.g = l;
            this.tilesLayout = void 0 === m ? "" : m;
            this.A = void 0 === n ? null : n;
            this.h = void 0 === p ? null : p;
            this.status = q;
            this.preload = !1;
            this.l = !0;
            this.m = !1;
            this.aesKey = void 0 === u ? null : u;
            this.s = null;
            this.i = 0;
            this.o = void 0 === w ? !1 : w;
            this.pe = this.Kd = !1;
            a = t(this.g);
            for (b = a.next(); !b.done; b =
                a.next()) b.value.Xg();
            this.o && this.g.length && this.g[this.g.length - 1].Wg();
            this.B = this.mimeType = this.codecs = null
        }

        r = Ci.prototype;
        r.M = function () {
            return this.C()
        };
        r.getStartTime = function () {
            return this.startTime
        };
        r.Th = function () {
            return this.endTime
        };
        r.$b = function () {
            return this.Ha
        };
        r.Xb = function () {
            return this.sa
        };
        r.ki = function () {
            return this.tilesLayout
        };
        r.ji = function () {
            return this.A
        };
        r.ac = function () {
            return this.status
        };
        r.Ei = function () {
            this.status = Ei
        };
        r.Of = function () {
            this.preload = !0
        };
        r.yi = function () {
            return this.preload
        };
        r.se = function () {
            this.l = !1
        };
        r.vi = function () {
            return this.l
        };
        r.Xg = function () {
            this.Kd = !0
        };
        r.xi = function () {
            return this.Kd
        };
        r.Wg = function () {
            this.pe = !0
        };
        r.wi = function () {
            return this.pe
        };
        r.Vg = function () {
            this.m = !0
        };
        r.ri = function () {
            return this.m
        };
        r.oh = function (a) {
            this.s = a
        };
        r.ii = function () {
            return this.s
        };
        r.offset = function (a) {
            this.startTime += a;
            this.endTime += a;
            this.j += a;
            for (var b = t(this.g), c = b.next(); !c.done; c = b.next()) c = c.value, c.startTime += a, c.endTime += a, c.j += a
        };
        r.jg = function (a) {
            null == this.h ? Za("Sync attempted without sync time!") : (a = this.h - a - this.startTime, .001 <= Math.abs(a) && this.offset(a))
        };
        r.fj = function (a) {
            this.B = a
        };
        r.vd = function () {
            return this.B
        };

        function Fi(a, b) {
            a.$ = b;
            a = t(a.g);
            for (var c = a.next(); !c.done; c = a.next()) Fi(c.value, b)
        }

        S("shaka.media.SegmentReference", Ci);
        Ci.prototype.getSegmentData = Ci.prototype.vd;
        Ci.prototype.setSegmentData = Ci.prototype.fj;
        Ci.prototype.syncAgainst = Ci.prototype.jg;
        Ci.prototype.offset = Ci.prototype.offset;
        Ci.prototype.getThumbnailSprite = Ci.prototype.ii;
        Ci.prototype.setThumbnailSprite = Ci.prototype.oh;
        Ci.prototype.hasByterangeOptimization = Ci.prototype.ri;
        Ci.prototype.markAsByterangeOptimization = Ci.prototype.Vg;
        Ci.prototype.isLastPartial = Ci.prototype.wi;
        Ci.prototype.markAsLastPartial = Ci.prototype.Wg;
        Ci.prototype.isPartial = Ci.prototype.xi;
        Ci.prototype.markAsPartial = Ci.prototype.Xg;
        Ci.prototype.isIndependent = Ci.prototype.vi;
        Ci.prototype.markAsNonIndependent = Ci.prototype.se;
        Ci.prototype.isPreload = Ci.prototype.yi;
        Ci.prototype.markAsPreload = Ci.prototype.Of;
        Ci.prototype.markAsUnavailable = Ci.prototype.Ei;
        Ci.prototype.getStatus = Ci.prototype.ac;
        Ci.prototype.getTileDuration = Ci.prototype.ji;
        Ci.prototype.getTilesLayout = Ci.prototype.ki;
        Ci.prototype.getEndByte = Ci.prototype.Xb;
        Ci.prototype.getStartByte = Ci.prototype.$b;
        Ci.prototype.getEndTime = Ci.prototype.Th;
        Ci.prototype.getStartTime = Ci.prototype.getStartTime;
        Ci.prototype.getUris = Ci.prototype.M;
        var Di = 0, Ei = 1;
        Ci.Status = {oj: Di, fk: Ei, Ij: 2};

        function Gi(a) {
            return 1 == a.length && 1E-4 > a.end(0) - a.start(0)
        }

        function Hi(a) {
            return !a || Gi(a) ? null : a.length ? a.end(a.length - 1) : null
        }

        function Ii(a, b) {
            return !a || !a.length || Gi(a) || b > a.end(a.length - 1) ? !1 : b >= a.start(0)
        }

        function Ji(a, b) {
            if (!a || !a.length || Gi(a)) return 0;
            var c = 0;
            a = t(Ki(a));
            for (var d = a.next(); !d.done; d = a.next()) {
                var e = d.value;
                d = e.start;
                e = e.end;
                e > b && (c += e - Math.max(d, b))
            }
            return c
        }

        function Oi(a, b, c) {
            if (!a || !a.length || Gi(a)) return null;
            a = Ki(a).findIndex(function (d, e, f) {
                return d.start > b && (0 == e || f[e - 1].end - b <= c)
            });
            return 0 <= a ? a : null
        }

        function Ki(a) {
            if (!a) return [];
            for (var b = [], c = 0; c < a.length; c++) b.push({start: a.start(c), end: a.end(c)});
            return b
        };/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
        function Pi() {
        }

        function Qi(a, b) {
            return b + 10 <= a.length && 73 === a[b] && 68 === a[b + 1] && 51 === a[b + 2] && 255 > a[b + 3] && 255 > a[b + 4] && 128 > a[b + 6] && 128 > a[b + 7] && 128 > a[b + 8] && 128 > a[b + 9] ? !0 : !1
        }

        function Ri(a, b) {
            return b + 10 <= a.length && 51 === a[b] && 68 === a[b + 1] && 73 === a[b + 2] && 255 > a[b + 3] && 255 > a[b + 4] && 128 > a[b + 6] && 128 > a[b + 7] && 128 > a[b + 8] && 128 > a[b + 9] ? !0 : !1
        }

        function Si(a, b) {
            var c = (a[b] & 127) << 21;
            c |= (a[b + 1] & 127) << 14;
            c |= (a[b + 2] & 127) << 7;
            return c |= a[b + 3] & 127
        }

        function Ti(a) {
            var b = {key: a.type, description: "", data: "", mimeType: null, pictureType: null};
            if ("APIC" === a.type) {
                if (2 > a.size || 3 !== a.data[0]) return null;
                var c = a.data.subarray(1).indexOf(0);
                if (-1 === c) return null;
                var d = vd(Ab(a.data, 1, c)), e = a.data[2 + c], f = a.data.subarray(3 + c).indexOf(0);
                if (-1 === f) return null;
                var g = vd(Ab(a.data, 3 + c, f)), h;
                "--\x3e" === d ? h = vd(Ab(a.data, 4 + c + f)) : h = Cb(a.data.subarray(4 + c + f));
                b.mimeType = d;
                b.pictureType = e;
                b.description = g;
                b.data = h;
                return b
            }
            if ("TXXX" === a.type) {
                if (2 > a.size || 3 !== a.data[0]) return null;
                d = a.data.subarray(1).indexOf(0);
                if (-1 === d) return null;
                c = vd(Ab(a.data, 1, d));
                a = vd(Ab(a.data, 2 + d)).replace(/\0*$/, "");
                b.description = c;
                b.data = a;
                return b
            }
            if ("WXXX" === a.type) {
                if (2 > a.size || 3 !== a.data[0]) return null;
                d = a.data.subarray(1).indexOf(0);
                if (-1 === d) return null;
                c = vd(Ab(a.data, 1, d));
                a = vd(Ab(a.data, 2 + d)).replace(/\0*$/, "");
                b.description = c;
                b.data = a;
                return b
            }
            if ("PRIV" === a.type) {
                if (2 > a.size) return null;
                c = a.data.indexOf(0);
                if (-1 === c) return null;
                c = vd(Ab(a.data, 0, c));
                b.description = c;
                "com.apple.streaming.transportStreamTimestamp" ==
                c ? (c = a.data.subarray(c.length + 1), a = c[3] & 1, c = (c[4] << 23) + (c[5] << 15) + (c[6] << 7) + c[7], c /= 45, a && (c += 4.772185884E7), b.data = c) : (a = Cb(a.data.subarray(c.length + 1)), b.data = a);
                return b
            }
            if ("T" === a.type[0]) {
                if (2 > a.size || 3 !== a.data[0]) return null;
                a = vd(a.data.subarray(1)).replace(/\0*$/, "");
                b.data = a;
                return b
            }
            return "W" === a.type[0] ? (a = vd(a.data).replace(/\0*$/, ""), b.data = a, b) : a.data ? (b.data = Cb(a.data), b) : null
        }

        function Ui(a) {
            for (var b = 0, c = []; Qi(a, b);) {
                var d = Si(a, b + 6);
                a[b + 5] >> 6 & 1 && (b += 10);
                b += 10;
                for (d = b + d; b + 10 < d;) {
                    var e = a.subarray(b), f = Si(e, 4);
                    e = {type: String.fromCharCode(e[0], e[1], e[2], e[3]), size: f, data: e.subarray(10, 10 + f)};
                    (f = Ti(e)) && c.push(f);
                    b += e.size + 10
                }
                Ri(a, b) && (b += 10)
            }
            return c
        }

        function Vi(a, b) {
            for (var c = b = void 0 === b ? 0 : b, d = 0; Qi(a, b);) a[b + 5] >> 6 & 1 && (d += 10), d += 10, d += Si(a, b + 6), Ri(a, b + 10) && (d += 10), b += d;
            return 0 < d ? a.subarray(c, c + d) : new Uint8Array([])
        }

        S("shaka.util.Id3Utils", Pi);
        Pi.getID3Data = Vi;
        Pi.getID3Frames = Ui;

        function Wi(a, b) {
            var c = null, d = null, e = null, f = a.P();
            b & 1 && (e = a.Qc());
            b & 2 && a.skip(4);
            b & 8 && (c = a.P());
            b & 16 && (d = a.P());
            return {trackId: f, qd: c, fe: d, jk: e}
        }

        function Xi(a, b) {
            return 1 == b ? (b = a.P(), a = a.P(), {baseMediaDecodeTime: b * Math.pow(2, 32) + a}) : {baseMediaDecodeTime: a.P()}
        }

        function Yi(a, b) {
            1 == b ? (a.skip(8), a.skip(8)) : (a.skip(4), a.skip(4));
            b = a.P();
            a.skip(4);
            a = a.ka();
            return {
                timescale: b,
                language: String.fromCharCode((a >> 10) + 96) + String.fromCharCode(((a & 960) >> 5) + 96) + String.fromCharCode((a & 31) + 96)
            }
        }

        function Zi(a, b, c) {
            var d = a.P(), e = [], f = null;
            c & 1 && (f = a.P());
            c & 4 && a.skip(4);
            for (var g = 0; g < d; g++) {
                var h = {$f: null, sampleSize: null, He: null};
                c & 256 && (h.$f = a.P());
                c & 512 && (h.sampleSize = a.P());
                c & 1024 && a.skip(4);
                c & 2048 && (h.He = 0 == b ? a.P() : a.bh());
                e.push(h)
            }
            return {nk: d, fh: e, Mh: f}
        }

        function $i(a) {
            a.skip(6);
            a.skip(2);
            a.skip(8);
            var b = a.ka();
            a.skip(2);
            a.skip(2);
            a.skip(2);
            a = a.ka() + a.ka() / 65536;
            return {channelCount: b, sampleRate: a}
        }

        function aj(a) {
            a = a.P();
            return {Na: Pg(a)}
        }

        function bj(a) {
            var b = null, c = null, d = a.rb(4);
            var e = String.fromCharCode(d[0]);
            e += String.fromCharCode(d[1]);
            e += String.fromCharCode(d[2]);
            e += String.fromCharCode(d[3]);
            if ("nclx" === e) {
                switch (a.ka()) {
                    case 1:
                    case 5:
                    case 6:
                    case 7:
                        b = "srgb";
                        break;
                    case 9:
                        b = "rec2020";
                        break;
                    case 11:
                    case 12:
                        b = "p3"
                }
                d = a.ka();
                a.ka();
                switch (d) {
                    case 1:
                    case 6:
                    case 13:
                    case 14:
                    case 15:
                        c = "SDR";
                        break;
                    case 16:
                        c = "PQ";
                        break;
                    case 18:
                        c = "HLG"
                }
            }
            return {colorGamut: b, Qd: c}
        }

        function cj(a, b) {
            b = void 0 === b ? !1 : b;
            a = a.toString(16).toUpperCase();
            return b ? a : ("0" + a).slice(-2)
        }

        function dj(a) {
            return (10 > a ? "0" : "") + a
        };/*

 Copyright Brightcove, Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
        function ej(a, b) {
            this.j = a;
            if (void 0 === b ? 0 : b) {
                b = new Uint8Array(a.byteLength);
                for (var c = 0, d = 0; d < a.byteLength; d++) 2 <= d && 3 == a[d] && 0 == a[d - 1] && 0 == a[d - 2] || (b[c] = a[d], c++);
                this.j = Ab(b, 0, c)
            }
            this.i = this.j.byteLength;
            this.g = this.h = 0
        }

        function fj(a) {
            var b = a.j.byteLength - a.i, c = new Uint8Array(4), d = Math.min(4, a.i);
            0 !== d && (c.set(a.j.subarray(b, b + d)), a.h = (new Ig(c, 0)).P(), a.g = 8 * d, a.i -= d)
        }

        function gj(a, b) {
            if (a.g <= b) {
                b -= a.g;
                var c = Math.floor(b / 8);
                b -= 8 * c;
                a.g -= c;
                fj(a)
            }
            a.h <<= b;
            a.g -= b
        }

        function hj(a, b) {
            var c = Math.min(a.g, b), d = a.h >>> 32 - c;
            a.g -= c;
            0 < a.g ? a.h <<= c : 0 < a.i && fj(a);
            c = b - c;
            return 0 < c ? d << c | hj(a, c) : d
        }

        function ij(a) {
            var b;
            for (b = 0; b < a.g; ++b) if (0 !== (a.h & 2147483648 >>> b)) return a.h <<= b, a.g -= b, b;
            fj(a);
            return b + ij(a)
        }

        function jj(a) {
            gj(a, 1 + ij(a))
        }

        function V(a) {
            var b = ij(a);
            return hj(a, b + 1) - 1
        }

        function kj(a) {
            a = V(a);
            return 1 & a ? 1 + a >>> 1 : -1 * (a >>> 1)
        }

        function lj(a) {
            return 1 === hj(a, 1)
        }

        function mj(a) {
            return hj(a, 8)
        }

        function nj(a, b) {
            for (var c = 8, d = 8, e = 0; e < b; e++) 0 !== d && (d = kj(a), d = (c + d + 256) % 256), c = 0 === d ? c : d
        }

        function oj(a) {
            mj(a);
            V(a);
            return V(a)
        }

        S("shaka.util.ExpGolomb", ej);

        function pj() {
            this.G = null;
            this.H = !1;
            this.m = this.I = null;
            this.j = [];
            this.g = [];
            this.A = this.B = null;
            this.i = [];
            this.h = [];
            this.C = null;
            this.l = [];
            this.F = this.o = this.s = null
        }

        r = pj.prototype;
        r.clearData = function () {
            this.j = [];
            this.g = [];
            this.i = [];
            this.h = [];
            this.l = []
        };
        r.parse = function (a) {
            if (564 > a.length) return this;
            for (var b = Math.max(0, qj(a)), c = a.length - (a.length + b) % 188, d = !1, e = b; e < c; e += 188) if (71 == a[e]) {
                var f = !!(a[e + 1] & 64), g = ((a[e + 1] & 31) << 8) + a[e + 2];
                if (1 < (a[e + 3] & 48) >> 4) {
                    var h = e + 5 + a[e + 4];
                    if (h == e + 188) continue
                } else h = e + 4;
                switch (g) {
                    case 0:
                        f && (h += a[h] + 1);
                        this.G = (a[h + 10] & 31) << 8 | a[h + 11];
                        break;
                    case 17:
                    case 8191:
                        break;
                    case this.G:
                        f && (h += a[h] + 1);
                        f = a;
                        g = {audio: -1, video: -1, me: -1, audioCodec: "", videoCodec: ""};
                        var k = h + 3 + ((f[h + 1] & 15) << 8 | f[h + 2]) - 4;
                        for (h += 12 + ((f[h + 10] & 15) << 8 | f[h + 11]); h <
                        k;) {
                            var l = (f[h + 1] & 31) << 8 | f[h + 2], m = (f[h + 3] & 15) << 8 | f[h + 4];
                            switch (f[h]) {
                                case 6:
                                    if (0 < m) for (var n = h + 5, p = m; 2 < p;) {
                                        var q = f[n + 1] + 2;
                                        switch (f[n]) {
                                            case 5:
                                                var u = yd(f.subarray(n + 2, n + q));
                                                -1 == g.audio && "Opus" === u ? (g.audio = l, g.audioCodec = "opus") : -1 == g.video && "AV01" === u && (g.video = l, g.videoCodec = "av1");
                                                break;
                                            case 106:
                                                -1 == g.audio && (g.audio = l, g.audioCodec = "ac3");
                                                break;
                                            case 122:
                                                -1 == g.audio && (g.audio = l, g.audioCodec = "ec3");
                                                break;
                                            case 124:
                                                -1 == g.audio && (g.audio = l, g.audioCodec = "aac");
                                                break;
                                            case 127:
                                                "opus" == g.audioCodec && (u =
                                                    null, 128 === f[n + 2] && (u = f[n + 3]), null != u && (this.F = {
                                                    channelCount: 0 === (u & 15) ? 2 : u & 15,
                                                    Jh: u,
                                                    sampleRate: 48E3
                                                }))
                                        }
                                        n += q;
                                        p -= q
                                    }
                                    break;
                                case 15:
                                    -1 == g.audio && (g.audio = l, g.audioCodec = "aac");
                                    break;
                                case 17:
                                    -1 == g.audio && (g.audio = l, g.audioCodec = "aac-loas");
                                    break;
                                case 21:
                                    -1 == g.me && (g.me = l);
                                    break;
                                case 27:
                                    -1 == g.video && (g.video = l, g.videoCodec = "avc");
                                    break;
                                case 3:
                                case 4:
                                    -1 == g.audio && (g.audio = l, g.audioCodec = "mp3");
                                    break;
                                case 36:
                                    -1 == g.video && (g.video = l, g.videoCodec = "hvc");
                                    break;
                                case 129:
                                    -1 == g.audio && (g.audio = l, g.audioCodec = "ac3");
                                    break;
                                case 132:
                                case 135:
                                    -1 == g.audio && (g.audio = l, g.audioCodec = "ec3")
                            }
                            h += m + 5
                        }
                        f = g;
                        -1 != f.video && (this.I = f.video, this.m = f.videoCodec);
                        -1 != f.audio && (this.B = f.audio, this.A = f.audioCodec);
                        -1 != f.me && (this.C = f.me);
                        d && !this.H && (d = !1, e = b - 188);
                        this.H = !0;
                        break;
                    case this.I:
                        h = a.subarray(h, e + 188);
                        f ? this.j.push([h]) : this.j.length && this.j[this.j.length - 1] && this.j[this.j.length - 1].push(h);
                        break;
                    case this.B:
                        h = a.subarray(h, e + 188);
                        f ? this.i.push([h]) : this.i.length && this.i[this.i.length - 1] && this.i[this.i.length - 1].push(h);
                        break;
                    case this.C:
                        h = a.subarray(h, e + 188);
                        f ? this.l.push([h]) : this.l.length && this.l[this.l.length - 1] && this.l[this.l.length - 1].push(h);
                        break;
                    default:
                        d = !0
                }
            }
            return this
        };

        function rj(a, b) {
            if (1 !== (b[0] << 16 | b[1] << 8 | b[2])) return null;
            var c = {data: new Uint8Array(0), packetLength: b[4] << 8 | b[5], pts: null, dts: null, nalus: []};
            if (c.packetLength && c.packetLength > b.byteLength - 6) return null;
            var d = b[7];
            if (d & 192) {
                var e = 536870912 * (b[9] & 14) + 4194304 * (b[10] & 255) + 16384 * (b[11] & 254) + 128 * (b[12] & 255) + (b[13] & 254) / 2;
                null == a.s && (a.s = e);
                c.pts = sj(e, a.s);
                a.s = c.pts;
                c.dts = c.pts;
                d & 64 && (d = 536870912 * (b[14] & 14) + 4194304 * (b[15] & 255) + 16384 * (b[16] & 254) + 128 * (b[17] & 255) + (b[18] & 254) / 2, null == a.o && (a.o = d), c.dts = sj(d,
                    a.o));
                a.o = c.dts
            }
            a = b[8] + 9;
            if (b.byteLength <= a) return null;
            c.data = b.subarray(a);
            return c
        }

        r.Ji = function (a) {
            rb("TsParser.parseAvcNalus", "Please use parseNalus function instead.");
            return this.Uf(a)
        };
        r.Uf = function (a, b, c) {
            var d = a.pts ? a.pts / 9E4 : null;
            a = a.data;
            var e = a.byteLength, f = 1;
            "hvc" == this.m && (f = 2);
            for (var g = c || 0, h = [], k = -1, l = 0, m, n = 0; n < e; ++n) {
                var p = a[n];
                if (p) {
                    if (2 <= g && 1 == p) {
                        b && !h.length && -1 == k && (p = n - (3 < g ? 3 : g), c && 0 != p && (p = a.subarray(0, p), b.data = Md(b.data, p), b.fullData = Md(b.fullData, p)));
                        0 <= k ? (g = n - ((3 < g ? 3 : g) + 1), h.push({
                            data: a.subarray(k + f, g + 1),
                            fullData: a.subarray(k, g + 1),
                            type: l,
                            time: d
                        })) : b && !h.length && (k = n - g, 0 < k && (k = a.subarray(0, k), b.data = Md(b.data, k), b.fullData = Md(b.fullData, k)));
                        if (n >= e - f) return h;
                        n++;
                        k = n;
                        l = "hvc" == this.m ? a[n] >> 1 & 63 : a[n] & 31
                    }
                    g = 0
                } else g++;
                n >= e - 1 && 0 <= k && 0 <= g && (m = {
                    data: a.subarray(k + f, e),
                    fullData: a.subarray(k, e),
                    type: l,
                    time: d
                })
            }
            m && h.push(m);
            !h.length && b && (b.data = Md(b.data, a), b.fullData = Md(b.fullData, a));
            return h
        };
        r.getMetadata = function () {
            for (var a = [], b = t(this.l), c = b.next(); !c.done; c = b.next()) c = Md.apply(Ed, x(c.value)), (c = rj(this, c)) && a.push({
                cueTime: c.pts ? c.pts / 9E4 : null,
                data: c.data,
                frames: Ui(c.data),
                dts: c.dts,
                pts: c.pts
            });
            return a
        };
        r.Wb = function () {
            if (this.i.length && !this.h.length) {
                for (var a = !1, b = t(this.i), c = b.next(); !c.done; c = b.next()) {
                    var d = Md.apply(Ed, x(c.value)), e = rj(this, d);
                    c = this.h.length ? this.h[this.h.length - 1] : null;
                    e && null != e.pts && null != e.dts && (!c || c.pts != e.pts && c.dts != e.dts) ? (this.h.length && e.dts < (c.dts || 0) && (a = !0), this.h.push(e)) : this.h.length && (d = e ? e.data : d) && (c = this.h.pop(), c.data = Md(c.data, d), this.h.push(c))
                }
                a && (this.h = this.h.sort(function (f, g) {
                    var h = (f.pts || 0) - (g.pts || 0);
                    return (f.dts || 0) - (g.dts || 0) || h
                }))
            }
            return this.h
        };
        r.Ic = function (a) {
            a = void 0 === a ? !0 : a;
            if (this.j.length && !this.g.length) {
                for (var b = !1, c = t(this.j), d = c.next(); !d.done; d = c.next()) {
                    var e = Md.apply(Ed, x(d.value)), f = rj(this, e);
                    d = this.g.length ? this.g[this.g.length - 1] : null;
                    f && null != f.pts && null != f.dts && (!d || d.pts != f.pts && d.dts != f.dts) ? (this.g.length && f.dts < (d.dts || 0) && (b = !0), this.g.push(f)) : this.g.length && (e = f ? f.data : e) && (d = this.g.pop(), d.data = Md(d.data, e), this.g.push(d))
                }
                if (a) {
                    c = [];
                    d = t(this.g);
                    for (e = d.next(); !e.done; e = d.next()) if (e = e.value, e.nalus = this.Uf(e,
                        g, void 0), e.nalus.length) {
                        c.push(e);
                        var g = e.nalus[e.nalus.length - 1]
                    }
                    this.g = c
                }
                b && (this.g = this.g.sort(function (h, k) {
                    var l = (h.pts || 0) - (k.pts || 0);
                    return (h.dts || 0) - (k.dts || 0) || l
                }))
            }
            return a ? this.g : (a = this.g, this.g = [], a)
        };
        r.getStartTime = function (a) {
            if ("audio" == a) {
                a = null;
                var b = this.Wb();
                b.length && (a = b[0], a = Math.min(a.dts, a.pts) / 9E4);
                return a
            }
            return "video" == a ? (a = null, b = this.Ic(!1), b.length && (a = b[0], a = Math.min(a.dts, a.pts) / 9E4), a) : null
        };
        r.sd = function () {
            return {audio: this.A, video: this.m}
        };
        r.ke = function () {
            for (var a = [], b = t(this.Ic()), c = b.next(); !c.done; c = b.next()) a.push.apply(a, x(c.value.nalus));
            return a
        };
        r.ni = function () {
            rb("TsParser.getVideoResolution", "Please use getVideoInfo function instead.");
            var a = this.Hf();
            return {height: a.height, width: a.width}
        };
        r.Hf = function () {
            return "hvc" == this.m ? tj(this) : uj(this)
        };

        function uj(a) {
            var b = {height: null, width: null, Na: null};
            a = a.ke();
            if (!a.length) return b;
            a = a.find(function (p) {
                return 7 == p.type
            });
            if (!a) return b;
            a = new ej(a.data);
            var c = mj(a), d = mj(a), e = mj(a);
            jj(a);
            if (Cj.includes(c)) {
                var f = V(a);
                3 === f && gj(a, 1);
                jj(a);
                jj(a);
                gj(a, 1);
                if (lj(a)) {
                    f = 3 !== f ? 8 : 12;
                    for (var g = 0; g < f; g++) lj(a) && (6 > g ? nj(a, 16) : nj(a, 64))
                }
            }
            jj(a);
            f = V(a);
            if (0 === f) V(a); else if (1 === f) for (gj(a, 1), jj(a), jj(a), f = V(a), g = 0; g < f; g++) jj(a);
            jj(a);
            gj(a, 1);
            f = V(a);
            g = V(a);
            var h = hj(a, 1);
            0 === h && gj(a, 1);
            gj(a, 1);
            var k = 0, l = 0, m = 0,
                n = 0;
            lj(a) && (k = V(a), l = V(a), m = V(a), n = V(a));
            b.height = String((2 - h) * (g + 1) * 16 - 2 * m - 2 * n);
            b.width = String(16 * (f + 1) - 2 * k - 2 * l);
            b.Na = "avc1." + ("0" + c.toString(16).toUpperCase()).slice(-2) + ("0" + d.toString(16).toUpperCase()).slice(-2) + ("0" + e.toString(16).toUpperCase()).slice(-2);
            return b
        }

        function tj(a) {
            var b = {height: null, width: null, Na: null};
            a = a.ke();
            if (!a.length) return b;
            a = a.find(function (z) {
                return 33 == z.type
            });
            if (!a) return b;
            var c = new ej(a.fullData, !0);
            mj(c);
            mj(c);
            hj(c, 4);
            var d = hj(c, 3);
            lj(c);
            var e = hj(c, 2), f = hj(c, 1), g = hj(c, 5), h = hj(c, 32);
            a = mj(c);
            for (var k = mj(c), l = mj(c), m = mj(c), n = mj(c), p = mj(c), q = mj(c), u = [], w = [], v = 0; v < d; v++) u.push(lj(c)), w.push(lj(c));
            if (0 < d) for (v = d; 8 > v; v++) hj(c, 2);
            for (v = 0; v < d; v++) u[v] && hj(c, 88), w[v] && mj(c);
            V(c);
            d = V(c);
            3 == d && hj(c, 1);
            u = V(c);
            w = V(c);
            var A = v = 0, y = 0, D = 0;
            lj(c) &&
            (v += V(c), A += V(c), y += V(c), D += V(c));
            b.width = String(u - (v + A) * (1 === d || 2 === d ? 2 : 1));
            b.height = String(w - (y + D) * (1 === d ? 2 : 1));
            c = function (z) {
                for (var B = 0, C = 0; 32 > C; C++) B |= (z >> C & 1) << 31 - C;
                return B >>> 0
            }(h);
            f = 1 == f ? "H" : "L";
            e = "hvc1" + ("." + ["", "A", "B", "C"][e] + g);
            e += "." + c.toString(16).toUpperCase();
            e += "." + f + q;
            p && (e += "." + p.toString(16).toUpperCase());
            n && (e += "." + n.toString(16).toUpperCase());
            m && (e += "." + m.toString(16).toUpperCase());
            l && (e += "." + l.toString(16).toUpperCase());
            k && (e += "." + k.toString(16).toUpperCase());
            a && (e += "." +
                a.toString(16).toUpperCase());
            b.Na = e;
            return b
        }

        function sj(a, b) {
            var c = 1;
            for (a > b && (c = -1); 4294967296 < Math.abs(b - a);) a += 8589934592 * c;
            return a
        }

        function Dj(a) {
            return 0 > qj(a) ? !1 : !0
        }

        function qj(a) {
            for (var b = Math.min(1E3, a.length - 564), c = 0; c < b;) {
                if (71 == a[c] && 71 == a[c + 188] && 71 == a[c + 376]) return c;
                c++
            }
            return -1
        }

        S("shaka.util.TsParser", pj);
        pj.syncOffset = qj;
        pj.probe = Dj;
        pj.prototype.getVideoInfo = pj.prototype.Hf;
        pj.prototype.getVideoResolution = pj.prototype.ni;
        pj.prototype.getVideoNalus = pj.prototype.ke;
        pj.prototype.getCodecs = pj.prototype.sd;
        pj.prototype.getStartTime = pj.prototype.getStartTime;
        pj.prototype.getVideoData = pj.prototype.Ic;
        pj.prototype.getAudioData = pj.prototype.Wb;
        pj.prototype.getMetadata = pj.prototype.getMetadata;
        pj.prototype.parseNalus = pj.prototype.Uf;
        pj.prototype.parseAvcNalus = pj.prototype.Ji;
        pj.prototype.parse = pj.prototype.parse;
        pj.prototype.clearData = pj.prototype.clearData;
        pj.Timescale = 9E4;
        var Cj = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];

        function Ej(a, b, c) {
            this.g = null;
            this.o = -1;
            this.l = a;
            this.i = b;
            this.m = c;
            this.j = !1;
            a:{
                "undefined" === typeof libDPIModule && $a("Could not find LCEVC Library dependencies on this page");
                if ("undefined" !== typeof LCEVCdec) this.h = LCEVCdec; else if ("undefined" !== typeof LcevcDil) this.h = LcevcDil, this.j = !0, rb("LcevcDil", "lcevc_dil.js is deprecated, please use lcevc_dec.js instead"); else {
                    $a("Could not find LCEVC Library on this page");
                    a = !1;
                    break a
                }
                "undefined" === typeof this.h.SupportObject ? ($a("Could not find LCEVC Library on this page"),
                    a = !1) : (this.h.SupportObject.SupportStatus || $a(this.h.SupportObject.SupportError), a = "undefined" !== typeof this.h && "undefined" !== typeof libDPIModule && this.i instanceof HTMLCanvasElement && this.h.SupportObject.SupportStatus)
            }
            a && !this.g && this.h.SupportObject.webGLSupport(this.i) && (this.i.classList.remove("shaka-hidden"), this.g = this.j ? new this.h.LcevcDil(this.l, this.i, this.m) : new this.h.LCEVCdec(this.l, this.i, this.m))
        }

        function Fj(a) {
            a.g && a.i.classList.add("shaka-hidden")
        }

        Ej.prototype.release = function () {
            this.g && (this.g.close(), this.g = null)
        };

        function Gj(a, b, c) {
            var d = Hj, e = Ij;
            switch (b.mimeType) {
                case "video/webm":
                    d = Jj;
                    break;
                case "video/mp4":
                    d = Kj
            }
            switch (c) {
                case "DASH":
                    e = Lj;
                    break;
                case "HLS":
                    e = Mj
            }
            a.g && (a.o = b.id, a.g.setLevelSwitching(b.id, !0), a.g.setContainerFormat(d), a.j || a.g.setStreamingFormat(e))
        }

        S("shaka.lcevc.Dec", Ej);
        Ej.prototype.release = Ej.prototype.release;
        var Hj = 0, Jj = 1, Kj = 2, Mj = 0, Lj = 1, Ij = -1;

        function Nj(a, b, c, d) {
            var e = this;
            this.i = a;
            this.da = c;
            this.A = null;
            this.F = b;
            this.h = {};
            this.G = {};
            this.Da = {};
            this.g = null;
            this.fa = !1;
            this.Z = d || null;
            this.l = {};
            this.s = new gb;
            this.j = {};
            this.H = null;
            this.L = new bg;
            this.N = "";
            this.ra = !1;
            this.m = Oj(this, this.L);
            this.C = !1;
            this.I = new Bg(function () {
                return Pj(e)
            });
            this.B = !1;
            this.aa = "UNKNOWN";
            this.Ea = this.Fa = !1;
            this.za = new bg;
            this.o = !1;
            this.xa = !0;
            this.qa = this.R = this.ya = this.U = this.K = this.ea = null;
            this.pa = new bg
        }

        function Oj(a, b) {
            if (window.ManagedMediaSource) {
                a.i.disableRemotePlayback = !0;
                var c = new ManagedMediaSource;
                a.s.D(c, "startstreaming", function () {
                    a.xa = !0
                });
                a.s.D(c, "endstreaming", function () {
                    a.xa = !1
                });
                a.s.ha(c, "sourceopen", function () {
                    URL.revokeObjectURL(a.N);
                    b.resolve()
                });
                a.s.ha(a.i, "playing", function () {
                    a.ra = !0
                });
                a.N = Qj(c);
                a.i.src = a.N;
                return c
            }
            c = new MediaSource;
            a.s.ha(c, "sourceopen", function () {
                URL.revokeObjectURL(a.N);
                b.resolve()
            });
            a.s.ha(a.i, "playing", function () {
                a.ra = !0
            });
            a.N = Qj(c);
            a.i.src = a.N;
            return c
        }

        function Rj(a, b) {
            var c, d, e, f, g, h, k, l, m, n, p;
            return O(function (q) {
                if (1 == q.g) return a.createSegmentIndex ? G(q, a.createSegmentIndex(), 2) : q.u(2);
                if (!a.segmentIndex) return q.return(!1);
                if (0 == a.segmentIndex.getNumReferences()) return q.return(!0);
                c = Xd;
                d = new Set;
                e = t(a.segmentIndex);
                for (f = e.next(); !f.done; f = e.next()) if (g = f.value, h = g.mimeType || a.mimeType || "", k = g.codecs || a.codecs || "", l = h + ":" + k, !d.has(l)) if (d.add(l), b == c.ta) {
                    if (m = $d(h, k), !se(m)) return q.return(!1)
                } else if (b == c.ga ? k = af(k) : b == c.X && (k = bf(k, h)), n =
                    de(a, h, k), p = be(h, k), !nb(n) && !oc(p)) return q.return(!1);
                return q.return(!0)
            })
        }

        r = Nj.prototype;
        r.destroy = function () {
            return this.I.destroy()
        };

        function Pj(a) {
            var b, c, d, e, f, g, h, k;
            return O(function (l) {
                if (1 == l.g) {
                    b = [];
                    for (c in a.l) for (d = a.l[c], e = d[0], a.l[c] = d.slice(0, 1), e && b.push(e.p.catch(Ae)), f = t(d.slice(1)), g = f.next(); !g.done; g = f.next()) h = g.value, h.p.reject(new T(2, 7, 7003, void 0));
                    a.g && b.push(a.g.destroy());
                    a.F && b.push(a.F.destroy());
                    for (k in a.j) b.push(a.j[k].destroy());
                    return G(l, Promise.all(b), 2)
                }
                a.s && (a.s.release(), a.s = null);
                a.i && (a.i.removeAttribute("src"), a.i.load(), a.i = null);
                a.A = null;
                a.m = null;
                a.g = null;
                a.F = null;
                a.h = {};
                a.j = {};
                a.H = null;
                a.l = {};
                a.Z = null;
                a.K = null;
                a.da = null;
                H(l)
            })
        }

        r.init = function (a, b, c, d) {
            b = void 0 === b ? !1 : b;
            c = void 0 === c ? "UNKNOWN" : c;
            d = void 0 === d ? !1 : d;
            var e = this, f, g, h, k, l;
            return O(function (m) {
                switch (m.g) {
                    case 1:
                        return f = Xd, G(m, e.L, 2);
                    case 2:
                        e.B = b, e.aa = c, e.Fa = d, e.Ea = !e.B && "HLS" == e.aa && !e.Fa, e.K = null, g = t(a.keys()), h = g.next();
                    case 3:
                        if (h.done) {
                            m.u(0);
                            break
                        }
                        k = h.value;
                        l = a.get(k);
                        return G(m, Sj(e, k, l, l.codecs), 6);
                    case 6:
                        e.o ? (e.l[f.X] = [], e.l[f.ga] = []) : e.l[k] = [], h = g.next(), m.u(3)
                }
            })
        };

        function Sj(a, b, c, d) {
            var e, f, g, h, k, l, m, n, p, q, u, w;
            return O(function (v) {
                switch (v.g) {
                    case 1:
                        return e = Xd, f = Na, g = Pa, G(v, Rj(c, b), 2);
                    case 2:
                        g.call(f, v.h, "Type negotiation should happen before MediaSourceEngine.init!");
                        h = $d(c.mimeType, d);
                        if (b == e.ta) {
                            Tj(a, h, a.B, c.external);
                            v.u(0);
                            break
                        }
                        k = a.A.forceTransmux;
                        if (!nb(h) || !a.B && ae.includes(h)) k = !0;
                        l = be(c.mimeType, d);
                        if (!k) {
                            v.u(4);
                            break
                        }
                        m = Td(e.X, (d || "").split(","));
                        n = Td(e.ga, (d || "").split(","));
                        if (!m || !n) {
                            v.u(5);
                            break
                        }
                        a.o = !0;
                        return G(v, Sj(a, e.X, c, m), 6);
                    case 6:
                        return G(v,
                            Sj(a, e.ga, c, n), 7);
                    case 7:
                        return v.return();
                    case 5:
                        if (p = oc(l)) q = p(), a.j[b] = q, h = q.convertCodecs(b, l);
                    case 4:
                        u = h + a.A.addExtraFeaturesToSourceBuffer(h);
                        Cg(a.I);
                        try {
                            w = a.m.addSourceBuffer(u)
                        } catch (A) {
                            throw new T(2, 3, 3015, A, "The mediaSource_ status was " + a.m.readyState + " expected 'open'", null);
                        }
                        a.B && (w.mode = Uj);
                        a.s.D(w, "error", function () {
                            var A = a.l[b][0];
                            A.p.reject(new T(2, 3, 3014, a.i.error ? a.i.error.code : 0, A.uri))
                        });
                        a.s.D(w, "updateend", function () {
                            return Vj(a, b)
                        });
                        a.h[b] = w;
                        a.G[b] = h;
                        a.Da[b] = !!c.drmInfos.length;
                        H(v)
                }
            })
        }

        r.configure = function (a) {
            this.A = a;
            this.g && (this.g.A = a.modifyCueCallback)
        };

        function Tj(a, b, c, d) {
            a.g || (a.g = new re(a.F), a.g && (a.g.A = a.A.modifyCueCallback));
            var e = a.g;
            d = d || a.fa;
            a = a.aa;
            "application/cea-608" == b || "application/cea-708" == b ? e.i = null : (e.i = (0, te[b])(), e.i.setSequenceMode ? e.i.setSequenceMode(c) : rb("Text parsers w/ setSequenceMode", 'Text parsers should have a "setSequenceMode" method!'), e.i.setManifestType ? e.i.setManifestType(a) : rb("Text parsers w/ setManifestType", 'Text parsers should have a "setManifestType" method!'), e.B = d)
        }

        function Wj(a) {
            return a.C ? !1 : a.m ? "ended" == a.m.readyState : !0
        }

        function Xj(a, b) {
            a.C || !Object.keys(a.h).length ? a = null : b == Vd ? a = a.g.g : (a = Yj(a, b), a = !a || Gi(a) ? null : 1 == a.length && 0 > a.start(0) ? 0 : a.length ? a.start(0) : null);
            return a
        }

        function Zj(a, b) {
            return a.C ? null : b == Vd ? a.g.h : Hi(Yj(a, b))
        }

        function ak(a, b, c) {
            if (a.C) return 0;
            if (b == Vd) return a = a.g, null == a.h || a.h < c ? 0 : a.h - Math.max(c, a.g);
            a = Yj(a, b);
            return Ji(a, c)
        }

        r.yb = function () {
            var a = {
                total: this.C ? [] : Ki(this.i.buffered),
                audio: this.C ? [] : Ki(Yj(this, "audio")),
                video: this.C ? [] : Ki(Yj(this, "video")),
                text: []
            };
            if (this.g) {
                var b = this.g.g, c = this.g.h;
                null != b && null != c && a.text.push({start: b, end: c})
            }
            return a
        };

        function Yj(a, b) {
            try {
                return a.h[b].buffered
            } catch (c) {
                return null
            }
        }

        function bk(a, b, c, d, e, f) {
            var g = null, h = Ab(c);
            if (ae.includes(e)) f = Ui(h), f.length && d && ((b = f.find(function (n) {
                return "com.apple.streaming.transportStreamTimestamp" === n.description
            })) && b.data && (g = Math.round(b.data) / 1E3), a.da.onMetadata([{
                cueTime: d.startTime,
                data: h,
                frames: f,
                dts: d.startTime,
                pts: d.startTime
            }], 0, d.endTime)); else if (e.includes("/mp4") && d && 0 == d.timestampOffset && d.$ && d.$.timescale) {
                var k = d.$.timescale;
                if (!isNaN(k)) {
                    var l = 0, m = !1;
                    (new Lg).box("moof", Qg).box("traf", Qg).S("tfdt", function (n) {
                        l = Xi(n.reader,
                            n.version).baseMediaDecodeTime / k;
                        m = !0;
                        n.parser.stop()
                    }).parse(c, !0);
                    m && (g = l)
                }
            } else if (!e.includes("/mp4") && !e.includes("/webm") && Dj(h) && (a.K ? a.K.clearData() : a.K = new pj, h = a.K.parse(h), b = h.getStartTime(b), null != b && (g = b), h = h.getMetadata(), h.length)) a.da.onMetadata(h, f, d ? d.endTime : null);
            return g
        }

        function ck(a, b, c, d, e, f, g, h, k, l) {
            g = void 0 === g ? !1 : g;
            h = void 0 === h ? !1 : h;
            k = void 0 === k ? !1 : k;
            l = void 0 === l ? !1 : l;
            var m, n, p, q, u, w, v, A, y, D, z, B, C, F;
            return O(function (I) {
                switch (I.g) {
                    case 1:
                        m = Xd;
                        if (b != m.ta) {
                            I.u(2);
                            break
                        }
                        if (!a.B) {
                            I.u(3);
                            break
                        }
                        return G(I, a.za, 4);
                    case 4:
                        n = I.h, a.g.s = n;
                    case 3:
                        return G(I, ue(a.g, c, d ? d.startTime : null, d ? d.endTime : null, d ? d.M()[0] : null), 5);
                    case 5:
                        return I.return();
                    case 2:
                        if (l || !a.o) {
                            I.u(6);
                            break
                        }
                        return G(I, ck(a, m.X, c, d, e, f, g, h, k, !0), 7);
                    case 7:
                        return G(I, ck(a, m.ga, c, d, e, f, g, h, k, !0), 8);
                    case 8:
                        return I.return();
                    case 6:
                        if (!a.h[b]) return I.return();
                        p = a.h[b].timestampOffset;
                        q = a.G[b];
                        a.j[b] && (q = a.j[b].getOriginalMimeType());
                        d && (u = bk(a, b, c, d, q, p), null != u && (null == a.U && b == m.ga && (a.U = u, a.ya = d.startTime, null != a.R && (w = 0, a.ya == a.qa && (w = a.U - a.R), a.pa.resolve(w))), null == a.R && b == m.X && (a.R = u, a.qa = d.startTime, null != a.U && (v = 0, a.ya == a.qa && (v = a.U - a.R), a.pa.resolve(v))), A = d.startTime - u, y = Math.abs(p - A), (.001 <= y || g || h) && (!k || 0 < A || !p) && (p = A, a.Ea && (dk(a, b, function () {
                            return ek(a, b)
                        }, null), dk(a, b, function () {
                            return fk(a, b, p)
                        }, null))),
                            D = b == m.ga || !(m.ga in a.h), a.B && D && a.za.resolve(p)));
                        f && b == m.ga && (a.g || Tj(a, "application/cea-608", a.B, !1), a.H || (z = q.split(";", 1)[0], a.H = new Hb(z)), d ? (B = a.H.i(c), B.length && ye(a.g, B, d.startTime, d.endTime, p)) : a.H.init(c, h));
                        if (!a.j[b]) {
                            I.u(9);
                            break
                        }
                        return G(I, a.j[b].transmux(c, e, d, a.m.duration, b), 10);
                    case 10:
                        c = I.h;
                    case 9:
                        c = gk(a, c, d ? d.startTime : null, b, d ? d.M()[0] : null);
                        if (!d || !a.B || b == m.ta) {
                            I.u(11);
                            break
                        }
                        if (!g && !h) {
                            I.u(11);
                            break
                        }
                        C = d.startTime;
                        if ("HLS" != a.aa || a.o || b != m.X || !a.h[m.ga]) {
                            I.u(13);
                            break
                        }
                        return G(I,
                            a.pa, 14);
                    case 14:
                        F = I.h, .1 < Math.abs(F) && (C -= F);
                    case 13:
                        dk(a, b, function () {
                            return ek(a, b)
                        }, null), dk(a, b, function () {
                            return fk(a, b, C)
                        }, null);
                    case 11:
                        return G(I, dk(a, b, function () {
                            var L = c;
                            if ("video" == b && a.Z) {
                                var J = a.Z;
                                J.g && J.g.appendBuffer(L, "video", J.o, -p)
                            }
                            a.h[b].appendBuffer(L)
                        }, d ? d.M()[0] : null), 15);
                    case 15:
                        H(I)
                }
            })
        }

        function hk(a, b) {
            var c = Zj(a, "video") || 0;
            we(a.g, b, c)
        }

        function ik(a) {
            a.g && we(a.g, "", 0)
        }

        r.remove = function (a, b, c) {
            var d = this, e;
            return O(function (f) {
                return 1 == f.g ? (e = Xd, a == e.ta ? G(f, d.g.remove(b, c), 0) : G(f, dk(d, a, function () {
                    return jk(d, a, b, c)
                }, null), 4)) : d.o ? G(f, dk(d, e.X, function () {
                    return jk(d, e.X, b, c)
                }, null), 0) : f.u(0)
            })
        };

        function kk(a, b) {
            var c;
            return O(function (d) {
                return 1 == d.g ? (c = Xd, b == c.ta ? a.g ? G(d, a.g.remove(0, Infinity), 0) : d.return() : G(d, dk(a, b, function () {
                    return jk(a, b, 0, a.m.duration)
                }, null), 4)) : a.o ? G(d, dk(a, c.X, function () {
                    return jk(a, c.X, 0, a.m.duration)
                }, null), 0) : d.u(0)
            })
        }

        r.flush = function (a) {
            var b = this, c;
            return O(function (d) {
                return 1 == d.g ? (c = Xd, a == c.ta ? d.return() : G(d, dk(b, a, function () {
                    b.i.currentTime -= .001;
                    Vj(b, a)
                }, null), 2)) : b.o ? G(d, dk(b, c.X, function () {
                    var e = c.X;
                    b.i.currentTime -= .001;
                    Vj(b, e)
                }, null), 0) : d.u(0)
            })
        };

        function lk(a, b, c, d, e, f, g, h, k) {
            var l, m, n;
            return O(function (p) {
                if (1 == p.g) {
                    l = Xd;
                    if (b == l.ta) return f || (a.g.s = c), ve(a.g, d, e), p.return();
                    m = [];
                    return G(p, mk(a, b, g, h, k), 2)
                }
                n = p.h;
                n || (m.push(dk(a, b, function () {
                    return ek(a, b)
                }, null)), a.o && m.push(dk(a, l.X, function () {
                    return ek(a, l.X)
                }, null)));
                f || (m.push(dk(a, b, function () {
                    return fk(a, b, c)
                }, null)), a.o && m.push(dk(a, l.X, function () {
                    return fk(a, l.X, c)
                }, null)));
                m.push(dk(a, b, function () {
                    a.h[b].appendWindowStart = 0;
                    a.h[b].appendWindowEnd = e;
                    a.h[b].appendWindowStart = d;
                    Vj(a,
                        b)
                }, null));
                a.o && m.push(dk(a, l.X, function () {
                    var q = l.X;
                    a.h[q].appendWindowStart = 0;
                    a.h[q].appendWindowEnd = e;
                    a.h[q].appendWindowStart = d;
                    Vj(a, q)
                }, null));
                return G(p, Promise.all(m), 0)
            })
        }

        function nk(a, b, c) {
            var d;
            return O(function (e) {
                if (1 == e.g) {
                    d = Xd;
                    if (b == d.ta) return e.return();
                    b == d.ga && (a.za = new bg);
                    dk(a, b, function () {
                        return ek(a, b)
                    }, null);
                    a.o && dk(a, d.X, function () {
                        return ek(a, d.X)
                    }, null);
                    return G(e, dk(a, b, function () {
                        return fk(a, b, c)
                    }, null), 2)
                }
                return a.o ? G(e, dk(a, d.X, function () {
                    return fk(a, d.X, c)
                }, null), 0) : e.u(0)
            })
        }

        r.endOfStream = function (a) {
            var b = this;
            return O(function (c) {
                return G(c, ok(b, function () {
                    Wj(b) || "closed" === b.m.readyState || (a ? b.m.endOfStream(a) : b.m.endOfStream())
                }), 0)
            })
        };
        r.$a = function (a) {
            var b = this;
            return O(function (c) {
                return G(c, ok(b, function () {
                    if (a < b.m.duration) for (var d in b.h) {
                        var e = {
                            start: function () {
                            }, p: new bg, uri: null
                        };
                        b.l[d].unshift(e)
                    }
                    b.m.duration = a;
                    b.ea = a
                }), 0)
            })
        };
        r.getDuration = function () {
            return this.m.duration
        };

        function jk(a, b, c, d) {
            d <= c ? Vj(a, b) : a.h[b].remove(c, d)
        }

        function ek(a, b) {
            var c = a.h[b].appendWindowStart, d = a.h[b].appendWindowEnd;
            a.h[b].abort();
            a.h[b].appendWindowStart = c;
            a.h[b].appendWindowEnd = d;
            Vj(a, b)
        }

        function fk(a, b, c) {
            0 > c && (c += .001);
            a.h[b].timestampOffset = c;
            Vj(a, b)
        }

        function Vj(a, b) {
            if (!a.C) {
                var c = a.l[b][0];
                c && (c.p.resolve(), pk(a, b))
            }
        }

        function dk(a, b, c, d) {
            Cg(a.I);
            c = {start: c, p: new bg, uri: d};
            a.l[b].push(c);
            1 == a.l[b].length && qk(a, b);
            return c.p
        }

        function ok(a, b) {
            var c, d, e, f, g, h, k;
            return O(function (l) {
                switch (l.g) {
                    case 1:
                        Cg(a.I);
                        c = [];
                        d = {};
                        for (e in a.h) d.cd = new bg, f = {
                            start: function (m) {
                                return function () {
                                    return m.cd.resolve()
                                }
                            }(d), p: d.cd, uri: null
                        }, a.l[e].push(f), c.push(d.cd), 1 == a.l[e].length && f.start(), d = {cd: d.cd};
                        sa(l, 2);
                        return G(l, Promise.all(c), 4);
                    case 4:
                        va(l, 3);
                        break;
                    case 2:
                        throw g = wa(l), g;
                    case 3:
                        return sa(l, 5, 6), G(l, b(), 6);
                    case 6:
                        xa(l);
                        for (h in a.h) pk(a, h);
                        ya(l, 0);
                        break;
                    case 5:
                        throw k = wa(l), new T(2, 3, 3015, k, a.i.error || "No error in the media element",
                            null);
                }
            })
        }

        function pk(a, b) {
            a.l[b].shift();
            qk(a, b)
        }

        function qk(a, b) {
            var c = a.l[b][0];
            if (c) try {
                c.start()
            } catch (d) {
                "QuotaExceededError" == d.name ? c.p.reject(new T(2, 3, 3017, b)) : c.p.reject(new T(2, 3, 3015, d, a.i.error || "No error in the media element", c.uri)), pk(a, b)
            }
        }

        function gk(a, b, c, d, e) {
            var f = null == c, g = a.Da[d];
            c = a.da.Xh();
            if (f = a.A.insertFakeEncryptionInInit && f && g) c = Pc(c), f = ad() || Zc() || id() || Yc() && nd() && c;
            f && "mp4" == fe(a.G[d]) && (b = wi(b, e));
            return b
        }

        function rk(a, b, c, d) {
            return dk(a, b, function () {
                b !== Vd && (pb() && (a.j[b] && (a.j[b].destroy(), delete a.j[b]), d && (a.j[b] = d), a.h[b].changeType(c + a.A.addExtraFeaturesToSourceBuffer(c)), a.G[b] = c), Vj(a, b))
            }, null)
        }

        function sk(a, b) {
            var c, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L;
            return O(function (J) {
                switch (J.g) {
                    case 1:
                        c = Xd;
                        a.C = !0;
                        a.o = !1;
                        d = a.i.currentTime;
                        e = a.i.autoplay;
                        f = a.i.paused;
                        a.ra && (a.i.autoplay = !1);
                        ua(J, 2);
                        a.s.Ra();
                        g = [];
                        for (h in a.j) g.push(a.j[h].destroy());
                        for (k in a.l) for (l = a.l[k], m = l[0], a.l[k] = l.slice(0, 1), m && g.push(m.p.catch(Ae)), n = t(l.slice(1)), p = n.next(); !p.done; p = n.next()) q = p.value, q.p.reject(new T(2, 7, 7003, void 0));
                        for (u in a.h) {
                            w = a.h[u];
                            try {
                                a.m.removeSourceBuffer(w)
                            } catch (E) {
                            }
                        }
                        return G(J,
                            Promise.all(g), 4);
                    case 4:
                        return a.j = {}, a.h = {}, v = a.m.duration, a.L = new bg, a.m = Oj(a, a.L), G(J, a.L, 5);
                    case 5:
                        !isNaN(v) && v ? a.m.duration = v : !isNaN(a.ea) && a.ea && (a.m.duration = a.ea), A = new bg, y = a.m.sourceBuffers, D = b.size, z = 0, B = function () {
                            z++;
                            z === D && (A.resolve(), a.s.lb(y, "addsourcebuffer", B))
                        }, a.s.D(y, "addsourcebuffer", B), C = t(b.keys()), F = C.next();
                    case 6:
                        if (F.done) return a.i.currentTime = d, G(J, A, 2);
                        I = F.value;
                        L = b.get(I);
                        return G(J, Sj(a, I, L, L.codecs), 9);
                    case 9:
                        a.o ? (a.l[c.X] = [], a.l[c.ga] = []) : a.l[I] = [];
                        F = C.next();
                        J.u(6);
                        break;
                    case 2:
                        xa(J), a.C = !1, Cg(a.I), a.s.ha(a.i, "canplaythrough", function () {
                            a.I.g || (a.i.autoplay = e, f || a.i.play())
                        }), ya(J, 0)
                }
            })
        }

        function tk(a, b) {
            return ok(a, function () {
                return sk(a, b)
            })
        }

        function mk(a, b, c, d, e) {
            var f, g, h, k, l, m, n, p, q, u, w, v, A, y, D;
            return O(function (z) {
                if (1 == z.g) {
                    f = Xd;
                    if (b == f.ta) return z.return(!1);
                    g = ie(oe(a.G[b]));
                    h = je(a.G[b]);
                    l = !1;
                    m = $d(c, d);
                    n = a.A.forceTransmux;
                    if (!nb(m) || !a.B && ae.includes(m)) n = !0;
                    n && (p = be(c, d), q = oc(p)) && (k = q(), u = Td(f.X, (d || "").split(",")), w = Td(f.ga, (d || "").split(",")), u && w ? (l = !0, v = w, b == f.X && (v = u), m = k.convertCodecs(b, be(c, v))) : m = k.convertCodecs(b, p));
                    A = ie(oe(m));
                    y = je(m);
                    if (g === A && h === y) return a.j[b] && !k ? (a.j[b].destroy(), delete a.j[b]) : !a.j[b] && k ? a.j[b] =
                        k : k && (a.j[b] && a.j[b].transmux != k.transmux ? (a.j[b].destroy(), delete a.j[b], a.j[b] = k) : k.destroy()), z.return(!1);
                    D = !0;
                    if (a.o || l && k && !a.j[b]) D = !1;
                    if (D && "smooth" === a.A.codecSwitchingStrategy && pb()) return G(z, rk(a, b, m, k), 3);
                    k && k.destroy();
                    return G(z, tk(a, e), 3)
                }
                return z.return(!0)
            })
        }

        function uk(a, b, c, d) {
            if (b == Vd) var e = !1; else {
                e = ie(oe(a.G[b]));
                var f = je(a.G[b]), g = $d(c, d), h = a.A.forceTransmux;
                if (!nb(g) || !a.B && ae.includes(g)) h = !0;
                c = be(c, d);
                h && (h = oc(c)) && (h = h(), g = h.convertCodecs(b, c), h.destroy());
                b = ie(oe(g));
                g = je(g);
                e = e !== b || f !== g
            }
            return e ? "smooth" !== a.A.codecSwitchingStrategy || !pb() || a.o : !1
        }

        var Qj = window.URL.createObjectURL, Uj = "sequence";

        function vk(a, b, c) {
            this.i = a;
            this.A = b;
            this.o = this.j = Infinity;
            this.g = 1;
            this.h = this.l = null;
            this.B = 0;
            this.G = !0;
            this.H = 0;
            this.C = void 0 === c ? !0 : c;
            this.F = 0;
            this.s = !1;
            this.m = a
        }

        r = vk.prototype;
        r.getDuration = function () {
            return this.j
        };
        r.Zh = function () {
            return this.g
        };
        r.mh = function (a) {
            this.i = a
        };
        r.$a = function (a) {
            this.j = a
        };
        r.di = function () {
            return this.i
        };
        r.kh = function (a) {
            this.B = a
        };
        r.wc = function (a) {
            this.G = a
        };
        r.Ie = function (a) {
            this.o = a
        };
        r.je = function () {
            return this.o
        };
        r.eg = function (a) {
            this.A = a
        };
        r.Sh = function () {
            return this.A
        };
        r.$g = function (a, b) {
            if (0 != a.length) {
                var c = (Date.now() + this.B) / 1E3;
                a = a.filter(function (e) {
                    return e.start + b < c
                });
                if (0 != a.length) {
                    var d = a[a.length - 1].end + b;
                    this.ye(a[0].start + b);
                    this.g = a.reduce(function (e, f) {
                        return Math.max(e, f.end - f.start)
                    }, this.g);
                    this.h = Math.max(this.h, d);
                    null != this.i && this.C && !this.s && (this.i = c - this.h - this.g)
                }
            }
        };
        r.Jd = function (a) {
            if (0 != a.length) {
                var b = a[0].startTime, c = a[0].endTime, d = (Date.now() + this.B) / 1E3;
                a = t(a);
                for (var e = a.next(); !e.done; e = a.next()) e = e.value, d < e.startTime || (b = Math.min(b, e.startTime), c = Math.max(c, e.endTime), this.g = Math.max(this.g, e.endTime - e.startTime));
                this.ye(b);
                this.h = Math.max(this.h, c);
                null != this.i && this.C && !this.s && (this.i = d - this.h - this.g)
            }
        };
        r.$h = function () {
            return this.h
        };
        r.re = function () {
            this.s = !0
        };
        r.zi = function () {
            return this.s
        };
        r.lh = function (a) {
            this.m = a
        };
        r.Wh = function () {
            return this.m
        };
        r.ye = function (a) {
            this.l = null == this.l ? a : Math.min(this.l, a)
        };
        r.Pf = function (a) {
            this.g = Math.max(this.g, a)
        };
        r.offset = function (a) {
            null != this.l && (this.l += a);
            null != this.h && (this.h += a)
        };
        r.V = function () {
            return Infinity == this.j && !this.G
        };
        r.qc = function () {
            return Infinity != this.j && !this.G
        };
        r.nb = function () {
            return Math.max(this.H, this.Zb() - this.o)
        };
        r.qh = function (a) {
            this.H = a
        };
        r.Zb = function () {
            return this.V() || this.qc() ? Math.min(Math.max(0, (Date.now() + this.B) / 1E3 - this.g - this.i) + this.F, this.j) : this.h ? Math.min(this.h, this.j) : this.j
        };
        r.ud = function (a) {
            var b = Math.max(this.l, this.H);
            return Infinity == this.o ? Math.ceil(1E3 * b) / 1E3 : Math.max(b, Math.min(this.Zb() - this.o + a, this.Ab()))
        };
        r.Yb = function () {
            return this.ud(0)
        };
        r.Ab = function () {
            return Math.max(0, this.Zb() - (this.V() || this.qc() ? this.A : 0))
        };
        r.uh = function () {
            return null == this.i || null != this.h && this.C ? !1 : !0
        };
        r.jh = function (a) {
            this.F = a
        };
        r.Qh = function () {
            return this.F
        };
        S("shaka.media.PresentationTimeline", vk);
        vk.prototype.getAvailabilityTimeOffset = vk.prototype.Qh;
        vk.prototype.setAvailabilityTimeOffset = vk.prototype.jh;
        vk.prototype.usingPresentationStartTime = vk.prototype.uh;
        vk.prototype.getSeekRangeEnd = vk.prototype.Ab;
        vk.prototype.getSeekRangeStart = vk.prototype.Yb;
        vk.prototype.getSafeSeekRangeStart = vk.prototype.ud;
        vk.prototype.getSegmentAvailabilityEnd = vk.prototype.Zb;
        vk.prototype.setUserSeekStart = vk.prototype.qh;
        vk.prototype.getSegmentAvailabilityStart = vk.prototype.nb;
        vk.prototype.isInProgress = vk.prototype.qc;
        vk.prototype.isLive = vk.prototype.V;
        vk.prototype.offset = vk.prototype.offset;
        vk.prototype.notifyMaxSegmentDuration = vk.prototype.Pf;
        vk.prototype.notifyMinSegmentStartTime = vk.prototype.ye;
        vk.prototype.getInitialProgramDateTime = vk.prototype.Wh;
        vk.prototype.setInitialProgramDateTime = vk.prototype.lh;
        vk.prototype.isStartTimeLocked = vk.prototype.zi;
        vk.prototype.lockStartTime = vk.prototype.re;
        vk.prototype.getMaxSegmentEndTime = vk.prototype.$h;
        vk.prototype.notifySegments = vk.prototype.Jd;
        vk.prototype.notifyTimeRange = vk.prototype.$g;
        vk.prototype.getDelay = vk.prototype.Sh;
        vk.prototype.setDelay = vk.prototype.eg;
        vk.prototype.getSegmentAvailabilityDuration = vk.prototype.je;
        vk.prototype.setSegmentAvailabilityDuration = vk.prototype.Ie;
        vk.prototype.setStatic = vk.prototype.wc;
        vk.prototype.setClockOffset = vk.prototype.kh;
        vk.prototype.getPresentationStartTime = vk.prototype.di;
        vk.prototype.setDuration = vk.prototype.$a;
        vk.prototype.setPresentationStartTime = vk.prototype.mh;
        vk.prototype.getMaxSegmentDuration = vk.prototype.Zh;
        vk.prototype.getDuration = vk.prototype.getDuration;

        function wk(a, b, c) {
            this.j = c;
            this.l = a;
            this.s = xk(a);
            this.g = a.g.currentTime;
            this.m = Date.now() / 1E3;
            this.h = !1;
            this.o = 0;
            this.A = b;
            this.i = function () {
            }
        }

        wk.prototype.release = function () {
            this.j = this.l = null;
            this.i = function () {
            }
        };

        function yk(a, b) {
            a.i = b
        }

        function zk(a) {
            this.g = a
        }

        function xk(a) {
            if (a.g.paused || 0 == a.g.playbackRate || 0 == a.g.buffered.length) var b = !1; else a:{
                b = a.g.currentTime;
                a = t(Ki(a.g.buffered));
                for (var c = a.next(); !c.done; c = a.next()) if (c = c.value, !(b < c.start - .1 || b > c.end - .5)) {
                    b = !0;
                    break a
                }
                b = !1
            }
            return b
        };

        function Ak(a, b, c, d, e) {
            var f = this;
            this.A = e;
            this.g = a;
            this.B = b;
            this.s = c;
            this.l = new gb;
            this.j = !1;
            this.F = a.readyState;
            this.C = this.i = 0;
            this.h = d;
            this.o = !1;
            this.l.D(a, "waiting", function () {
                return Bk(f)
            });
            this.m = (new Tc(function () {
                Bk(f)
            })).Sa(this.s.gapJumpTimerTime)
        }

        Ak.prototype.release = function () {
            this.l && (this.l.release(), this.l = null);
            null != this.m && (this.m.stop(), this.m = null);
            this.h && (this.h.release(), this.h = null);
            this.g = this.B = this.A = null
        };
        Ak.prototype.Sf = function () {
            this.o = !0;
            Bk(this)
        };

        function Bk(a) {
            if (0 != a.g.readyState) {
                if (a.g.seeking) {
                    if (!a.j) return
                } else a.j = !1;
                if (!a.g.paused || a.g.currentTime == a.i && (a.g.autoplay || a.g.currentTime != a.i)) {
                    a.g.readyState != a.F && (a.F = a.g.readyState);
                    var b;
                    if (!(b = !a.h)) {
                        b = a.h;
                        var c = b.l, d = xk(c), e = c.g.currentTime, f = Date.now() / 1E3;
                        if (b.g != e || b.s != d) b.m = f, b.g = e, b.s = d, b.h = !1;
                        e = f - b.m;
                        if (d = e >= b.A && d && !b.h) b.i(b.g, e), b.h = !0, b.g = c.g.currentTime, b.o++, b.j(new U("stalldetected"));
                        b = !d
                    }
                    if (b && (b = a.g.currentTime, c = a.g.buffered, d = Oi(c, b, a.s.gapDetectionThreshold),
                    null != d && (0 != d || a.o))) {
                        e = c.start(d);
                        if (navigator.userAgent.match(/Edge\//) || Zc()) e = Math.ceil(100 * (e + .01)) / 100;
                        e >= a.B.Ab() || .001 > e - b || (0 != d && c.end(d - 1), a.g.currentTime = e, b == a.i && (a.i = e), a.C++, a.A(new U("gapjumped")))
                    }
                }
            }
        };

        function Ck(a, b, c, d) {
            b == HTMLMediaElement.HAVE_NOTHING || a.readyState >= b ? d() : (b = Dk.value().get(b), c.ha(a, b, d))
        }

        var Dk = new Lc(function () {
            return new Map([[HTMLMediaElement.HAVE_METADATA, "loadedmetadata"], [HTMLMediaElement.HAVE_CURRENT_DATA, "loadeddata"], [HTMLMediaElement.HAVE_FUTURE_DATA, "canplay"], [HTMLMediaElement.HAVE_ENOUGH_DATA, "canplaythrough"]])
        });

        function Ek(a, b, c, d) {
            var e = this;
            this.g = a;
            this.m = b;
            this.s = c;
            this.l = null;
            this.j = function () {
                null == e.l && (e.l = d());
                return e.l
            };
            this.o = !1;
            this.h = new gb;
            this.i = new Fk(a);
            Ck(this.g, HTMLMediaElement.HAVE_METADATA, this.h, function () {
                Gk(e, e.j())
            })
        }

        Ek.prototype.release = function () {
            this.h && (this.h.release(), this.h = null);
            null != this.i && (this.i.release(), this.i = null);
            this.m = function () {
            };
            this.g = null
        };

        function Hk(a) {
            return a.o ? a.g.currentTime : a.j()
        }

        function Ik(a, b) {
            0 < a.g.readyState ? Jk(a.i, b) : Ck(a.g, HTMLMediaElement.HAVE_METADATA, a.h, function () {
                Gk(a, a.j())
            })
        }

        function Gk(a, b) {
            .001 > Math.abs(a.g.currentTime - b) ? Kk(a) : (a.h.ha(a.g, "seeking", function () {
                Kk(a)
            }), Jk(a.i, a.g.currentTime && 0 != a.g.currentTime ? a.g.currentTime : b))
        }

        function Kk(a) {
            a.o = !0;
            a.h.D(a.g, "seeking", function () {
                return a.m()
            });
            a.s(a.g.currentTime)
        }

        function Fk(a) {
            var b = this;
            this.h = a;
            this.m = 10;
            this.l = this.j = this.i = 0;
            this.g = new Tc(function () {
                0 >= b.i ? b.g.stop() : b.h.currentTime != b.j ? b.g.stop() : (b.h.currentTime = b.l, b.i--)
            })
        }

        Fk.prototype.release = function () {
            this.g && (this.g.stop(), this.g = null);
            this.h = null
        };

        function Jk(a, b) {
            a.j = a.h.currentTime;
            a.l = b;
            a.i = a.m;
            a.h.currentTime = b;
            a.g.Sa(.1)
        };

        function Lk(a) {
            this.h = a;
            this.j = !1;
            this.g = null;
            this.i = new gb
        }

        r = Lk.prototype;
        r.$e = function () {
            function a() {
                if (null == b.g || 0 == b.g && Infinity != b.h.duration) b.j = !0; else {
                    var c = b.h.currentTime, d = b.g;
                    0 > b.g && (d = Math.max(0, c + b.g));
                    c != d ? (b.i.ha(b.h, "seeking", function () {
                        b.j = !0
                    }), b.h.currentTime = d) : b.j = !0
                }
            }

            var b = this;
            Ck(this.h, HTMLMediaElement.HAVE_CURRENT_DATA, this.i, function () {
                a()
            })
        };
        r.release = function () {
            this.i && (this.i.release(), this.i = null);
            this.h = null
        };
        r.af = function (a) {
            this.g = this.j ? this.g : a
        };
        r.$d = function () {
            return (this.j ? this.h.currentTime : this.g) || 0
        };
        r.vg = function () {
            return 0
        };
        r.ug = function () {
            return 0
        };
        r.Zg = function () {
        };

        function Mk(a, b, c, d, e, f) {
            var g = this;
            this.i = a;
            this.g = b.presentationTimeline;
            this.B = b.minBufferTime || 0;
            this.l = c;
            this.A = e;
            this.s = null;
            this.o = Nk(a, c, f);
            this.j = new Ak(a, b.presentationTimeline, c, this.o, f);
            this.h = new Ek(a, function () {
                    a:{
                        var h = g.j;
                        h.j = !0;
                        h.o = !1;
                        var k = Hk(g.h);
                        h = Ok(g, k);
                        if (.001 < Math.abs(h - k)) {
                            k = !1;
                            if (!gd() || gd() && od()) k = !0; else {
                                var l = Date.now() / 1E3;
                                if (!g.s || g.s < l - 1) g.s = l, k = !0
                            }
                            if (k) {
                                Ik(g.h, h);
                                h = void 0;
                                break a
                            }
                        }
                        g.A();
                        h = void 0
                    }
                    return h
                }, function (h) {
                    var k = g.j;
                    k.g.seeking && !k.j && (k.j = !0, k.i = h)
                },
                function () {
                    var h = d;
                    null == h ? h = Infinity > g.g.getDuration() ? g.g.Yb() : g.g.Ab() : 0 > h && (h = g.g.Ab() + h);
                    return Pk(g, Qk(g, h))
                });
            this.m = new Tc(function () {
                if (0 != g.i.readyState && !g.i.paused) {
                    var h = Hk(g.h), k = g.g.Yb(), l = g.g.Ab();
                    3 > l - k && (k = l - 3);
                    h < k && (h = Ok(g, h), g.i.currentTime = h)
                }
            })
        }

        r = Mk.prototype;
        r.$e = function () {
            this.m.Sa(.25)
        };
        r.release = function () {
            this.h && (this.h.release(), this.h = null);
            this.j && (this.j.release(), this.j = null);
            this.m && (this.m.stop(), this.m = null);
            this.i = this.h = this.g = this.l = null;
            this.A = function () {
            }
        };
        r.af = function (a) {
            Ik(this.h, a)
        };
        r.$d = function () {
            var a = Hk(this.h);
            return 0 < this.i.readyState && !this.i.paused ? Qk(this, a) : a
        };
        r.vg = function () {
            return this.o ? this.o.o : 0
        };
        r.ug = function () {
            return this.j.C
        };
        r.Zg = function () {
            this.j.Sf()
        };

        function Pk(a, b) {
            var c = a.g.getDuration();
            return b >= c ? c - a.l.durationBackoff : b
        }

        function Ok(a, b) {
            var c = Math.max(a.B, a.l.rebufferingGoal), d = a.l.safeSeekOffset, e = a.g.Yb(), f = a.g.Ab(),
                g = a.g.getDuration();
            3 > f - e && (e = f - 3);
            var h = a.g.ud(c), k = a.g.ud(d);
            c = a.g.ud(c + d);
            return b >= g ? Pk(a, b) : b > f ? f : b < e ? Ii(a.i.buffered, k) ? k : c : b >= h || Ii(a.i.buffered, b) ? b : c
        }

        function Qk(a, b) {
            var c = a.g.Yb();
            if (b < c) return c;
            a = a.g.Ab();
            return b > a ? a : b
        }

        function Nk(a, b, c) {
            if (!b.stallEnabled) return null;
            var d = b.stallSkip;
            b = new wk(new zk(a), b.stallThreshold, c);
            yk(b, function () {
                d ? a.currentTime += d : (a.pause(), a.play())
            });
            return b
        };

        function Rk(a) {
            this.O = a;
            this.l = null;
            this.i = 0;
            this.m = !1
        }

        r = Rk.prototype;
        r.getNumReferences = function () {
            return this.O.length
        };
        r.getNumEvicted = function () {
            return this.i
        };
        r.release = function () {
            this.m || (this.O = [], this.l && this.l.stop(), this.l = null)
        };
        r.Fi = function () {
            this.m = !0
        };
        r.Jb = function (a) {
            for (var b = t(this.O), c = b.next(); !c.done; c = b.next()) a(c.value)
        };
        r.find = function (a) {
            for (var b = this.O.length - 1, c = b; 0 <= c; --c) {
                var d = this.O[c], e = c < b ? this.O[c + 1].startTime : d.endTime;
                if (a >= d.startTime && a < e) return c + this.i
            }
            return this.O.length && a < this.O[0].startTime ? this.i : null
        };
        r.get = function (a) {
            if (0 == this.O.length) return null;
            a -= this.i;
            return 0 > a || a >= this.O.length ? null : this.O[a]
        };
        r.offset = function (a) {
            if (!this.m) for (var b = t(this.O), c = b.next(); !c.done; c = b.next()) c.value.offset(a)
        };
        r.ue = function (a) {
            if (!this.m && a.length) {
                var b = Math.round(1E3 * a[0].startTime) / 1E3;
                this.O = this.O.filter(function (c) {
                    return Math.round(1E3 * c.startTime) / 1E3 < b
                });
                this.O.push.apply(this.O, x(a))
            }
        };
        r.Id = function (a, b) {
            var c = this;
            a = a.filter(function (d) {
                return d.endTime > b && (0 == c.O.length || d.endTime > c.O[0].startTime)
            });
            this.ue(a);
            this.Oa(b)
        };
        r.Oa = function (a) {
            if (!this.m) {
                var b = this.O.length;
                this.O = this.O.filter(function (c) {
                    return c.endTime > a
                });
                this.i += b - this.O.length
            }
        };
        r.Ec = function (a, b, c) {
            c = void 0 === c ? !1 : c;
            if (!this.m) {
                for (; this.O.length;) if (this.O[this.O.length - 1].startTime >= b) this.O.pop(); else break;
                for (; this.O.length;) if (this.O[0].endTime <= a) this.O.shift(), c || this.i++; else break;
                0 != this.O.length && (a = this.O[this.O.length - 1], b = new Ci(a.startTime, b, a.C, a.Ha, a.sa, a.$, a.timestampOffset, a.appendWindowStart, a.appendWindowEnd, a.g, a.tilesLayout, a.A, a.h, a.status, a.aesKey), b.mimeType = a.mimeType, b.codecs = a.codecs, b.i = a.i, this.O[this.O.length - 1] = b)
            }
        };
        r.Me = function (a, b) {
            var c = this;
            this.m || (this.l && this.l.stop(), this.l = new Tc(function () {
                var d = b();
                d ? c.O.push.apply(c.O, x(d)) : (c.l.stop(), c.l = null)
            }), this.l.Sa(a))
        };
        Rk.prototype[Symbol.iterator] = function () {
            return this.Kb(0)
        };
        Rk.prototype.Kb = function (a, b, c) {
            b = void 0 === b ? !1 : b;
            c = void 0 === c ? !1 : c;
            var d = this.find(a);
            if (null == d) return null;
            var e = this.get(d);
            c ? d++ : d--;
            var f = -1;
            if (e && 0 < e.g.length) for (var g = e.g.length - 1; 0 <= g; --g) {
                var h = e.g[g];
                if (a >= h.startTime && a < h.endTime) {
                    if (!b) {
                        for (; g && !h.l;) g--, h = e.g[g];
                        if (!h.l) return Za("No independent partial segment found!"), null
                    }
                    c ? d-- : d++;
                    f = g - 1;
                    break
                }
            }
            return new Sk(this, d, f, c)
        };

        function Tk(a, b, c) {
            a = new Ci(a, a + b, function () {
                return c
            }, 0, null, null, a, a, a + b);
            return new Rk([a])
        }

        S("shaka.media.SegmentIndex", Rk);
        Rk.forSingleSegment = Tk;
        Rk.prototype.getIteratorForTime = Rk.prototype.Kb;
        Rk.prototype.updateEvery = Rk.prototype.Me;
        Rk.prototype.fit = Rk.prototype.Ec;
        Rk.prototype.evict = Rk.prototype.Oa;
        Rk.prototype.mergeAndEvict = Rk.prototype.Id;
        Rk.prototype.offset = Rk.prototype.offset;
        Rk.prototype.get = Rk.prototype.get;
        Rk.prototype.find = Rk.prototype.find;
        Rk.prototype.markImmutable = Rk.prototype.Fi;
        Rk.prototype.release = Rk.prototype.release;
        Rk.prototype.getNumEvicted = Rk.prototype.getNumEvicted;
        Rk.prototype.getNumReferences = Rk.prototype.getNumReferences;

        function Sk(a, b, c, d) {
            this.i = a;
            this.h = b;
            this.g = c;
            this.reverse = d
        }

        Sk.prototype.Uc = function (a) {
            this.reverse = a
        };
        Sk.prototype.Lh = function () {
            return this.h
        };
        Sk.prototype.current = function () {
            var a = this.i.get(this.h);
            a && 0 < a.g.length && a.o && this.g >= a.g.length && (this.h++, this.g = 0, a = this.i.get(this.h));
            return a && 0 < a.g.length ? a.g[this.g] : a
        };
        Sk.prototype.next = function () {
            var a = this.i.get(this.h);
            this.reverse ? a && 0 < a.g.length ? (this.g--, 0 > this.g && (this.h--, this.g = (a = this.i.get(this.h)) && 0 < a.g.length ? a.g.length - 1 : 0)) : (this.h--, this.g = 0) : a && 0 < a.g.length ? (this.g++, a.o && this.g == a.g.length && (this.h++, this.g = 0)) : (this.h++, this.g = 0);
            a = this.current();
            return {value: a, done: !a}
        };
        S("shaka.media.SegmentIterator", Sk);
        Sk.prototype.next = Sk.prototype.next;
        Sk.prototype.current = Sk.prototype.current;
        Sk.prototype.currentPosition = Sk.prototype.Lh;
        Sk.prototype.setReverse = Sk.prototype.Uc;

        function Uk() {
            Rk.call(this, []);
            this.g = []
        }

        oa(Uk, Rk);
        r = Uk.prototype;
        r.clone = function () {
            var a = new Uk;
            a.g = this.g.slice();
            return a
        };
        r.release = function () {
            for (var a = t(this.g), b = a.next(); !b.done; b = a.next()) b.value.release();
            this.g = []
        };
        r.Jb = function (a) {
            for (var b = t(this.g), c = b.next(); !c.done; c = b.next()) c.value.Jb(a)
        };
        r.find = function (a) {
            for (var b = 0, c = t(this.g), d = c.next(); !d.done; d = c.next()) {
                d = d.value;
                var e = d.find(a);
                if (null != e) return e + b;
                b += d.getNumEvicted() + d.getNumReferences()
            }
            return null
        };
        r.get = function (a) {
            for (var b = 0, c = t(this.g), d = c.next(); !d.done; d = c.next()) {
                d = d.value;
                var e = d.get(a - b);
                if (e) return e;
                e = d.getNumReferences();
                b += d.getNumEvicted() + e
            }
            return null
        };
        r.offset = function () {
        };
        r.ue = function () {
        };
        r.Oa = function () {
        };
        r.Id = function () {
        };
        r.Ec = function () {
        };
        r.Me = function () {
        };
        S("shaka.media.MetaSegmentIndex", Uk);
        Uk.prototype.updateEvery = Uk.prototype.Me;
        Uk.prototype.fit = Uk.prototype.Ec;
        Uk.prototype.mergeAndEvict = Uk.prototype.Id;
        Uk.prototype.evict = Uk.prototype.Oa;
        Uk.prototype.merge = Uk.prototype.ue;
        Uk.prototype.offset = Uk.prototype.offset;
        Uk.prototype.get = Uk.prototype.get;
        Uk.prototype.find = Uk.prototype.find;
        Uk.prototype.forEachTopLevelReference = Uk.prototype.Jb;
        Uk.prototype.release = Uk.prototype.release;

        function Vk(a) {
            var b = this;
            this.g = a;
            this.j = !1;
            this.i = this.g.ie();
            this.h = new Tc(function () {
                b.g.Yg(.25 * b.i)
            })
        }

        Vk.prototype.release = function () {
            this.set(this.nc());
            this.h && (this.h.stop(), this.h = null);
            this.g = null
        };
        Vk.prototype.set = function (a) {
            this.i = a;
            Wk(this)
        };
        Vk.prototype.nc = function () {
            return this.g.nc()
        };

        function Wk(a) {
            a.h.stop();
            var b = a.j ? 0 : a.i;
            if (0 <= b) try {
                a.g.ie() != b && a.g.hg(b);
                return
            } catch (c) {
            }
            a.h.Sa(.25);
            0 != a.g.ie() && a.g.hg(0)
        };

        function Xk(a) {
            var b = this;
            this.h = a;
            this.g = new Set;
            this.i = (new Tc(function () {
                Yk(b, !1)
            })).Sa(.25)
        }

        Xk.prototype.release = function () {
            this.i.stop();
            for (var a = t(this.g), b = a.next(); !b.done; b = a.next()) b.value.release();
            this.g.clear()
        };

        function Yk(a, b) {
            for (var c = t(a.g), d = c.next(); !d.done; d = c.next()) d.value.j(a.h.currentTime, b)
        };

        function Zk() {
            this.g = null;
            this.h = []
        }

        function $k(a, b) {
            var c = 0;
            a.g && a.g.state == b && (c += a.g.duration);
            a = t(a.h);
            for (var d = a.next(); !d.done; d = a.next()) d = d.value, c += d.state == b ? d.duration : 0;
            return c
        }

        function al(a) {
            function b(f) {
                return {timestamp: f.timestamp, state: f.state, duration: f.duration}
            }

            for (var c = [], d = t(a.h), e = d.next(); !e.done; e = d.next()) c.push(b(e.value));
            a.g && c.push(b(a.g));
            return c
        };

        function bl() {
            this.i = this.h = null;
            this.g = []
        }

        function cl(a, b, c) {
            a.i != b && (a.i = b, a.g.push({
                timestamp: Date.now() / 1E3,
                id: b.id,
                type: "text",
                fromAdaptation: c,
                bandwidth: null
            }))
        };

        function dl() {
            this.ae = this.Ug = this.A = this.B = this.I = this.C = this.s = this.j = this.H = this.m = this.i = this.U = this.Z = this.L = this.N = this.R = this.l = this.o = NaN;
            this.K = 0;
            this.F = this.G = NaN;
            this.g = new Zk;
            this.h = new bl
        };

        function el(a, b, c, d) {
            this.m = a;
            this.i = b;
            this.l = c;
            this.h = new Map;
            this.j = new Map;
            this.g = null;
            this.o = d
        }

        function fl(a, b) {
            a.l = b;
            a = t(a.h.values());
            for (var c = a.next(); !c.done; c = a.next()) c.value.g = b
        }

        function gl(a, b, c) {
            c = void 0 === c ? !1 : c;
            if (a.i.segmentIndex && (a.g || (a.g = a.i.segmentIndex.Kb(b, !0, a.o)), a.g)) {
                for (c && a.g.next(); a.h.size < a.m;) {
                    b = a.g.next().value;
                    if (!b) break;
                    c = !0;
                    b.preload && null != b.sa && (c = !1);
                    2 == b.ac() && (c = !1);
                    c && b.$ && hl(a, b.$);
                    c && !a.h.has(b) && (c = new il(a.l), jl(c, b, a.i), a.h.set(b, c));
                    if (a.i.fastSwitching && b.Kd && b.pe) break
                }
                kl(a)
            }
        }

        function hl(a, b) {
            if (a.i.segmentIndex && !Array.from(a.j.keys()).some(function (d) {
                return Bi(d, b)
            })) {
                var c = new il(a.l);
                jl(c, b, a.i);
                a.j.set(b, c)
            }
        }

        function ll(a, b) {
            b = t(b.keys());
            for (var c = b.next(); !c.done; c = b.next()) (c = c.value) && ml(a, c)
        }

        function nl(a) {
            ll(a, a.h);
            ll(a, a.j);
            a.g = null
        }

        el.prototype.Oa = function (a, b) {
            b = void 0 === b ? !1 : b;
            for (var c = t(this.h.keys()), d = c.next(); !d.done; d = c.next()) d = d.value, a > d.endTime && ml(this, d);
            b && kl(this)
        };
        el.prototype.Uc = function (a) {
            this.o = a;
            this.g && this.g.Uc(a)
        };

        function kl(a) {
            for (var b = Array.from(a.h.keys()), c = {}, d = t(a.j.keys()), e = d.next(); !e.done; c = {Vd: c.Vd}, e = d.next()) c.Vd = e.value, b.some(function (f) {
                return function (g) {
                    return Bi(g.$, f.Vd)
                }
            }(c)) || ml(a, c.Vd)
        }

        function ol(a, b) {
            a.m = b;
            for (var c = Array.from(a.h.keys()); c.length > b;) {
                var d = c.pop();
                d && ml(a, d)
            }
            kl(a)
        }

        function pl(a, b) {
            b && b !== a.i && (nl(a), a.i = b)
        }

        function ml(a, b) {
            var c = a.h;
            b instanceof Ai && (c = a.j);
            a = c.get(b);
            c.delete(b);
            a && a.abort()
        }

        function il(a) {
            this.g = a;
            this.Be = this.ig = null
        }

        function jl(a, b, c) {
            var d = new Uint8Array(0);
            a.Be = a.g(b, c, function (e) {
                return O(function (f) {
                    if (1 == f.g) return 0 < d.byteLength ? d = Md(d, e) : d = e, a.ig ? G(f, a.ig(d), 3) : f.u(0);
                    d = new Uint8Array(0);
                    H(f)
                })
            })
        }

        il.prototype.abort = function () {
            this.Be && this.Be.abort()
        };

        function ql(a) {
            lg.call(this);
            var b = this;
            this.g = new Set;
            this.i = a;
            this.h = (new Tc(function () {
                for (var c = b.i(), d = t(b.g), e = d.next(); !e.done; e = d.next()) e = e.value, e.endTime < c.start && (b.g.delete(e), e = new U("regionremove", new Map([["region", e]])), b.dispatchEvent(e))
            })).Sa(2)
        }

        oa(ql, lg);
        ql.prototype.release = function () {
            this.g.clear();
            this.h.stop();
            lg.prototype.release.call(this)
        };

        function rl(a) {
            lg.call(this);
            this.g = new Map;
            this.h = a
        }

        oa(rl, lg);
        rl.prototype.release = function () {
            this.g.clear();
            lg.prototype.release.call(this)
        };

        function sl(a, b) {
            var c = a.g.get(b);
            c || (c = {Md: [], kf: null, contentType: b}, a.g.set(b, c));
            return c
        }

        function tl(a, b, c) {
            var d = sl(a, b.contentType);
            ul(a, d);
            a = {Lc: b, position: c};
            d = d.Md;
            b = d.findIndex(function (e) {
                return e.position >= c
            });
            0 <= b ? d.splice(b, d[b].position == c ? 1 : 0, a) : d.push(a)
        }

        rl.prototype.j = function (a) {
            for (var b = t(this.g.values()), c = b.next(); !c.done; c = b.next()) {
                c = c.value;
                var d = c.kf;
                a:{
                    var e = c.Md;
                    for (var f = e.length - 1; 0 <= f; f--) {
                        var g = e[f];
                        if (g.position <= a) {
                            e = g.Lc;
                            break a
                        }
                    }
                    e = null
                }
                f = e && !(d === e || d && e && d.bandwidth == e.bandwidth && d.audioSamplingRate == e.audioSamplingRate && d.codecs == e.codecs && d.contentType == e.contentType && d.frameRate == e.frameRate && d.height == e.height && d.mimeType == e.mimeType && d.channelsCount == e.channelsCount && d.pixelAspectRatio == e.pixelAspectRatio && d.width == e.width);
                g = e && d && e.label && d.label && d.label !== e.label;
                var h = e && d && e.language && d.language && d.language !== e.language;
                d = e && d && e.roles && d.roles && !Rb(d.roles, e.roles);
                (g || h || d) && vl(this, a, e.contentType) && (c.kf = e, d = new U("audiotrackchange", new Map([["quality", e], ["position", a]])), this.dispatchEvent(d));
                f && vl(this, a, e.contentType) && (c.kf = e, JSON.stringify(e), c = new U("qualitychange", new Map([["quality", e], ["position", a]])), this.dispatchEvent(c))
            }
        };

        function vl(a, b, c) {
            return (a = a.h()[c]) && 0 < a.length && (c = a[a.length - 1].end, b >= a[0].start && b < c) ? !0 : !1
        }

        function ul(a, b) {
            if ((a = a.h()[b.contentType]) && 0 < a.length) {
                var c = a[0].start, d = a[a.length - 1].end, e = b.Md;
                b.Md = e.filter(function (f, g) {
                    return f.position <= c && g + 1 < e.length && e[g + 1].position <= c || f.position >= d ? !1 : !0
                })
            } else b.Md = []
        }

        function wl(a) {
            var b = {
                bandwidth: a.bandwidth || 0,
                audioSamplingRate: null,
                codecs: a.codecs,
                contentType: a.type,
                frameRate: null,
                height: null,
                mimeType: a.mimeType,
                channelsCount: null,
                pixelAspectRatio: null,
                width: null,
                label: null,
                roles: a.roles,
                language: null
            };
            "video" == a.type && (b.frameRate = a.frameRate || null, b.height = a.height || null, b.pixelAspectRatio = a.pixelAspectRatio || null, b.width = a.width || null);
            "audio" == a.type && (b.audioSamplingRate = a.audioSamplingRate, b.channelsCount = a.channelsCount, b.label = a.label || null, b.language =
                a.language);
            return b
        };

        function xl(a) {
            var b = je(a), c = b.split("/")[0];
            a = oe(a);
            return {
                type: c,
                mimeType: b,
                codecs: a,
                language: null,
                height: null,
                width: null,
                channelCount: null,
                sampleRate: null,
                closedCaptions: new Map,
                Qd: null,
                colorGamut: null
            }
        }

        function yl(a, b) {
            function c(z) {
                v = z.name;
                var B = z.reader;
                B.skip(24);
                var C = B.ka(), F = B.ka();
                B.skip(50);
                n = String(C);
                m = String(F);
                z.reader.oa() && Qg(z)
            }

            function d(z) {
                var B = $i(z.reader);
                p = B.channelCount;
                q = B.sampleRate;
                e(z.name)
            }

            function e(z) {
                z = z.toLowerCase();
                switch (z) {
                    case "avc1":
                    case "avc3":
                        g.push(z + ".42E01E");
                        k = !0;
                        break;
                    case "hev1":
                    case "hvc1":
                        g.push(z + ".1.6.L93.90");
                        k = !0;
                        break;
                    case "dvh1":
                    case "dvhe":
                        g.push(z + ".05.04");
                        k = !0;
                        break;
                    case "vp09":
                        g.push(z + ".00.10.08");
                        k = !0;
                        break;
                    case "av01":
                        g.push(z + ".0.01M.08");
                        k = !0;
                        break;
                    case "mp4a":
                        f.push("mp4a.40.2");
                        h = !0;
                        break;
                    case "ac-3":
                    case "ec-3":
                    case "ac-4":
                    case "opus":
                    case "flac":
                        f.push(z), h = !0
                }
            }

            var f = [], g = [], h = !1, k = !1, l = null, m = null, n = null, p = null, q = null, u = null, w = null, v;
            (new Lg).box("moov", Qg).box("trak", Qg).box("mdia", Qg).S("mdhd", function (z) {
                l = Yi(z.reader, z.version).language
            }).box("minf", Qg).box("stbl", Qg).S("stsd", Ug).box("mp4a", function (z) {
                var B = $i(z.reader);
                p = B.channelCount;
                q = B.sampleRate;
                z.reader.oa() ? Qg(z) : e(z.name)
            }).box("esds", function (z) {
                z = z.reader;
                for (var B =
                    "mp4a", C, F; z.oa();) {
                    C = z.T();
                    for (var I = z.T(); I & 128;) I = z.T();
                    if (3 == C) z.ka(), I = z.T(), I & 128 && z.ka(), I & 64 && z.skip(z.T()), I & 32 && z.ka(); else if (4 == C) F = z.T(), z.skip(12); else if (5 == C) break
                }
                F && (B += "." + cj(F), 5 == C && z.oa() && (C = z.T(), F = (C & 248) >> 3, 31 === F && z.oa() && (F = 32 + ((C & 7) << 3) + ((z.T() & 224) >> 5)), B += "." + F));
                f.push(B);
                h = !0
            }).box("ac-3", d).box("ec-3", d).box("ac-4", d).box("Opus", d).box("fLaC", d).box("avc1", c).box("avc3", c).box("hev1", c).box("hvc1", c).box("dva1", c).box("dvav", c).box("dvh1", c).box("dvhe", c).box("vp09",
                c).box("av01", c).box("avcC", function (z) {
                var B = v || "";
                switch (v) {
                    case "dvav":
                        B = "avc3";
                        break;
                    case "dva1":
                        B = "avc1"
                }
                z = z.reader;
                z.skip(1);
                z = B + "." + cj(z.T()) + cj(z.T()) + cj(z.T());
                g.push(z);
                k = !0
            }).box("hvcC", function (z) {
                var B = v || "";
                switch (v) {
                    case "dvh1":
                        B = "hvc1";
                        break;
                    case "dvhe":
                        B = "hev1"
                }
                var C = z.reader;
                C.skip(1);
                z = C.T();
                var F = ["", "A", "B", "C"][z >> 6], I = z & 31, L = C.P(), J = (z & 32) >> 5 ? "H" : "L";
                z = [C.T(), C.T(), C.T(), C.T(), C.T(), C.T()];
                C = C.T();
                for (var E = 0, K = 0; 32 > K; K++) {
                    E |= L & 1;
                    if (31 == K) break;
                    E <<= 1;
                    L >>= 1
                }
                B = B + ("." + F + I) + ("." +
                    cj(E, !0));
                B += "." + J + C;
                F = "";
                for (I = z.length; I--;) if ((J = z[I]) || F) F = "." + J.toString(16).toUpperCase() + F;
                B += F;
                g.push(B);
                k = !0
            }).box("dvcC", function (z) {
                var B = v || "";
                switch (v) {
                    case "hvc1":
                        B = "dvh1";
                        break;
                    case "hev1":
                        B = "dvhe";
                        break;
                    case "avc1":
                        B = "dva1";
                        break;
                    case "avc3":
                        B = "dvav";
                        break;
                    case "av01":
                        B = "dav1"
                }
                var C = z.reader;
                C.skip(2);
                z = C.T();
                C = C.T();
                g.push(B + "." + dj(z >> 1 & 127) + "." + dj(z << 5 & 32 | C >> 3 & 31));
                k = !0
            }).box("dvvC", function (z) {
                var B = v || "";
                switch (v) {
                    case "hvc1":
                        B = "dvh1";
                        break;
                    case "hev1":
                        B = "dvhe";
                        break;
                    case "avc1":
                        B =
                            "dva1";
                        break;
                    case "avc3":
                        B = "dvav";
                        break;
                    case "av01":
                        B = "dav1"
                }
                var C = z.reader;
                C.skip(2);
                z = C.T();
                C = C.T();
                g.push(B + "." + dj(z >> 1 & 127) + "." + dj(z << 5 & 32 | C >> 3 & 31));
                k = !0
            }).S("vpcC", function (z) {
                var B = v || "", C = z.reader;
                z = C.T();
                var F = C.T();
                C = C.T() >> 4 & 15;
                g.push(B + "." + dj(z) + "." + dj(F) + "." + dj(C));
                k = !0
            }).box("av1C", function (z) {
                var B = v || "";
                switch (v) {
                    case "dav1":
                        B = "av01"
                }
                var C = z.reader;
                C.skip(1);
                z = C.T();
                C = C.T();
                var F = z >>> 5, I = (C & 64) >> 6;
                g.push(B + "." + F + "." + dj(z & 31) + (C >>> 7 ? "H" : "M") + "." + dj(2 === F && I ? (C & 32) >> 5 ? 12 : 10 : I ? 10 : 8) + "." +
                    ((C & 16) >> 4) + "." + ((C & 8) >> 3) + ((C & 4) >> 2) + (C & 3) + "." + dj(1) + "." + dj(1) + "." + dj(1) + ".0");
                k = !0
            }).box("enca", Wg).box("encv", Vg).box("sinf", Qg).box("frma", function (z) {
                z = aj(z.reader).Na;
                e(z)
            }).box("colr", function (z) {
                g = g.map(function (F) {
                    if (F.startsWith("av01.")) {
                        var I = z.reader, L = I.ua(), J = I.rb(4);
                        var E = String.fromCharCode(J[0]);
                        E += String.fromCharCode(J[1]);
                        E += String.fromCharCode(J[2]);
                        E += String.fromCharCode(J[3]);
                        if ("nclx" === E) {
                            J = I.ka();
                            E = I.ka();
                            var K = I.ka(), N = I.T() >> 7, M = F.split(".");
                            10 == M.length && (M[6] = dj(J), M[7] =
                                dj(E), M[8] = dj(K), M[9] = String(N), F = M.join("."))
                        }
                        I.seek(L)
                    }
                    return F
                });
                var B = bj(z.reader), C = B.colorGamut;
                u = B.Qd;
                w = C
            }).parse(a || b, !0);
            if (!f.length && !g.length) return null;
            var A = h && !k, y = new Map;
            if (k) {
                var D = new Hb("video/mp4");
                a && D.init(a);
                D.i(b);
                a = t(D.j());
                for (b = a.next(); !b.done; b = a.next()) b = b.value, y.set(b, b);
                D.g()
            }
            return {
                type: A ? "audio" : "video",
                mimeType: A ? "audio/mp4" : "video/mp4",
                codecs: zl(f.concat(g)).join(", "),
                language: l,
                height: m,
                width: n,
                channelCount: p,
                sampleRate: q,
                closedCaptions: y,
                Qd: u,
                colorGamut: w
            }
        }

        function zl(a) {
            var b = new Set, c = [];
            a = t(a);
            for (var d = a.next(); !d.done; d = a.next()) {
                d = d.value;
                var e = ie(d);
                b.has(e) || (c.push(d), b.add(e))
            }
            b = Wd("audio", c);
            d = Wd("video", c);
            a = Wd(Vd, c);
            d = Al(d);
            b = b.concat(d).concat(a);
            return c.length && !b.length ? c : b
        }

        function Al(a) {
            if (1 >= a.length) return a;
            var b = a.find(function (c) {
                return c.startsWith("dvh1.") || c.startsWith("dvhe.") || c.startsWith("dav1.")
            });
            return b ? nb('video/mp4; codecs="' + b + '"') ? [b] : a.filter(function (c) {
                return c != b
            }) : a
        }

        function Bl(a) {
            var b = null;
            (new Lg).box("moov", Qg).box("trak", Qg).box("mdia", Qg).box("minf", Qg).box("stbl", Qg).S("stsd", Ug).box("encv", Vg).box("enca", Wg).box("sinf", Qg).box("schi", Qg).S("tenc", function (c) {
                c = c.reader;
                c.T();
                c.T();
                c.T();
                c.T();
                b = Jd(c.rb(16))
            }).parse(a, !0);
            return b
        }

        function Cl(a, b, c) {
            var d, e, f, g, h;
            return O(function (k) {
                if (1 == k.g) return d = b, d.cryptoKey ? k.u(2) : G(k, d.fetchKey(), 3);
                e = d.iv;
                if (!e) for (e = Ab(new ArrayBuffer(16)), f = d.firstMediaSequenceNumber + c, g = e.byteLength - 1; 0 <= g; g--) e[g] = f & 255, f >>= 8;
                "CBC" == b.blockCipherMode ? h = {name: "AES-CBC", iv: e} : h = {
                    name: "AES-CTR",
                    counter: e,
                    length: 64
                };
                return k.return(window.crypto.subtle.decrypt(h, d.cryptoKey, a))
            })
        };

        function Dl(a, b, c, d, e) {
            a = tg(a, d, e);
            if (0 != b || null != c) a.headers.Range = c ? "bytes=" + b + "-" + c : "bytes=" + b + "-";
            return a
        };

        function El(a, b) {
            var c = this;
            this.g = b;
            this.l = a;
            this.h = null;
            this.B = 1;
            this.s = this.j = null;
            this.H = 0;
            this.F = !1;
            this.i = new Map;
            this.C = !1;
            this.I = null;
            this.A = !1;
            this.m = new Bg(function () {
                return Fl(c)
            });
            this.K = Date.now() / 1E3;
            this.o = new Map;
            this.G = {projection: null, hfov: null};
            this.N = 0;
            this.L = Infinity
        }

        r = El.prototype;
        r.destroy = function () {
            return this.m.destroy()
        };

        function Fl(a) {
            var b, c, d, e, f, g, h;
            return O(function (k) {
                if (1 == k.g) {
                    b = [];
                    c = t(a.i.values());
                    for (d = c.next(); !d.done; d = c.next()) e = d.value, Gl(e), b.push(Hl(e)), e.W && (nl(e.W), e.W = null);
                    f = t(a.o.values());
                    for (g = f.next(); !g.done; g = f.next()) h = g.value, nl(h);
                    return G(k, Promise.all(b), 2)
                }
                a.i.clear();
                a.o.clear();
                a.g = null;
                a.l = null;
                a.h = null;
                H(k)
            })
        }

        r.configure = function (a) {
            this.h = a;
            this.I = new Zf({
                maxAttempts: Math.max(a.retryParameters.maxAttempts, 2),
                baseDelay: a.retryParameters.baseDelay,
                backoffFactor: a.retryParameters.backoffFactor,
                fuzzFactor: a.retryParameters.fuzzFactor,
                timeout: 0,
                stallTimeout: 0,
                connectionTimeout: 0
            }, !0);
            if (a.disableAudioPrefetch) {
                var b = this.i.get("audio");
                b && b.W && (nl(b.W), b.W = null);
                b = t(this.o.keys());
                for (var c = b.next(); !c.done; c = b.next()) c = c.value, nl(this.o.get(c)), this.o.delete(c)
            }
            a.disableTextPrefetch && (b = this.i.get(Vd)) &&
            b.W && (nl(b.W), b.W = null);
            a.disableVideoPrefetch && (b = this.i.get("video")) && b.W && (nl(b.W), b.W = null);
            b = t(this.i.keys());
            for (c = b.next(); !c.done; c = b.next()) c = this.i.get(c.value), c.W ? (ol(c.W, a.segmentPrefetchLimit), 0 < a.segmentPrefetchLimit || (nl(c.W), c.W = null)) : 0 < a.segmentPrefetchLimit && (c.W = Il(this, c.stream));
            a.disableAudioPrefetch || Jl(this)
        };

        function Kl(a, b, c) {
            a.l.presentationTimeline.V() || (a.N = b, a.L = c)
        }

        r.start = function (a) {
            var b = this;
            return O(function (c) {
                if (1 == c.g) return G(c, Ll(b, a || new Map), 2);
                Cg(b.m);
                b.C = !0;
                H(c)
            })
        };

        function Ml(a, b) {
            var c, d, e, f, g, h, k;
            O(function (l) {
                switch (l.g) {
                    case 1:
                        return c = Xd, a.H++, d = a.H, sa(l, 2), G(l, kk(a.g.ca, c.ta), 4);
                    case 4:
                        va(l, 3);
                        break;
                    case 2:
                        if (e = wa(l), a.g) a.g.onError(e);
                    case 3:
                        f = $d(b.mimeType, b.codecs), Tj(a.g.ca, f, a.l.sequenceMode, b.external), g = a.g.ca.F, (h = g.isTextVisible() || a.h.alwaysStreamText) && a.H == d && (k = Nl(a, b), a.i.set(c.ta, k), Ol(a, k, 0)), H(l)
                }
            })
        }

        function Pl(a) {
            var b = a.i.get(Vd);
            b && (Gl(b), Hl(b).catch(function () {
            }), a.i.delete(Vd));
            a.s = null
        }

        function Ql(a, b) {
            for (var c = 0 > a.g.fb(), d = t(a.i.values()), e = d.next(); !e.done; e = d.next()) e = e.value, e.ia && e.ia.Uc(c), e.W && e.W.Uc(c);
            d = t(a.o.values());
            for (e = d.next(); !e.done; e = d.next()) e.value.Uc(c);
            if (c = a.i.get("video")) if (d = c.stream) if (b) (b = d.trickModeVideo) && !c.vc && (Rl(a, b, !1, 0, !1), c.vc = d); else if (b = c.vc) c.vc = null, Rl(a, b, !0, 0, !1)
        }

        function Sl(a, b, c, d, e, f) {
            c = void 0 === c ? !1 : c;
            d = void 0 === d ? 0 : d;
            e = void 0 === e ? !1 : e;
            f = void 0 === f ? !1 : f;
            a.j = b;
            a.C && (b.video && Rl(a, b.video, c, d, e, f), b.audio && Rl(a, b.audio, c, d, e, f))
        }

        function Tl(a, b) {
            O(function (c) {
                if (1 == c.g) return a.s = b, a.C ? b.segmentIndex ? c.u(2) : G(c, b.createSegmentIndex(), 2) : c.return();
                Rl(a, b, !0, 0, !1);
                H(c)
            })
        }

        function Rl(a, b, c, d, e, f) {
            var g = a.i.get(b.type);
            g || b.type != Vd ? g && (g.vc && (b.trickModeVideo ? (g.vc = b, b = b.trickModeVideo) : g.vc = null), g.stream != b || e) && (a.o.has(b) ? g.W = a.o.get(b) : g.W && pl(g.W, b), b.type == Vd && (e = $d(b.mimeType, b.codecs), Tj(a.g.ca, e, a.l.sequenceMode, b.external)), a.o.has(g.stream) || g.stream.closeSegmentIndex && g.stream.closeSegmentIndex(), g.stream = b, g.ia = null, g.wg = !!f, c ? g.nd ? g.Oe = !0 : g.Qa ? (g.ec = !0, g.ee = d, g.Oe = !0) : (Gl(g), Ul(a, g, !0, d).catch(function (h) {
                if (a.g) a.g.onError(h)
            })) : g.Qa || g.ub || Ol(a, g,
                0), Vl(a, g).catch(function (h) {
                if (a.g) a.g.onError(h)
            })) : Ml(a, b)
        }

        function Vl(a, b) {
            var c, d;
            return O(function (e) {
                if (1 == e.g) {
                    if (!b.kb) return e.return();
                    c = b.stream;
                    d = b.kb;
                    return c.segmentIndex ? e.u(2) : G(e, c.createSegmentIndex(), 2)
                }
                if (b.kb != d || b.stream != c) return e.return();
                var f = a.g.he();
                var g = Zj(a.g.ca, b.type), h = b.stream.segmentIndex.find(b.Ya ? b.Ya.endTime : f),
                    k = null == h ? null : b.stream.segmentIndex.get(h);
                h = k ? k.sa ? k.sa - k.Ha : null : null;
                k && !h && (h = (k.endTime - k.getStartTime()) * (b.stream.bandwidth || 0) / 8);
                h ? ((k = k.$) && (h += (k.sa ? k.sa - k.Ha : null) || 0), k = a.g.getBandwidthEstimate(),
                    f = 8 * h / k < (g || 0) - f - Math.max(a.l.minBufferTime || 0, a.h.rebufferingGoal) || b.kb.h.g > h ? !0 : !1) : f = !1;
                f && b.kb.abort();
                H(e)
            })
        }

        r.Nd = function () {
            if (this.g) for (var a = this.g.he(), b = t(this.i.keys()), c = b.next(); !c.done; c = b.next()) {
                var d = c.value;
                c = this.i.get(d);
                var e = this.g.ca;
                e.C ? e = !1 : d == Vd ? (e = e.g, e = null == e.g || null == e.h ? !1 : a >= e.g && a < e.h) : (e = Yj(e, d), e = Ii(e, a));
                if (!e) {
                    c.W && (c.W.g = null);
                    if ("audio" === c.type) {
                        e = t(this.o.values());
                        for (var f = e.next(); !f.done; f = e.next()) f.value.g = null
                    }
                    c.ia = null;
                    (null != Zj(this.g.ca, d) || c.Qa) && Wl(this, c);
                    c.kb && (c.kb.abort(), c.kb = null);
                    d === Vd && (d = this.g.ca, d.H && d.H.g());
                    c.Nd = !0
                }
            }
        };

        function Wl(a, b) {
            b.nd || b.ec || (b.Qa ? (b.ec = !0, b.ee = 0) : null == Xj(a.g.ca, b.type) ? null == b.ub && Ol(a, b, 0) : (Gl(b), Ul(a, b, !1, 0).catch(function (c) {
                if (a.g) a.g.onError(c)
            })))
        }

        function Ll(a, b) {
            var c, d, e, f, g, h, k, l, m, n;
            return O(function (p) {
                if (1 == p.g) {
                    c = Xd;
                    if (!a.j) throw new T(2, 5, 5006);
                    d = new Map;
                    e = new Set;
                    a.j.audio && (d.set(c.X, a.j.audio), e.add(a.j.audio));
                    a.j.video && (d.set(c.ga, a.j.video), e.add(a.j.video));
                    a.s && (d.set(c.ta, a.s), e.add(a.s));
                    f = a.g.ca;
                    return G(p, f.init(d, a.l.sequenceMode, a.l.type, a.l.ignoreManifestTimestampsInSegmentsMode), 2)
                }
                Cg(a.m);
                a.updateDuration();
                g = t(d.keys());
                for (h = g.next(); !h.done; h = g.next()) k = h.value, l = d.get(k), a.i.has(k) || (m = Nl(a, l), b.has(l.id) && (n =
                    b.get(l.id), fl(n, function (q, u, w) {
                    return Xl(q, u, w || null, a.h.retryParameters, a.g.Nb)
                }), m.W = n), a.i.set(k, m), Ol(a, m, 0));
                H(p)
            })
        }

        function Nl(a, b) {
            return {
                stream: b,
                type: b.type,
                ia: null,
                W: Il(a, b),
                Ya: null,
                Kc: null,
                qe: null,
                oe: null,
                ne: null,
                vc: null,
                endOfStream: !1,
                Qa: !1,
                ub: null,
                ec: !1,
                ee: 0,
                Oe: !1,
                nd: !1,
                Nd: !0,
                Yf: !1,
                yd: !1,
                kb: null
            }
        }

        function Il(a, b) {
            if ("video" === b.type && a.h.disableVideoPrefetch || "audio" === b.type && a.h.disableAudioPrefetch || b.type === Vd && ("application/cea-608" == b.mimeType || "application/cea-708" == b.mimeType) || b.type === Vd && a.h.disableTextPrefetch) return null;
            if (a.o.has(b)) return a.o.get(b);
            var c = a.i.get(b.type);
            return (c = c && c.W) && b === c.i ? c : 0 < a.h.segmentPrefetchLimit ? new el(a.h.segmentPrefetchLimit, b, function (d, e, f) {
                return Xl(d, e, f || null, a.h.retryParameters, a.g.Nb)
            }, 0 > a.g.fb()) : null
        }

        function Jl(a) {
            for (var b = a.h.segmentPrefetchLimit, c = a.h.prefetchAudioLanguages, d = {}, e = t(a.l.variants), f = e.next(); !f.done; d = {Ta: d.Ta}, f = e.next()) if (d.Ta = f.value, d.Ta.audio) if (a.o.has(d.Ta.audio)) {
                if (f = a.o.get(d.Ta.audio), ol(f, b), !(0 < b && c.some(function (h) {
                    return function (k) {
                        return De(h.Ta.audio.language, k)
                    }
                }(d)))) {
                    var g = a.i.get(d.Ta.audio.type);
                    f !== (g && g.W) && nl(f);
                    a.o.delete(d.Ta.audio)
                }
            } else 0 >= b || !c.some(function (h) {
                return function (k) {
                    return De(h.Ta.audio.language, k)
                }
            }(d)) || !(f = Il(a, d.Ta.audio)) ||
            (d.Ta.audio.segmentIndex || d.Ta.audio.createSegmentIndex(), a.o.set(d.Ta.audio, f))
        }

        r.updateDuration = function () {
            var a = this.l.presentationTimeline.getDuration();
            Infinity > a ? this.g.ca.$a(a) : this.g.ca.$a(this.h.infiniteLiveStreamDuration ? Infinity : Math.pow(2, 32))
        };

        function Yl(a, b) {
            var c, d, e, f, g, h;
            return O(function (k) {
                switch (k.g) {
                    case 1:
                        Cg(a.m);
                        if (b.Qa || null == b.ub || b.nd) return k.return();
                        b.ub = null;
                        if (!b.ec) {
                            k.u(2);
                            break
                        }
                        return G(k, Ul(a, b, b.Oe, b.ee), 3);
                    case 3:
                        return k.return();
                    case 2:
                        if (b.stream.segmentIndex) {
                            k.u(4);
                            break
                        }
                        c = b.stream;
                        sa(k, 5);
                        return G(k, b.stream.createSegmentIndex(), 7);
                    case 7:
                        va(k, 6);
                        break;
                    case 5:
                        return d = wa(k), G(k, Zl(a, b, d), 8);
                    case 8:
                        return k.return();
                    case 6:
                        if (c != b.stream) return c.closeSegmentIndex && c.closeSegmentIndex(), b.Qa || b.ub || Ol(a, b, 0),
                            k.return();
                    case 4:
                        sa(k, 9);
                        e = $l(a, b);
                        null != e && (Ol(a, b, e), b.yd = !1);
                        va(k, 10);
                        break;
                    case 9:
                        return f = wa(k), G(k, Zl(a, b, f), 11);
                    case 11:
                        return k.return();
                    case 10:
                        g = Array.from(a.i.values());
                        if (!a.C || !g.every(function (l) {
                            return l.endOfStream
                        })) {
                            k.u(0);
                            break
                        }
                        return G(k, a.g.ca.endOfStream(), 13);
                    case 13:
                        Cg(a.m), h = a.g.ca.getDuration(), 0 != h && h < a.l.presentationTimeline.getDuration() && a.l.presentationTimeline.$a(h), H(k)
                }
            })
        }

        function $l(a, b) {
            if (am(b)) return hk(a.g.ca, b.stream.originalId || ""), null;
            b.type == Vd && ik(a.g.ca);
            if (!a.g.ca.xa && b.type != Vd) return a.h.updateIntervalSeconds / 2;
            var c = a.g.he();
            if ("audio" === b.type) for (var d = t(a.o.keys()), e = d.next(); !e.done; e = d.next()) e = a.o.get(e.value), e.Oa(c, !0), gl(e, c);
            d = b.Ya ? b.Ya.endTime : c;
            e = ak(a.g.ca, b.type, c);
            var f = Math.max(1, Math.max(a.l.minBufferTime || 0, a.h.rebufferingGoal, a.h.bufferingGoal) * a.B),
                g = a.l.presentationTimeline.getDuration() - d, h = Zj(a.g.ca, b.type);
            if (1E-6 > g && h) return b.endOfStream =
                !0, "video" == b.type && (a = a.i.get(Vd)) && am(a) && (a.endOfStream = !0), null;
            b.endOfStream = !1;
            if (e >= f) return a.h.updateIntervalSeconds / 2;
            e = bm(a, b, c, h);
            if (!e) return a.h.updateIntervalSeconds;
            f = Infinity;
            g = Array.from(a.i.values());
            g = t(g);
            for (h = g.next(); !h.done; h = g.next()) h = h.value, am(h) || h.ia && !h.ia.current() || (f = Math.min(f, h.Ya ? h.Ya.endTime : c));
            if (d >= f + a.l.presentationTimeline.g) return a.h.updateIntervalSeconds;
            b.W && b.ia && !a.o.has(b.stream) && (b.W.Oa(e.startTime), gl(b.W, e.startTime));
            cm(a, b, c, e).catch(function () {
            });
            return null
        }

        function bm(a, b, c, d) {
            if (b.ia) return b.ia.current();
            if (b.Ya || d) return b.ia = b.stream.segmentIndex.Kb(b.Ya ? b.Ya.endTime : d, !1, 0 > a.g.fb()), b.ia && b.ia.next().value;
            d = a.h.inaccurateManifestTolerance;
            var e = Math.max(c - d, 0);
            a = 0 > a.g.fb();
            var f = null;
            d && (b.ia = b.stream.segmentIndex.Kb(e, !1, a), f = b.ia && b.ia.next().value);
            f || (b.ia = b.stream.segmentIndex.Kb(c, !1, a), f = b.ia && b.ia.next().value);
            return f
        }

        function cm(a, b, c, d) {
            var e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z;
            return O(function (B) {
                switch (B.g) {
                    case 1:
                        e = Xd;
                        f = b.stream;
                        g = b.ia;
                        b.Qa = !0;
                        sa(B, 2);
                        if (2 == d.ac()) throw new T(1, 1, 1011);
                        return G(B, dm(a, b, d), 4);
                    case 4:
                        Cg(a.m);
                        if (a.A) return B.return();
                        h = "video/mp4" == f.mimeType || "audio/mp4" == f.mimeType;
                        k = window.ReadableStream;
                        if ((l = a.h.lowLatencyMode && a.l.isLowLatency) && k && h && ("HLS" != a.l.type || d.m)) return p = new Uint8Array(0), u = q = !1, v = function (C) {
                            var F, I, L, J;
                            return O(function (E) {
                                switch (E.g) {
                                    case 1:
                                        if (q) return E.return();
                                        u = !0;
                                        Cg(a.m);
                                        if (a.A) return E.return();
                                        sa(E, 2);
                                        p = em(p, C);
                                        F = !1;
                                        I = 0;
                                        (new Lg).box("mdat", function (K) {
                                            I = K.size + K.start;
                                            F = !0
                                        }).parse(p, !1, !0);
                                        if (!F) {
                                            E.u(4);
                                            break
                                        }
                                        L = p.subarray(0, I);
                                        p = p.subarray(I);
                                        return G(E, fm(a, b, c, f, d, L, !0), 5);
                                    case 5:
                                        b.W && b.ia && gl(b.W, d.startTime, !0);
                                    case 4:
                                        va(E, 0);
                                        break;
                                    case 2:
                                        w = J = wa(E), H(E)
                                }
                            })
                        }, G(B, gm(a, b, d, v), 9);
                        m = gm(a, b, d);
                        return G(B, m, 7);
                    case 7:
                        n = B.h;
                        Cg(a.m);
                        if (a.A) return B.return();
                        Cg(a.m);
                        return b.ec ? (b.Qa = !1, Ol(a, b, 0), B.return()) : G(B, fm(a, b, c, f, d, n), 6);
                    case 9:
                        A = B.h;
                        if (w) throw w;
                        if (u) {
                            B.u(10);
                            break
                        }
                        q = !0;
                        Cg(a.m);
                        return a.A ? B.return() : b.ec ? (b.Qa = !1, Ol(a, b, 0), B.return()) : G(B, fm(a, b, c, f, d, A), 10);
                    case 10:
                        b.W && b.ia && gl(b.W, d.startTime, !0);
                    case 6:
                        Cg(a.m);
                        if (a.A) return B.return();
                        b.Ya = d;
                        g.next();
                        b.Qa = !1;
                        b.Yf = !1;
                        y = a.g.ca.yb();
                        D = y[b.type];
                        db(JSON.stringify(D));
                        b.ec || a.g.Sf(d, b.stream);
                        Ol(a, b, 0);
                        va(B, 0);
                        break;
                    case 2:
                        z = wa(B);
                        Cg(a.m, z);
                        if (a.A) return B.return();
                        b.Qa = !1;
                        if (7001 == z.code) b.Qa = !1, Gl(b), Ol(a, b, 0), B.u(0); else if (b.type == e.ta && a.h.ignoreTextStreamFailures) a.i.delete(e.ta), B.u(0);
                        else if (3017 == z.code) hm(a, b, z), B.u(0); else return b.yd = !0, 1 == z.category && b.W && ml(b.W, d), z.severity = 2, G(B, Zl(a, b, z), 0)
                }
            })
        }

        function em(a, b) {
            var c = new Uint8Array(a.length + b.length);
            c.set(a);
            c.set(b, a.length);
            return c
        }

        function hm(a, b, c) {
            if (!Array.from(a.i.values()).some(function (e) {
                return e != b && e.Yf
            })) {
                if (a.g.disableStream(b.stream, a.h.maxDisabledTime)) return;
                var d = Math.round(100 * a.B);
                if (20 < d) a.B -= .2; else if (4 < d) a.B -= .04; else {
                    b.yd = !0;
                    a.A = !0;
                    a.g.onError(c);
                    return
                }
                b.Yf = !0
            }
            Ol(a, b, 4)
        }

        function dm(a, b, c) {
            var d, e, f, g, h, k, l, m, n, p, q, u;
            return O(function (w) {
                switch (w.g) {
                    case 1:
                        d = Xd;
                        e = [];
                        f = Math.max(0, Math.max(c.appendWindowStart, a.N) - .1);
                        g = Math.min(c.appendWindowEnd, a.L) + .01;
                        h = ie(c.codecs || b.stream.codecs);
                        k = je(c.mimeType || b.stream.mimeType);
                        l = c.timestampOffset;
                        if (l == b.qe && f == b.oe && g == b.ne && h == b.Lf && k == b.Mf) {
                            w.u(2);
                            break
                        }
                        m = b.Lf && b.Mf && uk(a.g.ca, b.type, k, h);
                        if (!m) {
                            w.u(3);
                            break
                        }
                        n = null;
                        b.type === d.ga ? n = a.i.get(d.X) : b.type === d.X && (n = a.i.get(d.ga));
                        if (!n) {
                            w.u(3);
                            break
                        }
                        return G(w, Hl(n).catch(function () {
                            }),
                            5);
                    case 5:
                        n.Kc = null, Wl(a, n);
                    case 3:
                        return G(w, im(a, b, l, f, g, c, h, k), 2);
                    case 2:
                        return Bi(c.$, b.Kc) || (b.Kc = c.$, c.l && c.$ && (p = gm(a, b, c.$), q = function () {
                            var v, A, y, D, z, B, C;
                            return O(function (F) {
                                switch (F.g) {
                                    case 1:
                                        return sa(F, 2), G(F, p, 4);
                                    case 4:
                                        return v = F.h, Cg(a.m), A = null, y = new Map, D = {
                                            projection: null,
                                            hfov: null
                                        }, z = new Lg, z.box("moov", Qg).box("trak", Qg).box("mdia", Qg).S("mdhd", function (I) {
                                            A = Yi(I.reader, I.version).timescale
                                        }).box("hdlr", function (I) {
                                            I = I.reader;
                                            I.skip(8);
                                            switch (I.tc()) {
                                                case "soun":
                                                    y.set(d.X, A);
                                                    break;
                                                case "vide":
                                                    y.set(d.ga, A)
                                            }
                                            A = null
                                        }).box("minf", Qg).box("stbl", Qg).S("stsd", Ug).box("encv", Vg).box("avc1", Vg).box("avc3", Vg).box("hev1", Vg).box("hvc1", Vg).box("dvav", Vg).box("dva1", Vg).box("dvh1", Vg).box("dvhe", Vg).box("vexu", Qg).box("proj", Qg).S("prji", function (I) {
                                            I = I.reader.tc();
                                            D.projection = I
                                        }).box("hfov", function (I) {
                                            I = I.reader.P() / 1E3;
                                            D.hfov = I
                                        }).parse(v), jm(a, D), y.has(b.type) ? c.$.timescale = y.get(b.type) : null != A && (c.$.timescale = A), B = b.stream.closedCaptions && 0 < b.stream.closedCaptions.size, G(F, a.g.yg(b.type,
                                            v), 5);
                                    case 5:
                                        return G(F, ck(a.g.ca, b.type, v, null, b.stream, B), 6);
                                    case 6:
                                        va(F, 0);
                                        break;
                                    case 2:
                                        throw C = wa(F), b.Kc = null, C;
                                }
                            })
                        }, a.g.Hi(c.startTime, c.$), e.push(q()))), a.l.sequenceMode && (u = b.Ya ? b.Ya.i : null, c.i != u && e.push(nk(a.g.ca, b.type, c.startTime))), G(w, Promise.all(e), 0)
                }
            })
        }

        function im(a, b, c, d, e, f, g, h) {
            var k, l, m, n;
            return O(function (p) {
                if (1 == p.g) return k = Xd, l = new Map, a.j.audio && l.set(k.X, a.j.audio), a.j.video && l.set(k.ga, a.j.video), sa(p, 2), b.oe = d, b.ne = e, g && (b.Lf = g), h && (b.Mf = h), b.qe = c, m = a.l.sequenceMode || "HLS" == a.l.type, G(p, lk(a.g.ca, b.type, c, d, e, m, f.mimeType || b.stream.mimeType, f.codecs || b.stream.codecs, l), 4);
                if (2 != p.g) return va(p, 0);
                n = wa(p);
                b.oe = null;
                b.ne = null;
                b.Lf = null;
                b.Mf = null;
                b.qe = null;
                throw n;
            })
        }

        function fm(a, b, c, d, e, f, g) {
            g = void 0 === g ? !1 : g;
            var h, k, l, m, n, p, q, u, w;
            return O(function (v) {
                switch (v.g) {
                    case 1:
                        h = d.closedCaptions && 0 < d.closedCaptions.size;
                        l = null != d.emsgSchemeIdUris && 0 < d.emsgSchemeIdUris.length || a.h.dispatchAllEmsgBoxes;
                        m = a.h.parsePrftBox && !a.F;
                        n = "video/mp4" == d.mimeType || "audio/mp4" == d.mimeType;
                        p = null;
                        e.$ && (p = e.$.timescale);
                        q = n && p && "video" === d.type && "DASH" == a.l.type && a.h.shouldFixTimestampOffset;
                        if (l || m || q) k = new Lg;
                        l && k.S("emsg", function (A) {
                            var y = d.emsgSchemeIdUris;
                            if (0 === A.version) {
                                var D =
                                    A.reader.tc();
                                var z = A.reader.tc();
                                var B = A.reader.P();
                                var C = A.reader.P();
                                var F = A.reader.P();
                                var I = A.reader.P();
                                var L = e.startTime + C / B
                            } else B = A.reader.P(), L = A.reader.Qc() / B + e.timestampOffset, C = L - e.startTime, F = A.reader.P(), I = A.reader.P(), D = A.reader.tc(), z = A.reader.tc();
                            A = A.reader.rb(A.reader.getLength() - A.reader.ua());
                            if (y && y.includes(D) || a.h.dispatchAllEmsgBoxes) if ("urn:mpeg:dash:event:2012" == D) a.g.Ii(); else if (y = L + F / B, B = (new Map).set("detail", {
                                startTime: L, endTime: y, schemeIdUri: D, value: z, timescale: B,
                                presentationTimeDelta: C, eventDuration: F, id: I, messageData: A
                            }), B = new U("emsg", B), B.cancelable = !0, a.g.onEvent(B), !B.defaultPrevented && ("https://aomedia.org/emsg/ID3" == D || "https://developer.apple.com/streaming/emsg-id3" == D) && (D = Ui(A), D.length)) a.g.onMetadata([{
                                cueTime: L,
                                data: A,
                                frames: D,
                                dts: L,
                                pts: L
                            }], 0, y)
                        });
                        m && k.S("prft", function (A) {
                            if (!a.F && e.$.timescale) {
                                var y = A.reader, D = A.version;
                                y.P();
                                A = y.P();
                                var z = y.P();
                                A = 1E3 * A + z / Math.pow(2, 32) * 1E3;
                                0 === D ? y = y.P() : (D = y.P(), y = y.P(), y = D * Math.pow(2, 32) + y);
                                A = (new Date((new Date(Date.UTC(1900,
                                    0, 1, 0, 0, 0))).getTime() + A)).getTime();
                                y = (new Map).set("detail", {
                                    wallClockTime: A,
                                    programStartDate: new Date(A - y / e.$.timescale * 1E3)
                                });
                                y = new U("prft", y);
                                a.g.onEvent(y);
                                a.F = !0
                            }
                        });
                        q && k.box("moof", Qg).box("traf", Qg).S("tfdt", function (A) {
                            var y, D, z, B, C, F;
                            return O(function (I) {
                                y = Xi(A.reader, A.version);
                                D = y.baseMediaDecodeTime;
                                if (!D) return I.return();
                                z = -D / p;
                                B = Number(b.qe) || 0;
                                if (!(B < z)) return I.u(0);
                                C = b.oe;
                                F = b.ne;
                                return G(I, im(a, b, z, C, F, e), 0)
                            })
                        });
                        (l || m || q) && k.parse(f, !1, g);
                        return G(v, km(a, b, c), 2);
                    case 2:
                        return Cg(a.m),
                            u = b.Nd, b.Nd = !1, w = b.wg, b.wg = !1, G(v, a.g.yg(b.type, f), 3);
                    case 3:
                        return G(v, ck(a.g.ca, b.type, f, e, d, h, u, w, g), 4);
                    case 4:
                        Cg(a.m), H(v)
                }
            })
        }

        function km(a, b, c) {
            var d, e, f, g;
            return O(function (h) {
                if (1 == h.g) {
                    d = Math.max(a.h.bufferBehind, a.l.presentationTimeline.g);
                    e = Xj(a.g.ca, b.type);
                    if (null == e) return h.return();
                    f = c - e;
                    g = f - d;
                    return g <= a.h.evictionGoal ? h.return() : G(h, a.g.ca.remove(b.type, e, e + g), 2)
                }
                Cg(a.m);
                H(h)
            })
        }

        function am(a) {
            return a && a.type == Vd && ("application/cea-608" == a.stream.mimeType || "application/cea-708" == a.stream.mimeType)
        }

        function gm(a, b, c, d) {
            var e, f, g, h, k;
            return O(function (l) {
                switch (l.g) {
                    case 1:
                        if (e = c.vd()) return l.return(e);
                        f = null;
                        if (b.W) {
                            var m = b.W, n = m.h;
                            c instanceof Ai && (n = m.j);
                            n.has(c) ? (m = n.get(c), d && (m.ig = d), f = m.Be) : f = null
                        }
                        f || (f = Xl(c, b.stream, d || null, a.h.retryParameters, a.g.Nb));
                        g = 0;
                        b.ia && (g = b.ia.h);
                        b.kb = f;
                        return G(l, f.promise, 2);
                    case 2:
                        h = l.h;
                        b.kb = null;
                        k = h.data;
                        if (!c.aesKey) {
                            l.u(3);
                            break
                        }
                        return G(l, Cl(k, c.aesKey, g), 4);
                    case 4:
                        k = l.h;
                    case 3:
                        return l.return(k)
                }
            })
        }

        function Xl(a, b, c, d, e) {
            var f = a instanceof Ci ? a : void 0, g = f ? 1 : 0;
            a = Dl(a.M(), a.Ha, a.sa, d, c);
            a.contentType = b.type;
            return e.request(zg, a, {type: g, stream: b, segment: f})
        }

        function Ul(a, b, c, d) {
            var e, f;
            return O(function (g) {
                if (1 == g.g) return b.ec = !1, b.Oe = !1, b.ee = 0, b.nd = !0, b.Ya = null, b.ia = null, b.W && !a.o.has(b.stream) && nl(b.W), d ? (e = a.g.he(), f = a.g.ca.getDuration(), G(g, a.g.ca.remove(b.type, e + d, f), 3)) : G(g, kk(a.g.ca, b.type), 4);
                if (3 != g.g) return Cg(a.m), c ? G(g, a.g.ca.flush(b.type), 3) : g.u(3);
                Cg(a.m);
                b.nd = !1;
                b.endOfStream = !1;
                b.Qa || b.ub || Ol(a, b, 0);
                H(g)
            })
        }

        function Ol(a, b, c) {
            var d = b.type;
            if (d != Vd || a.i.has(d)) b.ub = (new Sc(function () {
                var e;
                return O(function (f) {
                    if (1 == f.g) return sa(f, 2), G(f, Yl(a, b), 4);
                    if (2 != f.g) return va(f, 0);
                    e = wa(f);
                    if (a.g) a.g.onError(e);
                    H(f)
                })
            })).Y(c)
        }

        function Gl(a) {
            null != a.ub && (a.ub.stop(), a.ub = null)
        }

        function Hl(a) {
            return O(function (b) {
                return a.kb ? G(b, a.kb.abort(), 0) : b.u(0)
            })
        }

        function Zl(a, b, c) {
            var d;
            return O(function (e) {
                if (1 == e.g) return G(e, ag(a.I), 2);
                Cg(a.m);
                1 === c.category && (d = 0 === a.h.maxDisabledTime && 1011 == c.code ? 1 : a.h.maxDisabledTime, c.handled = a.g.disableStream(b.stream, d), c.handled && (c.severity = 1));
                if (!c.handled || 1011 != c.code) a.g.onError(c);
                c.handled || a.h.failureCallback(c);
                H(e)
            })
        }

        function lm(a) {
            var b, c, d, e, f, g;
            return O(function (h) {
                if (1 == h.g) {
                    b = Date.now() / 1E3;
                    c = a.h.minTimeBetweenRecoveries;
                    if (!a.h.allowMediaSourceRecoveries || b - a.K < c) return h.return(!1);
                    a.K = b;
                    d = Xd;
                    if (e = a.i.get(d.X)) e.Kc = null, Wl(a, e), Hl(e).catch(function () {
                    });
                    if (f = a.i.get(d.ga)) f.Kc = null, Wl(a, f), Hl(f).catch(function () {
                    });
                    g = new Map;
                    a.j.audio && g.set(d.X, a.j.audio);
                    a.j.video && g.set(d.ga, a.j.video);
                    return G(h, tk(a.g.ca, g), 2)
                }
                return h.return(!0)
            })
        }

        function jm(a, b) {
            if (a.G.projection != b.projection || a.G.hfov != b.hfov) {
                if (null != b.projection || null != b.hfov) {
                    var c = (new Map).set("detail", b);
                    c = new U("spatialvideoinfo", c)
                } else c = new U("nospatialvideoinfo");
                c.cancelable = !0;
                a.g.onEvent(c);
                a.G = b
            }
        };

        function mm() {
        }

        function nm(a, b, c, d, e) {
            var f = e in d;
            var g = f ? c.constructor == Object && 0 == Object.keys(d).length : c.constructor == Object && 0 == Object.keys(c).length;
            var h = f || g, k = !0, l;
            for (l in b) {
                var m = e + "." + l, n = f ? d[e] : c[l];
                h || l in c ? void 0 === b[l] ? void 0 === n || h ? delete a[l] : a[l] = Me(n) : g ? a[l] = b[l] : n.constructor == Object && b[l] && b[l].constructor == Object ? (a[l] || (a[l] = Me(n)), m = nm(a[l], b[l], n, d, m), k = k && m) : typeof b[l] != typeof n || null == b[l] || "function" != typeof b[l] && b[l].constructor != n.constructor ? (Za("Invalid config, wrong type for " + m),
                    k = !1) : ("function" == typeof c[l] && c[l].length != b[l].length && $a("Unexpected number of arguments for " + m), a[l] = b[l]) : (Za("Invalid config, unrecognized key " + m), k = !1)
            }
            return k
        }

        function om(a, b) {
            for (var c = {}, d = c, e = 0, f = 0; ;) {
                e = a.indexOf(".", e);
                if (0 > e) break;
                if (0 == e || "\\" != a[e - 1]) f = a.substring(f, e).replace(/\\\./g, "."), d[f] = {}, d = d[f], f = e + 1;
                e += 1
            }
            d[a.substring(f).replace(/\\\./g, ".")] = b;
            return c
        }

        function pm(a, b) {
            return a && b
        }

        function qm(a, b) {
            function c(g) {
                for (var h = t(Object.keys(g)), k = h.next(); !k.done; k = h.next()) k = k.value, f(g[k]) && 0 === Object.keys(g[k]).length ? delete g[k] : e(g[k]) ? delete g[k] : "function" == typeof g[k] ? delete g[k] : f(g[k]) && (c(g[k]), 0 === Object.keys(g[k]).length && delete g[k])
            }

            function d(g, h) {
                return Object.keys(g).reduce(function (k, l) {
                    var m = g[l];
                    if (h.hasOwnProperty(l)) if (f(m) && f(h[l])) {
                        if (m = d(m, h[l]), 0 < Object.keys(m).length || !f(m)) k[l] = m
                    } else e(m) && e(h[l]) || Number.isNaN(m) && Number.isNaN(h[l]) || m !== h[l] && (k[l] =
                        m); else k[l] = m;
                    return k
                }, {})
            }

            function e(g) {
                return Array.isArray(g) && 0 === g.length
            }

            function f(g) {
                return g && "object" === typeof g && !Array.isArray(g)
            }

            a = d(a, b);
            c(a);
            return a
        }

        S("shaka.util.ConfigUtils", mm);
        mm.getDifferenceFromConfigObjects = qm;
        mm.convertToConfigObject = om;
        mm.mergeConfigObjects = nm;

        function rm() {
        }

        function sm(a) {
            a = zd(a);
            return (new uc(a)).Gb
        }

        function tm(a, b, c) {
            function d(h) {
                Fb(f).setUint32(g, h.byteLength, !0);
                g += 4;
                f.set(Ab(h), g);
                g += h.byteLength
            }

            if (!c || !c.byteLength) throw new T(2, 6, 6015);
            var e;
            "string" == typeof b ? e = Bd(b, !0) : e = b;
            a = zd(a);
            a = Bd(a, !0);
            var f = new Uint8Array(12 + a.byteLength + e.byteLength + c.byteLength), g = 0;
            d(a);
            d(e);
            d(c);
            return f
        }

        function um(a, b, c) {
            if ("skd" !== b) return a;
            b = c.serverCertificate;
            c = zd(a).split("skd://").pop();
            return tm(a, c, b)
        }

        function vm(a, b) {
            2 === a && (b.headers["Content-Type"] = "application/octet-stream")
        }

        S("shaka.util.FairPlayUtils", rm);
        rm.commonFairPlayResponse = function (a, b) {
            if (2 === a) {
                try {
                    var c = vd(b.data)
                } catch (e) {
                    return
                }
                a = !1;
                c = c.trim();
                "<ckc>" === c.substr(0, 5) && "</ckc>" === c.substr(-6) && (c = c.slice(5, -6), a = !0);
                try {
                    var d = JSON.parse(c);
                    d.ckc && (c = d.ckc, a = !0);
                    d.CkcMessage && (c = d.CkcMessage, a = !0);
                    d.License && (c = d.License, a = !0)
                } catch (e) {
                }
                a && (b.data = Cb(Hd(c)))
            }
        };
        rm.expressplayFairPlayRequest = function (a, b) {
            vm(a, b)
        };
        rm.conaxFairPlayRequest = function (a, b) {
            vm(a, b)
        };
        rm.ezdrmFairPlayRequest = function (a, b) {
            vm(a, b)
        };
        rm.verimatrixFairPlayRequest = function (a, b) {
            2 === a && (a = Ab(b.body), a = Gd(a), b.headers["Content-Type"] = "application/x-www-form-urlencoded", b.body = Ad("spc=" + a))
        };
        rm.expressplayInitDataTransform = function (a, b, c) {
            return um(a, b, c)
        };
        rm.conaxInitDataTransform = function (a, b, c) {
            if ("skd" !== b) return a;
            b = c.serverCertificate;
            c = zd(a).split("skd://").pop().split("?").shift();
            c = window.atob(c);
            var d = new ArrayBuffer(2 * c.length);
            d = Eb(d);
            for (var e = 0, f = c.length; e < f; e++) d[e] = c.charCodeAt(e);
            return tm(a, d, b)
        };
        rm.ezdrmInitDataTransform = function (a, b, c) {
            if ("skd" !== b) return a;
            b = c.serverCertificate;
            c = zd(a).split(";").pop();
            return tm(a, c, b)
        };
        rm.verimatrixInitDataTransform = function (a, b, c) {
            return um(a, b, c)
        };
        rm.initDataTransform = tm;
        rm.defaultGetContentId = sm;
        rm.isFairPlaySupported = function () {
            var a;
            return O(function (b) {
                if (1 == b.g) return a = {
                    initDataTypes: ["cenc", "sinf", "skd"],
                    videoCapabilities: [{contentType: 'video/mp4; codecs="avc1.42E01E"'}]
                }, sa(b, 2), G(b, navigator.requestMediaKeySystemAccess("com.apple.fps", [a]), 4);
                if (2 != b.g) return b.return(!0);
                wa(b);
                return b.return(!1)
            })
        };

        function wm() {
        }

        function xm() {
            var a = Infinity;
            navigator.connection && navigator.connection.saveData && (a = 360);
            var b = {
                retryParameters: $f(),
                servers: {},
                clearKeys: {},
                advanced: {},
                delayLicenseRequestUntilPlayed: !1,
                persistentSessionOnlinePlayback: !1,
                persistentSessionsMetadata: [],
                initDataTransform: function (m, n, p) {
                    sd() && "skd" == n && (n = p.serverCertificate, p = sm(m), m = tm(m, p, n));
                    return m
                },
                logLicenseExchange: !1,
                updateExpirationTime: 1,
                preferredKeySystems: [],
                keySystemsMapping: {},
                parseInbandPsshEnabled: Zc(),
                minHdcpVersion: "",
                ignoreDuplicateInitData: !cd()
            };
            (Zc() || jd()) && b.preferredKeySystems.push("com.microsoft.playready");
            var c = "reload", d = !1;
            cd() || bd() || $c("Tizen 4") || $c("Tizen 5") || $c("Tizen 6") || ed() || dd() && 53 === fd() || dd() && 68 === fd() || !(!gd() || gd() && od() || gd() && $c("Fuchsia")) || nd() && Yc() || (c = "smooth", d = !0);
            d = {
                retryParameters: $f(),
                availabilityWindowOverride: NaN,
                disableAudio: !1,
                disableVideo: !1,
                disableText: !1,
                disableThumbnails: !1,
                defaultPresentationDelay: 0,
                segmentRelativeVttTiming: !1,
                raiseFatalErrorOnManifestUpdateRequestFailure: !1,
                continueLoadingWhenPaused: !0,
                dash: {
                    clockSyncUri: "",
                    ignoreDrmInfo: !1,
                    disableXlinkProcessing: !1,
                    xlinkFailGracefully: !1,
                    ignoreMinBufferTime: !1,
                    autoCorrectDrift: !0,
                    initialSegmentLimit: 1E3,
                    ignoreSuggestedPresentationDelay: !1,
                    ignoreEmptyAdaptationSet: !1,
                    ignoreMaxSegmentDuration: !1,
                    keySystemsByURI: {
                        "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
                        "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e": "org.w3.clearkey",
                        "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
                        "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
                        "urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready"
                    },
                    manifestPreprocessor: ym,
                    manifestPreprocessorTXml: zm,
                    sequenceMode: !1,
                    enableAudioGroups: !1,
                    multiTypeVariantsAllowed: d,
                    useStreamOnceInPeriodFlattening: !1,
                    updatePeriod: -1,
                    enableFastSwitching: !0
                },
                hls: {
                    ignoreTextStreamFailures: !1,
                    ignoreImageStreamFailures: !1,
                    defaultAudioCodec: "mp4a.40.2",
                    defaultVideoCodec: "avc1.42E01E",
                    ignoreManifestProgramDateTime: !1,
                    ignoreManifestProgramDateTimeForTypes: [],
                    mediaPlaylistFullMimeType: 'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',
                    useSafariBehaviorForLive: !0,
                    liveSegmentsDelay: 3,
                    sequenceMode: bd() || cd() || ed() || jd() ? !1 : !0,
                    ignoreManifestTimestampsInSegmentsMode: !1,
                    disableCodecGuessing: !1,
                    disableClosedCaptionsDetection: !1,
                    allowLowLatencyByteRangeOptimization: !0
                },
                mss: {
                    manifestPreprocessor: ym,
                    manifestPreprocessorTXml: zm,
                    sequenceMode: !1,
                    keySystemsBySystemId: {
                        "9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
                        "79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready"
                    }
                }
            };
            var e = {
                retryParameters: $f(),
                failureCallback: function (m) {
                    return pm([m])
                },
                rebufferingGoal: 2,
                bufferingGoal: 10,
                bufferBehind: 30,
                evictionGoal: 1,
                ignoreTextStreamFailures: !1,
                alwaysStreamText: !1,
                startAtSegmentBoundary: !1,
                gapDetectionThreshold: .5,
                gapJumpTimerTime: .25,
                durationBackoff: 1,
                safeSeekOffset: 5,
                stallEnabled: !0,
                stallThreshold: 1,
                stallSkip: .1,
                useNativeHlsForFairPlay: !0,
                inaccurateManifestTolerance: 2,
                lowLatencyMode: !1,
                autoLowLatencyMode: !1,
                forceHTTP: !1,
                forceHTTPS: !1,
                preferNativeHls: !1,
                updateIntervalSeconds: 1,
                dispatchAllEmsgBoxes: !1,
                observeQualityChanges: !1,
                maxDisabledTime: 30,
                parsePrftBox: !1,
                segmentPrefetchLimit: 0,
                prefetchAudioLanguages: [],
                disableAudioPrefetch: !1,
                disableTextPrefetch: !1,
                disableVideoPrefetch: !1,
                liveSync: {
                    enabled: !1,
                    targetLatency: .5,
                    targetLatencyTolerance: .5,
                    maxPlaybackRate: 1.1,
                    minPlaybackRate: .95,
                    panicMode: !1,
                    panicThreshold: 60,
                    dynamicTargetLatency: {
                        enabled: !1,
                        stabilityThreshold: 60,
                        rebufferIncrement: .5,
                        maxAttempts: 10,
                        maxLatency: 4,
                        minLatency: 1
                    }
                },
                allowMediaSourceRecoveries: !0,
                minTimeBetweenRecoveries: 5,
                vodDynamicPlaybackRate: !1,
                vodDynamicPlaybackRateLowBufferRate: .95,
                vodDynamicPlaybackRateBufferRatio: .5,
                infiniteLiveStreamDuration: !1,
                preloadNextUrlWindow: 30,
                loadTimeout: 30,
                clearDecodingCache: jd() || kd(),
                dontChooseCodecs: !1,
                shouldFixTimestampOffset: dd() || ad()
            };
            if (dd() || ad() || gd() || ld()) e.stallSkip = 0;
            var f = {
                trackSelectionCallback: function (m) {
                    return O(function (n) {
                        return n.return(m)
                    })
                }, downloadSizeCallback: function (m) {
                    var n;
                    return O(function (p) {
                        if (1 == p.g) return navigator.storage && navigator.storage.estimate ? G(p, navigator.storage.estimate(), 3) : p.return(!0);
                        n = p.h;
                        return p.return(n.usage +
                            m < .95 * n.quota)
                    })
                }, progressCallback: function (m, n) {
                    return pm([m, n])
                }, usePersistentLicense: !0, numberOfParallelDownloads: 5
            };
            a = {
                enabled: !0,
                useNetworkInformation: !0,
                defaultBandwidthEstimate: 1E6,
                switchInterval: 8,
                bandwidthUpgradeTarget: .85,
                bandwidthDowngradeTarget: .95,
                restrictions: {
                    minWidth: 0,
                    maxWidth: Infinity,
                    minHeight: 0,
                    maxHeight: a,
                    minPixels: 0,
                    maxPixels: Infinity,
                    minFrameRate: 0,
                    maxFrameRate: Infinity,
                    minBandwidth: 0,
                    maxBandwidth: Infinity,
                    minChannelsCount: 0,
                    maxChannelsCount: Infinity
                },
                advanced: {
                    minTotalBytes: 128E3,
                    minBytes: 16E3, fastHalfLife: 2, slowHalfLife: 5
                },
                restrictToElementSize: !1,
                restrictToScreenSize: !1,
                ignoreDevicePixelRatio: !1,
                clearBufferSwitch: !1,
                safeMarginSwitch: 0,
                cacheLoadThreshold: 20,
                minTimeToSwitch: hd() ? .5 : 0
            };
            c = {
                codecSwitchingStrategy: c, addExtraFeaturesToSourceBuffer: function (m) {
                    return pm([m], "")
                }, forceTransmux: !1, insertFakeEncryptionInInit: !0, modifyCueCallback: function (m, n) {
                    return pm([m, n])
                }
            };
            var g = !1, h = !1, k = !0;
            pd() && (h = g = !0, k = !1);
            var l = {
                drm: b,
                manifest: d,
                streaming: e,
                mediaSource: c,
                offline: f,
                abrFactory: function () {
                    return new Bf
                },
                abr: a,
                autoShowText: 3,
                preferredAudioLanguage: "",
                preferredAudioLabel: "",
                preferredTextLanguage: "",
                preferredVariantRole: "",
                preferredTextRole: "",
                preferredAudioChannelCount: 2,
                preferredVideoHdrLevel: "AUTO",
                preferredVideoLayout: "",
                preferredVideoLabel: "",
                preferredVideoCodecs: [],
                preferredAudioCodecs: [],
                preferForcedSubs: !1,
                preferSpatialAudio: !1,
                preferredDecodingAttributes: [],
                restrictions: {
                    minWidth: 0,
                    maxWidth: Infinity,
                    minHeight: 0,
                    maxHeight: Infinity,
                    minPixels: 0,
                    maxPixels: Infinity,
                    minFrameRate: 0,
                    maxFrameRate: Infinity,
                    minBandwidth: 0,
                    maxBandwidth: Infinity,
                    minChannelsCount: 0,
                    maxChannelsCount: Infinity
                },
                playRangeStart: 0,
                playRangeEnd: Infinity,
                textDisplayer: {captionsUpdatePeriod: .25},
                textDisplayFactory: function () {
                    return null
                },
                cmcd: {enabled: !1, sessionId: "", contentId: "", rtpSafetyFactor: 5, useHeaders: !1, includeKeys: []},
                cmsd: {enabled: !0, applyMaximumSuggestedBitrate: !0, estimatedThroughputWeightRatio: .5},
                lcevc: {enabled: !1, dynamicPerformanceScaling: !0, logLevel: 0, drawLogo: !1},
                ads: {
                    customPlayheadTracker: g, skipPlayDetection: h,
                    supportsMultipleMediaElements: k
                }
            };
            f.trackSelectionCallback = function (m) {
                return O(function (n) {
                    return n.return(Am(m, l.preferredAudioLanguage, l.preferredVideoHdrLevel))
                })
            };
            return l
        }

        function Bm(a, b, c) {
            var d = {
                ".drm.keySystemsMapping": "",
                ".drm.servers": "",
                ".drm.clearKeys": "",
                ".drm.advanced": {
                    distinctiveIdentifierRequired: !1,
                    persistentStateRequired: !1,
                    videoRobustness: "",
                    audioRobustness: "",
                    sessionType: "",
                    serverCertificate: new Uint8Array(0),
                    serverCertificateUri: "",
                    individualizationServer: "",
                    headers: {}
                }
            };
            return nm(a, b, c || xm(), d, "")
        }

        function Am(a, b, c) {
            var d = c;
            "AUTO" == d && (d = window.matchMedia("(color-gamut: p3)").matches ? "PQ" : "SDR");
            var e = a.filter(function (h) {
                return "variant" != h.type || h.hdr && h.hdr != d ? !1 : !0
            });
            c = [];
            var f = Le(b, e.map(function (h) {
                return h.language
            }));
            f && (c = e.filter(function (h) {
                return Ee(h.language) == f
            }));
            0 == c.length && (c = e.filter(function (h) {
                return h.primary
            }));
            0 == c.length && (e.map(function (h) {
                return h.language
            }), c = e);
            var g = c.filter(function (h) {
                return h.height && 480 >= h.height
            });
            g.length && (g.sort(function (h, k) {
                return k.height -
                    h.height
            }), c = g.filter(function (h) {
                return h.height == g[0].height
            }));
            b = [];
            c.length && (e = Math.floor(c.length / 2), c.sort(function (h, k) {
                return h.bandwidth - k.bandwidth
            }), b.push(c[e]));
            a = t(a);
            for (c = a.next(); !c.done; c = a.next()) c = c.value, c.type != Vd && "image" != c.type || b.push(c);
            return b
        }

        function ym(a) {
            return pm([a], a)
        }

        function zm(a) {
            return pm([a], a)
        }

        S("shaka.util.PlayerConfiguration", wm);
        wm.mergeConfigObjects = Bm;
        wm.createDefault = xm;

        function Cm(a, b, c, d) {
            lg.call(this);
            this.L = a;
            this.U = b;
            this.xa = d.networkingEngine;
            this.A = c;
            this.o = null;
            this.ra = 0;
            this.Fa = d.Dc;
            this.C = d.Ci;
            this.bb = d.Di;
            this.g = d.config;
            this.j = this.F = this.h = null;
            this.ea = !1;
            this.G = d.Mi;
            this.pa = !1;
            this.l = null;
            this.da = !1;
            this.i = this.B = null;
            this.aa = !1;
            this.K = new Map;
            this.qa = !1;
            this.za = d.Li;
            this.Z = new dl;
            this.m = new bg;
            this.N = null;
            this.s = !1;
            this.Da = d.Fh;
            this.fa = null;
            this.Ea = d.Eh;
            this.R = !1;
            this.I = [];
            this.H = []
        }

        oa(Cm, lg);

        function Dm(a, b, c) {
            (a = b ? a.H : a.I) ? a.push(c) : c()
        }

        function Em(a) {
            if (a.H) for (var b = t(a.H), c = b.next(); !c.done; c = b.next()) c = c.value, c();
            a.H = null
        }

        function Fm(a, b) {
            a.N = b;
            a.R = !0;
            if (a.I) {
                b = t(a.I);
                for (var c = b.next(); !c.done; c = b.next()) c = c.value, c()
            }
            a.I = null
        }

        r = Cm.prototype;
        r.getStartTime = function () {
            return this.A
        };
        r.Gc = function () {
            return this.L
        };
        r.Ef = function () {
            return this.h
        };

        function Gm(a) {
            a.aa = !0;
            return a.i
        }

        function Hm(a) {
            a.ea = !0;
            return a.j
        }

        function Im(a) {
            a.pa = !0;
            return a.G
        }

        r.getStats = function () {
            return this.Z
        };

        function Jm(a) {
            a.da = !0;
            return a.l
        }

        function Km(a) {
            a.qa = !0;
            return a.K
        }

        r.start = function () {
            var a = this;
            (function () {
                var b;
                return O(function (c) {
                    switch (c.g) {
                        case 1:
                            return G(c, Promise.resolve(), 2);
                        case 2:
                            return sa(c, 3), G(c, Lm(a), 5);
                        case 5:
                            return Mm(a), G(c, Nm(a), 6);
                        case 6:
                            Mm(a);
                            a.o || (a.o = new Lf(a.g.preferredAudioLanguage, a.g.preferredVariantRole, a.g.preferredAudioChannelCount, a.g.preferredVideoHdrLevel, a.g.preferSpatialAudio, a.g.preferredVideoLayout, a.g.preferredAudioLabel, a.g.preferredVideoLabel, a.g.mediaSource.codecSwitchingStrategy, a.g.manifest.dash.enableAudioGroups));
                            if (a.Ea) {
                                var d =
                                    a.g.abrFactory;
                                a.B = d;
                                a.i = d();
                                a.i.configure(a.g.abr)
                            }
                            if (a.Da) {
                                d = a.h.presentationTimeline.V();
                                var e = uf(a.h.variants);
                                e = a.o.create(e);
                                a.i.configure(a.g.abr);
                                a.i.setVariants(Array.from(e.values()));
                                if (e = a.i.chooseVariant(!0)) a.fa = e, e.video && Om(a, e.video, d), e.audio && Om(a, e.audio, d)
                            }
                            return G(c, void 0, 7);
                        case 7:
                            Mm(a);
                            a.m.resolve();
                            va(c, 0);
                            break;
                        case 3:
                            b = wa(c), a.m.reject(b), H(c)
                    }
                })
            })()
        };
        r.dispatchEvent = function (a) {
            return this.N ? this.N.dispatchEvent(a) : lg.prototype.dispatchEvent.call(this, a)
        };
        r.onError = function (a) {
            2 === a.severity && (this.m.reject(a), this.destroy());
            var b = (new Map).set("detail", a);
            b = new U("error", b);
            this.dispatchEvent(b);
            b.defaultPrevented && (a.handled = !0)
        };

        function Mm(a) {
            if (a.s) throw new T(2, 7, 7003);
        }

        function Pm(a, b) {
            a.dispatchEvent(new U("onstatechange", (new Map).set("state", b)))
        }

        function Lm(a) {
            var b, c, d, e, f;
            return O(function (g) {
                if (1 == g.g) {
                    Pm(a, "manifest-parser");
                    a.j || (a.F = ui(a.L, a.U), a.j = a.F(), a.j.configure(a.g.manifest));
                    b = Date.now() / 1E3;
                    Pm(a, "manifest");
                    if (a.h) return g.u(2);
                    c = a;
                    return G(g, a.j.start(a.L, a.bb), 3)
                }
                2 != g.g && (c.h = g.h);
                d = new U("manifestparsed", void 0);
                a.dispatchEvent(d);
                if (0 == a.h.variants.length) throw new T(2, 4, 4036);
                Qm(a.h);
                e = Date.now() / 1E3;
                f = e - b;
                a.Z.H = f;
                H(g)
            })
        }

        function Nm(a) {
            var b, c, d, e, f;
            return O(function (g) {
                switch (g.g) {
                    case 1:
                        Pm(a, "drm-engine");
                        a.ra = Date.now() / 1E3;
                        a.l = a.Fa();
                        a.C.g = a.l;
                        a.l.configure(a.g.drm);
                        var h = a.C;
                        b = Te(a.h.variants, h.h.restrictions, h.i);
                        if (!b) {
                            g.u(2);
                            break
                        }
                        c = new U("trackschanged", void 0);
                        return G(g, Promise.resolve(), 3);
                    case 3:
                        Mm(a), a.dispatchEvent(c);
                    case 2:
                        return d = uf(a.h.variants), G(g, Kh(a.l, d, a.h.offlineSessionIds), 4);
                    case 4:
                        return Mm(a), G(g, oi(a.C, a.h), 5);
                    case 5:
                        e = g.h;
                        if (!e) {
                            g.u(0);
                            break
                        }
                        f = new U("trackschanged", void 0);
                        return G(g,
                            Promise.resolve(), 7);
                    case 7:
                        a.dispatchEvent(f), H(g)
                }
            })
        }

        r.configure = function (a, b) {
            a = om(a, b);
            Bm(this.g, a)
        };
        r.getConfiguration = function () {
            return Me(this.g)
        };

        function Om(a, b, c) {
            var d, e, f, g, h;
            O(function (k) {
                if (1 == k.g) return d = a.g.streaming.segmentPrefetchLimit || 2, e = new el(d, b, function (l, m, n) {
                    return Xl(l, m, n || null, a.g.streaming.retryParameters, a.xa)
                }, !1), a.K.set(b.id, e), G(k, b.createSegmentIndex(), 2);
                f = a.A || 0;
                (h = (g = b.segmentIndex.Kb(f)) ? g.current() : null) || (h = b.segmentIndex.get(0));
                h && (c ? h.$ && hl(e, h.$) : gl(e, h.startTime));
                H(k)
            })
        }

        r.mj = function () {
            return this.m
        };
        r.destroy = function () {
            var a = this, b, c, d;
            return O(function (e) {
                switch (e.g) {
                    case 1:
                        a.s = !0;
                        if (!a.j || a.ea) {
                            e.u(2);
                            break
                        }
                        return G(e, a.j.stop(), 2);
                    case 2:
                        if (!a.i || a.aa) {
                            e.u(4);
                            break
                        }
                        return G(e, a.i.stop(), 4);
                    case 4:
                        a.G && !a.pa && a.G.release();
                        if (!a.l || a.da) {
                            e.u(6);
                            break
                        }
                        return G(e, a.l.destroy(), 6);
                    case 6:
                        if (0 < a.K.size && !a.qa) for (b = t(a.K.values()), c = b.next(); !c.done; c = b.next()) d = c.value, nl(d);
                        H(e)
                }
            })
        };

        function Qm(a) {
            function b(c) {
                return c.video && c.audio || c.video && c.video.codecs.includes(",")
            }

            a.variants.some(b) && (a.variants = a.variants.filter(b))
        }

        S("shaka.media.PreloadManager", Cm);
        Cm.prototype.destroy = Cm.prototype.destroy;
        Cm.prototype.waitForFinish = Cm.prototype.mj;

        function Rm(a, b) {
            lg.call(this);
            var c = this;
            this.i = a;
            this.l = b;
            this.g = new Map;
            this.m = [{
                Ac: null, zc: Sm, pc: function (d, e) {
                    return Tm(c, "enter", d, e)
                }
            }, {
                Ac: Um, zc: Sm, pc: function (d, e) {
                    return Tm(c, "enter", d, e)
                }
            }, {
                Ac: Vm, zc: Sm, pc: function (d, e) {
                    return Tm(c, "enter", d, e)
                }
            }, {
                Ac: Sm, zc: Um, pc: function (d, e) {
                    return Tm(c, "exit", d, e)
                }
            }, {
                Ac: Sm, zc: Vm, pc: function (d, e) {
                    return Tm(c, "exit", d, e)
                }
            }, {
                Ac: Um, zc: Vm, pc: function (d, e) {
                    return Tm(c, "skip", d, e)
                }
            }, {
                Ac: Vm, zc: Um, pc: function (d, e) {
                    return Tm(c, "skip", d, e)
                }
            }];
            this.h = new gb;
            this.h.D(this.i,
                "regionremove", function (d) {
                    c.g.delete(d.region)
                })
        }

        oa(Rm, lg);
        Rm.prototype.release = function () {
            this.i = null;
            this.g.clear();
            this.h.release();
            this.h = null;
            lg.prototype.release.call(this)
        };
        Rm.prototype.j = function (a, b) {
            if (!this.l || 0 != a) {
                this.l = !1;
                for (var c = t(this.i.g), d = c.next(); !d.done; d = c.next()) {
                    d = d.value;
                    var e = this.g.get(d), f = a < d.startTime ? Um : a > d.endTime ? Vm : Sm;
                    this.g.set(d, f);
                    for (var g = t(this.m), h = g.next(); !h.done; h = g.next()) h = h.value, h.Ac == e && h.zc == f && h.pc(d, b)
                }
            }
        };

        function Tm(a, b, c, d) {
            b = new U(b, new Map([["region", c], ["seeking", d]]));
            a.dispatchEvent(b)
        }

        var Um = 1, Sm = 2, Vm = 3;

        function kn(a, b, c) {
            var d, e, f, g, h, k, l;
            return O(function (m) {
                switch (m.g) {
                    case 1:
                        var n = (new uc(a)).Pa.split("/").pop().split(".");
                        d = 1 == n.length ? "" : n.pop().toLowerCase();
                        if (e = ln[d]) return m.return(e);
                        f = 0;
                        g = tg([a], c);
                        sa(m, 2);
                        g.method = "HEAD";
                        return G(m, b.request(f, g).promise, 4);
                    case 4:
                        h = m.h;
                        e = h.headers["content-type"];
                        va(m, 3);
                        break;
                    case 2:
                        k = wa(m);
                        if (!k || 1002 != k.code && 1001 != k.code) {
                            m.u(3);
                            break
                        }
                        g.method = "GET";
                        return G(m, b.request(f, g).promise, 6);
                    case 6:
                        l = m.h, e = l.headers["content-type"];
                    case 3:
                        return m.return(e ?
                            e.toLowerCase().split(";").shift() : "")
                }
            })
        }

        var ln = {
            mp4: "video/mp4",
            m4v: "video/mp4",
            m4a: "audio/mp4",
            webm: "video/webm",
            weba: "audio/webm",
            mkv: "video/webm",
            ts: "video/mp2t",
            ogv: "video/ogg",
            ogg: "audio/ogg",
            mpg: "video/mpeg",
            mpeg: "video/mpeg",
            m3u8: "application/x-mpegurl",
            mpd: "application/dash+xml",
            ism: "application/vnd.ms-sstr+xml",
            mp3: "audio/mpeg",
            aac: "audio/aac",
            flac: "audio/flac",
            wav: "audio/wav",
            sbv: "text/x-subviewer",
            srt: "text/srt",
            vtt: "text/vtt",
            webvtt: "text/vtt",
            ttml: "application/ttml+xml",
            lrc: "application/x-subtitle-lrc",
            ssa: "text/x-ssa",
            ass: "text/x-ssa"
        };

        function mn(a, b) {
            if (a.lineBreak) return "\n";
            if (a.nestedCues.length) return a.nestedCues.map(function (g) {
                return mn(g, a)
            }).join("");
            var c = [], d = 700 <= a.fontWeight, e = "italic" == a.fontStyle,
                f = a.textDecoration.includes("underline");
            d && c.push(["b"]);
            e && c.push(["i"]);
            f && c.push(["u"]);
            e = a.color;
            "" == e && b && (e = b.color);
            d = "";
            (e = nn(e)) && (d += "." + e);
            e = a.backgroundColor;
            "" == e && b && (e = b.backgroundColor);
            (b = nn(e)) && (d += ".bg_" + b);
            d && c.push(["c", d]);
            return c.reduceRight(function (g, h) {
                var k = t(h);
                h = k.next().value;
                k = k.next().value;
                return "<" + h + (void 0 === k ? "" : k) + ">" + g + "</" + h + ">"
            }, a.payload)
        }

        function nn(a) {
            a = a.toLowerCase();
            var b = a.replace(/\s/g, "").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);
            b ? a = "#" + (parseInt(b[1], 10) | 256).toString(16).slice(1) + (parseInt(b[2], 10) | 256).toString(16).slice(1) + (parseInt(b[3], 10) | 256).toString(16).slice(1) : a.startsWith("#") && 7 < a.length && (a = a.slice(0, 7));
            switch (a) {
                case "white":
                case "#fff":
                case "#ffffff":
                    return "white";
                case "lime":
                case "#0f0":
                case "#00ff00":
                    return "lime";
                case "cyan":
                case "#0ff":
                case "#00ffff":
                    return "cyan";
                case "red":
                case "#f00":
                case "#ff0000":
                    return "red";
                case "yellow":
                case "#ff0":
                case "#ffff00":
                    return "yellow";
                case "magenta":
                case "#f0f":
                case "#ff00ff":
                    return "magenta";
                case "blue":
                case "#00f":
                case "#0000ff":
                    return "blue";
                case "black":
                case "#000":
                case "#000000":
                    return "black"
            }
            return null
        }

        function on(a, b) {
            var c = [];
            a = t(pn(a));
            for (var d = a.next(); !d.done; d = a.next()) if (d = d.value, d.isContainer) c.push.apply(c, x(on(d.nestedCues, d))); else {
                var e = d.clone();
                e.nestedCues = [];
                e.payload = mn(d, b);
                c.push(e)
            }
            return c
        }

        function pn(a) {
            var b = [], c = {};
            a = t(a);
            for (var d = a.next(); !d.done; c = {Sd: c.Sd}, d = a.next()) c.Sd = d.value, b.some(function (e) {
                return function (f) {
                    return cc(e.Sd, f)
                }
            }(c)) || b.push(c.Sd);
            return b
        }

        function qn(a) {
            function b(d) {
                for (var e = 5381, f = d.length; f;) e = 33 * e ^ d.charCodeAt(--f);
                return (e >>> 0).toString()
            }

            if (a.startTime >= a.endTime) return null;
            var c = new VTTCue(a.startTime, a.endTime, a.payload);
            c.id = b(a.startTime.toString()) + b(a.endTime.toString()) + b(a.payload);
            c.lineAlign = a.lineAlign;
            c.positionAlign = a.positionAlign;
            a.size && (c.size = a.size);
            try {
                c.align = a.textAlign
            } catch (d) {
            }
            "center" == a.textAlign && "center" != c.align && (c.align = "middle");
            "vertical-lr" == a.writingMode ? c.vertical = "lr" : "vertical-rl" == a.writingMode &&
                (c.vertical = "rl");
            1 == a.lineInterpretation && (c.snapToLines = !1);
            null != a.line && (c.line = a.line);
            null != a.position && (c.position = a.position);
            return c
        };

        function rn(a, b) {
            this.g = null;
            for (var c = t(Array.from(a.textTracks)), d = c.next(); !d.done; d = c.next()) d = d.value, "metadata" !== d.kind && "chapters" !== d.kind && (d.mode = "disabled", d.label == b && (this.g = d));
            this.g || (this.g = a.addTextTrack("subtitles", b));
            this.g.mode = "hidden"
        }

        r = rn.prototype;
        r.configure = function () {
        };
        r.remove = function (a, b) {
            if (!this.g) return !1;
            sn(this.g, function (c) {
                return c.startTime < b && c.endTime > a
            });
            return !0
        };
        r.append = function (a) {
            var b = on(a), c = [];
            a = this.g.cues ? Array.from(this.g.cues) : [];
            var d = {};
            b = t(b);
            for (var e = b.next(); !e.done; d = {Cc: d.Cc}, e = b.next()) d.Cc = e.value, a.some(function (f) {
                return function (g) {
                    return g.startTime == f.Cc.startTime && g.endTime == f.Cc.endTime && g.text == f.Cc.payload ? !0 : !1
                }
            }(d)) || (e = qn(d.Cc)) && c.push(e);
            a = c.slice().sort(function (f, g) {
                return f.startTime != g.startTime ? f.startTime - g.startTime : f.endTime != g.endTime ? f.endTime - g.startTime : "line" in VTTCue.prototype ? c.indexOf(g) - c.indexOf(f) : c.indexOf(f) -
                    c.indexOf(g)
            });
            a = t(a);
            for (d = a.next(); !d.done; d = a.next()) this.g.addCue(d.value)
        };
        r.destroy = function () {
            this.g && (sn(this.g, function () {
                return !0
            }), this.g.mode = "disabled");
            this.g = null;
            return Promise.resolve()
        };
        r.isTextVisible = function () {
            return "showing" == this.g.mode
        };
        r.setTextVisibility = function (a) {
            this.g.mode = a ? "showing" : "hidden"
        };

        function sn(a, b) {
            var c = a.mode;
            a.mode = "showing" == c ? "showing" : "hidden";
            for (var d = t(Array.from(a.cues)), e = d.next(); !e.done; e = d.next()) (e = e.value) && b(e) && a.removeCue(e);
            a.mode = c
        }

        S("shaka.text.SimpleTextDisplayer", rn);
        rn.prototype.setTextVisibility = rn.prototype.setTextVisibility;
        rn.prototype.isTextVisible = rn.prototype.isTextVisible;
        rn.prototype.destroy = rn.prototype.destroy;
        rn.prototype.append = rn.prototype.append;
        rn.prototype.remove = rn.prototype.remove;
        rn.prototype.configure = rn.prototype.configure;

        function tn() {
        }

        r = tn.prototype;
        r.configure = function () {
        };
        r.remove = function () {
        };
        r.append = function () {
        };
        r.destroy = function () {
        };
        r.isTextVisible = function () {
            return !1
        };
        r.setTextVisibility = function () {
        };
        S("shaka.text.StubTextDisplayer", tn);
        tn.prototype.setTextVisibility = tn.prototype.setTextVisibility;
        tn.prototype.isTextVisible = tn.prototype.isTextVisible;
        tn.prototype.destroy = tn.prototype.destroy;
        tn.prototype.append = tn.prototype.append;
        tn.prototype.remove = tn.prototype.remove;
        tn.prototype.configure = tn.prototype.configure;

        function un() {
        }

        function vn(a) {
            for (; a.firstChild;) a.removeChild(a.firstChild)
        }

        S("shaka.util.Dom", un);
        un.removeAllChildren = vn;

        function wn(a, b, c) {
            var d = this;
            this.m = !1;
            this.h = [];
            this.A = a;
            this.s = b;
            this.l = null;
            this.g = document.createElement("div");
            this.g.classList.add("shaka-text-container");
            this.g.style.textAlign = "center";
            this.g.style.display = "flex";
            this.g.style.flexDirection = "column";
            this.g.style.alignItems = "center";
            this.g.style.justifyContent = "flex-end";
            this.s.appendChild(this.g);
            c && c.captionsUpdatePeriod || rb("UITextDisplayer w/ config", "Please migrate to initializing UITextDisplayer with a config.");
            this.C = (new Tc(function () {
                d.A.paused ||
                xn(d)
            })).Sa(c && c.captionsUpdatePeriod ? c.captionsUpdatePeriod : .25);
            this.i = new Map;
            this.j = new gb;
            this.j.D(document, "fullscreenchange", function () {
                xn(d, !0)
            });
            this.j.D(this.A, "seeking", function () {
                xn(d, !0)
            });
            this.j.D(this.A, "resize", function () {
                var e = d.A, f = e.videoWidth;
                e = e.videoHeight;
                f && e ? d.l = f / e : d.l = null
            });
            this.o = null;
            "ResizeObserver" in window && (this.o = new ResizeObserver(function () {
                xn(d, !0)
            }), this.o.observe(this.g));
            this.B = new Map
        }

        r = wn.prototype;
        r.configure = function (a) {
            this.C && this.C.Sa(a.captionsUpdatePeriod)
        };
        r.append = function (a) {
            var b = [].concat(x(this.h)), c = {};
            a = t(pn(a));
            for (var d = a.next(); !d.done; c = {Td: c.Td}, d = a.next()) c.Td = d.value, b.some(function (e) {
                return function (f) {
                    return cc(f, e.Td)
                }
            }(c)) || this.h.push(c.Td);
            xn(this)
        };
        r.destroy = function () {
            if (!this.g) return Promise.resolve();
            this.s.removeChild(this.g);
            this.g = null;
            this.m = !1;
            this.h = [];
            this.C && this.C.stop();
            this.i.clear();
            this.j && (this.j.release(), this.j = null);
            this.o && (this.o.disconnect(), this.o = null);
            return Promise.resolve()
        };
        r.remove = function (a, b) {
            if (!this.g) return !1;
            var c = this.h.length;
            this.h = this.h.filter(function (d) {
                return d.startTime < a || d.endTime >= b
            });
            xn(this, c > this.h.length);
            return !0
        };
        r.isTextVisible = function () {
            return this.m
        };
        r.setTextVisibility = function (a) {
            this.m = a
        };

        function yn(a, b) {
            for (; null != b;) {
                if (b == a.g) return !0;
                b = b.parentElement
            }
            return !1
        }

        function zn(a, b, c, d, e) {
            var f = !1, g = [], h = [];
            b = t(b);
            for (var k = b.next(); !k.done; k = b.next()) {
                k = k.value;
                e.push(k);
                var l = a.i.get(k), m = k.startTime <= d && k.endTime > d, n = l ? l.wh : null;
                l && (g.push(l.jf), l.uc && g.push(l.uc), m || (f = !0, a.i.delete(k), l = null));
                m && (h.push(k), l ? yn(a, n) || (f = !0) : (An(a, k, e), l = a.i.get(k), n = l.wh, f = !0));
                0 < k.nestedCues.length && n && zn(a, k.nestedCues, n, d, e);
                e.pop()
            }
            if (f) {
                d = t(g);
                for (e = d.next(); !e.done; e = d.next()) e = e.value, e.parentElement && e.parentElement.removeChild(e);
                h.sort(function (p, q) {
                    return p.startTime !=
                    q.startTime ? p.startTime - q.startTime : p.endTime - q.endTime
                });
                h = t(h);
                for (k = h.next(); !k.done; k = h.next()) d = a.i.get(k.value), d.uc ? (d.uc.contains(c) && d.uc.removeChild(c), c.appendChild(d.uc), d.uc.appendChild(d.jf)) : c.appendChild(d.jf)
            }
        }

        function xn(a, b) {
            if (a.g) {
                var c = a.A.currentTime;
                if (!a.m || (void 0 === b ? 0 : b)) {
                    b = t(a.B.values());
                    for (var d = b.next(); !d.done; d = b.next()) vn(d.value);
                    vn(a.g);
                    a.i.clear();
                    a.B.clear()
                }
                a.m && zn(a, a.h, a.g, c, [])
            }
        }

        function An(a, b, c) {
            var d = 1 < c.length, e = d ? "span" : "div";
            b.lineBreak && (e = "br");
            b.rubyTag && (e = b.rubyTag);
            d = !d && 0 < b.nestedCues.length;
            var f = document.createElement(e);
            "br" != e && Bn(a, f, b, c, d);
            c = null;
            if (b.region && b.region.id) {
                var g = b.region, h = a.l === 4 / 3 ? 2.5 : 1.9;
                c = g.id + "_" + g.width + "x" + g.height + (g.heightUnits == Lb ? "%" : "px") + "-" + g.viewportAnchorX + "x" + g.viewportAnchorY + (g.viewportAnchorUnits == Lb ? "%" : "px");
                if (a.B.has(c)) c = a.B.get(c); else {
                    e = document.createElement("span");
                    var k = g.heightUnits == Lb ? "%" : "px", l = g.widthUnits ==
                    Lb ? "%" : "px", m = g.viewportAnchorUnits == Lb ? "%" : "px";
                    e.id = "shaka-text-region---" + c;
                    e.classList.add("shaka-text-region");
                    e.style.position = "absolute";
                    e.style.height = 2 === g.heightUnits ? 5.33 * g.height + "%" : g.height + k;
                    e.style.width = 2 === g.widthUnits ? g.width * h + "%" : g.width + l;
                    2 === g.viewportAnchorUnits ? (k = g.viewportAnchorY / 75 * 100, l = g.viewportAnchorX / (a.l === 4 / 3 ? 160 : 210) * 100, k -= g.regionAnchorY * g.height * 5.33 / 100, l -= g.regionAnchorX * g.width * h / 100, e.style.top = k + "%", e.style.left = l + "%") : (e.style.top = g.viewportAnchorY - g.regionAnchorY *
                        g.height / 100 + m, e.style.left = g.viewportAnchorX - g.regionAnchorX * g.width / 100 + m);
                    0 !== g.heightUnits && 0 !== g.widthUnits && 0 !== g.viewportAnchorUnits && (g = Math.max(0, Math.min(100 - (parseInt(e.style.width.slice(0, -1), 10) || 0), parseInt(e.style.left.slice(0, -1), 10) || 0)), e.style.top = Math.max(0, Math.min(100 - (parseInt(e.style.height.slice(0, -1), 10) || 0), parseInt(e.style.top.slice(0, -1), 10) || 0)) + "%", e.style.left = g + "%");
                    e.style.display = "flex";
                    e.style.flexDirection = "column";
                    e.style.alignItems = "center";
                    e.style.justifyContent =
                        "before" == b.displayAlign ? "flex-start" : "center" == b.displayAlign ? "center" : "flex-end";
                    a.B.set(c, e);
                    c = e
                }
            }
            e = f;
            d && (e = document.createElement("span"), e.classList.add("shaka-text-wrapper"), e.style.backgroundColor = b.backgroundColor, e.style.lineHeight = "normal", f.appendChild(e));
            a.i.set(b, {jf: f, wh: e, uc: c})
        }

        function Cn(a) {
            var b = a.direction, c = a.positionAlign;
            a = a.textAlign;
            return c !== Tb ? c : "left" === a || "start" === a && b === Vb || "end" === a && "rtl" === b ? "line-left" : "right" === a || "start" === a && "rtl" === b || "end" === a && b === Vb ? "line-right" : "center"
        }

        function Bn(a, b, c, d, e) {
            var f = b.style, g = 0 == c.nestedCues.length, h = 1 < d.length;
            f.whiteSpace = "pre-wrap";
            var k = c.payload.replace(/\s+$/g, function (m) {
                return "\u00a0".repeat(m.length)
            });
            f.webkitTextStrokeColor = c.textStrokeColor;
            f.webkitTextStrokeWidth = c.textStrokeWidth;
            f.color = c.color;
            f.direction = c.direction;
            f.opacity = c.opacity;
            f.paddingLeft = Dn(c.linePadding, c, a.s);
            f.paddingRight = Dn(c.linePadding, c, a.s);
            f.textCombineUpright = c.textCombineUpright;
            f.textShadow = c.textShadow;
            if (c.backgroundImage) f.backgroundImage =
                "url('" + c.backgroundImage + "')", f.backgroundRepeat = "no-repeat", f.backgroundSize = "contain", f.backgroundPosition = "center", c.backgroundColor && (f.backgroundColor = c.backgroundColor), f.width = "100%", f.height = "100%"; else {
                if (c.nestedCues.length) var l = b; else l = document.createElement("span"), b.appendChild(l);
                c.border && (l.style.border = c.border);
                !e && ((b = En(d, function (m) {
                    return m.backgroundColor
                })) ? l.style.backgroundColor = b : k && (l.style.backgroundColor = "rgba(0, 0, 0, 0.8)"), b = En(d, function (m) {
                    return m.fontFamily
                })) &&
                (l.style.fontFamily = b);
                k && (l.textContent = k)
            }
            if (h && !d[d.length - 1].isContainer) f.display = "inline"; else {
                f.display = "flex";
                f.flexDirection = "column";
                f.alignItems = "center";
                if ("left" == c.textAlign || "start" == c.textAlign) f.width = "100%", f.alignItems = "start"; else if ("right" == c.textAlign || "end" == c.textAlign) f.width = "100%", f.alignItems = "end";
                f.justifyContent = "before" == c.displayAlign ? "flex-start" : "center" == c.displayAlign ? "center" : "flex-end"
            }
            g || (f.margin = "0");
            f.fontFamily = c.fontFamily;
            f.fontWeight = c.fontWeight.toString();
            f.fontStyle = c.fontStyle;
            f.letterSpacing = c.letterSpacing;
            f.fontSize = Dn(c.fontSize, c, a.s);
            d = c.line;
            null != d && (g = c.lineInterpretation, g == Xb && (g = 1, h = 16, a.l && 1 > a.l && (h = 32), d = 0 > d ? 100 + d / h * 100 : d / h * 100), 1 == g && (f.position = "absolute", c.writingMode == Wb ? (f.width = "100%", c.lineAlign == Yb ? f.top = d + "%" : "end" == c.lineAlign && (f.bottom = 100 - d + "%")) : "vertical-lr" == c.writingMode ? (f.height = "100%", c.lineAlign == Yb ? f.left = d + "%" : "end" == c.lineAlign && (f.right = 100 - d + "%")) : (f.height = "100%", c.lineAlign == Yb ? f.right = d + "%" : "end" == c.lineAlign &&
                (f.left = 100 - d + "%"))));
            f.lineHeight = c.lineHeight;
            a = Cn(c);
            "line-left" == a ? (f.cssFloat = "left", null !== c.position && (f.position = "absolute", c.writingMode == Wb ? (f.left = c.position + "%", f.width = "auto") : f.top = c.position + "%")) : "line-right" == a ? (f.cssFloat = "right", null !== c.position && (f.position = "absolute", c.writingMode == Wb ? (f.right = c.position + "%", f.width = "auto") : f.bottom = c.position + "%")) : null !== c.position && 50 != c.position && (f.position = "absolute", c.writingMode == Wb ? (f.left = c.position + "%", f.width = "auto") : f.top = c.position +
                "%");
            f.textAlign = c.textAlign;
            f.textDecoration = c.textDecoration.join(" ");
            f.writingMode = c.writingMode;
            "writingMode" in document.documentElement.style && f.writingMode == c.writingMode || (f.webkitWritingMode = c.writingMode);
            c.size && (c.writingMode == Wb ? f.width = c.size + "%" : f.height = c.size + "%")
        }

        function Dn(a, b, c) {
            var d = (d = (new RegExp(/(\d*\.?\d+)([a-z]+|%+)/)).exec(a)) ? {value: Number(d[1]), unit: d[2]} : null;
            if (!d) return a;
            var e = d.value;
            switch (d.unit) {
                case "%":
                    return e / 100 * c.clientHeight / b.cellResolution.rows + "px";
                case "c":
                    return c.clientHeight * e / b.cellResolution.rows + "px";
                default:
                    return a
            }
        }

        function En(a, b) {
            for (var c = a.length - 1; 0 <= c; c--) {
                var d = b(a[c]);
                if (d || 0 === d) return d
            }
            return null
        }

        S("shaka.text.UITextDisplayer", wn);
        wn.prototype.setTextVisibility = wn.prototype.setTextVisibility;
        wn.prototype.isTextVisible = wn.prototype.isTextVisible;
        wn.prototype.remove = wn.prototype.remove;
        wn.prototype.destroy = wn.prototype.destroy;
        wn.prototype.append = wn.prototype.append;
        wn.prototype.configure = wn.prototype.configure;

        function Fn(a, b) {
            function c(f) {
                for (var g = f, h = t(b), k = h.next(); !k.done; k = h.next()) k = k.value, k.end && k.start < f && (g += k.end - k.start);
                f = Math.floor(g / 3600);
                h = Math.floor(g / 60 % 60);
                k = Math.floor(g % 60);
                g = Math.floor(1E3 * g % 1E3);
                return (10 > f ? "0" : "") + f + ":" + (10 > h ? "0" : "") + h + ":" + (10 > k ? "0" : "") + k + "." + (100 > g ? 10 > g ? "00" : "0" : "") + g
            }

            var d = on(a);
            a = "WEBVTT\n\n";
            d = t(d);
            for (var e = d.next(); !e.done; e = d.next()) e = e.value, a += c(e.startTime) + " --\x3e " + c(e.endTime) + function (f) {
                var g = [];
                switch (f.textAlign) {
                    case "left":
                        g.push("align:left");
                        break;
                    case "right":
                        g.push("align:right");
                        break;
                    case Ub:
                        g.push("align:middle");
                        break;
                    case "start":
                        g.push("align:start");
                        break;
                    case "end":
                        g.push("align:end")
                }
                switch (f.writingMode) {
                    case "vertical-lr":
                        g.push("vertical:lr");
                        break;
                    case "vertical-rl":
                        g.push("vertical:rl")
                }
                return g.length ? " " + g.join(" ") : ""
            }(e) + "\n", a += e.payload + "\n\n";
            return a
        }

        S("shaka.text.WebVttGenerator", function () {
        });

        function Gn(a, b) {
            this.h = a;
            this.g = b;
            this.m = void 0;
            this.i = !1;
            this.l = !0;
            this.j = !1
        }

        Gn.prototype.configure = function (a) {
            this.g = a
        };

        function Hn(a) {
            a.i = !1;
            a.l = !0;
            a.j = !1
        }

        function In(a, b, c) {
            try {
                if (!a.g.enabled) return b;
                var d = Jn(a);
                a:{
                    switch (c.toLowerCase()) {
                        case "audio/mp4":
                        case "audio/webm":
                        case "audio/ogg":
                        case "audio/mpeg":
                        case "audio/aac":
                        case "audio/flac":
                        case "audio/wav":
                            var e = Kn;
                            break a;
                        case "video/webm":
                        case "video/mp4":
                        case "video/mpeg":
                        case "video/mp2t":
                            e = Ln;
                            break a;
                        case "application/x-mpegurl":
                        case "application/vnd.apple.mpegurl":
                        case "application/dash+xml":
                        case "video/vnd.mpeg.dash.mpd":
                        case "application/vnd.ms-sstr+xml":
                            e = Mn;
                            break a
                    }
                    e = void 0
                }
                d.ot = e;
                d.su =
                    !0;
                var f = Nn(d);
                return On(b, f)
            } catch (g) {
                return ab("CMCD_SRC_ERROR", "Could not generate src CMCD data.", g), b
            }
        }

        function Jn(a) {
            a.g.sessionId || (a.g.sessionId = window.crypto.randomUUID());
            return {v: 1, sf: a.m, sid: a.g.sessionId, cid: a.g.contentId, mtp: a.h.getBandwidthEstimate() / 1E3}
        }

        function Pn(a, b, c) {
            c = void 0 === c ? {} : c;
            var d = void 0 === d ? a.g.useHeaders : d;
            if (a.g.enabled) {
                Object.assign(c, Jn(a));
                c.pr = a.h.fb();
                var e = c.ot === Qn || c.ot === Ln;
                a.j && e && (c.bs = !0, c.su = !0, a.j = !1);
                null == c.su && (c.su = a.l);
                a = Rn(a, c);
                if (d) d = Sn(a), Object.keys(d).length && Object.assign(b.headers, d); else {
                    var f = Nn(a);
                    f && (b.uris = b.uris.map(function (g) {
                        return On(g, f)
                    }))
                }
            }
        }

        function Rn(a, b) {
            var c = a.g.includeKeys;
            return c.length ? Object.keys(b).reduce(function (d, e) {
                c.includes(e) && (d[e] = b[e]);
                return d
            }, {}) : b
        }

        function Tn(a) {
            if (0 === a.type) return Un;
            if (a = a.stream) {
                var b = a.type;
                if ("video" == b) return a.codecs && a.codecs.includes(",") ? Ln : Qn;
                if ("audio" == b) return Kn;
                if ("text" == b) return "application/mp4" === a.mimeType ? Vn : Wn
            }
        }

        function Xn(a, b) {
            b = a.h.yb()[b];
            if (!b.length) return NaN;
            var c = a.h.getCurrentTime();
            return (a = b.find(function (d) {
                return d.start <= c && d.end >= c
            })) ? 1E3 * (a.end - c) : NaN
        }

        function Yn(a, b) {
            b = a.h.yb()[b];
            if (!b.length) return 0;
            var c = a.h.getCurrentTime();
            return (a = b.find(function (d) {
                return d.start <= c && d.end >= c
            })) ? 1E3 * (a.end - c) : 0
        }

        function Zn(a, b) {
            var c = a.h.oc();
            if (!c.length) return NaN;
            a = c[0];
            c = t(c);
            for (var d = c.next(); !d.done; d = c.next()) d = d.value, "variant" === d.type && d.bandwidth > a.bandwidth && (a = d);
            switch (b) {
                case Qn:
                    return a.videoBandwidth || NaN;
                case Kn:
                    return a.audioBandwidth || NaN;
                default:
                    return a.bandwidth
            }
        }

        function Nn(a) {
            function b(n) {
                return 100 * c(n / 100)
            }

            function c(n) {
                return Math.round(n)
            }

            function d(n) {
                return !Number.isNaN(n) && null != n && "" !== n && !1 !== n
            }

            var e = [], f = {
                br: c, d: c, bl: b, dl: b, mtp: b, nor: function (n) {
                    return encodeURIComponent(n)
                }, rtp: b, tb: c
            }, g = Object.keys(a || {}).sort();
            g = t(g);
            for (var h = g.next(); !h.done; h = g.next()) {
                h = h.value;
                var k = a[h];
                if (d(k) && ("v" !== h || 1 !== k) && ("pr" != h || 1 !== k)) {
                    var l = f[h];
                    l && (k = l(k));
                    l = typeof k;
                    var m = void 0;
                    m = "string" === l && "ot" !== h && "sf" !== h && "st" !== h ? h + "=" + JSON.stringify(k) : "boolean" ===
                    l ? h : "symbol" === l ? h + "=" + k.description : h + "=" + k;
                    e.push(m)
                }
            }
            return e.join(",")
        }

        function Sn(a) {
            var b = Object.keys(a), c = {}, d = ["Object", "Request", "Session", "Status"], e = [{}, {}, {}, {}], f = {
                br: 0,
                d: 0,
                ot: 0,
                tb: 0,
                bl: 1,
                dl: 1,
                mtp: 1,
                nor: 1,
                nrr: 1,
                su: 1,
                cid: 2,
                pr: 2,
                sf: 2,
                sid: 2,
                st: 2,
                v: 2,
                bs: 3,
                rtp: 3
            };
            b = t(b);
            for (var g = b.next(); !g.done; g = b.next()) g = g.value, e[null != f[g] ? f[g] : 1][g] = a[g];
            for (a = 0; a < e.length; a++) (f = Nn(e[a])) && (c["CMCD-" + d[a]] = f);
            return c
        }

        function On(a, b) {
            if (!b || a.includes("offline:")) return a;
            a = new uc(a);
            a.g.set("CMCD", b);
            return a.toString()
        }

        var Mn = "m", Kn = "a", Qn = "v", Ln = "av", Un = "i", Wn = "c", Vn = "tt";
        S("shaka.util.CmcdManager.StreamingFormat", {DASH: "d", HLS: "h", yh: "s", OTHER: "o"});

        function $n(a) {
            this.h = a;
            this.g = null
        }

        r = $n.prototype;
        r.configure = function (a) {
            this.h = a
        };
        r.Ng = function () {
            return this.h.enabled && this.h.applyMaximumSuggestedBitrate && this.g && this.g.has(ao) ? 1E3 * this.g.get(ao) : null
        };
        r.Lg = function () {
            return this.h.enabled && this.g && this.g.has(bo) ? 1E3 * this.g.get(bo) : null
        };
        r.ei = function () {
            return this.h.enabled && this.g && this.g.has(co) ? this.g.get(co) : null
        };
        r.fi = function () {
            return this.h.enabled && this.g && this.g.has(eo) ? this.g.get(eo) : null
        };
        r.getBandwidthEstimate = function (a) {
            var b = this.Lg();
            if (!b) return a;
            var c = this.h.estimatedThroughputWeightRatio;
            return 0 < c && 1 >= c ? a * (1 - c) + b * c : a
        };

        function fo(a) {
            return a ? "false" === a.toLowerCase() ? !1 : /^[-0-9]/.test(a) ? parseInt(a, 10) : a.replace(/["]+/g, "") : !0
        }

        S("shaka.util.CmsdManager", $n);
        $n.prototype.getBandwidthEstimate = $n.prototype.getBandwidthEstimate;
        $n.prototype.getRoundTripTime = $n.prototype.fi;
        $n.prototype.getResponseDelay = $n.prototype.ei;
        $n.prototype.getEstimatedThroughput = $n.prototype.Lg;
        $n.prototype.getMaxBitrate = $n.prototype.Ng;
        var bo = "etp", ao = "mb", co = "rd", eo = "rtt";

        function go() {
            this.g = null;
            this.h = []
        }

        function ho(a, b) {
            return O(function (c) {
                if (1 == c.g) return a.g ? G(c, new Promise(function (d) {
                    return a.h.push(d)
                }), 2) : c.u(2);
                a.g = b;
                H(c)
            })
        }

        go.prototype.release = function () {
            0 < this.h.length ? this.h.shift()() : this.g = null
        };

        function X(a, b) {
            lg.call(this);
            var c = this;
            this.l = io;
            this.ze = this.h = null;
            this.pa = !1;
            this.Je = new gb;
            this.zd = new gb;
            this.m = new gb;
            this.Fa = new gb;
            this.wb = new gb;
            this.C = this.G = this.B = this.H = null;
            this.Le = 0;
            this.Z = new go;
            this.qa = this.pg = this.da = this.i = this.bb = this.F = this.j = this.rd = this.K = this.tg = this.ea = this.N = this.wd = this.L = this.Ce = this.I = this.Hb = null;
            this.Ea = !1;
            this.xa = this.o = null;
            this.rg = 1E9;
            this.Hd = [];
            this.U = NaN;
            this.g = jo(this);
            this.R = null;
            this.Ne = -1;
            this.Da = null;
            this.fa = {width: Infinity, height: Infinity};
            this.xe = new ni(this.g, this.fa, null);
            this.Fe = [];
            this.s = null;
            this.za = new Lf(this.g.preferredAudioLanguage, this.g.preferredVariantRole, this.g.preferredAudioChannelCount, this.g.preferredVideoHdrLevel, this.g.preferSpatialAudio, this.g.preferredVideoLayout, this.g.preferredAudioLabel, this.g.preferredVideoLabel, this.g.mediaSource.codecSwitchingStrategy, this.g.manifest.dash.enableAudioGroups);
            this.Fb = this.g.preferredTextLanguage;
            this.Gd = this.g.preferredTextRole;
            this.Fd = this.g.preferForcedSubs;
            this.Ed = [];
            b &&
            b(this);
            this.N = ko(this);
            this.ea = new $n(this.g.cmsd);
            this.H = lo(this);
            this.H.fg(this.g.streaming.forceHTTP);
            this.H.gg(this.g.streaming.forceHTTPS);
            this.Ib = this.aa = this.A = null;
            this.Ye = !1;
            this.sg = new Tc(function () {
                return O(function (d) {
                    if (1 == d.g) return c.aa ? G(d, c.Ub(c.Ib, !0), 3) : d.u(0);
                    if (4 != d.g) return G(d, c.load(c.aa), 4);
                    c.Ye ? c.Ib.pause() : c.Ib.play();
                    c.aa = null;
                    c.Ye = !1;
                    H(d)
                })
            });
            mo && (this.A = mo(), this.A.configure(this.g.ads), this.wb.D(this.A, "ad-content-pause-requested", function (d) {
                var e, f;
                return O(function (g) {
                    if (1 ==
                        g.g) {
                        c.sg.stop();
                        if (c.aa) return g.u(0);
                        c.Ib = c.h;
                        c.Ye = c.h.ended;
                        e = d.saveLivePosition || !1;
                        f = c;
                        return G(g, c.Eg(!0, e), 3)
                    }
                    f.aa = g.h;
                    H(g)
                })
            }), this.wb.D(this.A, "ad-content-resume-requested", function (d) {
                d = d.offset || 0;
                if (c.aa) {
                    var e = c.aa;
                    e.A && d && (e.A += d)
                }
                c.sg.Y(.1)
            }), this.wb.D(this.A, "ad-content-attach-requested", function () {
                return O(function (d) {
                    return c.h || !c.Ib ? d.u(0) : G(d, c.Ub(c.Ib, !0), 0)
                })
            }));
            this.Je.D(window, "online", function () {
                no(c);
                c.Zf()
            });
            this.Ee = new Tc(function () {
                for (var d = Date.now() / 1E3, e = !1, f = !0,
                         g = t(c.i.variants), h = g.next(); !h.done; h = g.next()) h = h.value, 0 < h.disabledUntilTime && h.disabledUntilTime <= d && (h.disabledUntilTime = 0, e = !0), 0 < h.disabledUntilTime && (f = !1);
                f && c.Ee.stop();
                e && oo(c, !1, void 0, !1, !1)
            });
            this.ra = null;
            a && (rb("Player w/ mediaElement", "Please migrate from initializing Player with a mediaElement; use the attach method instead."), this.Ub(a, !0))
        }

        oa(X, lg);

        function po(a) {
            null != a.K && (Fj(a.K), a.K.release(), a.K = null)
        }

        function qo(a, b) {
            b.lcevc.enabled ? (po(a), null == a.K && (a.K = new Ej(a.h, a.tg, b.lcevc), a.G && (a.G.Z = a.K))) : po(a)
        }

        function ro(a, b) {
            return new U(a, b)
        }

        r = X.prototype;
        r.destroy = function () {
            var a = this, b;
            return O(function (c) {
                switch (c.g) {
                    case 1:
                        if (a.l == so) return c.return();
                        po(a);
                        b = a.detach();
                        a.l = so;
                        return G(c, b, 2);
                    case 2:
                        return G(c, a.lf(), 3);
                    case 3:
                        a.Je && (a.Je.release(), a.Je = null);
                        a.zd && (a.zd.release(), a.zd = null);
                        a.m && (a.m.release(), a.m = null);
                        a.Fa && (a.Fa.release(), a.Fa = null);
                        a.wb && (a.wb.release(), a.wb = null);
                        a.xa = null;
                        a.g = null;
                        a.s = null;
                        a.ze = null;
                        a.N = null;
                        a.ea = null;
                        if (!a.H) {
                            c.u(4);
                            break
                        }
                        return G(c, a.H.destroy(), 5);
                    case 5:
                        a.H = null;
                    case 4:
                        a.o && (a.o.release(), a.o = null),
                            lg.prototype.release.call(a), H(c)
                }
            })
        };

        function to(a, b) {
            a.dispatchEvent(ro("onstatechange", (new Map).set("state", b)))
        }

        r.Ub = function (a, b) {
            b = void 0 === b ? !0 : b;
            var c = this, d, e, f;
            return O(function (g) {
                switch (g.g) {
                    case 1:
                        if (c.l == so) throw new T(2, 7, 7E3);
                        d = c.h && c.h == a;
                        if (!c.h || c.h == a) {
                            g.u(2);
                            break
                        }
                        return G(g, c.detach(), 2);
                    case 2:
                        return G(g, uo(c, "attach"), 4);
                    case 4:
                        if (g.h) return g.return();
                        sa(g, 5, 6);
                        d || (to(c, "attach"), e = function () {
                            var h = vo(c);
                            h && wo(c, h)
                        }, c.zd.D(a, "error", e), c.h = a);
                        if (!b || !Uc() || c.G) {
                            g.u(6);
                            break
                        }
                        return G(g, xo(c), 6);
                    case 6:
                        xa(g);
                        c.Z.release();
                        ya(g, 0);
                        break;
                    case 5:
                        return f = wa(g), G(g, c.detach(), 10);
                    case 10:
                        throw f;
                }
            })
        };
        r.Gh = function (a) {
            this.tg = a
        };
        r.detach = function (a) {
            a = void 0 === a ? !1 : a;
            var b = this;
            return O(function (c) {
                if (1 == c.g) {
                    if (b.l == so) throw new T(2, 7, 7E3);
                    return G(c, b.dc(!1, a), 2)
                }
                if (3 != c.g) return G(c, uo(b, "detach"), 3);
                if (c.h) return c.return();
                try {
                    b.h && (b.zd.Ra(), b.h = null), to(b, "detach"), b.A && !a && b.A.release()
                } finally {
                    b.Z.release()
                }
                H(c)
            })
        };

        function uo(a, b) {
            var c;
            return O(function (d) {
                return 1 == d.g ? (c = ++a.Le, G(d, ho(a.Z, b), 2)) : c != a.Le ? (a.Z.release(), d.return(!0)) : d.return(!1)
            })
        }

        r.dc = function (a, b) {
            a = void 0 === a ? !0 : a;
            b = void 0 === b ? !1 : b;
            var c = this, d, e, f, g, h, k, l, m, n;
            return O(function (p) {
                switch (p.g) {
                    case 1:
                        return c.l != so && (c.l = io), G(p, uo(c, "unload"), 2);
                    case 2:
                        if (p.h) return p.return();
                        ua(p, 3);
                        c.Ea = !1;
                        to(c, "unload");
                        a && !Uc() && (a = !1);
                        po(c);
                        d = c.Ed.map(function (q) {
                            return q()
                        });
                        c.Ed = [];
                        return G(p, Promise.all(d), 5);
                    case 5:
                        c.dispatchEvent(ro("unloading"));
                        c.wd && (c.wd.release(), c.wd = null);
                        c.h && (c.m.Ra(), c.Fa.Ra());
                        c.Ee.stop();
                        c.Hb && (c.Hb.release(), c.Hb = null);
                        c.Ce && (c.Ce.stop(), c.Ce = null);
                        if (!c.F) {
                            p.u(6);
                            break
                        }
                        return G(p, c.F.stop(), 7);
                    case 7:
                        c.F = null, c.bb = null;
                    case 6:
                        if (!c.o) {
                            p.u(8);
                            break
                        }
                        return G(p, c.o.stop(), 8);
                    case 8:
                        if (!c.j) {
                            p.u(10);
                            break
                        }
                        return G(p, c.j.destroy(), 11);
                    case 11:
                        c.j = null;
                    case 10:
                        c.I && (c.I.release(), c.I = null);
                        c.C && (c.C.release(), c.C = null);
                        if (!sd("webkit") || !c.B) {
                            p.u(12);
                            break
                        }
                        return G(p, c.B.destroy(), 13);
                    case 13:
                        c.B = null;
                    case 12:
                        if (!c.G) {
                            p.u(14);
                            break
                        }
                        return G(p, c.G.destroy(), 15);
                    case 15:
                        c.G = null;
                    case 14:
                        if (c.A && !b) c.A.onAssetUnload();
                        c.aa && !b && (c.aa.destroy(), c.aa =
                            null);
                        b || c.sg.stop();
                        c.N && Hn(c.N);
                        c.ea && (c.ea.g = null);
                        c.h && vn(c.h);
                        if (!c.h || !c.h.src) {
                            p.u(16);
                            break
                        }
                        return G(p, new Promise(function (q) {
                            return (new Tc(q)).Y(.1)
                        }), 17);
                    case 17:
                        c.h.removeAttribute("src"), c.h.load();
                    case 16:
                        if (!c.B) {
                            p.u(18);
                            break
                        }
                        return G(p, c.B.destroy(), 19);
                    case 19:
                        c.B = null;
                    case 18:
                        c.ra && c.da != c.ra.Gc() && (c.ra.s || c.ra.destroy(), c.ra = null);
                        c.da = null;
                        c.pg = null;
                        c.L = null;
                        if (c.i) {
                            e = t(c.i.variants);
                            for (f = e.next(); !f.done; f = e.next()) for (g = f.value, h = t([g.audio, g.video]), k = h.next(); !k.done; k =
                                h.next()) (l = k.value) && l.segmentIndex && l.segmentIndex.release();
                            m = t(c.i.textStreams);
                            for (k = m.next(); !k.done; k = m.next()) n = k.value, n.segmentIndex && n.segmentIndex.release()
                        }
                        c.g.streaming.clearDecodingCache && (ef = {}, Rc.clear());
                        c.i = null;
                        c.s = new dl;
                        c.qg = null;
                        c.Da = null;
                        c.R = null;
                        c.Ne = -1;
                        c.Hd = [];
                        c.U = NaN;
                        yo(c);
                    case 3:
                        xa(p);
                        c.Z.release();
                        ya(p, 4);
                        break;
                    case 4:
                        if (a && Uc() && !c.G && c.h) return G(p, xo(c), 0);
                        p.u(0)
                }
            })
        };
        r.lj = function (a) {
            this.qa = a
        };
        r.load = function (a, b, c) {
            b = void 0 === b ? null : b;
            var d = this, e, f, g, h, k, l, m, n, p, q, u, w, v;
            return O(function (A) {
                switch (A.g) {
                    case 1:
                        if (d.l == so) throw new T(2, 7, 7E3);
                        e = null;
                        f = "";
                        a instanceof Cm ? (e = a, f = e.Gc() || "") : f = a || "";
                        return G(A, ho(d.Z, "load"), 2);
                    case 2:
                        d.Z.release();
                        if (!d.h) throw new T(2, 7, 7002);
                        if (!d.da) {
                            A.u(3);
                            break
                        }
                        d.da = f;
                        return G(A, d.dc(!1), 3);
                    case 3:
                        g = ++d.Le;
                        h = function () {
                            return O(function (y) {
                                if (1 == y.g) return d.Le == g ? y.u(0) : e ? G(y, e.destroy(), 3) : y.u(3);
                                throw new T(2, 7, 7E3);
                            })
                        };
                        k = function (y, D) {
                            return O(function (z) {
                                switch (z.g) {
                                    case 1:
                                        return ua(z,
                                            2), G(z, ho(d.Z, D), 4);
                                    case 4:
                                        return G(z, h(), 5);
                                    case 5:
                                        return G(z, y(), 6);
                                    case 6:
                                        return G(z, h(), 7);
                                    case 7:
                                        e && d.g && (e.g = d.g);
                                    case 2:
                                        xa(z), d.Z.release(), ya(z, 0)
                                }
                            })
                        };
                        sa(A, 5, 6);
                        null == b && e && (b = e.getStartTime());
                        d.qa = b;
                        d.Ea = !1;
                        d.dispatchEvent(ro("loading"));
                        if (e) {
                            c = e.U;
                            A.u(8);
                            break
                        }
                        if (c) {
                            A.u(8);
                            break
                        }
                        return G(A, k(function () {
                            return O(function (y) {
                                if (1 == y.g) return G(y, zo(d, f), 2);
                                c = y.h;
                                H(y)
                            })
                        }, "guessMimeType_"), 8);
                    case 8:
                        l = !!e;
                        if (e) {
                            Fm(e, d);
                            d.s = e.getStats();
                            A.u(11);
                            break
                        }
                        return G(A, Ao(d, f, b, c, !0), 12);
                    case 12:
                        (e =
                            A.h) ? (Fm(e, d), d.s = e.getStats(), e.start(), e.m.catch(function () {
                        })) : d.s = new dl;
                    case 11:
                        m = !e;
                        n = Date.now() / 1E3;
                        d.s = e ? e.getStats() : new dl;
                        d.da = f;
                        d.pg = c || null;
                        if (m) return G(A, k(function () {
                            return O(function (y) {
                                return G(y, Bo(d, c), 0)
                            })
                        }, "initializeSrcEqualsDrmInner_"), 20);
                        if (d.G) {
                            A.u(15);
                            break
                        }
                        return G(A, k(function () {
                            return O(function (y) {
                                return G(y, xo(d), 0)
                            })
                        }, "initializeMediaSourceEngineInner_"), 15);
                    case 15:
                        return G(A, k(function () {
                            return O(function (y) {
                                return G(y, e.m, 0)
                            })
                        }, "waitForFinish"), 17);
                    case 17:
                        d.g =
                            e.getConfiguration();
                        d.xe = e.C;
                        d.bb = e.F;
                        d.F = Hm(e);
                        d.F && d.F.setMediaElement && d.h && d.F.setMediaElement(d.h);
                        d.wd = Im(e);
                        d.rd = e.za;
                        d.i = e.Ef();
                        if (p = e.o) d.za = p;
                        l && d.h && "AUDIO" === d.h.nodeName && (Co(d), d.configure("manifest.disableVideo", !0));
                        d.B = Jm(e);
                        return G(A, k(function () {
                            return O(function (y) {
                                return G(y, d.B.Ub(d.h), 0)
                            })
                        }, "drmEngine_.attach"), 18);
                    case 18:
                        return !(q = e.B) || d.xa && d.xa == q || (d.o = Gm(e), d.xa = e.B, "function" != typeof d.o.setMediaElement && (rb("AbrManager w/o setMediaElement", "Please use an AbrManager with setMediaElement function."),
                            d.o.setMediaElement = function () {
                            }), "function" != typeof d.o.setCmsdManager && (rb("AbrManager w/o setCmsdManager", "Please use an AbrManager with setCmsdManager function."), d.o.setCmsdManager = function () {
                        }), "function" != typeof d.o.trySuggestStreams && (rb("AbrManager w/o trySuggestStreams", "Please use an AbrManager with trySuggestStreams function."), d.o.trySuggestStreams = function () {
                        })), u = Km(e), w = e.fa, G(A, k(function () {
                            return O(function (y) {
                                return G(y, Do(d, n, w, u), 0)
                            })
                        }, "loadInner_"), 19);
                    case 19:
                        Em(e);
                        A.u(14);
                        break;
                    case 20:
                        return G(A, k(function () {
                            return O(function (y) {
                                return G(y, Eo(d, n, c), 0)
                            })
                        }, "srcEqualsInner_"), 14);
                    case 14:
                        d.dispatchEvent(ro("loaded"));
                    case 6:
                        xa(A);
                        if (!e) {
                            A.u(22);
                            break
                        }
                        return G(A, e.destroy(), 22);
                    case 22:
                        d.ra = null;
                        ya(A, 0);
                        break;
                    case 5:
                        v = wa(A);
                        if (7E3 == v.code) {
                            A.u(24);
                            break
                        }
                        return G(A, d.dc(!1), 24);
                    case 24:
                        throw v;
                }
            })
        };

        function Co(a) {
            for (var b = t(a.i.variants), c = b.next(); !c.done; c = b.next()) c = c.value, c.video && (c.video.closeSegmentIndex(), c.video = null), c.bandwidth = c.audio && c.audio.bandwidth ? c.audio.bandwidth : 0;
            a.i.variants = a.i.variants.filter(function (d) {
                return d.audio
            })
        }

        r.hj = function (a, b) {
            a = void 0 === a ? !0 : a;
            b = void 0 === b ? !1 : b;
            var c = this, d;
            return O(function (e) {
                return 1 == e.g ? G(e, Fo(c), 2) : 3 != e.g ? (d = e.h, G(e, c.dc(a, b), 3)) : e.return(d)
            })
        };
        r.Eg = function (a, b) {
            a = void 0 === a ? !1 : a;
            b = void 0 === b ? !1 : b;
            var c = this, d;
            return O(function (e) {
                return 1 == e.g ? G(e, Fo(c, b), 2) : 3 != e.g ? (d = e.h, G(e, c.detach(a), 3)) : e.return(d)
            })
        };

        function Fo(a, b) {
            b = void 0 === b ? !1 : b;
            var c, d;
            return O(function (e) {
                if (1 == e.g) {
                    c = null;
                    if (!(a.i && a.F && a.bb && a.da)) return e.u(2);
                    d = a.h.currentTime;
                    a.V() && !b && (d = null);
                    return G(e, Go(a, a.da, d, a.pg, !0, !1, !1), 3)
                }
                if (2 != e.g) {
                    c = e.h;
                    a.Fe.push(c);
                    a.F && a.F.setMediaElement && a.F.setMediaElement(null);
                    var f = c, g = a.F, h = a.bb;
                    f.h = a.i;
                    f.j = g;
                    f.F = h;
                    f = c;
                    g = a.xa;
                    f.i = a.o;
                    f.B = g;
                    c.o = a.za;
                    c.start();
                    a.i = null;
                    a.F = null;
                    a.bb = null;
                    a.o = null;
                    a.xa = null
                }
                return e.return(c)
            })
        }

        r.preload = function (a, b, c) {
            b = void 0 === b ? null : b;
            var d = this, e;
            return O(function (f) {
                if (1 == f.g) return G(f, Ao(d, a, b, c), 2);
                (e = f.h) ? e.start() : wo(d, new T(2, 7, 7005));
                return f.return(e)
            })
        };
        r.lf = function () {
            var a = this, b, c, d, e;
            return O(function (f) {
                b = [];
                c = t(a.Fe);
                for (d = c.next(); !d.done; d = c.next()) e = d.value, e.s || b.push(e.destroy());
                a.Fe = [];
                return G(f, Promise.all(b), 0)
            })
        };

        function Ao(a, b, c, d, e) {
            e = void 0 === e ? !1 : e;
            var f, g, h, k;
            return O(function (l) {
                if (1 == l.g) return d ? l.u(2) : G(l, zo(a, b), 3);
                2 != l.g && (d = l.h);
                if (f = Ho(a, d)) return l.return(null);
                g = !1;
                h = !0;
                e && (a.o && a.xa == a.g.abrFactory && (h = !1), a.h && "AUDIO" === a.h.nodeName && (g = !0));
                k = Go(a, b, c, d || null, !e, g, h);
                e || (k = k.then(function (m) {
                    a.Fe.push(m);
                    return m
                }));
                return l.return(k)
            })
        }

        function Go(a, b, c, d, e, f, g) {
            e = void 0 === e ? !0 : e;
            f = void 0 === f ? !1 : f;
            g = void 0 === g ? !0 : g;
            var h, k, l, m, n, p, q, u, w, v, A, y, D, z, B;
            return O(function (C) {
                if (1 == C.g) return h = null, k = Me(a.g), f && (k.manifest.disableVideo = !0), l = function () {
                    return h.R && h.s ? null : h
                }, m = function () {
                    return l() ? l().getConfiguration() : a.g
                }, n = function (F, I) {
                    l() ? h.configure(F, I) : a.configure(F, I)
                }, Infinity != a.fa.width || Infinity != a.fa.height ? C.u(2) : G(C, td(), 3);
                2 != C.g && (p = C.h, a.fa.width = p.width, a.fa.height = p.height);
                q = new ni(k, a.fa, null);
                u = {
                    networkingEngine: a.H,
                    filter: function (F) {
                        var I, L;
                        return O(function (J) {
                            if (1 == J.g) return G(J, oi(q, F), 2);
                            if (4 != J.g) {
                                I = J.h;
                                if (!I) return J.u(0);
                                L = ro("trackschanged");
                                return G(J, Promise.resolve(), 4)
                            }
                            h.dispatchEvent(L);
                            H(J)
                        })
                    }, makeTextStreamsForClosedCaptions: function (F) {
                        return Io(a, F)
                    }, onTimelineRegionAdded: function (F) {
                        var I = h.G;
                        a:{
                            var L = t(I.g);
                            for (var J = L.next(); !J.done; J = L.next()) if (J = J.value, J.schemeIdUri == F.schemeIdUri && J.id == F.id && J.startTime == F.startTime && J.endTime == F.endTime) {
                                L = J;
                                break a
                            }
                            L = null
                        }
                        null == L && (I.g.add(F), F =
                            new U("regionadd", new Map([["region", F]])), I.dispatchEvent(F))
                    }, onEvent: function (F) {
                        return h.dispatchEvent(F)
                    }, onError: function (F) {
                        return h.onError(F)
                    }, isLowLatencyMode: function () {
                        return m().streaming.lowLatencyMode
                    }, isAutoLowLatencyMode: function () {
                        return m().streaming.autoLowLatencyMode
                    }, enableLowLatencyMode: function () {
                        n("streaming.lowLatencyMode", !0)
                    }, updateDuration: function () {
                        a.j && h.R && a.j.updateDuration()
                    }, newDrmInfo: function (F) {
                        var I = h.l, L = I ? I.g : null;
                        L && I.s && qi(q, L.keySystem, F)
                    }, onManifestUpdated: function () {
                        var F =
                            (new Map).set("isLive", a.V());
                        h.dispatchEvent(ro("manifestupdated", F));
                        Dm(h, !1, function () {
                            if (a.A) a.A.onManifestUpdated(a.V())
                        })
                    }, getBandwidthEstimate: function () {
                        return a.o.getBandwidthEstimate()
                    }, onMetadata: function (F, I, L, J) {
                        var E = F;
                        if ("com.apple.hls.interstitial" == F && (E = "com.apple.quicktime.HLS", F = {
                            startTime: I,
                            endTime: L,
                            values: J
                        }, a.A)) a.A.onInterstitialMetadata(a, a.h, F);
                        F = {};
                        J = t(J);
                        for (var K = J.next(); !K.done; F = {Re: F.Re}, K = J.next()) F.Re = K.value, Dm(h, !1, function (N) {
                            return function () {
                                Jo(a, I, L, E, N.Re)
                            }
                        }(F))
                    },
                    disableStream: function (F) {
                        return a.disableStream(F, a.g.streaming.maxDisabledTime)
                    }
                };
                w = new ql(function () {
                    return a.Qb()
                });
                w.addEventListener("regionadd", function (F) {
                    var I = F.region;
                    Ko(a, "timelineregionadded", I, h);
                    Dm(h, !1, function () {
                        if (a.A) a.A.onDashTimedMetadata(I)
                    })
                });
                v = null;
                k.streaming.observeQualityChanges && (v = new rl(function () {
                    return a.yb()
                }), v.addEventListener("qualitychange", function (F) {
                    Lo(a, F.quality, F.position)
                }), v.addEventListener("audiotrackchange", function (F) {
                    Lo(a, F.quality, F.position, !0)
                }));
                A = !0;
                y = {
                    Nb: a.H, onError: function (F) {
                        return h.onError(F)
                    }, Ae: function (F) {
                        Dm(h, !0, function () {
                            a:{
                                var I = F, L = ro("keystatuschanged");
                                a.dispatchEvent(L);
                                var J = Object.keys(I);
                                1 == J.length && "" == J[0] && (J = ["00"], I = {"00": I[""]});
                                L = 1 == J.length && "00" == J[0];
                                var E = !1;
                                if (J.length) {
                                    J = t(a.i.variants);
                                    for (var K = J.next(); !K.done; K = J.next()) {
                                        K = K.value;
                                        var N = [];
                                        K.audio && N.push(K.audio);
                                        K.video && N.push(K.video);
                                        N = t(N);
                                        for (var M = N.next(); !M.done; M = N.next()) {
                                            var P = M.value;
                                            M = K.allowedByKeySystem;
                                            if (P.keyIds.size) {
                                                K.allowedByKeySystem =
                                                    !0;
                                                P = t(P.keyIds);
                                                for (var R = P.next(); !R.done; R = P.next()) if (R = R.value, (R = I[L ? "00" : R]) || a.B.F) K.allowedByKeySystem = K.allowedByKeySystem && !!R && !si.includes(R)
                                            }
                                            M != K.allowedByKeySystem && (E = !0)
                                        }
                                    }
                                }
                                if (E && (Mo(a), !No(a))) break a;
                                (I = a.j.j) && !I.allowedByKeySystem && oo(a)
                            }
                        })
                    }, onExpirationUpdated: function (F, I) {
                        var L = ro("expirationupdated");
                        h.dispatchEvent(L);
                        if ((L = h.j) && L.onExpirationUpdated) L.onExpirationUpdated(F, I)
                    }, onEvent: function (F) {
                        h.dispatchEvent(F);
                        "drmsessionupdate" == F.type && A && (A = !1, F = Date.now() / 1E3 - h.ra,
                            (a.s || h.getStats()).j = F, a.K && Fj(a.K))
                    }
                };
                D = lo(a, l);
                sg(a.H, D);
                z = function () {
                    return a.Dc(y)
                };
                B = {config: k, Di: u, Mi: w, Li: v, Dc: z, Ci: q, networkingEngine: D, Fh: e, Eh: g};
                h = new Cm(b, d, c, B);
                return C.return(h)
            })
        }

        function zo(a, b) {
            var c, d;
            return O(function (e) {
                if (1 == e.g) return c = a.g.manifest.retryParameters, G(e, kn(b, a.H, c), 2);
                d = e.h;
                "application/x-mpegurl" == d && hd() && (d = "application/vnd.apple.mpegurl");
                return e.return(d)
            })
        }

        function Ho(a, b) {
            if (!Uc()) return !0;
            if (b) {
                if ("" == (a.h || Wc()).canPlayType(b)) return !1;
                if (!(Uc() && b in vi)) return !0;
                if (pe(b)) return hd() && (a.g.drm.servers["com.apple.fps"] || a.g.drm.servers["com.apple.fps.1_0"]) ? a.g.streaming.useNativeHlsForFairPlay : a.g.streaming.preferNativeHls
            }
            return !1
        }

        function xo(a) {
            var b, c, d, e, f;
            return O(function (g) {
                if (1 == g.g) return to(a, "media-source"), b = a.g.textDisplayFactory, c = b(), c.configure ? c.configure(a.g.textDisplayer) : rb("Text displayer w/ configure", 'Text displayer should have a "configure" method!'), a.qg = b, d = Oo(a.h, c, {
                    Xh: function () {
                        return a.keySystem()
                    }, onMetadata: function (h, k, l) {
                        Po(a, h, k, l)
                    }
                }, a.K), d.configure(a.g.mediaSource), e = a.g.manifest, f = e.segmentRelativeVttTiming, d.fa = f, G(g, d.L, 2);
                a.G = d;
                H(g)
            })
        }

        function Do(a, b, c, d) {
            var e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L;
            return O(function (J) {
                switch (J.g) {
                    case 1:
                        to(a, "load"), e = a.h, a.I = new Vk({
                            ie: function () {
                                return e.playbackRate
                            }, nc: function () {
                                return e.defaultPlaybackRate
                            }, hg: function (E) {
                                e.playbackRate = E
                            }, Yg: function (E) {
                                e.currentTime += E
                            }
                        }), f = function () {
                            return Qo(a)
                        }, g = function () {
                            return Ro(a)
                        }, a.m.D(e, "playing", f), a.m.D(e, "pause", f), a.m.D(e, "ended", f), a.m.D(e, "ratechange", g), qo(a, a.g), a.Fb = a.g.preferredTextLanguage, a.Gd = a.g.preferredTextRole, a.Fd = a.g.preferForcedSubs,
                            So(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd), a.o.init(function (E, K, N) {
                            a.i && a.j && E != a.j.j && To(a, E, !0, void 0 === K ? !1 : K, void 0 === N ? 0 : N)
                        }), a.o.setMediaElement(e), a.o.setCmsdManager(a.ea), a.j = Uo(a), a.j.configure(a.g.streaming), a.l = Vo, e.textTracks && a.m.D(e.textTracks, "addtrack", function (E) {
                            if (E.track) switch (E = E.track, E.kind) {
                                case "chapters":
                                    Wo(a, E)
                            }
                        }), a.dispatchEvent(ro("streaming")), h = c;
                    case 2:
                        (l = a.j.j) || h || (h = Xo(a, !0));
                        m = [];
                        k = l || h;
                        n = t([k.video, k.audio]);
                        for (p = n.next(); !p.done; p = n.next()) (q =
                            p.value) && !q.segmentIndex && m.push(q.createSegmentIndex());
                        if (!(0 < m.length)) {
                            J.u(4);
                            break
                        }
                        return G(J, Promise.all(m), 4);
                    case 4:
                        if (!k || 0 != k.disabledUntilTime) {
                            J.u(2);
                            break
                        }
                        if (a.F && a.F.onInitialVariantChosen) a.F.onInitialVariantChosen(k);
                        a.i.isLowLatency && !a.g.streaming.lowLatencyMode && $a("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");
                        So(a.i.presentationTimeline,
                            a.g.playRangeStart, a.g.playRangeEnd);
                        Kl(a.j, a.g.playRangeStart, a.g.playRangeEnd);
                        u = function (E) {
                            a.C = Yo(a, E);
                            a.Hb = Zo(a, E);
                            $o(a, e, Math.max(a.i.minBufferTime, a.g.streaming.rebufferingGoal))
                        };
                        a.g.streaming.startAtSegmentBoundary || u(a.qa);
                        if (l) {
                            J.u(7);
                            break
                        }
                        if (!a.g.streaming.startAtSegmentBoundary) {
                            J.u(8);
                            break
                        }
                        w = a.i.presentationTimeline;
                        v = a.qa || a.h.currentTime;
                        A = w.Yb();
                        y = w.Ab();
                        v < A ? v = A : v > y && (v = y);
                        return G(J, ap(h, v), 9);
                    case 9:
                        D = J.h, u(D);
                    case 8:
                        To(a, h, !0, !1, 0);
                    case 7:
                        return a.C.$e(), z = a.Hc().find(function (E) {
                            return E.active
                        }),
                        z || ((B = vf(a.i.textStreams, a.Fb, a.Gd, a.Fd)[0] || null) && cl(a.s.h, B, !0), h && (B ? (bp(a, h.audio, B) && (a.pa = !0), a.pa && a.G.F.setTextVisibility(!0), cp(a)) : a.pa = !1), B && (a.g.streaming.alwaysStreamText || a.Kf()) && Tl(a.j, B)), G(J, a.j.start(d), 10);
                    case 10:
                        a.g.abr.enabled && (a.o.enable(), dp(a));
                        Mo(a);
                        No(a);
                        a.i.variants.some(function (E) {
                            return E.primary
                        });
                        if ((C = a.V()) && (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled || a.i.serviceDescription || a.g.streaming.liveSync.panicMode) || a.g.streaming.vodDynamicPlaybackRate) F =
                            function () {
                                return ep(a)
                            }, a.m.D(e, "timeupdate", F);
                        C || (I = function () {
                            return fp(a)
                        }, a.m.D(e, "timeupdate", I), fp(a), a.i.nextUrl && (0 < a.g.streaming.preloadNextUrlWindow && (L = function () {
                            var E, K;
                            return O(function (N) {
                                if (1 == N.g) {
                                    E = a.h.duration - a.h.currentTime;
                                    if (isNaN(E) || !(E <= a.g.streaming.preloadNextUrlWindow)) return N.u(0);
                                    a.m.lb(e, "timeupdate", L);
                                    K = a;
                                    return G(N, a.preload(a.i.nextUrl), 4)
                                }
                                K.ra = N.h;
                                H(N)
                            })
                        }, a.m.D(e, "timeupdate", L)), a.m.D(e, "ended", function () {
                            a.load(a.ra || a.i.nextUrl)
                        })));
                        if (a.A) a.A.onManifestUpdated(C);
                        a.Ea = !0;
                        a.m.ha(e, "loadedmetadata", function () {
                            a.s.m = Date.now() / 1E3 - b
                        });
                        H(J)
                }
            })
        }

        function Bo(a, b) {
            var c, d, e, f, g;
            return O(function (h) {
                return 1 == h.g ? (c = Xd, d = Date.now() / 1E3, e = !0, a.B = a.Dc({
                    Nb: a.H, onError: function (k) {
                        wo(a, k)
                    }, Ae: function () {
                    }, onExpirationUpdated: function () {
                        var k = ro("expirationupdated");
                        a.dispatchEvent(k)
                    }, onEvent: function (k) {
                        a.dispatchEvent(k);
                        "drmsessionupdate" == k.type && e && (e = !1, a.s.j = Date.now() / 1E3 - d)
                    }
                }), a.B.configure(a.g.drm), f = {
                    id: 0,
                    language: "und",
                    disabledUntilTime: 0,
                    primary: !1,
                    audio: null,
                    video: null,
                    bandwidth: 100,
                    allowedByApplication: !0,
                    allowedByKeySystem: !0,
                    decodingInfos: []
                },
                    g = {
                        id: 0,
                        originalId: null,
                        groupId: null,
                        createSegmentIndex: function () {
                            return Promise.resolve()
                        },
                        segmentIndex: null,
                        mimeType: b ? je(b) : "",
                        codecs: b ? oe(b) : "",
                        encrypted: !0,
                        drmInfos: [],
                        keyIds: new Set,
                        language: "und",
                        originalLanguage: null,
                        label: null,
                        type: c.ga,
                        primary: !1,
                        trickModeVideo: null,
                        emsgSchemeIdUris: null,
                        roles: [],
                        forced: !1,
                        channelsCount: null,
                        audioSamplingRate: null,
                        spatialAudio: !1,
                        closedCaptions: null,
                        accessibilityPurpose: null,
                        external: !1,
                        fastSwitching: !1,
                        fullMimeTypes: new Set
                    }, g.fullMimeTypes.add($d(g.mimeType,
                    g.codecs)), b.startsWith("audio/") ? (g.type = c.X, f.audio = g) : f.video = g, a.B.aa = !0, G(h, Kh(a.B, [f], []), 2)) : G(h, a.B.Ub(a.h), 0)
            })
        }

        function Eo(a, b, c) {
            var d, e, f, g, h, k, l, m, n, p, q;
            return O(function (u) {
                if (1 == u.g) return to(a, "src-equals"), d = a.h, a.C = new Lk(d), e = !1, a.Ed.push(function () {
                    e = !0
                }), null != a.qa && a.C.af(a.qa), a.I = new Vk({
                    ie: function () {
                        return d.playbackRate
                    }, nc: function () {
                        return d.defaultPlaybackRate
                    }, hg: function (w) {
                        d.playbackRate = w
                    }, Yg: function (w) {
                        d.currentTime += w
                    }
                }), f = a.g.streaming.rebufferingGoal, $o(a, d, f), g = function () {
                    return Qo(a)
                }, h = function () {
                    return Ro(a)
                }, a.m.D(d, "playing", g), a.m.D(d, "pause", g), a.m.D(d, "ended", g), a.m.D(d,
                    "ratechange", h), "none" != d.preload && a.m.ha(d, "loadedmetadata", function () {
                    a.s.m = Date.now() / 1E3 - b
                }), d.audioTracks && (a.m.D(d.audioTracks, "addtrack", function () {
                    return Mo(a)
                }), a.m.D(d.audioTracks, "removetrack", function () {
                    return Mo(a)
                }), a.m.D(d.audioTracks, "change", function () {
                    return Mo(a)
                })), d.textTracks && (a.m.D(d.textTracks, "addtrack", function (w) {
                    if (w.track) switch (w = w.track, w.kind) {
                        case "metadata":
                            gp(a, w);
                            break;
                        case "chapters":
                            Wo(a, w);
                            break;
                        default:
                            Mo(a)
                    }
                }), a.m.D(d.textTracks, "removetrack", function () {
                    return Mo(a)
                }),
                    a.m.D(d.textTracks, "change", function () {
                        return Mo(a)
                    })), d.src = In(a.N, a.da, c), (ad() || dd()) && d.load(), "none" != d.preload && !d.autoplay && pe(c) && md() && d.load(), a.l = hp, a.dispatchEvent(ro("streaming")), k = new bg, Ck(d, HTMLMediaElement.HAVE_METADATA, a.m, function () {
                    a.C.$e();
                    k.resolve()
                }), Ck(d, HTMLMediaElement.HAVE_CURRENT_DATA, a.m, function () {
                    var w;
                    return O(function (v) {
                        if (1 == v.g) return ip(a), w = jp(a), w.find(function (A) {
                            return "disabled" != A.mode
                        }) ? (0 < w.length && (a.pa = !0), v.u(2)) : G(v, new Promise(function (A) {
                            a.m.ha(d.textTracks,
                                "change", A);
                            (new Tc(A)).Y(1)
                        }), 2);
                        if (e) return v.return();
                        kp(a);
                        H(v)
                    })
                }), d.error ? k.reject(vo(a)) : "none" == d.preload && ($a('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'), k.resolve()), a.m.ha(d, "error", function () {
                    k.reject(vo(a))
                }), l = new Promise(function (w, v) {
                    (new Tc(v)).Y(a.g.streaming.loadTimeout)
                }), G(u, Promise.race([k,
                    l]), 2);
                if ((m = a.V()) && (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled || a.g.streaming.liveSync.panicMode) || a.g.streaming.vodDynamicPlaybackRate) n = function () {
                    return ep(a)
                }, a.m.D(d, "timeupdate", n);
                m || (p = function () {
                    return fp(a)
                }, a.m.D(d, "timeupdate", p), fp(a));
                a.A && (a.A.onManifestUpdated(m), m && (q = a.Qb().end, a.m.D(d, "progress", function () {
                    var w = a.Qb().end;
                    q != w && (a.A.onManifestUpdated(a.V()), q = w)
                })));
                a.Ea = !0;
                H(u)
            })
        }

        function ip(a) {
            var b = a.g.preferredAudioLanguage;
            "" != b && a.gh(b, a.g.preferredVariantRole)
        }

        function kp(a) {
            var b = a.g.preferredTextLanguage;
            "" != b && a.bg(b, a.g.preferredTextRole, a.g.preferForcedSubs)
        }

        function gp(a, b) {
            if ("metadata" == b.kind) {
                b.mode = "hidden";
                a.m.D(b, "cuechange", function () {
                    if (b.activeCues) {
                        for (var d = [], e = {}, f = t(b.activeCues), g = f.next(); !g.done; e = {Ma: e.Ma}, g = f.next()) {
                            e.Ma = g.value;
                            Jo(a, e.Ma.startTime, e.Ma.endTime, e.Ma.type, e.Ma.value);
                            if (a.A) a.A.onCueMetadataChange(e.Ma.value);
                            "com.apple.quicktime.HLS" == e.Ma.type && null != e.Ma.startTime && (g = d.find(function (h) {
                                return function (k) {
                                    return k.startTime == h.Ma.startTime && k.endTime == h.Ma.endTime
                                }
                            }(e)), g || (g = {
                                startTime: e.Ma.startTime, endTime: e.Ma.endTime,
                                values: []
                            }, d.push(g)), g.values.push(e.Ma.value))
                        }
                        d = t(d);
                        for (e = d.next(); !e.done; e = d.next()) e = e.value, e.values.some(function (h) {
                            return "X-ASSET-URI" == h.key || "X-ASSET-LIST" == h.key
                        }) && a.A && (e.values.push({
                            key: "CUE",
                            description: "",
                            data: "ONCE",
                            mimeType: null,
                            pictureType: null
                        }), a.A.onInterstitialMetadata(a, a.h, e))
                    }
                });
                var c = (new Tc(function () {
                    var d = lp(a);
                    d = t(d);
                    for (var e = d.next(); !e.done; e = d.next()) e.value.mode = "hidden"
                })).xc().Y(.5);
                a.Ed.push(function () {
                    c.stop()
                })
            }
        }

        function Po(a, b, c, d) {
            b = t(b);
            for (var e = b.next(); !e.done; e = b.next()) if (e = e.value, e.data && "number" == typeof e.cueTime && e.frames) {
                var f = e.cueTime + c, g = d;
                g && f > g && (g = f);
                for (var h = t(e.frames), k = h.next(); !k.done; k = h.next()) Jo(a, f, g, "org.id3", k.value);
                if (a.A) a.A.onHlsTimedMetadata(e, f)
            }
        }

        function Jo(a, b, c, d, e) {
            b = (new Map).set("startTime", b).set("endTime", c).set("metadataType", d).set("payload", e);
            a.dispatchEvent(ro("metadata", b))
        }

        function Wo(a, b) {
            if (b && "chapters" == b.kind) {
                b.mode = "hidden";
                var c = (new Tc(function () {
                    b.mode = "hidden"
                })).xc().Y(.5);
                a.Ed.push(function () {
                    c.stop()
                })
            }
        }

        r.Qi = function () {
            for (var a = this.Z; a.g;) a.release()
        };
        r.Dc = function (a) {
            return new Dh(a)
        };

        function lo(a, b) {
            function c(e) {
                b() ? b().dispatchEvent(e) : a.dispatchEvent(e)
            }

            function d(e) {
                b() ? Dm(b(), !0, e) : e()
            }

            b || (b = function () {
                return null
            });
            return new og(function (e, f, g, h) {
                var k = b() ? b().i : a.o;
                k && k.segmentDownloaded(e, f, g, h)
            }, function (e, f, g) {
                f = (new Map).set("headers", e).set("request", f).set("requestType", g);
                c(ro("downloadheadersreceived", f));
                d(function () {
                    if (a.ea) {
                        var h = a.ea;
                        if (h.h.enabled) {
                            var k = e["cmsd-static"];
                            if (k) try {
                                var l = new Map, m = k.split(",");
                                for (k = 0; k < m.length; k++) {
                                    var n = m[k].split("=");
                                    l.set(n[0],
                                        fo(n[1]))
                                }
                            } catch (v) {
                            }
                            if (l = e["cmsd-dynamic"]) {
                                try {
                                    var p = new Map, q = l.split(";");
                                    for (l = 1; l < q.length; l++) {
                                        var u = q[l].split("=");
                                        p.set(u[0], fo(u[1]))
                                    }
                                    var w = p
                                } catch (v) {
                                    w = null
                                }
                                w && (h.g = w)
                            }
                        }
                    }
                })
            }, function (e, f, g, h) {
                e = (new Map).set("request", e).set("error", f).set("httpResponseCode", g).set("aborted", h);
                c(ro("downloadfailed", e))
            }, function (e, f, g) {
                d(function () {
                    var h = a.N, k = g;
                    k = void 0 === k ? {} : k;
                    if (h.g.enabled) if ("HEAD" === f.method) Pn(h, f); else switch (e) {
                        case 0:
                            try {
                                if (h.g.enabled) {
                                    if (k.type) {
                                        a:{
                                            switch (k.type) {
                                                case 4:
                                                    var l =
                                                        "d";
                                                    break a;
                                                case 3:
                                                case 2:
                                                    l = "h";
                                                    break a;
                                                case 5:
                                                    l = "s";
                                                    break a
                                            }
                                            l = void 0
                                        }
                                        h.m = l
                                    }
                                    Pn(h, f, {ot: Mn, su: !h.i})
                                }
                            } catch (M) {
                                ab("CMCD_MANIFEST_ERROR", "Could not generate manifest CMCD data.", M)
                            }
                            break;
                        case zg:
                            try {
                                if (h.g.enabled) {
                                    var m = k.segment;
                                    l = 0;
                                    m && (l = m.endTime - m.startTime);
                                    var n = {d: 1E3 * l, st: h.h.V() ? "l" : "v"};
                                    n.ot = Tn(k);
                                    var p = n.ot === Qn || n.ot === Kn || n.ot === Ln || n.ot === Vn, q = k.stream;
                                    if (q) {
                                        var u = h.h.fb();
                                        if (p && (n.bl = Xn(h, q.type), n.ot !== Vn)) {
                                            var w = Yn(h, q.type);
                                            n.dl = u ? w / Math.abs(u) : w
                                        }
                                        q.bandwidth && (n.br = q.bandwidth / 1E3);
                                        if (q.segmentIndex && m) {
                                            var v = q.segmentIndex.Kb(m.endTime, !0, 0 > u);
                                            if (v) {
                                                var A = v.next().value;
                                                if (A && A != m) {
                                                    if (!Rb(m.M(), A.M())) {
                                                        var y = A.M()[0], D = f.uris[0], z = new URL(y), B = new URL(D);
                                                        if (z.origin !== B.origin) var C = y; else {
                                                            for (var F = z.pathname.split("/").slice(1), I = B.pathname.split("/").slice(1, -1); F[0] === I[0];) F.shift(), I.shift();
                                                            for (; I.length;) I.shift(), F.unshift("..");
                                                            C = F.join("/")
                                                        }
                                                        n.nor = C
                                                    }
                                                    if ((A.Ha || A.sa) && (m.Ha != A.Ha || m.sa != A.sa)) {
                                                        var L = A.Ha + "-";
                                                        A.sa && (L += A.sa);
                                                        n.nrr = L
                                                    }
                                                }
                                            }
                                            var J = h.h.fb() || 1, E = Yn(h, q.type) ||
                                                500, K = q.bandwidth;
                                            var N = K ? K * (m.endTime - m.startTime) / 1E3 / (E / J / 1E3) * h.g.rtpSafetyFactor : NaN;
                                            isNaN(N) || (n.rtp = N)
                                        }
                                    }
                                    p && n.ot !== Vn && (n.tb = Zn(h, n.ot) / 1E3);
                                    Pn(h, f, n)
                                }
                            } catch (M) {
                                ab("CMCD_SEGMENT_ERROR", "Could not generate segment CMCD data.", M)
                            }
                            break;
                        case 2:
                        case 5:
                        case 6:
                            Pn(h, f, {ot: "k"});
                            break;
                        case 4:
                            Pn(h, f, {ot: "o"})
                    }
                })
            }, function (e, f, g, h) {
                (e = b() ? b().j : a.F) && e.banLocation && e.banLocation(h)
            }, function (e, f) {
                if (f.data) {
                    f = f.data.byteLength;
                    var g = b() ? b().getStats() : a.s;
                    g && (g.ae = isNaN(g.ae) ? f : g.ae + f, 0 === e && (g.Ug = f))
                }
            })
        }

        function Yo(a, b) {
            return new Mk(a.h, a.i, a.g.streaming, b, function () {
                a.Hb && Yk(a.Hb, !0);
                a.j && a.j.Nd();
                a.L && mp(a)
            }, function (c) {
                return a.dispatchEvent(c)
            })
        }

        function Zo(a, b) {
            b = new Rm(a.wd, a.V() || 0 < b);
            b.addEventListener("enter", function (d) {
                Ko(a, "timelineregionenter", d.region)
            });
            b.addEventListener("exit", function (d) {
                Ko(a, "timelineregionexit", d.region)
            });
            b.addEventListener("skip", function (d) {
                var e = d.region;
                d.seeking || (Ko(a, "timelineregionenter", e), Ko(a, "timelineregionexit", e))
            });
            var c = new Xk(a.h);
            c.g.add(b);
            a.rd && c.g.add(a.rd);
            return c
        }

        function $o(a, b, c) {
            a.L = new Vf;
            a.L.g = Xf;
            Yf(a.L, c, Math.min(.5, c / 2));
            yo(a);
            a.Ce = (new Tc(function () {
                mp(a)
            })).Sa(.25);
            a.m.D(b, "waiting", function () {
                return mp(a)
            });
            a.m.D(b, "stalled", function () {
                return mp(a)
            });
            a.m.D(b, "canplaythrough", function () {
                return mp(a)
            });
            a.m.D(b, "progress", function () {
                return mp(a)
            })
        }

        function mp(a) {
            switch (a.l) {
                case hp:
                    if (a.h.ended) var b = !0; else {
                        var c = Hi(a.h.buffered);
                        b = null != c && c >= a.h.duration - 1
                    }
                    break;
                case Vo:
                    a:if (a.h.ended || Wj(a.G)) b = !0; else {
                        if (a.i.presentationTimeline.V()) {
                            c = a.i.presentationTimeline.Zb();
                            var d = Hi(a.h.buffered);
                            if (null != d && d >= c) {
                                b = !0;
                                break a
                            }
                        }
                        b = !1
                    }
                    break;
                default:
                    b = !1
            }
            d = Ji(a.h.buffered, a.h.currentTime);
            c = a.L;
            var e = b, f = c.i.get(c.g);
            b = c.g;
            d = e || d >= f ? Wf : Xf;
            c.g = d;
            (b = b != d) && d === Wf && (c.h = Date.now());
            b && yo(a)
        }

        function Oo(a, b, c, d) {
            return new Nj(a, b, c, d)
        }

        function ko(a) {
            return new Gn({
                getBandwidthEstimate: function () {
                    return a.o ? a.o.getBandwidthEstimate() : NaN
                }, yb: function () {
                    return a.yb()
                }, getCurrentTime: function () {
                    return a.h ? a.h.currentTime : 0
                }, fb: function () {
                    return a.fb()
                }, zb: function () {
                    return a.zb()
                }, oc: function () {
                    return a.oc()
                }, V: function () {
                    return a.V()
                }
            }, a.g.cmcd)
        }

        function Uo(a) {
            return new El(a.i, {
                he: function () {
                    return a.C ? a.C.$d() : 0
                }, getBandwidthEstimate: function () {
                    return a.o.getBandwidthEstimate()
                }, fb: function () {
                    return a.fb()
                }, ca: a.G, Nb: a.H, onError: function (b) {
                    return wo(a, b)
                }, onEvent: function (b) {
                    return a.dispatchEvent(b)
                }, Ii: function () {
                    a.F && a.F.update && a.F.update()
                }, Sf: function (b, c) {
                    var d = b.startTime, e = b.endTime, f = c.type, g = c.codecs.includes(",");
                    if (a.C) {
                        a.C.Zg();
                        var h = Xj(a.G, f);
                        !a.V() && a.h.paused && null != h && 0 < h && a.C.$d() < h && a.C.af(h)
                    }
                    mp(a);
                    d = (new Map).set("start",
                        d).set("end", e).set("contentType", f).set("isMuxed", g);
                    a.dispatchEvent(ro("segmentappended", d));
                    a.o && c.fastSwitching && b.Kd && b.pe && a.o.trySuggestStreams()
                }, Hi: function (b, c) {
                    (c = c.Lc) && a.rd && tl(a.rd, c, b)
                }, yg: function (b, c) {
                    var d = a.B;
                    if (d.h.parseInbandPsshEnabled && !d.F && ["audio", "video"].includes(b)) {
                        c = new Yg(Ab(c));
                        var e = 0, f = t(c.data);
                        for (b = f.next(); !b.done; b = f.next()) e += b.value.length;
                        if (0 == e) d = Promise.resolve(); else {
                            e = new Uint8Array(e);
                            f = 0;
                            c = t(c.data);
                            for (b = c.next(); !b.done; b = c.next()) b = b.value, e.set(b,
                                f), f += b.length;
                            Th(d, "cenc", e);
                            d = d.l
                        }
                    } else d = Promise.resolve();
                    return d
                }, onMetadata: function (b, c, d) {
                    Po(a, b, c, d)
                }, disableStream: function (b, c) {
                    return a.disableStream(b, c)
                }
            })
        }

        r.configure = function (a, b) {
            2 == arguments.length && "string" == typeof a && (a = om(a, b));
            a.streaming && "forceTransmuxTS" in a.streaming && (rb("streaming.forceTransmuxTS configuration", "Please Use mediaSource.forceTransmux instead."), a.mediaSource.mediaSource = a.streaming.forceTransmuxTS, delete a.streaming.forceTransmuxTS);
            a.streaming && "forceTransmux" in a.streaming && (rb("streaming.forceTransmux configuration", "Please Use mediaSource.forceTransmux instead."), a.mediaSource.mediaSource = a.streaming.forceTransmux, delete a.streaming.forceTransmux);
            a.streaming && "useNativeHlsOnSafari" in a.streaming && (rb("streaming.useNativeHlsOnSafari configuration", "Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."), a.streaming.preferNativeHls = a.streaming.useNativeHlsOnSafari && hd(), delete a.streaming.useNativeHlsOnSafari);
            if (a.streaming && "boolean" == typeof a.streaming.liveSync) {
                rb("streaming.liveSync", "Please Use streaming.liveSync.enabled instead.");
                var c = a.streaming.liveSync;
                a.streaming.liveSync = {};
                a.streaming.liveSync.enabled =
                    c
            }
            if (a.streaming && !(a.streaming.liveSync && "targetLatency" in a.streaming.liveSync) && ("liveSyncMinLatency" in a.streaming || "liveSyncMaxLatency" in a.streaming)) {
                c = a.streaming.liveSyncMinLatency || 0;
                var d = Math.abs((a.streaming.liveSyncMaxLatency || 1) - c) / 2;
                a.streaming.liveSync = a.streaming.liveSync || {};
                a.streaming.liveSync.targetLatency = c + d;
                a.streaming.liveSync.targetLatencyTolerance = d
            }
            a.streaming && "liveSyncMaxLatency" in a.streaming && (rb("streaming.liveSyncMaxLatency", "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),
                delete a.streaming.liveSyncMaxLatency);
            a.streaming && "liveSyncMinLatency" in a.streaming && (rb("streaming.liveSyncMinLatency", "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"), delete a.streaming.liveSyncMinLatency);
            a.streaming && "liveSyncTargetLatency" in a.streaming && (rb("streaming.liveSyncTargetLatency", "Please Use streaming.liveSync.targetLatency instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.targetLatency =
                a.streaming.liveSyncTargetLatency, delete a.streaming.liveSyncTargetLatency);
            a.streaming && "liveSyncTargetLatencyTolerance" in a.streaming && (rb("streaming.liveSyncTargetLatencyTolerance", "Please Use streaming.liveSync.targetLatencyTolerance instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.targetLatencyTolerance = a.streaming.liveSyncTargetLatencyTolerance, delete a.streaming.liveSyncTargetLatencyTolerance);
            a.streaming && "liveSyncPlaybackRate" in a.streaming && (rb("streaming.liveSyncPlaybackRate",
                "Please Use streaming.liveSync.maxPlaybackRate instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.maxPlaybackRate = a.streaming.liveSyncPlaybackRate, delete a.streaming.liveSyncPlaybackRate);
            a.streaming && "liveSyncMinPlaybackRate" in a.streaming && (rb("streaming.liveSyncMinPlaybackRate", "Please Use streaming.liveSync.minPlaybackRate instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.minPlaybackRate = a.streaming.liveSyncMinPlaybackRate, delete a.streaming.liveSyncMinPlaybackRate);
            a.streaming && "liveSyncPanicMode" in a.streaming && (rb("streaming.liveSyncPanicMode", "Please Use streaming.liveSync.panicMode instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.panicMode = a.streaming.liveSyncPanicMode, delete a.streaming.liveSyncPanicMode);
            a.streaming && "liveSyncPanicThreshold" in a.streaming && (rb("streaming.liveSyncPanicThreshold", "Please Use streaming.liveSync.panicThreshold instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.panicThreshold =
                a.streaming.liveSyncPanicThreshold, delete a.streaming.liveSyncPanicThreshold);
            if (a.mediaSource && "sourceBufferExtraFeatures" in a.mediaSource) {
                rb("mediaSource.sourceBufferExtraFeatures configuration", "Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");
                var e = a.mediaSource.sourceBufferExtraFeatures;
                a.mediaSource.addExtraFeaturesToSourceBuffer = function () {
                    return e
                };
                delete a.mediaSource.sourceBufferExtraFeatures
            }
            a.streaming && a.streaming.lowLatencyMode && (void 0 == a.streaming.inaccurateManifestTolerance &&
            (a.streaming.inaccurateManifestTolerance = 0), void 0 == a.streaming.rebufferingGoal && (a.streaming.rebufferingGoal = .01), void 0 == a.streaming.segmentPrefetchLimit && (a.streaming.segmentPrefetchLimit = 2), void 0 == a.streaming.updateIntervalSeconds && (a.streaming.updateIntervalSeconds = .1), void 0 == a.streaming.maxDisabledTime && (a.streaming.maxDisabledTime = 1), void 0 == a.streaming.retryParameters && (a.streaming.retryParameters = {}), void 0 == a.streaming.retryParameters.baseDelay && (a.streaming.retryParameters.baseDelay =
                100), void 0 == a.manifest && (a.manifest = {}), void 0 == a.manifest.dash && (a.manifest.dash = {}), void 0 == a.manifest.dash.autoCorrectDrift && (a.manifest.dash.autoCorrectDrift = !1), void 0 == a.manifest.retryParameters && (a.manifest.retryParameters = {}), void 0 == a.manifest.retryParameters.baseDelay && (a.manifest.retryParameters.baseDelay = 100), void 0 == a.drm && (a.drm = {}), void 0 == a.drm.retryParameters && (a.drm.retryParameters = {}), void 0 == a.drm.retryParameters.baseDelay && (a.drm.retryParameters.baseDelay = 100));
            c = Bm(this.g, a,
                jo(this));
            np(this);
            return c
        };

        function np(a) {
            a.xe = new ni(a.g, a.fa, a.B);
            if (a.F) {
                var b = Me(a.g.manifest);
                a.h && "AUDIO" === a.h.nodeName && (b.disableVideo = !0);
                a.F.configure(b)
            }
            a.B && a.B.configure(a.g.drm);
            if (a.j) {
                a.j.configure(a.g.streaming);
                try {
                    a.l != so && pi(a.xe, a.i) && Mo(a)
                } catch (f) {
                    wo(a, f)
                }
                a.o && No(a);
                b = a.j.j;
                !b || b.allowedByApplication && b.allowedByKeySystem || oo(a)
            }
            a.H && (a.H.fg(a.g.streaming.forceHTTP), a.H.gg(a.g.streaming.forceHTTPS));
            if (a.G) if (a.G.configure(a.g.mediaSource), a.G.fa = a.g.manifest.segmentRelativeVttTiming, b = a.g.textDisplayFactory,
            a.qg != b) {
                var c = b();
                c.configure ? c.configure(a.g.textDisplayer) : rb("Text displayer w/ configure", 'Text displayer should have a "configure" method!');
                var d = a.G, e = d.F;
                d.F = c;
                e && (c.setTextVisibility(e.isTextVisible()), e.destroy());
                d.g && (d.g.j = c);
                a.qg = b;
                a.j && (b = a.j, (c = b.i.get(Vd)) && Rl(b, c.stream, !0, 0, !0))
            } else b = a.G.F, b.configure && b.configure(a.g.textDisplayer);
            a.o && (a.o.configure(a.g.abr), a.g.abr.enabled ? a.o.enable() : a.o.disable(), dp(a));
            a.L && (b = a.g.streaming.rebufferingGoal, a.i && (b = Math.max(b, a.i.minBufferTime)),
                Yf(a.L, b, Math.min(.5, b / 2)));
            a.i && So(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd);
            a.A && a.A.configure(a.g.ads);
            a.N && a.N.configure(a.g.cmcd);
            a.ea && a.ea.configure(a.g.cmsd)
        }

        r.getConfiguration = function () {
            var a = jo(this);
            Bm(a, this.g, jo(this));
            return a
        };
        r.Og = function () {
            var a = jo(this);
            Bm(a, this.g, jo(this));
            return qm(this.g, jo(this))
        };
        r.Jg = function () {
            if (this.h) {
                var a = this.h.buffered.length;
                a = a ? this.h.buffered.end(a - 1) : 0;
                var b = this.getConfiguration().streaming.bufferingGoal;
                b = Math.min(this.h.currentTime + b, this.Qb().end);
                if (a >= b) return 1;
                if (!(a <= this.h.currentTime) && a < b) return (a - this.h.currentTime) / (b - this.h.currentTime)
            }
            return 0
        };
        r.Ui = function () {
            for (var a in this.g) delete this.g[a];
            Bm(this.g, jo(this), jo(this));
            np(this)
        };
        r.Mg = function () {
            return this.l
        };
        r.Ff = function () {
            return this.i ? this.i.type : null
        };
        r.ai = function () {
            return this.h
        };
        r.zb = function () {
            return this.H
        };
        r.Gc = function () {
            return this.da
        };
        r.Ig = function () {
            return this.A ? this.A : null
        };
        r.V = function () {
            return this.i ? this.i.presentationTimeline.V() : this.h && this.h.src ? Infinity == this.h.duration : !1
        };
        r.qc = function () {
            return this.i ? this.i.presentationTimeline.qc() : !1
        };
        r.si = function () {
            if (this.i) {
                var a = this.i.variants;
                return a.length ? !a[0].video : !1
            }
            return this.h && this.h.src ? this.h.videoTracks ? 0 == this.h.videoTracks.length : 0 == this.h.videoHeight : !1
        };
        r.Qb = function () {
            if (this.i) {
                if (!this.Ea && "HLS" == this.i.type) return {start: 0, end: 0};
                var a = this.i.presentationTimeline;
                return {start: a.Yb(), end: a.Ab()}
            }
            return this.h && this.h.src && (a = this.h.seekable, a.length) ? {
                start: a.start(0),
                end: a.end(a.length - 1)
            } : {start: 0, end: 0}
        };
        r.oi = function () {
            this.V() && (this.h.currentTime = this.Qb().end)
        };
        r.ti = function () {
            return this.Ea
        };
        r.keySystem = function () {
            var a = this.drmInfo();
            return a ? a.keySystem : ""
        };
        r.drmInfo = function () {
            return this.B ? this.B.g : null
        };
        r.td = function () {
            return this.B ? this.B.td() : Infinity
        };
        r.Df = function () {
            return this.B ? this.B.Df() : []
        };
        r.ge = function () {
            return this.B ? this.B.ge() : {}
        };
        r.Jf = function () {
            return this.L ? this.L.g == Xf : !1
        };
        r.fb = function () {
            return this.h ? this.I ? this.I.i : 1 : 0
        };
        r.Pd = function (a) {
            var b = this;
            0 == a ? $a("A trick play rate of 0 is unsupported!") : (this.Fa.Ra(), this.h.paused && this.h.play(), this.I.set(a), this.l == Vo && (this.o.playbackRateChanged(a), Ql(this.j, 1 < Math.abs(a))), this.V() && this.Fa.D(this.h, "timeupdate", function () {
                var c = b.h.currentTime, d = b.Qb(), e = b.g.streaming.safeSeekOffset;
                0 < a ? Math.floor(c) >= Math.floor(d.end) && b.md() : Math.floor(c) <= Math.floor(d.start + e) && b.md()
            }))
        };
        r.md = function () {
            var a = this.I.nc();
            this.l == hp && this.I.set(a);
            this.l == Vo && (this.I.set(a), this.o.playbackRateChanged(a), Ql(this.j, !1));
            this.Fa.Ra()
        };
        r.oc = function () {
            if (this.i) {
                for (var a = this.j ? this.j.j : null, b = [], c = 0, d = t(this.i.variants), e = d.next(); !e.done; e = d.next()) if (e = e.value, tf(e)) {
                    var f = lf(e);
                    f.active = e == a;
                    f.active || 1 == c || null == a || e.video != a.video || e.audio != a.audio || (f.active = !0);
                    f.active && c++;
                    b.push(f)
                }
                return b
            }
            return this.h && this.h.audioTracks ? Array.from(this.h.audioTracks).map(function (g) {
                return sf(g)
            }) : []
        };
        r.Hc = function () {
            if (this.i) {
                for (var a = this.j ? this.j.s : null, b = [], c = t(this.i.textStreams), d = c.next(); !d.done; d = c.next()) {
                    d = d.value;
                    var e = mf(d);
                    e.active = d == a;
                    b.push(e)
                }
                return b
            }
            return this.h && this.h.src && this.h.textTracks ? jp(this).map(function (f) {
                return qf(f)
            }) : []
        };
        r.Vh = function () {
            var a = this.Hd;
            this.i && (a = this.i.imageStreams);
            return a.map(function (b) {
                return nf(b)
            })
        };
        r.Nh = function (a) {
            var b = this, c, d, e, f;
            return O(function (g) {
                if (1 == g.g) {
                    if (b.l != Vo && b.l != hp) return g.return(null);
                    c = b.Hd;
                    b.i && (c = b.i.imageStreams);
                    return (d = c.find(function (h) {
                        return h.id == a
                    })) ? d.segmentIndex ? g.u(2) : G(g, d.createSegmentIndex(), 2) : g.return(null)
                }
                if (4 != g.g) return e = [], d.segmentIndex.Jb(function (h) {
                    var k = op(h.tilesLayout || d.tilesLayout);
                    if (k) {
                        k = k.rows * k.kc;
                        for (var l = h.j - h.startTime, m = 0; m < k; m++) e.push(b.Qg(a, h.startTime + l * m / k))
                    }
                }), G(g, Promise.all(e), 4);
                f = g.h;
                return g.return(f.filter(function (h) {
                    return h
                }))
            })
        };

        function op(a) {
            return a ? (a = /(\d+)x(\d+)/.exec(a)) ? {kc: parseInt(a[1], 10), rows: parseInt(a[2], 10)} : null : null
        }

        r.Qg = function (a, b) {
            var c = this, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z;
            return O(function (B) {
                if (1 == B.g) {
                    if (c.l != Vo && c.l != hp) return B.return(null);
                    d = c.Hd;
                    c.i && (d = c.i.imageStreams);
                    return (e = d.find(function (C) {
                        return C.id == a
                    })) ? e.segmentIndex ? B.u(2) : G(B, e.createSegmentIndex(), 2) : B.return(null)
                }
                f = e.segmentIndex.find(b);
                if (null == f) return B.return(null);
                g = e.segmentIndex.get(f);
                h = op(g.tilesLayout || e.tilesLayout);
                if (!h) return B.return(null);
                k = e.width || 0;
                l = e.height || 0;
                m = k / h.kc;
                n = l / h.rows;
                p = h.kc * h.rows;
                q = g.j - g.startTime;
                u = g.A || q / p;
                w = g.startTime;
                A = v = 0;
                1 < p && (y = Math.floor((b - g.startTime) / u), w = g.startTime + y * u, v = y % h.kc * m, A = Math.floor(y / h.kc) * n);
                D = !1;
                if (z = g.s) D = !0, n = z.height, v = z.positionX, A = z.positionY, m = z.width;
                return B.return({
                    segment: g,
                    imageHeight: l,
                    imageWidth: k,
                    height: n,
                    positionX: v,
                    positionY: A,
                    startTime: w,
                    duration: u,
                    uris: g.M(),
                    width: m,
                    sprite: D
                })
            })
        };
        r.hh = function (a) {
            if (this.i && this.j) {
                var b = this.i.textStreams.find(function (d) {
                    return d.id == a.id
                });
                b && b != this.j.s && (cl(this.s.h, b, !1), Tl(this.j, b), pp(this), this.Fb = b.language)
            } else if (this.h && this.h.src && this.h.textTracks) {
                b = jp(this);
                b = t(b);
                for (var c = b.next(); !c.done; c = b.next()) c = c.value, of(c) == a.id ? c.mode = this.pa ? "showing" : "hidden" : c.mode = "disabled";
                pp(this)
            }
        };
        r.cg = function (a, b, c) {
            b = void 0 === b ? !1 : b;
            c = void 0 === c ? 0 : c;
            if (this.i && this.j) {
                var d = this.i.variants.find(function (f) {
                    return f.id == a.id
                });
                if (d && tf(d)) {
                    var e = this.j.j;
                    this.g.abr.enabled && (e.video != d.video || e.audio && d.audio && e.audio.language == d.audio.language && e.audio.channelsCount == d.audio.channelsCount) && $a("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");
                    To(this, d, !1, b, c);
                    this.za = new Kf(d,
                        this.g.mediaSource.codecSwitchingStrategy, this.g.manifest.dash.enableAudioGroups);
                    No(this)
                }
            } else if (this.h && this.h.audioTracks) for (b = Array.from(this.h.audioTracks), b = t(b), c = b.next(); !c.done; c = b.next()) if (c = c.value, of(c) == a.id) {
                qp(this, c);
                break
            }
        };
        r.Ph = function () {
            return rp(this.oc())
        };
        r.hi = function () {
            return rp(this.Hc())
        };
        r.Oh = function () {
            return Array.from(sp(this.oc()))
        };
        r.gi = function () {
            return Array.from(sp(this.Hc()))
        };
        r.gh = function (a, b, c, d, e) {
            c = void 0 === c ? 0 : c;
            d = void 0 === d ? 0 : d;
            e = void 0 === e ? "" : e;
            if (this.i && this.C) {
                this.za = new Lf(a, b || "", c, "", !1, "", "", "", this.g.mediaSource.codecSwitchingStrategy, this.g.manifest.dash.enableAudioGroups, e);
                a = function (g, h) {
                    return g.video || h.video ? g.video && h.video ? Math.abs((g.video.height || 0) - (h.video.height || 0)) + Math.abs((g.video.width || 0) - (h.video.width || 0)) : Infinity : 0
                };
                b = this.j.j;
                e = this.za.create(this.i.variants);
                c = null;
                e = t(e.values());
                for (var f = e.next(); !f.done; f = e.next()) f = f.value,
                tf(f) && (!c || a(c, b) > a(f, b)) && (c = f);
                c != b && (c ? (a = lf(c), this.cg(a, !0, d)) : oo(this))
            } else this.h && this.h.audioTracks && (d = vf(this.oc(), a, b || "", !1)[0]) && this.cg(d)
        };
        r.bg = function (a, b, c) {
            c = void 0 === c ? !1 : c;
            if (this.i && this.C) {
                if (this.Fb = a, this.Gd = b || "", this.Fd = c, (a = vf(this.i.textStreams, this.Fb, this.Gd, this.Fd)[0] || null) && a != this.j.s && (cl(this.s.h, a, !1), this.g.streaming.alwaysStreamText || this.Kf())) Tl(this.j, a), pp(this)
            } else (a = vf(this.Hc(), a, b || "", c)[0]) && this.hh(a)
        };
        r.$i = function (a, b, c) {
            b = void 0 === b ? !0 : b;
            c = void 0 === c ? 0 : c;
            if (this.i && this.C) {
                for (var d = null, e = t(this.i.variants), f = e.next(); !f.done; f = e.next()) if (f = f.value, f.audio.label == a) {
                    d = f;
                    break
                }
                null != d && (this.za = new Lf(d.language, "", 0, "", !1, "", a, "", this.g.mediaSource.codecSwitchingStrategy, this.g.manifest.dash.enableAudioGroups), oo(this, b, c))
            } else if (this.h && this.h.audioTracks) {
                c = Array.from(this.h.audioTracks);
                b = null;
                c = t(c);
                for (d = c.next(); !d.done; d = c.next()) d = d.value, d.label == a && (b = d);
                b && qp(this, b)
            }
        };
        r.Kf = function () {
            var a = this.pa;
            return this.G && this.l == Vo ? this.G.F.isTextVisible() : this.h && this.h.src && this.h.textTracks ? jp(this).some(function (b) {
                return "showing" == b.mode
            }) : a
        };
        r.Kg = function () {
            return this.h && this.h.src && this.h.textTracks ? tp(this).map(function (a) {
                return qf(a)
            }) : []
        };
        r.Rh = function (a) {
            if (!this.h || !this.h.src || !this.h.textTracks) return [];
            var b = Ee(a), c = tp(this).filter(function (h) {
                return Ee(h.language) == b
            });
            if (!c || !c.length) return [];
            a = [];
            var d = new Set;
            c = t(c);
            for (var e = c.next(); !e.done; e = c.next()) if ((e = e.value) && e.cues) {
                e = t(e.cues);
                for (var f = e.next(); !f.done; f = e.next()) {
                    var g = f.value;
                    (f = g.id) && "" != f || (f = g.startTime + "-" + g.endTime + "-" + g.text);
                    g = {id: f, title: g.text, startTime: g.startTime, endTime: g.endTime};
                    d.has(f) || (a.push(g), d.add(f))
                }
            }
            return a
        };

        function jp(a) {
            return Array.from(a.h.textTracks).filter(function (b) {
                return "metadata" != b.kind && "chapters" != b.kind && "Shaka Player TextTrack" != b.label
            })
        }

        function lp(a) {
            return Array.from(a.h.textTracks).filter(function (b) {
                return "metadata" == b.kind
            })
        }

        function tp(a) {
            return Array.from(a.h.textTracks).filter(function (b) {
                return "chapters" == b.kind
            })
        }

        r.nh = function (a) {
            a = !!a;
            if (this.pa != a) {
                this.pa = a;
                if (this.l == Vo) this.G.F.setTextVisibility(a), this.g.streaming.alwaysStreamText || (a ? this.j.s || (a = vf(this.i.textStreams, this.Fb, this.Gd, this.Fd), 0 < a.length && (Tl(this.j, a[0]), pp(this))) : Pl(this.j)); else if (this.h && this.h.src && this.h.textTracks) {
                    var b = jp(this);
                    b = t(b);
                    for (var c = b.next(); !c.done; c = b.next()) c = c.value, "disabled" != c.mode && (c.mode = a ? "showing" : "hidden")
                }
                cp(this)
            }
        };
        r.ci = function () {
            if (this.C) var a = this.C.$d(); else {
                if (null == this.qa) return new Date;
                a = this.qa
            }
            if (this.i) {
                var b = this.i.presentationTimeline;
                return new Date(1E3 * ((b.m || b.i) + a))
            }
            return this.h && this.h.getStartDate ? (b = this.h.getStartDate(), isNaN(b.getTime()) ? null : new Date(b.getTime() + 1E3 * a)) : null
        };
        r.Pg = function () {
            if (this.i) {
                var a = this.i.presentationTimeline;
                return new Date(1E3 * (a.m || a.i))
            }
            return this.h && this.h.getStartDate ? (a = this.h.getStartDate(), isNaN(a.getTime()) ? null : a) : null
        };
        r.je = function () {
            return this.V() ? this.i ? this.i.presentationTimeline.je() : null : null
        };
        r.yb = function () {
            if (this.l == Vo) return this.G.yb();
            var a = {total: [], audio: [], video: [], text: []};
            this.l == hp && (a.total = Ki(this.h.buffered));
            return a
        };
        r.getStats = function () {
            if (this.l != Vo && this.l != hp) return {
                width: NaN,
                height: NaN,
                streamBandwidth: NaN,
                decodedFrames: NaN,
                droppedFrames: NaN,
                corruptedFrames: NaN,
                stallsDetected: NaN,
                gapsJumped: NaN,
                estimatedBandwidth: NaN,
                completionPercent: NaN,
                loadLatency: NaN,
                manifestTimeSeconds: NaN,
                drmTimeSeconds: NaN,
                playTime: NaN,
                pauseTime: NaN,
                bufferingTime: NaN,
                licenseTime: NaN,
                liveLatency: NaN,
                maxSegmentDuration: NaN,
                manifestSizeBytes: NaN,
                bytesDownloaded: NaN,
                nonFatalErrorCount: NaN,
                manifestPeriodCount: NaN,
                manifestGapCount: NaN,
                switchHistory: [],
                stateHistory: []
            };
            Qo(this);
            var a = this.h, b = a.currentTime / a.duration;
            if (!isNaN(b) && !this.V()) {
                var c = this.s;
                b = Math.round(100 * b);
                c.i = isNaN(c.i) ? b : Math.max(c.i, b)
            }
            this.C && (this.s.U = this.C.ug(), this.s.Z = this.C.vg());
            if (a.getVideoPlaybackQuality) {
                c = a.getVideoPlaybackQuality();
                b = this.s;
                var d = Number(c.totalVideoFrames);
                b.R = Number(c.droppedVideoFrames);
                b.N = d;
                this.s.L = Number(c.corruptedVideoFrames)
            }
            this.B ? (c = this.B, c = c.I ? c.I : NaN) : c = NaN;
            this.s.s = c;
            if (this.l == Vo) {
                c = this.j.j;
                b = this.j.s;
                if (c) {
                    d = this.I ? this.I.i : 1;
                    var e = d * c.bandwidth;
                    b && b.bandwidth && (e += d * b.bandwidth);
                    this.s.B = e
                }
                c && c.video && (b = this.s, d = c.video.height || NaN, b.o = c.video.width || NaN, b.l = d);
                this.V() && (c = this.Pg().valueOf() + 1E3 * a.currentTime, this.s.C = (Date.now() - c) / 1E3);
                this.i && (this.s.G = this.i.periodCount, this.s.F = this.i.gapCount, this.i.presentationTimeline && (this.s.I = this.i.presentationTimeline.g));
                c = this.o.getBandwidthEstimate();
                this.s.A = c
            }
            this.l == hp && (c = this.s, b = a.videoHeight || NaN, c.o = a.videoWidth || NaN, c.l = b);
            var f = this.s;
            a = f.o;
            c = f.l;
            b = f.B;
            d =
                f.N;
            e = f.R;
            var g = f.L, h = f.Z, k = f.U, l = f.A, m = f.i, n = f.m, p = f.H, q = f.j, u = $k(f.g, "playing"),
                w = $k(f.g, "paused"), v = $k(f.g, "buffering"), A = f.s, y = f.C, D = f.I, z = f.Ug, B = f.ae, C = f.K,
                F = f.G, I = f.F, L = al(f.g), J = [];
            f = t(f.h.g);
            for (var E = f.next(); !E.done; E = f.next()) E = E.value, J.push({
                timestamp: E.timestamp,
                id: E.id,
                type: E.type,
                fromAdaptation: E.fromAdaptation,
                bandwidth: E.bandwidth
            });
            return {
                width: a,
                height: c,
                streamBandwidth: b,
                decodedFrames: d,
                droppedFrames: e,
                corruptedFrames: g,
                stallsDetected: h,
                gapsJumped: k,
                estimatedBandwidth: l,
                completionPercent: m,
                loadLatency: n,
                manifestTimeSeconds: p,
                drmTimeSeconds: q,
                playTime: u,
                pauseTime: w,
                bufferingTime: v,
                licenseTime: A,
                liveLatency: y,
                maxSegmentDuration: D,
                manifestSizeBytes: z,
                bytesDownloaded: B,
                nonFatalErrorCount: C,
                manifestPeriodCount: F,
                manifestGapCount: I,
                stateHistory: L,
                switchHistory: J
            }
        };
        r.Bh = function (a, b, c, d, e, f, g) {
            g = void 0 === g ? !1 : g;
            var h = this, k, l, m, n, p, q, u, w, v, A, y, D;
            return O(function (z) {
                switch (z.g) {
                    case 1:
                        if (h.l != Vo && h.l != hp) throw new T(1, 7, 7004);
                        "subtitles" != c && "captions" != c && $a("Using a kind value different of `subtitles` or `captions` can cause unwanted issues.");
                        if (d) {
                            z.u(2);
                            break
                        }
                        return G(z, up(h, a), 3);
                    case 3:
                        d = z.h;
                    case 2:
                        k = [];
                        h.A && (k = h.A.getCuePoints());
                        if (h.l != hp) {
                            z.u(4);
                            break
                        }
                        g && (c = "forced");
                        return G(z, vp(h, a, b, c, d, f || "", k), 5);
                    case 5:
                        l = Ee(b);
                        m = h.Hc();
                        if (n = m.find(function (B) {
                            return Ee(B.language) ==
                                l && B.label == (f || "") && B.kind == c
                        })) return Mo(h), z.return(n);
                        throw new T(1, 2, 2012);
                    case 4:
                        p = Xd;
                        q = h.h.duration;
                        h.i && (q = h.i.presentationTimeline.getDuration());
                        if (Infinity == q) throw new T(1, 4, 4033);
                        if (!k.length) {
                            z.u(6);
                            break
                        }
                        return G(z, wp(h, a, h.H, h.g.streaming.retryParameters), 7);
                    case 7:
                        u = z.h, w = xp(h, u, d, k), v = new Blob([w], {type: "text/vtt"}), a = Qj(v), d = "text/vtt";
                    case 6:
                        A = {
                            id: h.rg++,
                            originalId: null,
                            groupId: null,
                            createSegmentIndex: function () {
                                return Promise.resolve()
                            },
                            segmentIndex: Tk(0, q, [a]),
                            mimeType: d || "",
                            codecs: e || "",
                            kind: c,
                            encrypted: !1,
                            drmInfos: [],
                            keyIds: new Set,
                            language: b,
                            originalLanguage: b,
                            label: f || null,
                            type: p.ta,
                            primary: !1,
                            trickModeVideo: null,
                            emsgSchemeIdUris: null,
                            roles: [],
                            forced: !!g,
                            channelsCount: null,
                            audioSamplingRate: null,
                            spatialAudio: !1,
                            closedCaptions: null,
                            accessibilityPurpose: null,
                            external: !0,
                            fastSwitching: !1,
                            fullMimeTypes: new Set([$d(d || "", e || "")])
                        };
                        y = $d(A.mimeType, A.codecs);
                        D = se(y);
                        if (!D) throw new T(2, 2, 2014, d);
                        h.i.textStreams.push(A);
                        Mo(h);
                        return z.return(mf(A))
                }
            })
        };
        r.Ch = function (a, b) {
            var c = this, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y;
            return O(function (D) {
                switch (D.g) {
                    case 1:
                        if (c.l != Vo && c.l != hp) throw new T(1, 7, 7004);
                        if (b) {
                            D.u(2);
                            break
                        }
                        return G(D, up(c, a), 3);
                    case 3:
                        b = D.h;
                    case 2:
                        if ("text/vtt" != b) throw new T(1, 2, 2017, a);
                        d = Xd;
                        e = c.h.duration;
                        c.i && (e = c.i.presentationTimeline.getDuration());
                        if (Infinity == e) throw new T(1, 4, 4045);
                        return G(D, wp(c, a, c.H, c.g.streaming.retryParameters), 4);
                    case 4:
                        f = D.h;
                        g = te[b];
                        if (!g) throw new T(2, 2, 2014, b);
                        h = g();
                        k = {
                            periodStart: 0, segmentStart: 0, segmentEnd: e,
                            vttOffset: 0
                        };
                        l = Ab(f);
                        m = h.parseMedia(l, k, a);
                        n = [];
                        p = {};
                        q = t(m);
                        for (u = q.next(); !u.done; p = {
                            hd: p.hd,
                            hc: p.hc
                        }, u = q.next()) p.hc = u.value, p.hd = null, w = function (z) {
                            return function () {
                                null == z.hd && (z.hd = Nd([a], [z.hc.payload]));
                                return z.hd || []
                            }
                        }(p), v = new Ci(p.hc.startTime, p.hc.endTime, w, 0, null, null, 0, 0, Infinity), p.hc.payload.includes("#xywh") && (A = p.hc.payload.split("#xywh=")[1].split(","), 4 === A.length && v.oh({
                            height: parseInt(A[3], 10),
                            positionX: parseInt(A[0], 10),
                            positionY: parseInt(A[1], 10),
                            width: parseInt(A[2], 10)
                        })),
                            n.push(v);
                        y = {
                            id: c.rg++,
                            originalId: null,
                            groupId: null,
                            createSegmentIndex: function () {
                                return Promise.resolve()
                            },
                            segmentIndex: new Rk(n),
                            mimeType: b || "",
                            codecs: "",
                            kind: "",
                            encrypted: !1,
                            drmInfos: [],
                            keyIds: new Set,
                            language: "und",
                            originalLanguage: null,
                            label: null,
                            type: d.Ze,
                            primary: !1,
                            trickModeVideo: null,
                            emsgSchemeIdUris: null,
                            roles: [],
                            forced: !1,
                            channelsCount: null,
                            audioSamplingRate: null,
                            spatialAudio: !1,
                            closedCaptions: null,
                            tilesLayout: "1x1",
                            accessibilityPurpose: null,
                            external: !0,
                            fastSwitching: !1,
                            fullMimeTypes: new Set([$d(b ||
                                "", "")])
                        };
                        c.l == hp ? c.Hd.push(y) : c.i.imageStreams.push(y);
                        Mo(c);
                        return D.return(nf(y))
                }
            })
        };
        r.Ah = function (a, b, c) {
            var d = this, e, f, g, h;
            return O(function (k) {
                switch (k.g) {
                    case 1:
                        if (d.l != Vo && d.l != hp) throw new T(1, 7, 7004);
                        if (c) {
                            k.u(2);
                            break
                        }
                        return G(k, up(d, a), 3);
                    case 3:
                        c = k.h;
                    case 2:
                        return e = [], d.A && (e = d.A.getCuePoints()), G(k, vp(d, a, b, "chapters", c, "", e), 4);
                    case 4:
                        f = k.h;
                        g = d.Kg();
                        h = g.find(function (l) {
                            return l.language == b
                        });
                        if (!h) {
                            k.u(5);
                            break
                        }
                        return G(k, new Promise(function (l, m) {
                            d.m.ha(f, "load", l);
                            d.m.ha(f, "error", function () {
                                m(new T(1, 2, 2015))
                            })
                        }), 6);
                    case 6:
                        return Mo(d), k.return(h);
                    case 5:
                        throw new T(1,
                            2, 2012);
                }
            })
        };

        function up(a, b) {
            var c;
            return O(function (d) {
                switch (d.g) {
                    case 1:
                        return sa(d, 2), G(d, kn(b, a.H, a.g.streaming.retryParameters), 4);
                    case 4:
                        c = d.h;
                        va(d, 3);
                        break;
                    case 2:
                        wa(d);
                    case 3:
                        if (c) return d.return(c);
                        throw new T(1, 2, 2011, b);
                }
            })
        }

        function vp(a, b, c, d, e, f, g) {
            var h, k, l, m;
            return O(function (n) {
                if (1 == n.g) return "text/vtt" != e || g.length ? G(n, wp(a, b, a.H, a.g.streaming.retryParameters), 3) : n.u(2);
                2 != n.g && (h = n.h, k = xp(a, h, e, g), l = new Blob([k], {type: "text/vtt"}), b = Qj(l), e = "text/vtt");
                m = document.createElement("track");
                var p = a.N, q = b;
                try {
                    if (p.g.enabled) {
                        var u = Jn(p);
                        u.ot = Wn;
                        u.su = !0;
                        var w = Nn(u);
                        var v = On(q, w)
                    } else v = q
                } catch (A) {
                    ab("CMCD_TEXT_TRACK_ERROR", "Could not generate text track CMCD data.", A), v = q
                }
                m.src = v;
                m.label = f;
                m.kind = d;
                m.srclang = c;
                a.h.getAttribute("crossorigin") ||
                a.h.setAttribute("crossorigin", "anonymous");
                a.h.appendChild(m);
                return n.return(m)
            })
        }

        function wp(a, b, c, d) {
            var e, f, g;
            return O(function (h) {
                if (1 == h.g) {
                    e = zg;
                    f = tg([b], d);
                    f.method = "GET";
                    var k = a.N;
                    try {
                        k.g.enabled && Pn(k, f, {ot: Wn, su: !0})
                    } catch (l) {
                        ab("CMCD_TEXT_ERROR", "Could not generate text CMCD data.", l)
                    }
                    return G(h, c.request(e, f).promise, 2)
                }
                g = h.h;
                return h.return(g.data)
            })
        }

        function xp(a, b, c, d) {
            var e = te[c];
            if (e) return c = e(), a = {
                periodStart: 0,
                segmentStart: 0,
                segmentEnd: a.h.duration,
                vttOffset: 0
            }, b = Ab(b), b = c.parseMedia(b, a, null), Fn(b, d);
            throw new T(2, 2, 2014, c);
        }

        r.ej = function (a, b) {
            this.fa.width = a;
            this.fa.height = b
        };
        r.Zf = function (a) {
            if (this.l == Vo) {
                var b = this.j;
                a = void 0 === a ? .1 : a;
                if (b.m.g) b = !1; else if (b.A) b = !1; else {
                    for (var c = t(b.i.values()), d = c.next(); !d.done; d = c.next()) d = d.value, !d.yd || d.Qa || d.ub || (d.yd = !1, Ol(b, d, a));
                    b = !0
                }
            } else b = !1;
            return b
        };
        r.Ef = function () {
            $a("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");
            return this.i
        };
        r.Yh = function () {
            return this.bb
        };

        function jo(a) {
            var b = xm();
            b.streaming.failureCallback = function (c) {
                if (a.V()) {
                    var d = null;
                    1001 == c.code || 1002 == c.code ? (d = 1, a.g.streaming.lowLatencyMode && (d = .1)) : 1003 == c.code && (d = .1);
                    null != d && (c.severity = 1, a.Zf(d))
                }
            };
            b.textDisplayFactory = function () {
                if (a.ze) {
                    var c = a.getConfiguration();
                    return new wn(a.h, a.ze, c.textDisplayer)
                }
                return HTMLMediaElement.prototype.addTextTrack ? new rn(a.h, "Shaka Player TextTrack") : new tn
            };
            return b
        }

        r.rh = function (a) {
            this.ze = a
        };

        function Io(a, b) {
            for (var c = new Set, d = t(b.textStreams), e = d.next(); !e.done; e = d.next()) e = e.value, "application/cea-608" != e.mimeType && "application/cea-708" != e.mimeType || c.add(e.originalId);
            d = t(b.variants);
            for (e = d.next(); !e.done; e = d.next()) if ((e = e.value.video) && e.closedCaptions) for (var f = t(e.closedCaptions.keys()), g = f.next(); !g.done; g = f.next()) if (g = g.value, !c.has(g)) {
                var h = g.startsWith("CC") ? "application/cea-608" : "application/cea-708", k = new Uk,
                    l = e.closedCaptions.get(g);
                h = {
                    id: a.rg++,
                    originalId: g,
                    groupId: null,
                    createSegmentIndex: function () {
                        return Promise.resolve()
                    },
                    segmentIndex: k,
                    mimeType: h,
                    codecs: "",
                    kind: "caption",
                    encrypted: !1,
                    drmInfos: [],
                    keyIds: new Set,
                    language: l,
                    originalLanguage: l,
                    label: null,
                    type: Vd,
                    primary: !1,
                    trickModeVideo: null,
                    emsgSchemeIdUris: null,
                    roles: e.roles,
                    forced: !1,
                    channelsCount: null,
                    audioSamplingRate: null,
                    spatialAudio: !1,
                    closedCaptions: null,
                    accessibilityPurpose: null,
                    external: !1,
                    fastSwitching: !1,
                    fullMimeTypes: new Set([$d(h, "")])
                };
                b.textStreams.push(h);
                c.add(g)
            }
        }

        function ap(a, b) {
            var c, d, e, f, g;
            return O(function (h) {
                if (1 == h.g) return c = a.audio, d = a.video, e = function (k, l) {
                    var m, n, p;
                    return O(function (q) {
                        if (1 == q.g) return k ? G(q, k.createSegmentIndex(), 2) : q.return(null);
                        n = (m = k.segmentIndex.Kb(l)) ? m.next().value : null;
                        if (!n) return q.return(null);
                        p = n.startTime;
                        return q.return(p)
                    })
                }, G(h, e(c, b), 2);
                if (3 != h.g) return f = h.h, G(h, e(d, b), 3);
                g = h.h;
                return null != g && null != f ? h.return(Math.max(g, f)) : null != g ? h.return(g) : null != f ? h.return(f) : h.return(b)
            })
        }

        function yo(a) {
            var b = a.Jf();
            if (a.s && a.L && a.C) {
                var c = a.I;
                c.j = b;
                Wk(c);
                a.N && (c = a.N, b || c.i || (c.i = !0), c.i && b && (c.j = !0), c.l = b);
                Qo(a);
                c = a.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
                if (a.g.streaming.liveSync.dynamicTargetLatency.enabled && b && a.Ne < c) {
                    c = a.g.streaming.liveSync.dynamicTargetLatency.maxLatency;
                    var d = a.g.streaming.liveSync.targetLatencyTolerance,
                        e = a.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;
                    a.R && (a.R = Math.min(a.R + ++a.Ne * e, c - d))
                }
            }
            b = (new Map).set("buffering", b);
            a.dispatchEvent(ro("buffering",
                b))
        }

        function Ro(a) {
            var b = a.h.playbackRate;
            0 != b && (a.I && a.I.set(b), b = ro("ratechange"), a.dispatchEvent(b))
        }

        function Qo(a) {
            if (a.s && a.L) {
                var b = a.s.g, c = "playing";
                a.L.g == Xf ? c = "buffering" : a.h.paused ? c = "paused" : a.h.ended && (c = "ended");
                var d = c;
                if (null == b.g) b.g = {timestamp: Date.now() / 1E3, state: d, duration: 0}, b = !0; else {
                    var e = Date.now() / 1E3;
                    b.g.duration = e - b.g.timestamp;
                    b.g.state == d ? b = !1 : (b.h.push(b.g), b.g = {timestamp: e, state: d, duration: 0}, b = !0)
                }
                b && (c = (new Map).set("newstate", c), a.dispatchEvent(ro("statechanged", c)))
            }
        }

        function ep(a) {
            var b = a.h.playbackRate, c = a.V();
            if (a.g.streaming.vodDynamicPlaybackRate && !c) {
                var d = a.g.streaming.vodDynamicPlaybackRateLowBufferRate, e = a.Jg();
                e <= a.g.streaming.vodDynamicPlaybackRateBufferRatio ? b != d && a.Pd(d) : 1 == e && b !== a.I.nc() && a.md()
            }
            if (c && (c = a.Qb(), Number.isFinite(c.end) && !(a.h.currentTime < c.start))) {
                d = a.g.streaming.liveSync.targetLatencyTolerance;
                e = a.g.streaming.liveSync.dynamicTargetLatency.enabled;
                var f = a.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;
                if (a.g.streaming.liveSync &&
                    a.g.streaming.liveSync.enabled) {
                    var g = a.g.streaming.liveSync.targetLatency;
                    var h = g + d;
                    var k = Math.max(0, g - d);
                    var l = a.g.streaming.liveSync.maxPlaybackRate;
                    var m = a.g.streaming.liveSync.minPlaybackRate
                } else a.i && a.i.serviceDescription && (g = a.i.serviceDescription.targetLatency, null != a.i.serviceDescription.targetLatency ? h = a.i.serviceDescription.targetLatency + d : null != a.i.serviceDescription.maxLatency && (h = a.i.serviceDescription.maxLatency), null != a.i.serviceDescription.targetLatency ? k = Math.max(0, a.i.serviceDescription.targetLatency -
                    d) : null != a.i.serviceDescription.minLatency && (k = a.i.serviceDescription.minLatency), l = a.i.serviceDescription.maxPlaybackRate || a.g.streaming.liveSync.maxPlaybackRate, m = a.i.serviceDescription.minPlaybackRate || a.g.streaming.liveSync.minPlaybackRate);
                a.R || "number" !== typeof g || (a.R = g);
                var n = a.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
                e && a.Da && null !== a.R && "number" === typeof g && a.Ne < n && Date.now() - a.Da > 1E3 * f && (f = a.g.streaming.liveSync.dynamicTargetLatency.minLatency, a.R = Math.max(a.R - (g - f) / 2, f + d),
                    a.Da = Date.now());
                e && null !== a.R && (h = a.R + d, k = a.R - d);
                g = c.end - a.h.currentTime;
                d = 0;
                a.l == hp && (e = a.h.buffered, 0 < e.length && (d = e.end(e.length - 1), d = Math.max(l, d - c.end)));
                c = a.g.streaming.liveSync.panicMode;
                e = 1E3 * a.g.streaming.liveSync.panicThreshold;
                f = Date.now() - a.L.h;
                c && !m && (m = a.g.streaming.liveSync.minPlaybackRate);
                c && m && f <= e ? b != m && a.Pd(m) : h && l && g - d > h ? (b != l && a.Pd(l), a.Da = null) : k && m && g - d < k ? (b != m && a.Pd(m), a.Da = null) : b !== a.I.nc() && (a.md(), a.Da = Date.now())
            }
        }

        function fp(a) {
            if (a.h) {
                var b = !1, c = a.h.currentTime / a.h.duration;
                isNaN(c) || (c = Math.round(100 * c), isNaN(a.U) ? (a.U = c, b = !0) : (c = Math.max(a.U, c), a.U != c && (a.U = c, b = !0)));
                if (b) {
                    var d;
                    0 == a.U ? d = ro("started") : 25 == a.U ? d = ro("firstquartile") : 50 == a.U ? d = ro("midpoint") : 75 == a.U ? d = ro("thirdquartile") : 100 == a.U && (d = ro("complete"));
                    d && a.dispatchEvent(d)
                }
            }
        }

        function No(a) {
            try {
                ri(a.xe, a.i)
            } catch (c) {
                return wo(a, c), !1
            }
            var b = uf(a.i.variants);
            b = a.za.create(b);
            a.o.setVariants(Array.from(b.values()));
            return !0
        }

        function Xo(a, b) {
            b = void 0 === b ? !1 : b;
            return No(a) ? a.o.chooseVariant(b) : null
        }

        function oo(a, b, c, d, e) {
            b = void 0 === b ? !0 : b;
            c = void 0 === c ? 0 : c;
            d = void 0 === d ? !1 : d;
            e = void 0 === e ? !0 : e;
            var f = Xo(a);
            f && To(a, f, e, b, c, d)
        }

        function To(a, b, c, d, e, f) {
            f = void 0 === f ? !1 : f;
            var g = a.j.j;
            if (b == g) d && Sl(a.j, b, d, e, !0); else {
                var h = a.s.h;
                h.h != b && (h.h = b, h.g.push({
                    timestamp: Date.now() / 1E3,
                    id: b.id,
                    type: "variant",
                    fromAdaptation: c,
                    bandwidth: b.bandwidth
                }));
                Sl(a.j, b, d, e, f, c);
                d = null;
                g && (d = lf(g));
                b = lf(b);
                c ? (c = (new Map).set("oldTrack", d).set("newTrack", b), a.K && Gj(a.K, b, a.Ff()), c = ro("adaptation", c), yp(a, c)) : zp(a, d, b)
            }
        }

        function qp(a, b) {
            var c = Array.from(a.h.audioTracks).find(function (d) {
                return d.enabled
            });
            b.enabled = !0;
            c && (b.id !== c.id && (c.enabled = !1), c = sf(c), b = sf(b), zp(a, c, b))
        }

        function bp(a, b, c) {
            if (0 == a.g.autoShowText) return !1;
            if (1 == a.g.autoShowText) return !0;
            var d = Ee(a.g.preferredTextLanguage);
            c = Ee(c.language);
            if (2 == a.g.autoShowText) return De(c, d);
            if (3 == a.g.autoShowText) {
                if (!b) return !1;
                a = Ee(b.language);
                return De(c, d) && !De(a, c)
            }
            $a("Invalid autoShowText setting!");
            return !1
        }

        function Mo(a) {
            var b = ro("trackschanged");
            yp(a, b)
        }

        function zp(a, b, c) {
            b = (new Map).set("oldTrack", b).set("newTrack", c);
            a.K && Gj(a.K, c, a.Ff());
            c = ro("variantchanged", b);
            yp(a, c)
        }

        function pp(a) {
            var b = ro("textchanged");
            yp(a, b)
        }

        function cp(a) {
            var b = ro("texttrackvisibility");
            yp(a, b)
        }

        function dp(a) {
            a.g.abr.enabled || no(a);
            var b = (new Map).set("newStatus", a.g.abr.enabled);
            yp(a, ro("abrstatuschanged", b))
        }

        function no(a, b) {
            b = void 0 === b ? !0 : b;
            if (a.l == Vo) {
                a.Ee.stop();
                for (var c = t(a.i.variants), d = c.next(); !d.done; d = c.next()) d.value.disabledUntilTime = 0;
                b && No(a)
            }
        }

        r.disableStream = function (a, b) {
            if (!this.g.abr.enabled || this.l === so || !navigator.onLine || 0 == b) return !1;
            if (this.i.variants.some(function (f) {
                var g = f[a.type];
                return g && g.id !== a.id && !f.disabledUntilTime ? "audio" == a.type ? a.language === g.language : !0 : !1
            })) {
                for (var c = t(this.i.variants), d = c.next(); !d.done; d = c.next()) {
                    d = d.value;
                    var e = d[a.type];
                    e && e.id === a.id && (d.disabledUntilTime = Date.now() / 1E3 + b)
                }
                this.Ee.Sa(1);
                b = this.yb().video.reduce(function (f, g) {
                    return f + g.end - g.start
                }, 0);
                oo(this, !1, b, !0, !1);
                return !0
            }
            return !1
        };

        function wo(a, b) {
            var c, d, e;
            return O(function (f) {
                switch (f.g) {
                    case 1:
                        if (a.l == so) return f.return();
                        1 === b.severity && a.s.K++;
                        c = !0;
                        if (!(a.Ea && a.i && a.j) || 3016 != b.code && 3014 != b.code && 3015 != b.code && 3018 != b.code) {
                            f.u(2);
                            break
                        }
                        sa(f, 3);
                        return G(f, lm(a.j), 5);
                    case 5:
                        d = f.h;
                        c = !d;
                        va(f, 2);
                        break;
                    case 3:
                        wa(f), c = !0;
                    case 2:
                        if (!c) return f.return();
                        2 === b.severity && no(a, !1);
                        e = ro("error", (new Map).set("detail", b));
                        a.dispatchEvent(e);
                        e.defaultPrevented && (b.handled = !0);
                        H(f)
                }
            })
        }

        function Ko(a, b, c, d) {
            d = void 0 === d ? a : d;
            a = (new Map).set("detail", {
                schemeIdUri: c.schemeIdUri,
                value: c.value,
                startTime: c.startTime,
                endTime: c.endTime,
                id: c.id,
                eventElement: c.eventElement,
                eventNode: c.eventNode
            });
            d.dispatchEvent(ro(b, a))
        }

        function Lo(a, b, c, d) {
            d = void 0 === d ? !1 : d;
            b = (new Map).set("mediaQuality", {
                bandwidth: b.bandwidth,
                audioSamplingRate: b.audioSamplingRate,
                codecs: b.codecs,
                contentType: b.contentType,
                frameRate: b.frameRate,
                height: b.height,
                mimeType: b.mimeType,
                channelsCount: b.channelsCount,
                pixelAspectRatio: b.pixelAspectRatio,
                width: b.width,
                label: b.label,
                roles: b.roles,
                language: b.language
            }).set("position", c);
            a.dispatchEvent(ro(d ? "audiotrackchanged" : "mediaqualitychanged", b))
        }

        function vo(a) {
            if (!a.h.error) return null;
            var b = a.h.error.code;
            if (1 == b) return null;
            var c = a.h.error.msExtendedCode;
            c && (0 > c && (c += Math.pow(2, 32)), c = c.toString(16));
            return new T(2, 3, 3016, b, c, a.h.error.message)
        }

        function So(a, b, c) {
            0 < b && (a.V() || a.qh(b));
            b = a.getDuration();
            c < b && (a.V() || a.$a(c))
        }

        function yp(a, b) {
            O(function (c) {
                if (1 == c.g) return G(c, Promise.resolve(), 2);
                a.l != so && a.dispatchEvent(b);
                H(c)
            })
        }

        function sp(a) {
            var b = new Set;
            a = t(a);
            for (var c = a.next(); !c.done; c = a.next()) c = c.value, c.language ? b.add(Ee(c.language)) : b.add("und");
            return b
        }

        function rp(a) {
            var b = new Map, c = new Map;
            a = t(a);
            for (var d = a.next(); !d.done; d = a.next()) {
                d = d.value;
                var e = "und", f = [];
                d.language && (e = Ee(d.language));
                "variant" == d.type ? f = d.audioRoles : f = d.roles;
                f && f.length || (f = [""]);
                b.has(e) || b.set(e, new Set);
                f = t(f);
                for (var g = f.next(); !g.done; g = f.next()) g = g.value, b.get(e).add(g), d.label && (c.has(e) || c.set(e, new Map), c.get(e).set(g, d.label))
            }
            var h = [];
            b.forEach(function (k, l) {
                k = t(k);
                for (var m = k.next(); !m.done; m = k.next()) {
                    m = m.value;
                    var n = null;
                    c.has(l) && c.get(l).has(m) && (n = c.get(l).get(m));
                    h.push({language: l, role: m, label: n})
                }
            });
            return h
        }

        S("shaka.Player", X);
        X.prototype.setVideoContainer = X.prototype.rh;
        X.prototype.getManifestParserFactory = X.prototype.Yh;
        X.prototype.getManifest = X.prototype.Ef;
        X.prototype.retryStreaming = X.prototype.Zf;
        X.prototype.setMaxHardwareResolution = X.prototype.ej;
        X.prototype.addChaptersTrack = X.prototype.Ah;
        X.prototype.addThumbnailsTrack = X.prototype.Ch;
        X.prototype.addTextTrackAsync = X.prototype.Bh;
        X.prototype.getStats = X.prototype.getStats;
        X.prototype.getBufferedInfo = X.prototype.yb;
        X.prototype.getSegmentAvailabilityDuration = X.prototype.je;
        X.prototype.getPresentationStartTimeAsDate = X.prototype.Pg;
        X.prototype.getPlayheadTimeAsDate = X.prototype.ci;
        X.prototype.setTextTrackVisibility = X.prototype.nh;
        X.prototype.getChapters = X.prototype.Rh;
        X.prototype.getChaptersTracks = X.prototype.Kg;
        X.prototype.isTextTrackVisible = X.prototype.Kf;
        X.prototype.selectVariantsByLabel = X.prototype.$i;
        X.prototype.selectTextLanguage = X.prototype.bg;
        X.prototype.selectAudioLanguage = X.prototype.gh;
        X.prototype.getTextLanguages = X.prototype.gi;
        X.prototype.getAudioLanguages = X.prototype.Oh;
        X.prototype.getTextLanguagesAndRoles = X.prototype.hi;
        X.prototype.getAudioLanguagesAndRoles = X.prototype.Ph;
        X.prototype.selectVariantTrack = X.prototype.cg;
        X.prototype.selectTextTrack = X.prototype.hh;
        X.prototype.getThumbnails = X.prototype.Qg;
        X.prototype.getAllThumbnails = X.prototype.Nh;
        X.prototype.getImageTracks = X.prototype.Vh;
        X.prototype.getTextTracks = X.prototype.Hc;
        X.prototype.getVariantTracks = X.prototype.oc;
        X.prototype.cancelTrickPlay = X.prototype.md;
        X.prototype.trickPlay = X.prototype.Pd;
        X.prototype.getPlaybackRate = X.prototype.fb;
        X.prototype.isBuffering = X.prototype.Jf;
        X.prototype.getKeyStatuses = X.prototype.ge;
        X.prototype.getActiveSessionsMetadata = X.prototype.Df;
        X.prototype.getExpiration = X.prototype.td;
        X.prototype.drmInfo = X.prototype.drmInfo;
        X.prototype.keySystem = X.prototype.keySystem;
        X.prototype.isFullyLoaded = X.prototype.ti;
        X.prototype.goToLive = X.prototype.oi;
        X.prototype.seekRange = X.prototype.Qb;
        X.prototype.isAudioOnly = X.prototype.si;
        X.prototype.isInProgress = X.prototype.qc;
        X.prototype.isLive = X.prototype.V;
        X.prototype.getAdManager = X.prototype.Ig;
        X.prototype.getAssetUri = X.prototype.Gc;
        X.prototype.getNetworkingEngine = X.prototype.zb;
        X.prototype.getMediaElement = X.prototype.ai;
        X.prototype.getManifestType = X.prototype.Ff;
        X.prototype.getLoadMode = X.prototype.Mg;
        X.prototype.resetConfiguration = X.prototype.Ui;
        X.prototype.getBufferFullness = X.prototype.Jg;
        X.prototype.getNonDefaultConfiguration = X.prototype.Og;
        X.prototype.getConfiguration = X.prototype.getConfiguration;
        X.prototype.configure = X.prototype.configure;
        X.prototype.releaseAllMutexes = X.prototype.Qi;
        X.prototype.destroyAllPreloads = X.prototype.lf;
        X.prototype.preload = X.prototype.preload;
        X.prototype.detachAndSavePreload = X.prototype.Eg;
        X.prototype.unloadAndSavePreload = X.prototype.hj;
        X.prototype.load = X.prototype.load;
        X.prototype.updateStartTime = X.prototype.lj;
        X.prototype.unload = X.prototype.dc;
        X.prototype.detach = X.prototype.detach;
        X.prototype.attachCanvas = X.prototype.Gh;
        X.prototype.attach = X.prototype.Ub;
        X.probeSupport = function (a) {
            a = void 0 === a ? !0 : a;
            var b, c, d, e, f, g, h;
            return O(function (k) {
                switch (k.g) {
                    case 1:
                        b = {};
                        if (!a) {
                            k.u(2);
                            break
                        }
                        return G(k, ki(), 3);
                    case 3:
                        b = k.h;
                    case 2:
                        var l = {};
                        if (Uc()) for (var m in vi) l[m] = !0;
                        m = t(["application/dash+xml", "application/x-mpegurl", "application/vnd.apple.mpegurl", "application/vnd.ms-sstr+xml"]);
                        for (var n = m.next(); !n.done; n = m.next()) n = n.value, l[n] = Uc() ? !!vi[n] : Vc(n);
                        c = l;
                        m = 'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(x(ae));
                        l = {};
                        m = t(m);
                        for (n = m.next(); !n.done; n = m.next()) {
                            n = n.value;
                            l[n] = se(n) ? !0 : Uc() ? nb(n) || (oc(n) ? !0 : !1) : Vc(n);
                            var p = n.split(";")[0];
                            l[p] = l[p] || l[n]
                        }
                        d = l;
                        return G(k, td(), 4);
                    case 4:
                        e = k.h;
                        f = {manifest: c, media: d, drm: b, hardwareResolution: e};
                        g = Ap;
                        for (h in g) f[h] = g[h]();
                        return k.return(f)
                }
            })
        };
        X.isBrowserSupported = function () {
            window.Promise || $a("A Promise implementation or polyfill is required");
            if (!(window.Promise && window.Uint8Array && Array.prototype.forEach) || $c("Trident/")) return !1;
            var a = md();
            return a && 9 > a || !(window.MediaKeys && window.navigator && window.navigator.requestMediaKeySystemAccess && window.MediaKeySystemAccess && window.MediaKeySystemAccess.prototype.getConfiguration) ? !1 : Uc() ? !0 : Vc("application/x-mpegurl")
        };
        X.setAdManagerFactory = function (a) {
            mo = a
        };
        X.registerSupportPlugin = function (a, b) {
            Ap[a] = b
        };
        X.prototype.destroy = X.prototype.destroy;
        var so = 0, io = 1, Vo = 2, hp = 3;
        X.LoadMode = {DESTROYED: so, NOT_LOADED: io, MEDIA_SOURCE: Vo, SRC_EQUALS: hp};
        X.version = "v4.10.9";
        var Bp = ["4", "10"];
        sb = new function (a) {
            this.g = a;
            this.i = tb;
            this.h = ub
        }(new qb(Number(Bp[0]), Number(Bp[1])));
        var Ap = {}, mo = null;

        function Cp() {
            this.g = [];
            this.i = this.l = this.j = this.h = 0
        }

        function Dp(a) {
            return a.g.length ? a.g.reduce(function (b, c) {
                return b + c
            }, 0) / a.g.length : 0
        };

        function Ep(a, b, c) {
            var d = this;
            this.g = a;
            this.h = b;
            this.j = c;
            this.i = !1;
            this.l = this.h.getVolume();
            this.m = new gb;
            this.m.D(this.h, google.ima.AdEvent.Type.PAUSED, function () {
                d.i = !0
            });
            this.m.D(this.h, google.ima.AdEvent.Type.RESUMED, function () {
                d.i = !1
            })
        }

        r = Ep.prototype;
        r.needsSkipUI = function () {
            return !1
        };
        r.getDuration = function () {
            return this.g.getDuration()
        };
        r.getMinSuggestedDuration = function () {
            return this.g.getMinSuggestedDuration()
        };
        r.getRemainingTime = function () {
            return this.h.getRemainingTime()
        };
        r.isPaused = function () {
            return this.i
        };
        r.isSkippable = function () {
            return 0 <= this.g.getSkipTimeOffset()
        };
        r.getTimeUntilSkippable = function () {
            var a = this.g.getSkipTimeOffset();
            a = this.getRemainingTime() - a;
            return Math.max(a, 0)
        };
        r.canSkipNow = function () {
            return this.h.getAdSkippableState()
        };
        r.skip = function () {
            return this.h.skip()
        };
        r.pause = function () {
            return this.h.pause()
        };
        r.play = function () {
            return this.h.resume()
        };
        r.getVolume = function () {
            return this.h.getVolume()
        };
        r.setVolume = function (a) {
            this.j.volume = a;
            return this.h.setVolume(a)
        };
        r.isMuted = function () {
            return 0 == this.h.getVolume()
        };
        r.isLinear = function () {
            return this.g.isLinear()
        };
        r.resize = function (a, b) {
            var c = !1, d = this.j;
            document.fullscreenEnabled ? c = !!document.fullscreenElement : d.webkitSupportsFullscreen && (c = d.webkitDisplayingFullscreen);
            this.h.resize(a, b, c ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL)
        };
        r.setMuted = function (a) {
            (this.j.muted = a) ? (this.l = this.getVolume(), this.h.setVolume(0)) : this.h.setVolume(this.l)
        };
        r.getSequenceLength = function () {
            var a = this.g.getAdPodInfo();
            return null == a ? 1 : a.getTotalAds()
        };
        r.getPositionInSequence = function () {
            var a = this.g.getAdPodInfo();
            return null == a ? 1 : a.getAdPosition()
        };
        r.getTitle = function () {
            return this.g.getTitle()
        };
        r.getDescription = function () {
            return this.g.getDescription()
        };
        r.getVastMediaBitrate = function () {
            return this.g.getVastMediaBitrate()
        };
        r.getVastMediaHeight = function () {
            return this.g.getVastMediaHeight()
        };
        r.getVastMediaWidth = function () {
            return this.g.getVastMediaWidth()
        };
        r.getAdId = function () {
            return this.g.getAdId()
        };
        r.getCreativeAdId = function () {
            return this.g.getCreativeAdId()
        };
        r.getAdvertiserName = function () {
            return this.g.getAdvertiserName()
        };
        r.getMediaUrl = function () {
            return this.g.getMediaUrl()
        };
        r.getTimeOffset = function () {
            var a = this.g.getAdPodInfo();
            return null == a ? 0 : a.getTimeOffset()
        };
        r.getPodIndex = function () {
            var a = this.g.getAdPodInfo();
            return null == a ? 0 : a.getPodIndex()
        };
        r.release = function () {
            this.h = this.g = null
        };
        S("shaka.ads.ClientSideAd", Ep);
        Ep.prototype.release = Ep.prototype.release;
        Ep.prototype.getPodIndex = Ep.prototype.getPodIndex;
        Ep.prototype.getTimeOffset = Ep.prototype.getTimeOffset;
        Ep.prototype.getMediaUrl = Ep.prototype.getMediaUrl;
        Ep.prototype.getAdvertiserName = Ep.prototype.getAdvertiserName;
        Ep.prototype.getCreativeAdId = Ep.prototype.getCreativeAdId;
        Ep.prototype.getAdId = Ep.prototype.getAdId;
        Ep.prototype.getVastMediaWidth = Ep.prototype.getVastMediaWidth;
        Ep.prototype.getVastMediaHeight = Ep.prototype.getVastMediaHeight;
        Ep.prototype.getVastMediaBitrate = Ep.prototype.getVastMediaBitrate;
        Ep.prototype.getDescription = Ep.prototype.getDescription;
        Ep.prototype.getTitle = Ep.prototype.getTitle;
        Ep.prototype.getPositionInSequence = Ep.prototype.getPositionInSequence;
        Ep.prototype.getSequenceLength = Ep.prototype.getSequenceLength;
        Ep.prototype.setMuted = Ep.prototype.setMuted;
        Ep.prototype.resize = Ep.prototype.resize;
        Ep.prototype.isLinear = Ep.prototype.isLinear;
        Ep.prototype.isMuted = Ep.prototype.isMuted;
        Ep.prototype.setVolume = Ep.prototype.setVolume;
        Ep.prototype.getVolume = Ep.prototype.getVolume;
        Ep.prototype.play = Ep.prototype.play;
        Ep.prototype.pause = Ep.prototype.pause;
        Ep.prototype.skip = Ep.prototype.skip;
        Ep.prototype.canSkipNow = Ep.prototype.canSkipNow;
        Ep.prototype.getTimeUntilSkippable = Ep.prototype.getTimeUntilSkippable;
        Ep.prototype.isSkippable = Ep.prototype.isSkippable;
        Ep.prototype.isPaused = Ep.prototype.isPaused;
        Ep.prototype.getRemainingTime = Ep.prototype.getRemainingTime;
        Ep.prototype.getMinSuggestedDuration = Ep.prototype.getMinSuggestedDuration;
        Ep.prototype.getDuration = Ep.prototype.getDuration;
        Ep.prototype.needsSkipUI = Ep.prototype.needsSkipUI;

        function Fp() {
        }

        S("shaka.ads.Utils", Fp);
        Fp.ADS_LOADED = "ads-loaded";
        Fp.AD_STARTED = "ad-started";
        Fp.AD_FIRST_QUARTILE = "ad-first-quartile";
        Fp.AD_MIDPOINT = "ad-midpoint";
        Fp.AD_THIRD_QUARTILE = "ad-third-quartile";
        Fp.AD_COMPLETE = "ad-complete";
        Fp.AD_STOPPED = "ad-stopped";
        Fp.AD_SKIPPED = "ad-skipped";
        Fp.AD_VOLUME_CHANGED = "ad-volume-changed";
        Fp.AD_MUTED = "ad-muted";
        Fp.AD_PAUSED = "ad-paused";
        Fp.AD_RESUMED = "ad-resumed";
        Fp.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed";
        Fp.CUEPOINTS_CHANGED = "ad-cue-points-changed";
        Fp.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded";
        Fp.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded";
        Fp.AD_CLICKED = "ad-clicked";
        Fp.AD_PROGRESS = "ad-progress";
        Fp.AD_BUFFERING = "ad-buffering";
        Fp.AD_IMPRESSION = "ad-impression";
        Fp.AD_DURATION_CHANGED = "ad-duration-changed";
        Fp.AD_CLOSED = "ad-closed";
        Fp.AD_LOADED = "ad-loaded";
        Fp.ALL_ADS_COMPLETED = "all-ads-completed";
        Fp.AD_LINEAR_CHANGED = "ad-linear-changed";
        Fp.AD_METADATA = "ad-metadata";
        Fp.AD_RECOVERABLE_ERROR = "ad-recoverable-error";
        Fp.AD_ERROR = "ad-error";
        Fp.AD_BREAK_READY = "ad-break-ready";
        Fp.AD_INTERACTION = "ad-interaction";
        Fp.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested";
        Fp.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested";
        Fp.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested";

        function Gp(a, b, c, d, e) {
            var f = this;
            this.s = a;
            this.i = b;
            this.F = !1;
            this.A = this.o = null;
            this.G = NaN;
            this.l = e;
            this.j = null;
            this.h = new gb;
            google.ima.settings.setLocale(c);
            google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0);
            this.C = new google.ima.AdDisplayContainer(this.s, this.i);
            this.C.initialize();
            this.m = new google.ima.AdsLoader(this.C);
            this.m.getSettings().setPlayerType("shaka-player");
            this.m.getSettings().setPlayerVersion("v4.10.9");
            this.g = null;
            this.B = d || new google.ima.AdsRenderingSettings;
            this.h.D(this.m,
                google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, function (g) {
                    Hp(f, g)
                });
            this.h.D(this.m, google.ima.AdErrorEvent.Type.AD_ERROR, function (g) {
                Ip(f, g)
            });
            this.h.D(this.i, "ended", function () {
                f.m.contentComplete()
            });
            this.h.ha(this.i, "play", function () {
                f.F = !0
            })
        }

        Gp.prototype.configure = function (a) {
            this.o = a
        };
        Gp.prototype.stop = function () {
            this.g && this.g.stop();
            this.s && vn(this.s)
        };
        Gp.prototype.release = function () {
            this.stop();
            this.A && this.A.disconnect();
            this.h && this.h.release();
            this.g && this.g.destroy();
            this.m.destroy();
            this.C.destroy()
        };

        function Ip(a, b) {
            b.getError();
            b = (new Map).set("originalEvent", b);
            a.l(new U("ad-error", b));
            Jp(a, null);
            a.l(new U("ad-cue-points-changed", (new Map).set("cuepoints", [])))
        }

        function Hp(a, b) {
            a.l(new U("ads-loaded", (new Map).set("loadTime", Date.now() / 1E3 - a.G)));
            if (a.o.customPlayheadTracker) {
                var c = {currentTime: a.i.currentTime};
                a.g = b.getAdsManager(c, a.B);
                a.i.muted ? a.g.setVolume(0) : a.g.setVolume(a.i.volume);
                a.h.D(a.i, "timeupdate", function () {
                    a.i.duration && (c.currentTime = a.i.currentTime)
                });
                a.h.D(a.i, "volumechange", function () {
                    a.j && (a.j.setVolume(a.i.volume), a.i.muted && a.j.setMuted(!0))
                })
            } else a.g = b.getAdsManager(a.i, a.B);
            a.l(new U("ima-ad-manager-loaded", (new Map).set("imaAdManager",
                a.g)));
            var d = a.g.getCuePoints();
            if (d.length) {
                b = [];
                d = t(d);
                for (var e = d.next(); !e.done; e = d.next()) b.push({start: e.value, end: null});
                a.l(new U("ad-cue-points-changed", (new Map).set("cuepoints", b)))
            }
            Kp(a);
            try {
                a.g.init(a.i.offsetWidth, a.i.offsetHeight, Lp(a) ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL), a.h.D(a.i, "loadeddata", function () {
                    a.g.resize(a.i.offsetWidth, a.i.offsetHeight, Lp(a) ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL)
                }), "ResizeObserver" in window ? (a.A = new ResizeObserver(function () {
                    a.g.resize(a.i.offsetWidth,
                        a.i.offsetHeight, Lp(a) ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL)
                }), a.A.observe(a.i)) : a.h.D(document, "fullscreenchange", function () {
                    a.g.resize(a.i.offsetWidth, a.i.offsetHeight, Lp(a) ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL)
                }), a.F || a.o.skipPlayDetection ? a.g.start() : a.h.ha(a.i, "play", function () {
                    a.F = !0;
                    a.g.start()
                })
            } catch (f) {
                Jp(a, null)
            }
        }

        function Lp(a) {
            if (document.fullscreenEnabled) return !!document.fullscreenElement;
            a = a.i;
            return a.webkitSupportsFullscreen ? a.webkitDisplayingFullscreen : !1
        }

        function Kp(a) {
            function b(c, d) {
                c = (new Map).set("originalEvent", c);
                a.l(new U(d, c))
            }

            a.h.D(a.g, google.ima.AdErrorEvent.Type.AD_ERROR, function (c) {
                Ip(a, c)
            });
            a.h.D(a.g, google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, function (c) {
                Mp(a, c)
            });
            a.h.D(a.g, google.ima.AdEvent.Type.STARTED, function (c) {
                Mp(a, c)
            });
            a.h.D(a.g, google.ima.AdEvent.Type.FIRST_QUARTILE, function (c) {
                b(c, "ad-first-quartile")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.MIDPOINT, function (c) {
                b(c, "ad-midpoint")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.THIRD_QUARTILE,
                function (c) {
                    b(c, "ad-third-quartile")
                });
            a.h.D(a.g, google.ima.AdEvent.Type.COMPLETE, function (c) {
                b(c, "ad-complete")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, function (c) {
                Jp(a, c)
            });
            a.h.D(a.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function (c) {
                Jp(a, c)
            });
            a.h.D(a.g, google.ima.AdEvent.Type.SKIPPED, function (c) {
                b(c, "ad-skipped")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.VOLUME_CHANGED, function (c) {
                b(c, "ad-volume-changed")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.VOLUME_MUTED, function (c) {
                b(c, "ad-muted")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.PAUSED, function (c) {
                a.j && (a.j.i = !0, b(c, "ad-paused"))
            });
            a.h.D(a.g, google.ima.AdEvent.Type.RESUMED, function (c) {
                a.j && (a.j.i = !1, b(c, "ad-resumed"))
            });
            a.h.D(a.g, google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED, function (c) {
                a.j && b(c, "ad-skip-state-changed")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.CLICK, function (c) {
                b(c, "ad-clicked")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.AD_PROGRESS, function (c) {
                b(c, "ad-progress")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.AD_BUFFERING, function (c) {
                b(c, "ad-buffering")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.IMPRESSION, function (c) {
                b(c, "ad-impression")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.DURATION_CHANGE, function (c) {
                b(c, "ad-duration-changed")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.USER_CLOSE, function (c) {
                b(c, "ad-closed")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.LOADED, function (c) {
                b(c, "ad-loaded")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function (c) {
                b(c, "all-ads-completed")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.LINEAR_CHANGED, function (c) {
                b(c, "ad-linear-changed")
            });
            a.h.D(a.g,
                google.ima.AdEvent.Type.AD_METADATA, function (c) {
                    b(c, "ad-metadata")
                });
            a.h.D(a.g, google.ima.AdEvent.Type.LOG, function (c) {
                b(c, "ad-recoverable-error")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.AD_BREAK_READY, function (c) {
                b(c, "ad-break-ready")
            });
            a.h.D(a.g, google.ima.AdEvent.Type.INTERACTION, function (c) {
                b(c, "ad-interaction")
            })
        }

        function Mp(a, b) {
            var c = b.getAd();
            c ? (a.j = new Ep(c, a.g, a.i), b.type != google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED || a.o.supportsMultipleMediaElements || a.l(new U("ad-content-pause-requested")), b = (new Map).set("ad", a.j).set("sdkAdObject", c).set("originalEvent", b), a.l(new U("ad-started", b)), a.j.isLinear() && (a.s.setAttribute("ad-active", "true"), a.o.customPlayheadTracker || a.i.pause(), a.i.muted ? (b = a.j, b.l = a.i.volume, b.h.setVolume(0)) : a.j.setVolume(a.i.volume))) : $a("The IMA SDK fired a " + b.type + " event with no associated ad. Unable to play ad!")
        }

        function Jp(a, b) {
            b && b.type == google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED && !a.o.supportsMultipleMediaElements && a.l(new U("ad-content-resume-requested"));
            a.l(new U("ad-stopped", (new Map).set("originalEvent", b)));
            a.j && a.j.isLinear() && (a.s.removeAttribute("ad-active"), a.o.customPlayheadTracker || a.i.ended || a.i.play())
        };

        function Np(a, b, c, d, e) {
            this.g = a;
            this.h = b;
            this.j = c;
            this.l = d;
            this.i = e
        }

        r = Np.prototype;
        r.needsSkipUI = function () {
            return !0
        };
        r.getDuration = function () {
            var a = this.g.duration;
            return isNaN(a) ? -1 : a
        };
        r.getMinSuggestedDuration = function () {
            return this.getDuration()
        };
        r.getRemainingTime = function () {
            var a = this.g.duration;
            return isNaN(a) ? -1 : a - this.g.currentTime
        };
        r.isPaused = function () {
            return this.g.paused
        };
        r.isSkippable = function () {
            return this.h
        };
        r.getTimeUntilSkippable = function () {
            return this.h ? 0 : Math.max(this.getRemainingTime(), 0)
        };
        r.canSkipNow = function () {
            return 0 == this.getTimeUntilSkippable()
        };
        r.skip = function () {
            this.j()
        };
        r.pause = function () {
            return this.g.pause()
        };
        r.play = function () {
            return this.g.play()
        };
        r.getVolume = function () {
            return this.g.volume
        };
        r.setVolume = function (a) {
            this.g.volume = a
        };
        r.isMuted = function () {
            return this.g.muted
        };
        r.isLinear = function () {
            return !0
        };
        r.resize = function () {
        };
        r.setMuted = function (a) {
            this.g.muted = a
        };
        r.getSequenceLength = function () {
            return this.l
        };
        r.getPositionInSequence = function () {
            return this.i
        };
        r.getTitle = function () {
            return ""
        };
        r.getDescription = function () {
            return ""
        };
        r.getVastMediaBitrate = function () {
            return 0
        };
        r.getVastMediaHeight = function () {
            return 0
        };
        r.getVastMediaWidth = function () {
            return 0
        };
        r.getAdId = function () {
            return ""
        };
        r.getCreativeAdId = function () {
            return ""
        };
        r.getAdvertiserName = function () {
            return ""
        };
        r.getMediaUrl = function () {
            return null
        };
        r.getTimeOffset = function () {
            return 0
        };
        r.getPodIndex = function () {
            return 0
        };
        r.release = function () {
            this.g = null
        };
        S("shaka.ads.InterstitialAd", Np);
        Np.prototype.release = Np.prototype.release;
        Np.prototype.getPodIndex = Np.prototype.getPodIndex;
        Np.prototype.getTimeOffset = Np.prototype.getTimeOffset;
        Np.prototype.getMediaUrl = Np.prototype.getMediaUrl;
        Np.prototype.getAdvertiserName = Np.prototype.getAdvertiserName;
        Np.prototype.getCreativeAdId = Np.prototype.getCreativeAdId;
        Np.prototype.getAdId = Np.prototype.getAdId;
        Np.prototype.getVastMediaWidth = Np.prototype.getVastMediaWidth;
        Np.prototype.getVastMediaHeight = Np.prototype.getVastMediaHeight;
        Np.prototype.getVastMediaBitrate = Np.prototype.getVastMediaBitrate;
        Np.prototype.getDescription = Np.prototype.getDescription;
        Np.prototype.getTitle = Np.prototype.getTitle;
        Np.prototype.getPositionInSequence = Np.prototype.getPositionInSequence;
        Np.prototype.getSequenceLength = Np.prototype.getSequenceLength;
        Np.prototype.setMuted = Np.prototype.setMuted;
        Np.prototype.resize = Np.prototype.resize;
        Np.prototype.isLinear = Np.prototype.isLinear;
        Np.prototype.isMuted = Np.prototype.isMuted;
        Np.prototype.setVolume = Np.prototype.setVolume;
        Np.prototype.getVolume = Np.prototype.getVolume;
        Np.prototype.play = Np.prototype.play;
        Np.prototype.pause = Np.prototype.pause;
        Np.prototype.skip = Np.prototype.skip;
        Np.prototype.canSkipNow = Np.prototype.canSkipNow;
        Np.prototype.getTimeUntilSkippable = Np.prototype.getTimeUntilSkippable;
        Np.prototype.isSkippable = Np.prototype.isSkippable;
        Np.prototype.isPaused = Np.prototype.isPaused;
        Np.prototype.getRemainingTime = Np.prototype.getRemainingTime;
        Np.prototype.getMinSuggestedDuration = Np.prototype.getMinSuggestedDuration;
        Np.prototype.getDuration = Np.prototype.getDuration;
        Np.prototype.needsSkipUI = Np.prototype.needsSkipUI;

        function Op(a, b, c, d) {
            var e = this;
            this.F = a;
            this.B = b;
            this.i = c;
            this.C = null;
            this.m = !0;
            this.s = this.i;
            this.g = d;
            this.G = new Set;
            this.A = new Set;
            this.o = new Map;
            this.h = new X;
            Pp(this);
            this.I = new gb;
            this.j = new gb;
            this.H = !1;
            this.l = null;
            this.I.D(this.i, "timeupdate", function () {
                if (!e.H) {
                    var f = null == e.l || 0 == e.l;
                    e.l = e.i.currentTime;
                    (f = Qp(e, f)) && Rp(e, f, 1, 1, Date.now())
                }
            });
            (new Tc(function () {
                var f, g, h, k, l, m, n, p, q, u;
                return O(function (w) {
                    switch (w.g) {
                        case 1:
                            if (!e.A.size || e.H || null == e.l) {
                                w.u(0);
                                break
                            }
                            f = !1;
                            g = Array.from(e.A);
                            h = e.B.Qb();
                            k = t(g);
                            l = k.next();
                        case 3:
                            if (l.done) {
                                w.u(5);
                                break
                            }
                            m = l.value;
                            n = m.endTime || m.startTime;
                            if (!(1 <= h.start - n)) {
                                p = m.startTime - e.l;
                                0 < p && 10 >= p && (e.o.has(m) || e.o.set(m, e.h.preload(m.uri)));
                                w.u(4);
                                break
                            }
                            if (!e.o.has(m)) {
                                w.u(7);
                                break
                            }
                            return G(w, e.o.get(m), 8);
                        case 8:
                            (q = w.h) && q.destroy(), e.o.delete(m);
                        case 7:
                            u = JSON.stringify(m), e.G.has(u) && e.G.delete(u), e.A.delete(m), f = !0;
                        case 4:
                            l = k.next();
                            w.u(3);
                            break;
                        case 5:
                            f && Sp(e), H(w)
                    }
                })
            })).Sa(1)
        }

        Op.prototype.configure = function (a) {
            this.F && this.m == a.supportsMultipleMediaElements && ((this.m = !a.supportsMultipleMediaElements) ? (this.s = this.i, this.C && (this.C.parentElement && this.F.removeChild(this.C), this.C = null)) : (this.C || (a = document.createElement(this.i.tagName), a.autoplay = !0, a.style.position = "absolute", a.style.top = "0", a.style.left = "0", a.style.width = "100%", a.style.height = "100%", a.style.backgroundColor = "rgb(0, 0, 0)", a.setAttribute("playsinline", ""), this.C = a), this.s = this.C))
        };
        Op.prototype.stop = function () {
            this.j && this.j.Ra();
            this.G.clear();
            this.A.clear();
            this.h.lf();
            this.o.clear();
            this.h.detach();
            this.H = !1;
            this.l = null
        };
        Op.prototype.release = function () {
            this.stop();
            this.I && this.I.release();
            this.j && this.j.release();
            this.F && vn(this.F);
            this.h.destroy()
        };

        function Tp(a, b) {
            var c, d, e, f, g, h, k, l;
            O(function (m) {
                if (1 == m.g) {
                    if (a.B.Mg() == hp && a.m) return $a("Unsupported interstitial when using single media element", b), m.return();
                    Pp(a);
                    c = !1;
                    return G(m, Up(a, b), 2)
                }
                d = m.h;
                if (d.length) for (e = t(d), f = e.next(); !f.done; f = e.next()) (g = f.value, h = JSON.stringify(g), a.G.has(h)) || (c = !0, a.G.add(h), a.A.add(g), k = !1, b.Cb && null == a.l ? k = !0 : 0 != g.startTime || g.ef ? null != a.l && (l = b.startTime - a.l, 0 < l && 10 >= l && (k = !0)) : k = !0, k && (a.o.has(g) || a.o.set(g, a.h.preload(g.uri)))); else $a("Unsupported interstitial",
                    b);
                c && Sp(a);
                H(m)
            })
        }

        function Qp(a, b, c) {
            c = void 0 === c ? 0 : c;
            var d = 0, e = null;
            if (a.A.size && null != a.l) {
                var f = a.i.ended, g = Array.from(a.A).sort(function (l, m) {
                    return m.startTime - l.startTime
                });
                g = t(g);
                for (var h = g.next(); !h.done; h = g.next()) {
                    h = h.value;
                    var k = !1;
                    b ? k = h.Cb : f ? k = h.sc : h.Cb || h.sc || (k = a.l - Math.round(1E3 * h.startTime) / 1E3, k = 0 < k && (1 >= k || !h.ef));
                    if (k) {
                        if (d == c) {
                            e = h;
                            break
                        }
                        d++
                    }
                }
            }
            return e
        }

        function Rp(a, b, c, d, e, f) {
            f = void 0 === f ? 0 : f;
            var g, h, k, l, m, n, p, q, u, w, v, A, y, D;
            O(function (z) {
                switch (z.g) {
                    case 1:
                        g = Date.now();
                        !a.s.parentElement && a.F && a.F.appendChild(a.s);
                        1 == d && 1 == c && (c = Array.from(a.A).filter(function (B) {
                            return b.Cb ? B.Cb == b.Cb : b.sc ? B.sc == b.sc : .001 > Math.abs(B.startTime - b.startTime)
                        }).length);
                        if (b.once || b.Cb) f++, a.A.delete(b), Sp(a);
                        a.H = !0;
                        if (!a.m || 1 != d) {
                            z.u(2);
                            break
                        }
                        a.g(new U("ad-content-pause-requested", (new Map).set("saveLivePosition", !0)));
                        h = new bg;
                        k = function (B) {
                            return O(function (C) {
                                if (1 ==
                                    C.g) return "detach" != B.state ? C.u(0) : pd() ? G(C, new Promise(function (F) {
                                    return (new Tc(F)).Y(.1)
                                }), 3) : C.u(3);
                                h.resolve();
                                a.j.lb(a.B, "onstatechange", k);
                                H(C)
                            })
                        };
                        a.j.D(a.B, "onstatechange", k);
                        return G(z, h, 2);
                    case 2:
                        return a.m || (a.i.pause(), null != b.Rc && 0 != b.Rc && (a.i.currentTime += b.Rc)), l = !1, m = null, n = function () {
                            if (!a.m && null == b.Rc) if (b.Ke && b.endTime && Infinity != b.endTime) a.i.currentTime != b.endTime && (a.i.currentTime = b.endTime); else {
                                var B = Date.now();
                                a.i.currentTime += (B - e) / 1E3;
                                e = B
                            }
                        }, p = function () {
                            var B, C;
                            return O(function (F) {
                                if (1 ==
                                    F.g) return n(), m && m.stop(), (B = Qp(a, b.Cb, d - f)) ? (a.g(new U("ad-stopped")), a.j.Ra(), Rp(a, B, c, ++d, e, f), F.u(0)) : a.m ? G(F, a.h.detach(), 4) : G(F, a.h.dc(), 4);
                                a.m && (C = b.Rc, null == C && (C = b.Ke && b.endTime && Infinity != b.endTime ? b.endTime - (a.l || 0) : (Date.now() - e) / 1E3), a.g(new U("ad-content-resume-requested", (new Map).set("offset", C))));
                                a.g(new U("ad-stopped"));
                                a.j.Ra();
                                a.H = !1;
                                a.m || (n(), a.i.ended || a.i.play());
                                H(F)
                            })
                        }, q = function (B) {
                            return O(function (C) {
                                if (l) return C.return();
                                l = !0;
                                a.g(new U("ad-error", (new Map).set("originalEvent",
                                    B)));
                                return G(C, p(), 0)
                            })
                        }, u = function () {
                            return O(function (B) {
                                if (1 == B.g) {
                                    if (l) return B.return();
                                    l = !0;
                                    return G(B, p(), 2)
                                }
                                a.g(new U("ad-complete"));
                                H(B)
                            })
                        }, w = function () {
                            return O(function (B) {
                                if (l) return B.return();
                                l = !0;
                                a.g(new U("ad-skipped"));
                                return G(B, p(), 0)
                            })
                        }, v = new Np(a.s, b.isSkippable, w, c, d), a.m || (v.setMuted(a.i.muted), v.setVolume(a.i.volume)), a.g(new U("ad-started", (new Map).set("ad", v))), v.canSkipNow() && a.g(new U("ad-skip-state-changed")), a.j.ha(a.h, "error", q), a.j.ha(a.h, "firstquartile", function () {
                            n();
                            a.g(new U("ad-first-quartile"))
                        }), a.j.ha(a.h, "midpoint", function () {
                            n();
                            a.g(new U("ad-midpoint"))
                        }), a.j.ha(a.h, "thirdquartile", function () {
                            n();
                            a.g(new U("ad-third-quartile"))
                        }), a.j.ha(a.h, "complete", u), a.j.D(a.s, "play", function () {
                            a.g(new U("ad-resumed"))
                        }), a.j.D(a.s, "pause", function () {
                            a.g(new U("ad-paused"))
                        }), a.j.D(a.s, "volumechange", function () {
                            a.s.muted ? a.g(new U("ad-muted")) : a.g(new U("ad-volume-changed"))
                        }), sa(z, 4), b.Wf && (m = (new Tc(function () {
                            v.skip()
                        })).Y(b.Wf)), Pp(a), G(z, a.h.Ub(a.s), 6);
                    case 6:
                        return a.o.has(b) ?
                            G(z, a.o.get(b), 10) : G(z, a.h.load(b.uri), 8);
                    case 10:
                        return A = z.h, a.o.delete(b), A ? G(z, a.h.load(A), 8) : G(z, a.h.load(b.uri), 8);
                    case 8:
                        y = (Date.now() - g) / 1E3;
                        a.g(new U("ads-loaded", (new Map).set("loadTime", y)));
                        a.m && a.i.play();
                        va(z, 0);
                        break;
                    case 4:
                        D = wa(z), q(D), H(z)
                }
            })
        }

        function Up(a, b) {
            var c, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L, J, E, K, N, M, P, R;
            return O(function (Q) {
                switch (Q.g) {
                    case 1:
                        c = [];
                        if (!b) return Q.return(c);
                        d = b.values.find(function (W) {
                            return "X-ASSET-URI" == W.key
                        });
                        e = b.values.find(function (W) {
                            return "X-ASSET-LIST" == W.key
                        });
                        if (!d && !e) return Q.return(c);
                        f = b.values.find(function (W) {
                            return "X-RESTRICT" == W.key
                        });
                        h = g = !0;
                        f && f.data && (k = f.data, g = !k.includes("SKIP"), h = !k.includes("JUMP"));
                        l = null;
                        if (m = b.values.find(function (W) {
                            return "X-RESUME-OFFSET" == W.key
                        })) n = m.data,
                            l = parseFloat(n), isNaN(l) && (l = null);
                        p = null;
                        if (q = b.values.find(function (W) {
                            return "X-PLAYOUT-LIMIT" == W.key
                        })) u = q.data, p = parseFloat(u), isNaN(p) && (p = null);
                        A = v = w = !1;
                        if (y = b.values.find(function (W) {
                            return "CUE" == W.key
                        })) D = y.data, w = D.includes("ONCE"), v = D.includes("PRE"), A = D.includes("POST");
                        z = !1;
                        (B = b.values.find(function (W) {
                            return "X-TIMELINE-OCCUPIES" == W.key
                        })) ? (C = B.data, z = C.includes("RANGE")) : !m && a.B.V() && (z = !v && !A);
                        if (d) {
                            F = d.data;
                            if (!F) return Q.return(c);
                            c.push({
                                startTime: b.startTime, endTime: b.endTime, uri: F,
                                isSkippable: g, ef: h, Rc: l, Wf: p, once: w, Cb: v, sc: A, Ke: z
                            });
                            Q.u(2);
                            break
                        }
                        if (!e) {
                            Q.u(2);
                            break
                        }
                        I = e.data;
                        if (!I) return Q.return(c);
                        L = tg([I], $f());
                        J = a.B.zb().request(7, L);
                        sa(Q, 4);
                        return G(Q, J.promise, 6);
                    case 6:
                        E = Q.h;
                        K = vd(E.data);
                        N = JSON.parse(K);
                        M = t(N.ASSETS);
                        for (P = M.next(); !P.done; P = M.next()) R = P.value, R.URI && c.push({
                            startTime: b.startTime,
                            endTime: b.endTime,
                            uri: R.URI,
                            isSkippable: g,
                            ef: h,
                            Rc: l,
                            Wf: p,
                            once: w,
                            Cb: v,
                            sc: A,
                            Ke: z
                        });
                        va(Q, 2);
                        break;
                    case 4:
                        wa(Q);
                    case 2:
                        return Q.return(c)
                }
            })
        }

        function Sp(a) {
            for (var b = [], c = {}, d = t(a.A), e = d.next(); !e.done; c = {vb: c.vb}, e = d.next()) e = e.value, c.vb = {
                start: e.startTime,
                end: null
            }, e.Cb ? (c.vb.start = 0, c.vb.end = null) : e.sc ? (c.vb.start = -1, c.vb.end = null) : e.Ke && (c.vb.end = e.endTime), b.find(function (f) {
                return function (g) {
                    return f.vb.start == g.start && f.vb.end == g.end
                }
            }(c)) || b.push(c.vb);
            a.g(new U("ad-cue-points-changed", (new Map).set("cuepoints", b)))
        }

        function Pp(a) {
            a.h.configure(a.B.Og());
            var b = a.h.zb();
            b.Ag();
            b.Bg();
            sg(a.B.zb(), b)
        };

        function Vp(a) {
            this.h = a || "";
            this.g = 0
        }

        function Wp(a) {
            Xp(a, /[ \t]+/gm)
        }

        function Xp(a, b) {
            b.lastIndex = a.g;
            b = b.exec(a.h);
            b = null == b ? null : {position: b.index, length: b[0].length, results: b};
            if (a.g == a.h.length || null == b || b.position != a.g) return null;
            a.g += b.length;
            return b.results
        }

        function Yp(a) {
            return a.g == a.h.length ? null : (a = Xp(a, /[^ \t\n]*/gm)) ? a[0] : null
        };

        function Zp(a, b, c, d, e) {
            this.h = a;
            if (a = this.h.skipOffset) if (a = Xp(new Vp(a), $p), null == a) a = null; else {
                var f = Number(a[2]), g = Number(a[3]);
                a = 59 < f || 59 < g ? null : (Number(a[4]) || 0) / 1E3 + g + 60 * f + 3600 * (Number(a[1]) || 0)
            } else a = null;
            this.j = a;
            this.g = e;
            this.i = b;
            this.l = c;
            this.o = d;
            this.m = !1
        }

        r = Zp.prototype;
        r.needsSkipUI = function () {
            return !0
        };
        r.getDuration = function () {
            return this.h.durationInSeconds
        };
        r.getMinSuggestedDuration = function () {
            return this.getDuration()
        };
        r.getRemainingTime = function () {
            return this.h.startTimeInSeconds + this.h.durationInSeconds - this.g.currentTime
        };
        r.isPaused = function () {
            return this.g.paused
        };
        r.isSkippable = function () {
            return "number" == typeof this.j ? !0 : !1
        };
        r.getTimeUntilSkippable = function () {
            if ("number" != typeof this.j) return this.getRemainingTime();
            var a = this.getRemainingTime() + this.j - this.getDuration();
            return Math.max(a, 0)
        };
        r.canSkipNow = function () {
            return 0 == this.getTimeUntilSkippable()
        };
        r.skip = function () {
            this.m = !0;
            this.g.currentTime += this.getRemainingTime()
        };
        r.pause = function () {
            return this.g.pause()
        };
        r.play = function () {
            return this.g.play()
        };
        r.getVolume = function () {
            return this.g.volume
        };
        r.setVolume = function (a) {
            this.g.volume = a
        };
        r.isMuted = function () {
            return this.g.muted
        };
        r.isLinear = function () {
            return this.o
        };
        r.resize = function () {
        };
        r.setMuted = function (a) {
            this.g.muted = a
        };
        r.getSequenceLength = function () {
            return this.l ? this.l : 1
        };
        r.getPositionInSequence = function () {
            return this.i ? this.i : 1
        };
        r.getTitle = function () {
            return this.h.adTitle
        };
        r.getDescription = function () {
            return ""
        };
        r.getVastMediaBitrate = function () {
            return 0
        };
        r.getVastMediaHeight = function () {
            return 0
        };
        r.getVastMediaWidth = function () {
            return 0
        };
        r.getAdId = function () {
            return this.h.adId
        };
        r.getCreativeAdId = function () {
            return this.h.creativeId
        };
        r.getAdvertiserName = function () {
            return ""
        };
        r.getMediaUrl = function () {
            return null
        };
        r.getTimeOffset = function () {
            return 0
        };
        r.getPodIndex = function () {
            return 0
        };
        r.release = function () {
            this.l = this.i = this.g = this.h = null
        };
        S("shaka.ads.MediaTailorAd", Zp);
        Zp.prototype.release = Zp.prototype.release;
        Zp.prototype.getPodIndex = Zp.prototype.getPodIndex;
        Zp.prototype.getTimeOffset = Zp.prototype.getTimeOffset;
        Zp.prototype.getMediaUrl = Zp.prototype.getMediaUrl;
        Zp.prototype.getAdvertiserName = Zp.prototype.getAdvertiserName;
        Zp.prototype.getCreativeAdId = Zp.prototype.getCreativeAdId;
        Zp.prototype.getAdId = Zp.prototype.getAdId;
        Zp.prototype.getVastMediaWidth = Zp.prototype.getVastMediaWidth;
        Zp.prototype.getVastMediaHeight = Zp.prototype.getVastMediaHeight;
        Zp.prototype.getVastMediaBitrate = Zp.prototype.getVastMediaBitrate;
        Zp.prototype.getDescription = Zp.prototype.getDescription;
        Zp.prototype.getTitle = Zp.prototype.getTitle;
        Zp.prototype.getPositionInSequence = Zp.prototype.getPositionInSequence;
        Zp.prototype.getSequenceLength = Zp.prototype.getSequenceLength;
        Zp.prototype.setMuted = Zp.prototype.setMuted;
        Zp.prototype.resize = Zp.prototype.resize;
        Zp.prototype.isLinear = Zp.prototype.isLinear;
        Zp.prototype.isMuted = Zp.prototype.isMuted;
        Zp.prototype.setVolume = Zp.prototype.setVolume;
        Zp.prototype.getVolume = Zp.prototype.getVolume;
        Zp.prototype.play = Zp.prototype.play;
        Zp.prototype.pause = Zp.prototype.pause;
        Zp.prototype.skip = Zp.prototype.skip;
        Zp.prototype.canSkipNow = Zp.prototype.canSkipNow;
        Zp.prototype.getTimeUntilSkippable = Zp.prototype.getTimeUntilSkippable;
        Zp.prototype.isSkippable = Zp.prototype.isSkippable;
        Zp.prototype.isPaused = Zp.prototype.isPaused;
        Zp.prototype.getRemainingTime = Zp.prototype.getRemainingTime;
        Zp.prototype.getMinSuggestedDuration = Zp.prototype.getMinSuggestedDuration;
        Zp.prototype.getDuration = Zp.prototype.getDuration;
        Zp.prototype.needsSkipUI = Zp.prototype.needsSkipUI;
        var $p = /(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;

        function aq(a, b, c, d) {
            this.B = a;
            this.K = b;
            this.h = c;
            this.l = null;
            this.U = NaN;
            this.i = d;
            this.I = !1;
            this.A = null;
            this.j = [];
            this.N = [];
            this.L = this.C = this.g = null;
            this.F = new Map;
            this.m = [];
            this.s = [];
            this.G = "";
            this.R = !0;
            this.H = "";
            this.o = new gb
        }

        aq.prototype.stop = function () {
            for (var a = t(this.m), b = a.next(); !b.done; b = a.next()) b = b.value, this.o.lb(b.target, b.type, b.listener);
            bq(this);
            this.m = [];
            this.s = [];
            this.G = "";
            this.R = !0;
            this.H = "";
            this.A = null;
            this.j = [];
            this.N = [];
            this.F.clear()
        };
        aq.prototype.release = function () {
            this.stop();
            this.o && this.o.release()
        };
        aq.prototype.onManifestUpdated = function (a) {
            this.I = a;
            "" != this.G && (cq(this, this.G, this.R), this.R = !1)
        };
        aq.prototype.getCuePoints = function () {
            for (var a = [], b = t(this.j), c = b.next(); !c.done; c = b.next()) {
                c = t(c.value.ads);
                for (var d = c.next(); !d.done; d = c.next()) d = d.value, a.push({
                    start: d.startTimeInSeconds,
                    end: d.startTimeInSeconds + d.durationInSeconds
                })
            }
            return a
        };

        function dq(a, b, c) {
            var d, e, f, g, h, k, l, m, n, p, q;
            O(function (u) {
                if (1 == u.g) return d = tg([b], $f()), d.method = "POST", c && (e = JSON.stringify(c), d.body = Ad(e)), f = a.K.request(7, d), sa(u, 2), G(u, f.promise, 4);
                if (2 != u.g) {
                    g = u.h;
                    h = vd(g.data);
                    k = JSON.parse(h);
                    if (k.manifestUrl && k.trackingUrl) l = new uc(b), m = new uc(k.trackingUrl), a.G = l.resolve(m).toString(), n = Date.now() / 1E3, p = n - a.U, a.i(new U("ads-loaded", (new Map).set("loadTime", p))), q = new uc(k.manifestUrl), a.l.resolve(l.resolve(q).toString()), a.l = null; else throw Error("Insufficient data from MediaTailor.");
                    return va(u, 0)
                }
                wa(u);
                if (!a.H.length) return a.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."), a.l = null, u.return();
                a.l.resolve(a.H);
                a.l = null;
                H(u)
            })
        }

        function cq(a, b, c) {
            var d, e, f, g, h, k, l, m, n, p, q, u, w, v, A;
            O(function (y) {
                if (1 == y.g) return d = tg([b], $f()), e = a.K.request(7, d), sa(y, 2), G(y, e.promise, 4);
                if (2 != y.g) {
                    f = y.h;
                    g = [];
                    h = vd(f.data);
                    k = JSON.parse(h);
                    if (0 < k.avails.length) {
                        if (JSON.stringify(a.j) != JSON.stringify(k.avails)) {
                            a.j = k.avails;
                            l = t(a.j);
                            for (m = l.next(); !m.done; m = l.next()) for (n = m.value, p = t(n.nonLinearAdsList), q = p.next(); !q.done; q = p.next()) for (u = q.value, w = t(u.nonLinearAdList), v = w.next(); !v.done; v = w.next()) A = v.value, eq(a, A);
                            g = a.getCuePoints();
                            a.i(new U("ad-cue-points-changed",
                                (new Map).set("cuepoints", g)))
                        }
                    } else a.j.length && a.i(new U("ad-cue-points-changed", (new Map).set("cuepoints", g))), bq(a), a.j = [];
                    c && (a.I || 0 < g.length) && fq(a);
                    return va(y, 0)
                }
                wa(y);
                H(y)
            })
        }

        function eq(a, b) {
            var c, d, e, f, g, h, k, l;
            O(function (m) {
                if (1 == m.g) {
                    if (!b.staticResource) return m.return();
                    c = gq(b);
                    if (d = a.F.get(c)) return m.return();
                    e = tg([b.staticResource], $f());
                    f = a.K.request(7, e);
                    sa(m, 2);
                    a.F.set(c, []);
                    return G(m, f.promise, 4)
                }
                if (2 != m.g) return g = m.h, h = vd(g.data), k = JSON.parse(h), l = k.apps, a.F.set(c, l), va(m, 0);
                wa(m);
                a.F.delete(c);
                H(m)
            })
        }

        function gq(a) {
            return [a.adId, a.adParameters, a.adSystem, a.adTitle, a.creativeAdId, a.creativeId, a.creativeSequence, a.height, a.width, a.staticResource].join("")
        }

        function fq(a) {
            hq(a);
            a.I || (iq(a), a.o.D(a.h, "seeked", function () {
                iq(a)
            }), a.o.D(a.h, "ended", function () {
                bq(a)
            }));
            a.o.D(a.h, "timeupdate", function () {
                hq(a)
            })
        }

        function iq(a) {
            var b = a.h.currentTime;
            if (0 != b && null == a.A) {
                for (var c, d, e = t(a.j), f = e.next(); !f.done; f = e.next()) {
                    f = f.value;
                    for (var g = t(f.ads), h = g.next(); !h.done; h = g.next()) if (h = h.value, !d) h.startTimeInSeconds < b && (d = h, c = f); else if (h.startTimeInSeconds < b && h.startTimeInSeconds > d.startTimeInSeconds + d.durationInSeconds) {
                        d = h;
                        c = f;
                        break
                    }
                }
                c && d && !a.N.includes(d.adId) && (a.A = b, a.h.currentTime = c.startTimeInSeconds)
            }
        }

        function hq(a) {
            if (a.h.duration && (a.g || a.j.length)) {
                var b = a.h.currentTime, c = !1;
                if (a.g) {
                    c = !0;
                    var d = a.C, e = d.startTimeInSeconds + .5 * d.durationInSeconds,
                        f = d.startTimeInSeconds + .75 * d.durationInSeconds;
                    b >= d.startTimeInSeconds + .25 * d.durationInSeconds && !a.s.includes("firstQuartile") ? (a.s.push("firstQuartile"), jq(a, "firstQuartile")) : b >= e && !a.s.includes("midpoint") ? (a.s.push("midpoint"), jq(a, "midpoint")) : b >= f && !a.s.includes("thirdQuartile") && (a.s.push("thirdQuartile"), jq(a, "thirdQuartile"));
                    d = a.g.getRemainingTime();
                    e = a.g.getDuration();
                    a.g.canSkipNow() && 0 < d && 0 < e && jq(a, "skipStateChanged");
                    0 < e && (0 >= d || d > e) && bq(a)
                }
                if (!a.g || !a.g.isLinear()) {
                    a:for (d = t(a.j), e = d.next(); !e.done; e = d.next()) {
                        e = e.value;
                        if (a.g && a.g.isLinear()) break;
                        for (f = 0; f < e.ads.length; f++) {
                            var g = e.ads[f], h = g.startTimeInSeconds + g.durationInSeconds;
                            if (g.startTimeInSeconds <= b && h > b) {
                                if (a.N.includes(g.adId)) {
                                    if (a.h.ended) continue;
                                    a.h.currentTime = h;
                                    break a
                                }
                                bq(a);
                                a.L = e;
                                a.g = new Zp(g, f + 1, e.ads.length, !0, a.h);
                                a.C = g;
                                0 === f && jq(a, "breakStart");
                                kq(a);
                                break
                            }
                        }
                    }
                    if (!a.g) for (d =
                                       t(a.j), e = d.next(); !e.done; e = d.next()) {
                        e = e.value;
                        if (a.g) break;
                        for (f = 0; f < e.nonLinearAdsList.length; f++) if (g = e.nonLinearAdsList[f], g.nonLinearAdList.length) {
                            h = e.startTimeInSeconds;
                            var k = a.F.get(gq(g.nonLinearAdList[0]));
                            if (h <= b && k && k.length) {
                                bq(a);
                                h = a;
                                k = t(k);
                                for (var l = k.next(); !l.done; l = k.next()) if (l = l.value, l.data.source.length) {
                                    var m = document.createElement("img");
                                    m.src = l.data.source[0].url;
                                    m.style.top = (l.placeholder.top || 0) + "%";
                                    m.style.height = 100 - (l.placeholder.top || 0) + "%";
                                    m.style.left = (l.placeholder.left ||
                                        0) + "%";
                                    m.style.maxWidth = 100 - (l.placeholder.left || 0) + "%";
                                    m.style.objectFit = "contain";
                                    m.style.position = "absolute";
                                    h.B.appendChild(m)
                                }
                                a.L = e;
                                a.g = new Zp(g, f + 1, e.ads.length, !1, a.h);
                                a.C = g;
                                0 === f && jq(a, "breakStart");
                                kq(a);
                                break
                            }
                        }
                    }
                    c && !a.g && (b = a.h.currentTime, a.A && a.A > b && (a.h.currentTime = a.A), a.A = null)
                }
            }
        }

        function bq(a) {
            if (a.g) {
                for (; a.B.lastChild;) a.B.removeChild(a.B.firstChild);
                a.I || a.N.push(a.C.adId);
                var b = a.g.m;
                (void 0 === b ? 0 : b) ? jq(a, "skip") : jq(a, "complete");
                b = t(a.m);
                for (var c = b.next(); !c.done; c = b.next()) c = c.value, a.o.lb(c.target, c.type, c.listener);
                a.m = [];
                a.s = [];
                b = a.g.getPositionInSequence();
                c = a.g.getSequenceLength();
                b === c && jq(a, "breakEnd");
                a.g = null;
                a.C = null;
                a.L = null
            }
        }

        function kq(a) {
            var b = !1;
            a.h.paused ? b = !0 : (jq(a, "impression"), jq(a, "start"));
            a.m.push({
                target: a.h, type: "volumechange", listener: function () {
                    a.h.muted && jq(a, "mute")
                }
            });
            a.m.push({
                target: a.h, type: "volumechange", listener: function () {
                    a.h.muted || jq(a, "unmute")
                }
            });
            a.m.push({
                target: a.h, type: "play", listener: function () {
                    b ? (jq(a, "impression"), jq(a, "start"), b = !1) : jq(a, "resume")
                }
            });
            a.m.push({
                target: a.h, type: "pause", listener: function () {
                    jq(a, "pause")
                }
            });
            for (var c = t(a.m), d = c.next(); !d.done; d = c.next()) d = d.value, a.o.D(d.target,
                d.type, d.listener)
        }

        function jq(a, b) {
            var c = a.C.trackingEvents.find(function (e) {
                return e.eventType == b
            });
            c || (c = a.L.adBreakTrackingEvents.find(function (e) {
                return e.eventType == b
            }));
            if (c) {
                c = t(c.beaconUrls);
                for (var d = c.next(); !d.done; d = c.next()) (d = d.value) && "" != d && (d = tg([d], $f()), d.method = "POST", a.K.request(7, d))
            }
            switch (b) {
                case "impression":
                    a.i(new U("ad-impression"));
                    break;
                case "start":
                    a.i(new U("ad-started", (new Map).set("ad", a.g)));
                    break;
                case "mute":
                    a.i(new U("ad-muted"));
                    break;
                case "unmute":
                    a.i(new U("ad-volume-changed"));
                    break;
                case "resume":
                    a.i(new U("ad-resumed"));
                    break;
                case "pause":
                    a.i(new U("ad-paused"));
                    break;
                case "firstQuartile":
                    a.i(new U("ad-first-quartile"));
                    break;
                case "midpoint":
                    a.i(new U("ad-midpoint"));
                    break;
                case "thirdQuartile":
                    a.i(new U("ad-third-quartile"));
                    break;
                case "complete":
                    a.i(new U("ad-complete"));
                    a.i(new U("ad-stopped"));
                    break;
                case "skip":
                    a.i(new U("ad-skipped"));
                    a.i(new U("ad-stopped"));
                    break;
                case "breakStart":
                    a.B.setAttribute("ad-active", "true");
                    break;
                case "breakEnd":
                    a.B.removeAttribute("ad-active");
                    break;
                case "skipStateChanged":
                    a.i(new U("ad-skip-state-changed"))
            }
        };

        function lq(a, b) {
            this.g = a;
            this.i = null;
            this.h = b
        }

        r = lq.prototype;
        r.needsSkipUI = function () {
            return !0
        };
        r.getDuration = function () {
            return this.i ? this.i.duration : -1
        };
        r.getMinSuggestedDuration = function () {
            return this.getDuration()
        };
        r.getRemainingTime = function () {
            return this.i ? this.i.duration - this.i.currentTime : -1
        };
        r.isPaused = function () {
            return this.h.paused
        };
        r.isSkippable = function () {
            return this.g.isSkippable()
        };
        r.getTimeUntilSkippable = function () {
            var a = this.g.getSkipTimeOffset();
            a = this.getRemainingTime() - a;
            return Math.max(a, 0)
        };
        r.canSkipNow = function () {
            return 0 == this.getTimeUntilSkippable()
        };
        r.skip = function () {
            this.h.currentTime += this.getRemainingTime()
        };
        r.pause = function () {
            return this.h.pause()
        };
        r.play = function () {
            return this.h.play()
        };
        r.getVolume = function () {
            return this.h.volume
        };
        r.setVolume = function (a) {
            this.h.volume = a
        };
        r.isMuted = function () {
            return this.h.muted
        };
        r.isLinear = function () {
            return !0
        };
        r.resize = function () {
        };
        r.setMuted = function (a) {
            this.h.muted = a
        };
        r.getSequenceLength = function () {
            var a = this.g.getAdPodInfo();
            return null == a ? 1 : a.getTotalAds()
        };
        r.getPositionInSequence = function () {
            var a = this.g.getAdPodInfo();
            return null == a ? 1 : a.getAdPosition()
        };
        r.getTitle = function () {
            return this.g.getTitle()
        };
        r.getDescription = function () {
            return this.g.getDescription()
        };
        r.getVastMediaBitrate = function () {
            return 0
        };
        r.getVastMediaHeight = function () {
            return this.g.getVastMediaHeight()
        };
        r.getVastMediaWidth = function () {
            return this.g.getVastMediaWidth()
        };
        r.getAdId = function () {
            return this.g.getAdId()
        };
        r.getCreativeAdId = function () {
            return this.g.getCreativeAdId()
        };
        r.getAdvertiserName = function () {
            return this.g.getAdvertiserName()
        };
        r.getMediaUrl = function () {
            return null
        };
        r.getTimeOffset = function () {
            var a = this.g.getAdPodInfo();
            return null == a ? 0 : a.getTimeOffset()
        };
        r.getPodIndex = function () {
            var a = this.g.getAdPodInfo();
            return null == a ? 0 : a.getPodIndex()
        };
        r.release = function () {
            this.h = this.i = this.g = null
        };
        S("shaka.ads.ServerSideAd", lq);
        lq.prototype.release = lq.prototype.release;
        lq.prototype.getPodIndex = lq.prototype.getPodIndex;
        lq.prototype.getTimeOffset = lq.prototype.getTimeOffset;
        lq.prototype.getMediaUrl = lq.prototype.getMediaUrl;
        lq.prototype.getAdvertiserName = lq.prototype.getAdvertiserName;
        lq.prototype.getCreativeAdId = lq.prototype.getCreativeAdId;
        lq.prototype.getAdId = lq.prototype.getAdId;
        lq.prototype.getVastMediaWidth = lq.prototype.getVastMediaWidth;
        lq.prototype.getVastMediaHeight = lq.prototype.getVastMediaHeight;
        lq.prototype.getVastMediaBitrate = lq.prototype.getVastMediaBitrate;
        lq.prototype.getDescription = lq.prototype.getDescription;
        lq.prototype.getTitle = lq.prototype.getTitle;
        lq.prototype.getPositionInSequence = lq.prototype.getPositionInSequence;
        lq.prototype.getSequenceLength = lq.prototype.getSequenceLength;
        lq.prototype.setMuted = lq.prototype.setMuted;
        lq.prototype.resize = lq.prototype.resize;
        lq.prototype.isLinear = lq.prototype.isLinear;
        lq.prototype.isMuted = lq.prototype.isMuted;
        lq.prototype.setVolume = lq.prototype.setVolume;
        lq.prototype.getVolume = lq.prototype.getVolume;
        lq.prototype.play = lq.prototype.play;
        lq.prototype.pause = lq.prototype.pause;
        lq.prototype.skip = lq.prototype.skip;
        lq.prototype.canSkipNow = lq.prototype.canSkipNow;
        lq.prototype.getTimeUntilSkippable = lq.prototype.getTimeUntilSkippable;
        lq.prototype.isSkippable = lq.prototype.isSkippable;
        lq.prototype.isPaused = lq.prototype.isPaused;
        lq.prototype.getRemainingTime = lq.prototype.getRemainingTime;
        lq.prototype.getMinSuggestedDuration = lq.prototype.getMinSuggestedDuration;
        lq.prototype.getDuration = lq.prototype.getDuration;
        lq.prototype.needsSkipUI = lq.prototype.needsSkipUI;

        function mq(a, b, c, d) {
            var e = this;
            this.s = a;
            this.l = b;
            this.j = null;
            this.F = NaN;
            this.i = d;
            this.G = !1;
            this.A = this.m = this.o = null;
            this.B = "";
            this.C = [];
            this.h = new gb;
            a = new google.ima.dai.api.UiSettings;
            a.setLocale(c);
            this.g = new google.ima.dai.api.StreamManager(this.l, this.s, a);
            this.i(new U("ima-stream-manager-loaded", (new Map).set("imaStreamManager", this.g)));
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.LOADED, function (f) {
                nq(e, f)
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.ERROR, function () {
                e.B.length ?
                    e.j.resolve(e.B) : e.j.reject("IMA Stream request returned an error and there was no backup asset uri provided.");
                e.j = null
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED, function () {
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.STARTED, function (f) {
                f = f.getAd();
                e.m = new lq(f, e.l);
                e.A && (e.m.i = e.A);
                e.i(new U("ad-started", (new Map).set("ad", e.m)));
                e.s.setAttribute("ad-active", "true")
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED, function () {
                e.s.removeAttribute("ad-active");
                var f = e.l.currentTime;
                e.o && e.o > f && (e.l.currentTime = e.o, e.o = null)
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_PROGRESS, function (f) {
                e.A = f.getStreamData().adProgressData;
                e.m && (e.m.i = e.A)
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE, function () {
                e.i(new U("ad-first-quartile"))
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.MIDPOINT, function () {
                e.i(new U("ad-midpoint"))
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE, function () {
                e.i(new U("ad-third-quartile"))
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.COMPLETE, function () {
                e.i(new U("ad-complete"));
                e.i(new U("ad-stopped"));
                e.s.removeAttribute("ad-active");
                e.m = null
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.SKIPPED, function () {
                e.i(new U("ad-skipped"));
                e.i(new U("ad-stopped"))
            });
            this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED, function (f) {
                var g = f.getStreamData();
                f = [];
                g = t(g.cuepoints);
                for (var h = g.next(); !h.done; h = g.next()) h = h.value, f.push({start: h.start, end: h.end});
                e.C =
                    f;
                e.i(new U("ad-cue-points-changed", (new Map).set("cuepoints", f)))
            })
        }

        r = mq.prototype;
        r.configure = function () {
        };
        r.stop = function () {
            this.B = "";
            this.o = null;
            this.C = []
        };
        r.release = function () {
            this.stop();
            this.h && this.h.release()
        };
        r.onCueMetadataChange = function (a) {
            if (a.key && a.data) {
                var b = {};
                b[a.key] = a.data;
                this.g.onTimedMetadata(b)
            }
        };
        r.getCuePoints = function () {
            return this.C
        };

        function nq(a, b) {
            a.i(new U("ads-loaded", (new Map).set("loadTime", Date.now() / 1E3 - a.F)));
            b = b.getStreamData().url;
            a.j.resolve(b);
            a.j = null;
            a.G || a.h.D(a.l, "seeked", function () {
                var c = a.l.currentTime;
                if (0 != c) {
                    a.g.streamTimeForContentTime(c);
                    var d = a.g.previousCuePointForStreamTime(c);
                    d && !d.played && (a.o = c, a.l.currentTime = d.start)
                }
            })
        };

        function Y() {
            lg.call(this);
            this.g = this.h = this.i = this.j = null;
            this.m = new Cp;
            this.o = navigator.language;
            this.l = null
        }

        oa(Y, lg);
        r = Y.prototype;
        r.setLocale = function (a) {
            this.o = a
        };
        r.configure = function (a) {
            this.l = a;
            this.j && this.j.configure(this.l);
            this.i && this.i.configure(this.l);
            this.g && this.g.configure(this.l)
        };
        r.initInterstitial = function (a, b, c) {
            var d = this;
            this.j && this.j.release();
            this.j = new Op(a, b, c, function (e) {
                return oq(d, e)
            });
            this.j.configure(this.l)
        };
        r.initClientSide = function (a, b, c) {
            var d = this;
            if (!window.google || !google.ima || !google.ima.AdsLoader) throw new T(2, 10, 1E4);
            this.i && this.i.release();
            this.i = new Gp(a, b, this.o, c, function (e) {
                return oq(d, e)
            });
            this.i.configure(this.l)
        };
        r.release = function () {
            this.j && (this.j.release(), this.j = null);
            this.i && (this.i.release(), this.i = null);
            this.h && (this.h.release(), this.h = null);
            this.g && (this.g.release(), this.g = null);
            lg.prototype.release.call(this)
        };
        r.onAssetUnload = function () {
            this.j && this.j.stop();
            this.i && this.i.stop();
            this.h && this.h.stop();
            this.g && this.g.stop();
            this.dispatchEvent(new U("ad-stopped"));
            this.dispatchEvent(new U("ad-content-attach-requested"));
            this.m = new Cp
        };
        r.requestClientSideAds = function (a) {
            if (!this.i) throw new T(1, 10, 10001);
            var b = this.i;
            b.g && b.g.destroy();
            b.m && b.m.contentComplete();
            b.G = Date.now() / 1E3;
            b.m.requestAds(a)
        };
        r.updateClientSideAdsRenderingSettings = function (a) {
            if (!this.i) throw new T(1, 10, 10001);
            var b = this.i;
            b.B = a;
            b.g && b.g.updateAdsRenderingSettings(b.B)
        };
        r.initMediaTailor = function (a, b, c) {
            var d = this;
            this.h && this.h.release();
            this.h = new aq(a, b, c, function (e) {
                return oq(d, e)
            })
        };
        r.requestMediaTailorStream = function (a, b, c) {
            if (!this.h) throw new T(1, 10, 10005);
            var d = this.h;
            c = void 0 === c ? "" : c;
            d.l ? a = Promise.reject(new T(1, 10, 10004)) : (d.l = new bg, dq(d, a, b), d.H = c || "", d.U = Date.now() / 1E3, a = d.l);
            return a
        };
        r.addMediaTailorTrackingUrl = function (a) {
            if (!this.h) throw new T(1, 10, 10005);
            var b = this.h;
            b.G = a;
            b.i(new U("ads-loaded", (new Map).set("loadTime", 0)))
        };
        r.initServerSide = function (a, b) {
            var c = this;
            if (!window.google || !google.ima || !google.ima.dai) throw new T(2, 10, 10002);
            this.g && this.g.release();
            this.g = new mq(a, b, this.o, function (d) {
                return oq(c, d)
            });
            this.g.configure(this.l)
        };
        r.requestServerSideStream = function (a, b) {
            b = void 0 === b ? "" : b;
            if (!this.g) throw new T(1, 10, 10003);
            a.adTagParameters || (a.adTagParameters = {});
            var c = a.adTagParameters;
            (c.mpt || c.mpv) && $a('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');
            a.adTagParameters.mpt = "shaka-player";
            a.adTagParameters.mpv = "v4.10.9";
            c = this.g;
            c.j ? a = Promise.reject(new T(1, 10, 10004)) : (a instanceof google.ima.dai.api.LiveStreamRequest &&
            (c.G = !0), c.j = new bg, c.g.requestStream(a), c.B = b || "", c.F = Date.now() / 1E3, a = c.j);
            return a
        };
        r.replaceServerSideAdTagParameters = function (a) {
            if (!this.g) throw new T(1, 10, 10003);
            (a.mpt || a.mpv) && $a('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');
            a.mpt = "Shaka Player";
            a.mpv = "v4.10.9";
            this.g.g.replaceAdTagParameters(a)
        };
        r.getServerSideCuePoints = function () {
            rb("AdManager.getServerSideCuePoints", "Please use getCuePoints function.");
            return this.getCuePoints()
        };
        r.getCuePoints = function () {
            var a = [];
            this.g && (a = a.concat(this.g.getCuePoints()));
            this.h && (a = a.concat(this.h.getCuePoints()));
            return a
        };
        r.getStats = function () {
            var a = this.m;
            return {
                loadTimes: a.g,
                averageLoadTime: Dp(a),
                started: a.h,
                playedCompletely: a.j,
                skipped: a.l,
                errors: a.i
            }
        };
        r.onManifestUpdated = function (a) {
            if (this.h) this.h.onManifestUpdated(a)
        };
        r.onDashTimedMetadata = function (a) {
            this.g && "urn:google:dai:2018" == a.schemeIdUri && this.g.g.processMetadata(a.schemeIdUri, a.eventNode ? a.eventNode.attributes.messageData : null, a.startTime)
        };
        r.onHlsTimedMetadata = function (a, b) {
            this.g && this.g.g.processMetadata("ID3", a.data, b)
        };
        r.onCueMetadataChange = function (a) {
            if (this.g) this.g.onCueMetadataChange(a)
        };
        r.onInterstitialMetadata = function (a, b, c) {
            this.j || this.initInterstitial(null, a, b);
            this.j && Tp(this.j, c)
        };

        function oq(a, b) {
            if (b && b.type) switch (b.type) {
                case "ads-loaded":
                    a.m.g.push(b.loadTime);
                    break;
                case "ad-started":
                    a.m.h++;
                    break;
                case "ad-complete":
                    a.m.j++;
                    break;
                case "ad-skipped":
                    a.m.l++;
                    break;
                case "ad-error":
                    a.m.i++
            }
            a.dispatchEvent(b)
        }

        S("shaka.ads.AdManager", Y);
        Y.prototype.onInterstitialMetadata = Y.prototype.onInterstitialMetadata;
        Y.prototype.onCueMetadataChange = Y.prototype.onCueMetadataChange;
        Y.prototype.onHlsTimedMetadata = Y.prototype.onHlsTimedMetadata;
        Y.prototype.onDashTimedMetadata = Y.prototype.onDashTimedMetadata;
        Y.prototype.onManifestUpdated = Y.prototype.onManifestUpdated;
        Y.prototype.getStats = Y.prototype.getStats;
        Y.prototype.getCuePoints = Y.prototype.getCuePoints;
        Y.prototype.getServerSideCuePoints = Y.prototype.getServerSideCuePoints;
        Y.prototype.replaceServerSideAdTagParameters = Y.prototype.replaceServerSideAdTagParameters;
        Y.prototype.requestServerSideStream = Y.prototype.requestServerSideStream;
        Y.prototype.initServerSide = Y.prototype.initServerSide;
        Y.prototype.addMediaTailorTrackingUrl = Y.prototype.addMediaTailorTrackingUrl;
        Y.prototype.requestMediaTailorStream = Y.prototype.requestMediaTailorStream;
        Y.prototype.initMediaTailor = Y.prototype.initMediaTailor;
        Y.prototype.updateClientSideAdsRenderingSettings = Y.prototype.updateClientSideAdsRenderingSettings;
        Y.prototype.requestClientSideAds = Y.prototype.requestClientSideAds;
        Y.prototype.onAssetUnload = Y.prototype.onAssetUnload;
        Y.prototype.release = Y.prototype.release;
        Y.prototype.initClientSide = Y.prototype.initClientSide;
        Y.prototype.initInterstitial = Y.prototype.initInterstitial;
        Y.prototype.configure = Y.prototype.configure;
        Y.prototype.setLocale = Y.prototype.setLocale;
        Y.ADS_LOADED = "ads-loaded";
        Y.AD_STARTED = "ad-started";
        Y.AD_FIRST_QUARTILE = "ad-first-quartile";
        Y.AD_MIDPOINT = "ad-midpoint";
        Y.AD_THIRD_QUARTILE = "ad-third-quartile";
        Y.AD_COMPLETE = "ad-complete";
        Y.AD_STOPPED = "ad-stopped";
        Y.AD_SKIPPED = "ad-skipped";
        Y.AD_VOLUME_CHANGED = "ad-volume-changed";
        Y.AD_MUTED = "ad-muted";
        Y.AD_PAUSED = "ad-paused";
        Y.AD_RESUMED = "ad-resumed";
        Y.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed";
        Y.CUEPOINTS_CHANGED = "ad-cue-points-changed";
        Y.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded";
        Y.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded";
        Y.AD_CLICKED = "ad-clicked";
        Y.AD_PROGRESS = "ad-progress";
        Y.AD_BUFFERING = "ad-buffering";
        Y.AD_IMPRESSION = "ad-impression";
        Y.AD_DURATION_CHANGED = "ad-duration-changed";
        Y.AD_CLOSED = "ad-closed";
        Y.AD_LOADED = "ad-loaded";
        Y.ALL_ADS_COMPLETED = "all-ads-completed";
        Y.AD_LINEAR_CHANGED = "ad-linear-changed";
        Y.AD_METADATA = "ad-metadata";
        Y.AD_RECOVERABLE_ERROR = "ad-recoverable-error";
        Y.AD_ERROR = "ad-error";
        Y.AD_BREAK_READY = "ad-break-ready";
        Y.AD_INTERACTION = "ad-interaction";
        Y.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested";
        Y.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested";
        Y.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested";
        mo = function () {
            return new Y
        };

        function pq(a) {
            return JSON.stringify(a, function (b, c) {
                if ("function" != typeof c) {
                    if (c instanceof Event || c instanceof U) {
                        var d = {};
                        for (e in c) (b = c[e]) && "object" == typeof b ? "detail" == e && (d[e] = b) : e in Event || (d[e] = b);
                        return d
                    }
                    if (c instanceof Error) {
                        var e = new Set(["name", "message", "stack"]);
                        for (d in c) e.add(d);
                        b = t(Object.getOwnPropertyNames(c));
                        for (d = b.next(); !d.done; d = b.next()) e.add(d.value);
                        b = {};
                        e = t(e);
                        for (d = e.next(); !d.done; d = e.next()) d = d.value, b[d] = c[d];
                        c = {__type__: "Error", contents: b}
                    } else if (c instanceof
                        TimeRanges) {
                        e = {__type__: "TimeRanges", length: c.length, start: [], end: []};
                        c = t(Ki(c));
                        for (d = c.next(); !d.done; d = c.next()) d = d.value, b = d.end, e.start.push(d.start), e.end.push(b);
                        c = e
                    } else c = c instanceof Uint8Array ? {
                        __type__: "Uint8Array",
                        entries: Array.from(c)
                    } : "number" == typeof c ? isNaN(c) ? "NaN" : isFinite(c) ? c : 0 > c ? "-Infinity" : "Infinity" : c;
                    return c
                }
            })
        }

        function qq(a) {
            return JSON.parse(a, function (b, c) {
                if ("NaN" == c) var d = NaN; else if ("-Infinity" == c) d = -Infinity; else if ("Infinity" == c) d = Infinity; else if (c && "object" == typeof c && "TimeRanges" == c.__type__) d = rq(c); else if (c && "object" == typeof c && "Uint8Array" == c.__type__) d = new Uint8Array(c.entries); else if (c && "object" == typeof c && "Error" == c.__type__) {
                    b = c.contents;
                    c = Error(b.message);
                    for (d in b) c[d] = b[d];
                    d = c
                } else d = c;
                return d
            })
        }

        function rq(a) {
            return {
                length: a.length, start: function (b) {
                    return a.start[b]
                }, end: function (b) {
                    return a.end[b]
                }
            }
        }

        var sq = "ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),
            tq = "buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),
            uq = ["loop", "playbackRate"], vq = ["pause", "play"], wq = {
                getAssetUri: 2,
                getAudioLanguages: 4,
                getAudioLanguagesAndRoles: 4,
                getBufferFullness: 1,
                getBufferedInfo: 2,
                getExpiration: 2,
                getKeyStatuses: 2,
                getPlaybackRate: 2,
                getTextLanguages: 4,
                getTextLanguagesAndRoles: 4,
                getImageTracks: 2,
                getThumbnails: 2,
                isAudioOnly: 10,
                isBuffering: 1,
                isInProgress: 1,
                isLive: 10,
                isTextTrackVisible: 1,
                keySystem: 10,
                seekRange: 1,
                getLoadMode: 10,
                getManifestType: 10,
                isFullyLoaded: 1
            }, xq = {getConfiguration: 4, getStats: 5, getTextTracks: 2, getVariantTracks: 2},
            yq = {getPlayheadTimeAsDate: 1, getPresentationStartTimeAsDate: 20, getSegmentAvailabilityDuration: 20},
            zq = [["getConfiguration", "configure"]], Aq = [["isTextTrackVisible", "setTextTrackVisibility"]],
            Bq = "addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),
            Cq = ["attach", "attachCanvas", "detach", "load", "unload"];

        function Dq(a, b, c, d, e, f, g) {
            var h = this;
            this.G = a;
            this.K = g;
            this.l = new Tc(b);
            this.L = c;
            this.s = !1;
            this.A = d;
            this.F = e;
            this.N = f;
            this.h = this.m = !1;
            this.I = "";
            this.o = null;
            this.B = function () {
                return Eq(h)
            };
            this.C = function (k, l) {
                k = qq(l);
                switch (k.type) {
                    case "event":
                        var m = k.targetName, n = jg(k.event);
                        h.A(m, n);
                        break;
                    case "update":
                        m = k.update;
                        for (n in m) {
                            k = h.g[n] || {};
                            for (var p in m[n]) k[p] = m[n][p]
                        }
                        h.s && (h.L(), h.s = !1);
                        break;
                    case "asyncComplete":
                        if (n = k.id, p = k.error, k = h.i[n], delete h.i[n], k) if (p) {
                            n = new T(p.severity, p.category,
                                p.code);
                            for (m in p) n[m] = p[m];
                            k.reject(n)
                        } else k.resolve()
                }
            };
            this.g = {video: {}, player: {}};
            this.H = 0;
            this.i = {};
            this.j = null;
            Fq.add(this)
        }

        r = Dq.prototype;
        r.destroy = function () {
            Fq.delete(this);
            Gq(this);
            Hq && Iq(this);
            this.l && (this.l.stop(), this.l = null);
            this.F = this.A = null;
            this.h = this.m = !1;
            this.C = this.B = this.j = this.i = this.g = this.o = null;
            return Promise.resolve()
        };
        r.gb = function () {
            return this.h
        };
        r.Xf = function () {
            return this.I
        };
        r.init = function () {
            if (this.G.length) if (window.chrome && chrome.cast && chrome.cast.isAvailable) {
                this.m = !0;
                this.l.xc();
                var a = new chrome.cast.SessionRequest(this.G, [], null, this.K, null);
                a = new chrome.cast.ApiConfig(a, function (b) {
                    for (var c = t(Fq), d = c.next(); !d.done; d = c.next()) {
                        d = d.value;
                        var e = b;
                        d.j = new bg;
                        d.s = !0;
                        Jq(d, e)
                    }
                }, function (b) {
                    for (var c = t(Fq), d = c.next(); !d.done; d = c.next()) d = d.value, Kq = "available" == b, d.l.xc()
                }, "origin_scoped");
                chrome.cast.initialize(a, function () {
                }, function () {
                });
                Kq && this.l.Y(Lq);
                (a = Hq) &&
                a.status != chrome.cast.SessionStatus.STOPPED ? (this.j = new bg, this.s = !0, Jq(this, a)) : Hq = null
            } else window.__onGCastApiAvailable !== Mq && (Nq = window.__onGCastApiAvailable || null, window.__onGCastApiAvailable = Mq)
        };
        r.dg = function (a) {
            this.o = a;
            this.h && Oq(this, {type: "appData", appData: this.o})
        };
        r.cast = function () {
            var a = this;
            return O(function (b) {
                if (!a.m) throw new T(1, 8, 8E3);
                if (!Kq) throw new T(1, 8, 8001);
                if (a.h) throw new T(1, 8, 8002);
                a.j = new bg;
                chrome.cast.requestSession(function (c) {
                    return Jq(a, c)
                }, function (c) {
                    return Pq(a, c)
                });
                return G(b, a.j, 0)
            })
        };

        function Qq(a) {
            a.h && chrome.cast.requestSession(function (b) {
                return Jq(a, b)
            }, function (b) {
                return Pq(a, b)
            })
        }

        r.Fc = function () {
            if (this.h) {
                Gq(this);
                if (Hq) {
                    Iq(this);
                    try {
                        Hq.stop(function () {
                        }, function () {
                        })
                    } catch (a) {
                    }
                    Hq = null
                }
                Eq(this)
            }
        };
        r.get = function (a, b) {
            var c = this;
            if ("video" == a) {
                if (vq.includes(b)) return function () {
                    return c.eh.apply(c, [a, b].concat(x(Fa.apply(0, arguments))))
                }
            } else if ("player" == a) {
                if (yq[b] && !this.get("player", "isLive")()) return function () {
                };
                if (Bq.includes(b)) return function () {
                    return c.eh.apply(c, [a, b].concat(x(Fa.apply(0, arguments))))
                };
                if (Cq.includes(b)) return function () {
                    return c.Ri.apply(c, [a, b].concat(x(Fa.apply(0, arguments))))
                };
                if (wq[b] || xq[b]) return function () {
                    return c.g[a][b]
                }
            }
            return this.g[a][b]
        };
        r.set = function (a, b, c) {
            this.g[a][b] = c;
            Oq(this, {type: "set", targetName: a, property: b, value: c})
        };

        function Jq(a, b) {
            var c = a.N();
            Hq = b;
            b.addUpdateListener(a.B);
            b.addMessageListener("urn:x-cast:com.google.shaka.v2", a.C);
            Eq(a);
            Oq(a, {type: "init", initState: c, appData: a.o});
            a.j.resolve()
        }

        function Pq(a, b) {
            var c = 8003;
            switch (b.code) {
                case "cancel":
                    c = 8004;
                    break;
                case "timeout":
                    c = 8005;
                    break;
                case "receiver_unavailable":
                    c = 8006
            }
            a.j.reject(new T(2, 8, c, b))
        }

        r.eh = function (a, b) {
            Oq(this, {type: "call", targetName: a, methodName: b, args: Fa.apply(2, arguments)})
        };
        r.Ri = function (a, b) {
            var c = Fa.apply(2, arguments), d = new bg, e = this.H.toString();
            this.H++;
            this.i[e] = d;
            try {
                Oq(this, {type: "asyncCall", targetName: a, methodName: b, args: c, id: e})
            } catch (f) {
                d.reject(f)
            }
            return d
        };

        function Iq(a) {
            var b = Hq;
            b.removeUpdateListener(a.B);
            b.removeMessageListener("urn:x-cast:com.google.shaka.v2", a.C)
        }

        function Eq(a) {
            var b = Hq ? "connected" == Hq.status : !1;
            if (a.h && !b) {
                a.F();
                for (var c in a.g) a.g[c] = {};
                Gq(a)
            }
            a.h = b;
            a.I = b ? Hq.receiver.friendlyName : "";
            a.l.xc()
        }

        function Gq(a) {
            for (var b in a.i) {
                var c = a.i[b];
                delete a.i[b];
                c.reject(new T(1, 7, 7E3))
            }
        }

        function Oq(a, b) {
            b = pq(b);
            var c = Hq;
            try {
                c.sendMessage("urn:x-cast:com.google.shaka.v2", b, function () {
                }, cb)
            } catch (d) {
                throw b = new T(2, 8, 8005, d), c = new U("error", (new Map).set("detail", b)), a.A("player", c), a.Fc(), b;
            }
        }

        var Lq = .02, Kq = !1, Hq = null, Nq = null, Fq = new Set;

        function Mq(a) {
            Nq ? window.__onGCastApiAvailable = Nq : delete window.__onGCastApiAvailable;
            Nq = null;
            if (a) for (var b = t(Fq), c = b.next(); !c.done; c = b.next()) c.value.init();
            "function" === typeof window.__onGCastApiAvailable && window.__onGCastApiAvailable(a)
        };

        function Rq(a, b, c, d) {
            d = void 0 === d ? !1 : d;
            lg.call(this);
            var e = this;
            this.i = a;
            this.h = b;
            this.m = this.o = this.j = this.s = this.l = null;
            this.C = c;
            this.B = d;
            this.A = new Map;
            this.g = new Dq(c, function () {
                return Sq(e)
            }, function () {
                return Tq(e)
            }, function (f, g) {
                return Uq(e, f, g)
            }, function () {
                return Vq(e)
            }, function () {
                return Wq(e)
            }, d);
            Xq(this)
        }

        oa(Rq, lg);
        r = Rq.prototype;
        r.destroy = function (a) {
            a && this.g.Fc();
            this.m && (this.m.release(), this.m = null);
            a = [];
            this.h && (a.push(this.h.destroy()), this.h = null);
            this.g && (a.push(this.g.destroy()), this.g = null);
            this.s = this.l = this.i = null;
            lg.prototype.release.call(this);
            return Promise.all(a)
        };
        r.mi = function () {
            return this.l
        };
        r.bi = function () {
            return this.s
        };
        r.Hh = function () {
            return this.g.m && Kq
        };
        r.gb = function () {
            return this.g.gb()
        };
        r.Xf = function () {
            return this.g.Xf()
        };
        r.cast = function () {
            var a = this;
            return O(function (b) {
                return 1 == b.g ? G(b, a.g.cast(), 2) : a.h ? G(b, a.h.dc(), 0) : b.return()
            })
        };
        r.dg = function (a) {
            this.g.dg(a)
        };
        r.gj = function () {
            Qq(this.g)
        };
        r.Fc = function () {
            this.g.Fc()
        };
        r.Ih = function (a, b) {
            b = void 0 === b ? !1 : b;
            var c = this;
            return O(function (d) {
                if (1 == d.g) {
                    if (a == c.C && b == c.B) return d.return();
                    c.C = a;
                    c.B = b;
                    c.g.Fc();
                    return G(d, c.g.destroy(), 2)
                }
                c.g = null;
                c.g = new Dq(a, function () {
                    return Sq(c)
                }, function () {
                    return Tq(c)
                }, function (e, f) {
                    return Uq(c, e, f)
                }, function () {
                    return Vq(c)
                }, function () {
                    return Wq(c)
                }, b);
                c.g.init();
                H(d)
            })
        };

        function Xq(a) {
            a.g.init();
            a.m = new gb;
            for (var b = t(sq), c = b.next(); !c.done; c = b.next()) a.m.D(a.i, c.value, function (f) {
                a.g.gb() || (f = jg(f), a.j.dispatchEvent(f))
            });
            for (var d in kg) a.m.D(a.h, kg[d], function (f) {
                a.g.gb() || a.o.dispatchEvent(f)
            });
            a.l = {};
            b = {};
            for (var e in a.i) b.$c = e, Object.defineProperty(a.l, b.$c, {
                configurable: !1,
                enumerable: !0,
                get: function (f) {
                    return function () {
                        return Yq(a, f.$c)
                    }
                }(b),
                set: function (f) {
                    return function (g) {
                        var h = f.$c;
                        a.g.gb() ? a.g.set("video", h, g) : a.i[h] = g
                    }
                }(b)
            }), b = {$c: b.$c};
            a.s = {};
            Zq(a,
                function (f) {
                    Object.defineProperty(a.s, f, {
                        configurable: !1, enumerable: !0, get: function () {
                            return $q(a, f)
                        }
                    })
                });
            ar(a);
            a.j = new lg;
            a.j.Ge = a.l;
            a.o = new lg;
            a.o.Ge = a.s
        }

        function ar(a) {
            var b = new Map;
            Zq(a, function (c, d) {
                b.has(d) ? (d = b.get(d), c.length < d.length ? a.A.set(c, d) : a.A.set(d, c)) : b.set(d, c)
            })
        }

        function Zq(a, b) {
            function c(k) {
                return "constructor" == k || "function" != typeof d[k] ? !1 : !e.has(k)
            }

            var d = a.h, e = new Set, f;
            for (f in d) c(f) && (e.add(f), b(f, d[f]));
            a = Object.getPrototypeOf(d);
            for (f = Object.getPrototypeOf({}); a && a != f;) {
                for (var g = t(Object.getOwnPropertyNames(a)), h = g.next(); !h.done; h = g.next()) h = h.value, c(h) && (e.add(h), b(h, d[h]));
                a = Object.getPrototypeOf(a)
            }
        }

        function Wq(a) {
            var b = {video: {}, player: {}, playerAfterLoad: {}, manifest: a.h.Gc(), startTime: null};
            a.i.pause();
            for (var c = t(uq), d = c.next(); !d.done; d = c.next()) d = d.value, b.video[d] = a.i[d];
            a.i.ended || (b.startTime = a.i.currentTime);
            c = t(zq);
            for (d = c.next(); !d.done; d = c.next()) {
                var e = d.value;
                d = e[1];
                e = a.h[e[0]]();
                b.player[d] = e
            }
            c = t(Aq);
            for (d = c.next(); !d.done; d = c.next()) e = d.value, d = e[1], e = a.h[e[0]](), b.playerAfterLoad[d] = e;
            return b
        }

        function Sq(a) {
            var b = new U("caststatuschanged");
            a.dispatchEvent(b)
        }

        function Tq(a) {
            var b = new U(a.l.paused ? "pause" : "play");
            a.j.dispatchEvent(b)
        }

        function Vq(a) {
            for (var b = t(zq), c = b.next(); !c.done; c = b.next()) {
                var d = c.value;
                c = d[1];
                d = a.g.get("player", d[0])();
                a.h[c](d)
            }
            var e = a.g.get("player", "getAssetUri")();
            d = a.g.get("video", "ended");
            b = Promise.resolve();
            var f = a.i.autoplay;
            c = null;
            d || (c = a.g.get("video", "currentTime"));
            var g;
            (d = a.g.get("player", "getTextTracks")()) && d.length && (g = d.find(function (l) {
                return l.active
            }));
            var h = a.g.get("player", "isTextTrackVisible")();
            e && (a.i.autoplay = !1, b = a.h.load(e, c));
            var k = {};
            c = t(uq);
            for (d = c.next(); !d.done; d = c.next()) d =
                d.value, k[d] = a.g.get("video", d);
            b.then(function () {
                if (a.i) {
                    for (var l = t(uq), m = l.next(); !m.done; m = l.next()) m = m.value, a.i[m] = k[m];
                    l = t(Aq);
                    for (m = l.next(); !m.done; m = l.next()) {
                        var n = m.value;
                        m = n[1];
                        n = a.g.get("player", n[0])();
                        a.h[m](n)
                    }
                    a.h.nh(h);
                    g && a.h.bg(g.language, g.roles, g.forced);
                    a.i.autoplay = f;
                    e && a.i.play()
                }
            }, function (l) {
                l = (new Map).set("detail", l);
                l = new U("error", l);
                a.h.dispatchEvent(l)
            })
        }

        function Yq(a, b) {
            if ("addEventListener" == b) return function (d, e, f) {
                return a.j.addEventListener(d, e, f)
            };
            if ("removeEventListener" == b) return function (d, e, f) {
                return a.j.removeEventListener(d, e, f)
            };
            if (a.g.gb() && 0 == Object.keys(a.g.g.video).length) {
                var c = a.i[b];
                if ("function" != typeof c) return c
            }
            return a.g.gb() ? a.g.get("video", b) : (b = a.i[b], "function" == typeof b && (b = b.bind(a.i)), b)
        }

        function $q(a, b) {
            a.A.has(b) && (b = a.A.get(b));
            if ("addEventListener" == b) return function (c, d, e) {
                return a.o.addEventListener(c, d, e)
            };
            if ("removeEventListener" == b) return function (c, d, e) {
                return a.o.removeEventListener(c, d, e)
            };
            if ("getMediaElement" == b) return function () {
                return a.l
            };
            if ("getSharedConfiguration" == b) return a.g.get("player", "getConfiguration");
            if ("getNetworkingEngine" == b) return function () {
                return a.h.zb()
            };
            if ("getDrmEngine" == b) return function () {
                return a.h.B
            };
            if ("getAdManager" == b) return function () {
                return a.h.Ig()
            };
            if ("setVideoContainer" == b) return function (c) {
                return a.h.rh(c)
            };
            if (a.g.gb()) {
                if ("getManifest" == b || "drmInfo" == b) return function () {
                    $a(b + "() does not work while casting!");
                    return null
                };
                if ("attach" == b || "detach" == b) return function () {
                    $a(b + "() does not work while casting!");
                    return Promise.resolve()
                }
            }
            return a.g.gb() && 0 == Object.keys(a.g.g.video).length && (wq[b] || xq[b]) || !a.g.gb() ? a.h[b].bind(a.h) : a.g.get("player", b)
        }

        function Uq(a, b, c) {
            a.g.gb() && ("video" == b ? a.j.dispatchEvent(c) : "player" == b && a.o.dispatchEvent(c))
        }

        S("shaka.cast.CastProxy", Rq);
        Rq.prototype.changeReceiverId = Rq.prototype.Ih;
        Rq.prototype.forceDisconnect = Rq.prototype.Fc;
        Rq.prototype.suggestDisconnect = Rq.prototype.gj;
        Rq.prototype.setAppData = Rq.prototype.dg;
        Rq.prototype.cast = Rq.prototype.cast;
        Rq.prototype.receiverName = Rq.prototype.Xf;
        Rq.prototype.isCasting = Rq.prototype.gb;
        Rq.prototype.canCast = Rq.prototype.Hh;
        Rq.prototype.getPlayer = Rq.prototype.bi;
        Rq.prototype.getVideo = Rq.prototype.mi;
        Rq.prototype.destroy = Rq.prototype.destroy;

        function br(a, b, c, d) {
            lg.call(this);
            var e = this;
            this.g = a;
            this.h = b;
            this.j = new gb;
            this.H = {video: a, player: b};
            this.F = c || function () {
            };
            this.I = d || function (f) {
                return f
            };
            this.i = null;
            this.G = !1;
            this.o = !0;
            this.m = 0;
            this.B = !1;
            this.A = !0;
            this.s = this.l = null;
            this.C = new Tc(function () {
                cr(e)
            });
            dr(this)
        }

        oa(br, lg);
        r = br.prototype;
        r.isConnected = function () {
            return this.G
        };
        r.ui = function () {
            return this.o
        };
        r.cj = function (a) {
            this.i = a
        };
        r.Kh = function () {
            this.i = null
        };
        r.dj = function (a) {
            this.i || (this.i = {metadataType: cast.receiver.media.MetadataType.GENERIC});
            this.i.title = a
        };
        r.bj = function (a) {
            this.i || (this.i = {metadataType: cast.receiver.media.MetadataType.GENERIC});
            this.i.images = [{url: a}]
        };
        r.aj = function (a) {
            this.i || (this.i = {});
            this.i.artist = a;
            this.i.metadataType = cast.receiver.media.MetadataType.MUSIC_TRACK
        };
        r.destroy = function () {
            var a = this, b, c;
            return O(function (d) {
                if (1 == d.g) return a.j && (a.j.release(), a.j = null), b = [], a.h && (b.push(a.h.destroy()), a.h = null), a.C && (a.C.stop(), a.C = null), a.g = null, a.H = null, a.F = null, a.G = !1, a.o = !0, a.l = null, a.s = null, lg.prototype.release.call(a), G(d, Promise.all(b), 2);
                c = cast.receiver.CastReceiverManager.getInstance();
                c.stop();
                H(d)
            })
        };

        function dr(a) {
            var b = cast.receiver.CastReceiverManager.getInstance();
            b.onSenderConnected = function () {
                return er(a)
            };
            b.onSenderDisconnected = function () {
                return er(a)
            };
            b.onSystemVolumeChanged = function () {
                var e = cast.receiver.CastReceiverManager.getInstance().getSystemVolume();
                e && fr(a, {type: "update", update: {video: {volume: e.level, muted: e.muted}}}, a.l);
                fr(a, {type: "event", targetName: "video", event: {type: "volumechange"}}, a.l)
            };
            a.s = b.getCastMessageBus("urn:x-cast:com.google.cast.media");
            a.s.onMessage = function (e) {
                return gr(a,
                    e)
            };
            a.l = b.getCastMessageBus("urn:x-cast:com.google.shaka.v2");
            a.l.onMessage = function (e) {
                return hr(a, e)
            };
            b.start();
            b = t(sq);
            for (var c = b.next(); !c.done; c = b.next()) a.j.D(a.g, c.value, function (e) {
                return ir(a, "video", e)
            });
            for (var d in kg) a.j.D(a.h, kg[d], function (e) {
                return ir(a, "player", e)
            });
            a.j.D(a.g, "loadeddata", function () {
                a.B = !0
            });
            a.j.D(a.h, "loading", function () {
                a.o = !1;
                jr(a)
            });
            a.j.D(a.g, "playing", function () {
                a.o = !1;
                jr(a)
            });
            a.j.D(a.g, "pause", function () {
                jr(a)
            });
            a.j.D(a.h, "unloading", function () {
                a.o = !0;
                jr(a)
            });
            a.j.D(a.g, "ended", function () {
                (new Tc(function () {
                    a.g && a.g.ended && (a.o = !0, jr(a))
                })).Y(kr)
            })
        }

        function er(a) {
            a.m = 0;
            a.A = !0;
            a.G = 0 != cast.receiver.CastReceiverManager.getInstance().getSenders().length;
            jr(a)
        }

        function jr(a) {
            var b;
            O(function (c) {
                if (1 == c.g) return G(c, Promise.resolve(), 2);
                if (!a.h) return c.return();
                b = new U("caststatuschanged");
                a.dispatchEvent(b);
                lr(a) || mr(a);
                H(c)
            })
        }

        function nr(a, b, c) {
            var d, e, f, g, h, k, l, m, n, p;
            O(function (q) {
                switch (q.g) {
                    case 1:
                        for (d in b.player) e = b.player[d], a.h[d](e);
                        a.F(c);
                        f = a.g.autoplay;
                        return b.manifest ? (a.g.autoplay = !1, sa(q, 5), G(q, a.h.load(b.manifest, b.startTime), 7)) : G(q, Promise.resolve(), 3);
                    case 7:
                        va(q, 3);
                        break;
                    case 5:
                        return g = wa(q), h = (new Map).set("detail", g), k = new U("error", h), a.h && a.h.dispatchEvent(k), q.return();
                    case 3:
                        if (!a.h) return q.return();
                        for (l in b.video) m = b.video[l], a.g[l] = m;
                        for (n in b.playerAfterLoad) p = b.playerAfterLoad[n], a.h[n](p);
                        a.g.autoplay = f;
                        b.manifest && (a.g.play(), mr(a));
                        H(q)
                }
            })
        }

        function ir(a, b, c) {
            a.h && (cr(a), fr(a, {type: "event", targetName: b, event: c}, a.l))
        }

        function cr(a) {
            a.C.Y(or);
            for (var b = {
                video: {},
                player: {}
            }, c = t(tq), d = c.next(); !d.done; d = c.next()) d = d.value, b.video[d] = a.g[d];
            if (a.h.V()) for (var e in yq) 0 == a.m % yq[e] && (b.player[e] = a.h[e]());
            for (var f in wq) 0 == a.m % wq[f] && (b.player[f] = a.h[f]());
            if (c = cast.receiver.CastReceiverManager.getInstance().getSystemVolume()) b.video.volume = c.level, b.video.muted = c.muted;
            fr(a, {type: "update", update: b}, a.l);
            for (var g in xq) 0 == a.m % xq[g] && (b = {player: {}}, b.player[g] = a.h[g](), fr(a, {
                type: "update",
                update: b
            }, a.l));
            a.B && (a.m +=
                1);
            lr(a)
        }

        function lr(a) {
            return a.A && (a.g.duration || a.h.V()) ? (pr(a), a.A = !1, !0) : !1
        }

        function pr(a, b) {
            var c = {contentId: a.h.Gc(), streamType: a.h.V() ? "LIVE" : "BUFFERED", contentType: ""};
            a.h.V() || (c.duration = a.g.duration);
            a.i && (c.metadata = a.i);
            mr(a, void 0 === b ? 0 : b, c)
        }

        function hr(a, b) {
            var c = qq(b.data);
            switch (c.type) {
                case "init":
                    a.m = 0;
                    a.B = !1;
                    a.A = !0;
                    nr(a, c.initState, c.appData);
                    cr(a);
                    break;
                case "appData":
                    a.F(c.appData);
                    break;
                case "set":
                    var d = c.targetName, e = c.property;
                    c = c.value;
                    if ("video" == d) if (b = cast.receiver.CastReceiverManager.getInstance(), "volume" == e) {
                        b.setSystemVolumeLevel(c);
                        break
                    } else if ("muted" == e) {
                        b.setSystemVolumeMuted(c);
                        break
                    }
                    a.H[d][e] = c;
                    break;
                case "call":
                    d = a.H[c.targetName];
                    d[c.methodName].apply(d, c.args);
                    break;
                case "asyncCall":
                    d = c.targetName;
                    e = c.methodName;
                    "player" == d && "load" == e && (a.m = 0, a.B = !1);
                    var f = c.id, g = b.senderId;
                    b = a.H[d];
                    c = b[e].apply(b, c.args);
                    "player" == d && "load" == e && (c = c.then(function () {
                        a.A = !0
                    }));
                    c.then(function () {
                        return qr(a, g, f, null)
                    }, function (h) {
                        return qr(a, g, f, h)
                    })
            }
        }

        function gr(a, b) {
            var c = qq(b.data);
            switch (c.type) {
                case "PLAY":
                    a.g.play();
                    mr(a);
                    break;
                case "PAUSE":
                    a.g.pause();
                    mr(a);
                    break;
                case "SEEK":
                    b = c.currentTime;
                    var d = c.resumeState;
                    null != b && (a.g.currentTime = Number(b));
                    d && "PLAYBACK_START" == d ? (a.g.play(), mr(a)) : d && "PLAYBACK_PAUSE" == d && (a.g.pause(), mr(a));
                    break;
                case "STOP":
                    a.h.dc().then(function () {
                        a.h && mr(a)
                    });
                    break;
                case "GET_STATUS":
                    pr(a, Number(c.requestId));
                    break;
                case "VOLUME":
                    d = c.volume;
                    b = d.level;
                    d = d.muted;
                    var e = a.g.volume, f = a.g.muted;
                    null != b && (a.g.volume = Number(b));
                    null != d && (a.g.muted = d);
                    e == a.g.volume && f == a.g.muted || mr(a);
                    break;
                case "LOAD":
                    a.m = 0;
                    a.B = !1;
                    a.A = !1;
                    b = c.media;
                    d = c.currentTime;
                    e = a.I(b.contentId);
                    f = c.autoplay || !0;
                    a.F(b.customData);
                    f && (a.g.autoplay = !0);
                    a.h.load(e, d).then(function () {
                        a.h && pr(a)
                    }).catch(function (g) {
                        var h = "LOAD_FAILED";
                        7 == g.category && 7E3 == g.code && (h = "LOAD_CANCELLED");
                        fr(a, {requestId: Number(c.requestId), type: h}, a.s)
                    });
                    break;
                default:
                    fr(a, {requestId: Number(c.requestId), type: "INVALID_REQUEST", reason: "INVALID_COMMAND"}, a.s)
            }
        }

        function qr(a, b, c, d) {
            a.h && fr(a, {type: "asyncComplete", id: c, error: d}, a.l, b)
        }

        function fr(a, b, c, d) {
            a.G && (a = pq(b), d ? c.getCastChannel(d).send(a) : c.broadcast(a))
        }

        function mr(a, b, c) {
            c = void 0 === c ? null : c;
            var d = {
                mediaSessionId: 0,
                playbackRate: a.g.playbackRate,
                playerState: a.o ? rr : a.h.Jf() ? sr : a.g.paused ? tr : ur,
                currentTime: a.g.currentTime,
                supportedMediaCommands: 63,
                volume: {level: a.g.volume, muted: a.g.muted}
            };
            c && (d.media = c);
            fr(a, {requestId: void 0 === b ? 0 : b, type: "MEDIA_STATUS", status: [d]}, a.s)
        }

        S("shaka.cast.CastReceiver", br);
        br.prototype.destroy = br.prototype.destroy;
        br.prototype.setContentArtist = br.prototype.aj;
        br.prototype.setContentImage = br.prototype.bj;
        br.prototype.setContentTitle = br.prototype.dj;
        br.prototype.clearContentMetadata = br.prototype.Kh;
        br.prototype.setContentMetadata = br.prototype.cj;
        br.prototype.isIdle = br.prototype.ui;
        br.prototype.isConnected = br.prototype.isConnected;
        var or = .5, kr = 5, rr = "IDLE", ur = "PLAYING", sr = "BUFFERING", tr = "PAUSED";

        function vr(a, b, c, d, e) {
            if (d >= e) return null;
            for (var f = -1, g = -1, h = 0; h < c.length; h++) if (c[h].some(function (z) {
                return null != z && "" != z.g.trim()
            })) {
                f = h;
                break
            }
            for (h = c.length - 1; 0 <= h; h--) if (c[h].some(function (z) {
                return null != z && "" != z.g.trim()
            })) {
                g = h;
                break
            }
            if (-1 === f || -1 === g) return null;
            for (var k = h = !1, l = "white", m = "black", n = wr(d, e, h, k, l, m); f <= g; f++) {
                for (var p = c[f], q = -1, u = -1, w = 0; w < p.length; w++) if (null != p[w] && "" !== p[w].g.trim()) {
                    q = w;
                    break
                }
                for (w = p.length - 1; 0 <= w; w--) if (null != p[w] && "" !== p[w].g.trim()) {
                    u = w;
                    break
                }
                if (-1 ===
                    q || -1 === u) p = xr(d, e), a.nestedCues.push(p); else {
                    for (; q <= u; q++) if (w = p[q]) {
                        var v = w.l, A = w.i, y = w.j, D = w.h;
                        if (v != h || A != k || y != l || D != m) n.payload && a.nestedCues.push(n), n = wr(d, e, v, A, y, D), h = v, k = A, l = y, m = D;
                        n.payload += w.g
                    } else n.payload += " ";
                    n.payload && a.nestedCues.push(n);
                    f !== g && (n = xr(d, e), a.nestedCues.push(n));
                    n = wr(d, e, h, k, l, m)
                }
            }
            return a.nestedCues.length ? {cue: a, stream: b} : null
        }

        function wr(a, b, c, d, e, f) {
            a = new Sb(a, b, "");
            c && a.textDecoration.push("underline");
            d && (a.fontStyle = "italic");
            a.color = e;
            a.backgroundColor = f;
            return a
        }

        function xr(a, b) {
            a = new Sb(a, b, "");
            a.lineBreak = !0;
            return a
        }

        function yr(a, b, c, d, e) {
            this.g = a;
            this.l = b;
            this.i = c;
            this.h = d;
            this.j = e
        };

        function zr(a, b) {
            this.i = [];
            this.g = 1;
            this.h = 0;
            this.A = a;
            this.s = b;
            this.j = this.m = !1;
            this.l = "white";
            this.o = "black";
            Ar(this)
        }

        function Br(a, b, c) {
            var d = "CC" + ((a.A << 1 | a.s) + 1), e = new Sb(b, c, "");
            e.lineInterpretation = 1;
            var f = Cr.get(a.g);
            f && (e.line = f);
            (b = vr(e, d, a.i, b, c)) && 15 < a.g + b.cue.nestedCues.length - 3 && (f = Cr.get(a.g + 3 - b.cue.nestedCues.length)) && (e.line = f);
            return b
        }

        function Ar(a) {
            Dr(a, 0, 15);
            a.g = 1
        }

        function Er(a, b, c) {
            if (!(32 > c || 127 < c)) {
                var d = "";
                switch (b) {
                    case Fr:
                        d = Gr.has(c) ? Gr.get(c) : String.fromCharCode(c);
                        break;
                    case Hr:
                        d = Ir.get(c);
                        break;
                    case Jr:
                        a.i[a.g].pop();
                        d = Kr.get(c);
                        break;
                    case Lr:
                        a.i[a.g].pop(), d = Mr.get(c)
                }
                d && a.i[a.g].push(new yr(d, a.m, a.j, a.o, a.l))
            }
        }

        function Nr(a, b, c, d) {
            if (!(0 > c || 0 > b)) if (b >= c) for (--d; 0 <= d; d--) a.i[b + d] = a.i[c + d].map(function (f) {
                return f
            }); else for (var e = 0; e < d; e++) a.i[b + e] = a.i[c + e].map(function (f) {
                return f
            })
        }

        function Dr(a, b, c) {
            for (var d = 0; d <= c; d++) a.i[b + d] = []
        }

        var Fr = 0, Hr = 1, Jr = 2, Lr = 3,
            Gr = new Map([[39, "\u2019"], [42, "\u00e1"], [92, "\u00e9"], [92, "\u00e9"], [94, "\u00ed"], [95, "\u00f3"], [96, "\u00fa"], [123, "\u00e7"], [124, "\u00f7"], [125, "\u00d1"], [126, "\u00f1"], [127, "\u2588"]]),
            Ir = new Map([[48, "\u00ae"], [49, "\u00b0"], [50, "\u00bd"], [51, "\u00bf"], [52, "\u2122"], [53, "\u00a2"], [54, "\u00a3"], [55, "\u266a"], [56, "\u00e0"], [57, " "], [58, "\u00e8"], [59, "\u00e2"], [60, "\u00ea"], [61, "\u00ee"], [62, "\u00f4"], [63, "\u00fb"]]),
            Kr = new Map([[32, "\u00c1"], [33, "\u00c9"], [34, "\u00d3"], [35,
                "\u00da"], [36, "\u00dc"], [37, "\u00fc"], [38, "\u2018"], [39, "\u00a1"], [40, "*"], [41, "'"], [42, "\u2500"], [43, "\u00a9"], [44, "\u2120"], [45, "\u00b7"], [46, "\u201c"], [47, "\u201d"], [48, "\u00c0"], [49, "\u00c2"], [50, "\u00c7"], [51, "\u00c8"], [52, "\u00ca"], [53, "\u00cb"], [54, "\u00eb"], [55, "\u00ce"], [56, "\u00cf"], [57, "\u00ef"], [58, "\u00d4"], [59, "\u00d9"], [60, "\u00f9"], [61, "\u00db"], [62, "\u00ab"], [63, "\u00bb"]]),
            Mr = new Map([[32, "\u00c3"], [33, "\u00e3"], [34, "\u00cd"], [35, "\u00cc"], [36, "\u00ec"], [37, "\u00d2"], [38, "\u00f2"],
                [39, "\u00d5"], [40, "\u00f5"], [41, "{"], [42, "}"], [43, "\\"], [44, "^"], [45, "_"], [46, "|"], [47, "~"], [48, "\u00c4"], [49, "\u00e4"], [50, "\u00d6"], [51, "\u00f6"], [52, "\u00df"], [53, "\u00a5"], [54, "\u00a4"], [55, "\u2502"], [56, "\u00c5"], [57, "\u00e5"], [58, "\u00d8"], [59, "\u00f8"], [60, "\u250c"], [61, "\u2510"], [62, "\u2514"], [63, "\u2518"]]),
            Cr = new Map([[1, 10], [2, 15.33], [3, 20.66], [4, 26], [5, 31.33], [6, 36.66], [7, 42], [8, 47.33], [9, 52.66], [10, 58], [11, 63.33], [12, 68.66], [13, 74], [14, 79.33], [15, 84.66]]);

        function Or(a, b) {
            this.h = Pr;
            this.o = new zr(a, b);
            this.i = new zr(a, b);
            this.g = this.j = new zr(a, b);
            this.l = 0;
            this.m = null
        }

        function Qr(a, b, c) {
            a.g = a.i;
            var d = a.g, e = null;
            a.h !== Rr && a.h !== Sr && (e = Br(d, a.l, c), c = a.i, c.g = 0 < c.h ? c.h : 0, Dr(c, 0, 15), c = a.j, c.g = 0 < c.h ? c.h : 0, Dr(c, 0, 15), d.g = 15);
            a.h = Rr;
            d.h = b;
            return e
        }

        function Tr(a) {
            a.h = Ur;
            a.g = a.j;
            a.g.h = 0
        }

        function Vr(a) {
            ab("Cea608DataChannel", "CEA-608 text mode entered, but is unsupported");
            a.g = a.o;
            a.h = Sr
        }

        var Pr = 0, Ur = 1, Rr = 3, Sr = 4, Wr = "black green blue cyan red yellow magenta black".split(" "),
            Xr = "white green blue cyan red yellow magenta white_italics".split(" ");

        function Yr(a, b) {
            this.I = b;
            this.N = a;
            this.K = this.l = !1;
            this.m = this.o = this.G = this.L = this.H = 0;
            this.F = Zr;
            this.i = [];
            this.g = this.h = this.j = 0;
            this.C = this.A = !1;
            this.B = "white";
            this.s = "black";
            $r(this)
        }

        function $r(a) {
            a.i = [];
            for (var b = 0; 16 > b; b++) a.i.push(as())
        }

        function as() {
            for (var a = [], b = 0; 42 > b; b++) a.push(null);
            return a
        }

        function bs(a, b) {
            cs(a) && (a.i[a.h][a.g] = new yr(b, a.C, a.A, a.s, a.B), a.g++)
        }

        function cs(a) {
            var b = a.g < a.m && 0 <= a.g;
            return a.h < a.o && 0 <= a.h && b
        }

        Yr.prototype.isVisible = function () {
            return this.l
        };

        function ds(a, b, c) {
            var d = new Sb(a.j, b, "");
            d.textAlign = a.F === es ? "left" : a.F === fs ? "right" : Ub;
            var e = d.region;
            a.I && (e.id += "svc" + a.I);
            e.id += "win" + a.N;
            e.height = a.o;
            e.width = a.m;
            e.heightUnits = 2;
            e.widthUnits = 2;
            e.viewportAnchorX = a.H;
            e.viewportAnchorY = a.L;
            e.viewportAnchorUnits = a.K ? Lb : 2;
            switch (a.G) {
                case gs:
                    e.regionAnchorX = 0;
                    e.regionAnchorY = 0;
                    break;
                case hs:
                    e.regionAnchorX = 50;
                    e.regionAnchorY = 0;
                    break;
                case is:
                    e.regionAnchorX = 100;
                    e.regionAnchorY = 0;
                    break;
                case js:
                    e.regionAnchorX = 0;
                    e.regionAnchorY = 50;
                    break;
                case ks:
                    e.regionAnchorX =
                        50;
                    e.regionAnchorY = 50;
                    break;
                case ls:
                    e.regionAnchorX = 100;
                    e.regionAnchorY = 50;
                    break;
                case ms:
                    e.regionAnchorX = 0;
                    e.regionAnchorY = 100;
                    break;
                case ns:
                    e.regionAnchorX = 50;
                    e.regionAnchorY = 100;
                    break;
                case os:
                    e.regionAnchorX = 100, e.regionAnchorY = 100
            }
            if (c = vr(d, "svc" + c, a.i, a.j, b)) a.j = b;
            return c
        }

        var es = 0, fs = 1, Zr = 2, gs = 0, hs = 1, is = 2, js = 3, ks = 4, ls = 5, ms = 6, ns = 7, os = 8;

        function ps() {
            this.i = [];
            this.h = null;
            this.g = 0
        }

        function qs(a, b) {
            3 === b.type ? (a.g = 2 * (b.value & 63) - 1, a.h = []) : a.h && (0 < a.g && (a.h.push(b), a.g--), 0 === a.g && (a.i.push(new rs(a.h)), a.h = null, a.g = 0))
        }

        function rs(a) {
            this.g = 0;
            this.h = a
        }

        rs.prototype.oa = function () {
            return this.g < this.h.length
        };
        rs.prototype.ua = function () {
            return this.g
        };

        function ss(a) {
            if (!a.oa()) throw new T(2, 2, 3E3);
            return a.h[a.g++]
        }

        rs.prototype.skip = function (a) {
            if (this.g + a > this.h.length) throw new T(2, 2, 3E3);
            this.g += a
        };

        function ts(a) {
            this.i = a;
            this.h = [null, null, null, null, null, null, null, null];
            this.g = null
        }

        function us(a, b, c, d) {
            if (128 <= c && 135 >= c) d = c & 7, a.h[d] && (a.g = a.h[d]); else {
                if (136 === c) {
                    c = ss(b).value;
                    b = null;
                    c = t(vs(a, c));
                    for (var e = c.next(); !e.done; e = c.next()) e = a.h[e.value], e.isVisible() && (b = ds(e, d, a.i)), $r(e);
                    return b
                }
                if (137 === c) for (b = ss(b).value, b = t(vs(a, b)), c = b.next(); !c.done; c = b.next()) c = a.h[c.value], c.isVisible() || (c.j = d), c.l = !0; else {
                    if (138 === c) {
                        c = ss(b).value;
                        b = null;
                        c = t(vs(a, c));
                        for (e = c.next(); !e.done; e = c.next()) e = a.h[e.value], e.isVisible() && (b = ds(e, d, a.i)), e.l = !1;
                        return b
                    }
                    if (139 === c) {
                        c = ss(b).value;
                        b = null;
                        c = t(vs(a, c));
                        for (e = c.next(); !e.done; e = c.next()) e = a.h[e.value], e.isVisible() ? b = ds(e, d, a.i) : e.j = d, e.l = !e.l;
                        return b
                    }
                    if (140 === c) return b = ss(b).value, ws(a, b, d);
                    if (143 === c) return d = ws(a, 255, d), xs(a), d;
                    if (144 === c) b.skip(1), d = ss(b).value, a.g && (a.g.A = 0 < (d & 128), a.g.C = 0 < (d & 64)); else if (145 === c) d = ss(b).value, c = ss(b).value, b.skip(1), a.g && (b = ys((c & 48) >> 4, (c & 12) >> 2, c & 3), a.g.B = ys((d & 48) >> 4, (d & 12) >> 2, d & 3), a.g.s = b); else if (146 === c) d = ss(b).value, b = ss(b).value, a.g && (a = a.g, a.h = d & 15, a.g = b & 63); else if (151 === c) b.skip(1),
                        b.skip(1), d = ss(b).value, b.skip(1), a.g && (a.g.F = d & 3); else if (152 <= c && 159 >= c) {
                        c = (c & 15) - 8;
                        e = null !== a.h[c];
                        if (!e) {
                            var f = new Yr(c, a.i);
                            f.j = d;
                            a.h[c] = f
                        }
                        d = ss(b).value;
                        f = ss(b).value;
                        var g = ss(b).value, h = ss(b).value, k = ss(b).value;
                        b = ss(b).value;
                        e && 0 === (b & 7) || (b = a.h[c], b.h = 0, b.g = 0, b.C = !1, b.A = !1, b.B = "white", b.s = "black");
                        b = a.h[c];
                        b.l = 0 < (d & 32);
                        b.L = f & 127;
                        b.H = g;
                        b.G = (h & 240) >> 4;
                        b.K = 0 < (f & 128);
                        b.o = (h & 15) + 1;
                        b.m = (k & 63) + 1;
                        a.g = a.h[c]
                    }
                }
            }
            return null
        }

        function vs(a, b) {
            for (var c = [], d = 0; 8 > d; d++) 1 === (b & 1) && a.h[d] && c.push(d), b >>= 1;
            return c
        }

        function ws(a, b, c) {
            var d = null;
            b = t(vs(a, b));
            for (var e = b.next(); !e.done; e = b.next()) {
                e = e.value;
                var f = a.h[e];
                f.isVisible() && (d = ds(f, c, a.i));
                a.h[e] = null
            }
            return d
        }

        function xs(a) {
            a.g = null;
            a.h = [null, null, null, null, null, null, null, null]
        }

        function ys(a, b, c) {
            var d = {0: 0, 1: 0, 2: 1, 3: 1};
            a = d[a];
            b = d[b];
            c = d[c];
            return zs[a << 2 | b << 1 | c]
        }

        var As = new Map([[32, " "], [33, "\u00a0"], [37, "\u2026"], [42, "\u0160"], [44, "\u0152"], [48, "\u2588"], [49, "\u2018"], [50, "\u2019"], [51, "\u201c"], [52, "\u201d"], [53, "\u2022"], [57, "\u2122"], [58, "\u0161"], [60, "\u0153"], [61, "\u2120"], [63, "\u0178"], [118, "\u215b"], [119, "\u215c"], [120, "\u215d"], [121, "\u215e"], [122, "\u2502"], [123, "\u2510"], [124, "\u2514"], [125, "\u2500"], [126, "\u2518"], [127, "\u250c"]]),
            zs = "black blue green cyan red magenta yellow white".split(" ");

        function Bs() {
            this.h = [];
            this.g = [];
            this.i = new ps;
            this.l = 0;
            this.m = new Map([["CC1", new Or(0, 0)], ["CC2", new Or(0, 1)], ["CC3", new Or(1, 0)], ["CC4", new Or(1, 1)]]);
            this.s = this.o = 0;
            this.j = new Map;
            this.B = !0;
            this.A = new Set;
            Cs(this)
        }

        Bs.prototype.clear = function () {
            this.l = 0;
            this.h = [];
            this.g = [];
            var a = this.i;
            a.i = [];
            a.h = [];
            a.g = 0;
            Cs(this);
            a = t(this.j.values());
            for (var b = a.next(); !b.done; b = a.next()) xs(b.value)
        };

        function Cs(a) {
            a.o = 0;
            a.s = 0;
            for (var b = t(a.m.values()), c = b.next(); !c.done; c = b.next()) c = c.value, c.h = Pr, c.g = c.j, c.m = null, Ar(c.i), Ar(c.j), Ar(c.o);
            a.B = !0
        }

        Bs.prototype.extract = function (a, b) {
            if (this.B) {
                for (var c = t(this.m.values()), d = c.next(); !d.done; d = c.next()) d.value.l = b;
                this.B = !1
            }
            a = new Ig(a, 0);
            if (!(8 > a.getLength()) && 181 === a.T() && 49 === a.ka() && 1195456820 === a.P() && 3 === a.T() && (c = a.T(), 0 !== (c & 64))) for (c &= 31, a.skip(1), d = 0; d < c; d++) {
                var e = a.T(), f = (e & 4) >> 2, g = a.T(), h = a.T();
                f && (e &= 3, 0 === e || 1 === e ? this.h.push({
                    pts: b,
                    type: e,
                    cb: g,
                    Eb: h,
                    order: this.h.length
                }) : (this.g.push({pts: b, type: e, value: g, order: this.g.length}), this.g.push({
                    pts: b,
                    type: 2,
                    value: h,
                    order: this.g.length
                })))
            }
        };
        Bs.prototype.decode = function () {
            function a(e, f) {
                return e.pts - f.pts || e.order - f.order
            }

            var b = [];
            this.h.sort(a);
            this.g.sort(a);
            for (var c = t(this.h), d = c.next(); !d.done; d = c.next()) (d = Ds(this, d.value)) && b.push(d);
            c = t(this.g);
            for (d = c.next(); !d.done; d = c.next()) qs(this.i, d.value);
            c = t(this.i.i);
            for (d = c.next(); !d.done; d = c.next()) d = Es(this, d.value), b.push.apply(b, x(d));
            this.i.i = [];
            this.h = [];
            this.g = [];
            return b
        };

        function Ds(a, b) {
            var c = b.type;
            if (16 === (b.cb & 112)) {
                var d = b.cb >> 3 & 1;
                0 === c ? a.o = d : a.s = d
            }
            d = "CC" + ((c << 1 | (c ? a.s : a.o)) + 1);
            c = a.m.get(d);
            if (255 === b.cb && 255 === b.Eb || !b.cb && !b.Eb || !Fs(b.cb) || !Fs(b.Eb)) return 45 <= ++a.l && Cs(a), null;
            a.l = 0;
            b.cb &= 127;
            b.Eb &= 127;
            var e = b.cb;
            if (1 <= e && 15 >= e || !b.cb && !b.Eb) return null;
            e = null;
            if (16 === (b.cb & 112)) a:{
                a.A.add(d), d = b.cb;
                a = b.Eb;
                if (c.m === (d << 8 | a)) c.m = null; else if (c.m = d << 8 | a, 16 === (d & 240) && 64 === (a & 192)) {
                    b = [11, 11, 1, 2, 3, 4, 12, 13, 14, 15, 5, 6, 7, 8, 9, 10][(d & 7) << 1 | a >> 5 & 1];
                    var f = (a & 30) >> 1;
                    d =
                        "white";
                    e = !1;
                    7 > f ? d = Xr[f] : 7 === f && (e = !0);
                    a = 1 === (a & 1);
                    c.h !== Sr && (f = c.g, c.h === Rr && b !== f.g && (c = 1 + b - f.h, Nr(f, c, 1 + f.g - f.h, f.h), Dr(f, 0, c - 1), Dr(f, b + 1, 15 - b)), f.g = b, f.m = a, f.j = e, f.l = d, f.o = "black")
                } else if (17 === (d & 247) && 32 === (a & 240)) c.g.m = !1, c.g.j = !1, c.g.l = "white", Er(c.g, Fr, 32), d = !1, b = Xr[(a & 14) >> 1], "white_italics" === b && (b = "white", d = !0), c.g.m = 1 === (a & 1), c.g.j = d, c.g.l = b; else if (16 === (d & 247) && 32 === (a & 240) || 23 === (d & 247) && 45 === (a & 255)) b = "black", 0 === (d & 7) && (b = Wr[(a & 14) >> 1]), c.g.o = b; else if (17 === (d & 247) && 48 === (a & 240)) Er(c.g,
                    Hr, a); else if (18 === (d & 246) && 32 === (a & 224)) Er(c.g, d & 1 ? Lr : Jr, a); else if (20 === (d & 246) && 32 === (a & 240)) {
                    a = b.pts;
                    d = null;
                    switch (b.Eb) {
                        case 32:
                            Tr(c);
                            break;
                        case 33:
                            c = c.g;
                            c.i[c.g].pop();
                            break;
                        case 37:
                            d = Qr(c, 2, a);
                            break;
                        case 38:
                            d = Qr(c, 3, a);
                            break;
                        case 39:
                            d = Qr(c, 4, a);
                            break;
                        case 40:
                            Er(c.g, Fr, 32);
                            break;
                        case 41:
                            c.h = 2;
                            c.g = c.i;
                            c.g.h = 0;
                            c.l = a;
                            break;
                        case 42:
                            Ar(c.o);
                            Vr(c);
                            break;
                        case 43:
                            Vr(c);
                            break;
                        case 44:
                            b = c.i;
                            d = null;
                            c.h !== Sr && (d = Br(b, c.l, a));
                            Dr(b, 0, 15);
                            break;
                        case 45:
                            b = c.g;
                            c.h !== Rr ? d = null : (d = Br(b, c.l, a), e = b.g - b.h + 1, Nr(b,
                                e - 1, e, b.h), Dr(b, 0, e - 1), Dr(b, b.g, 15 - b.g), c.l = a);
                            break;
                        case 46:
                            Dr(c.j, 0, 15);
                            break;
                        case 47:
                            b = null, c.h !== Sr && (b = Br(c.i, c.l, a)), d = c.j, c.j = c.i, c.i = d, Tr(c), c.l = a, d = b
                    }
                    e = d;
                    break a
                }
                e = null
            } else a = b.Eb, Er(c.g, Fr, b.cb), Er(c.g, Fr, a);
            return e
        }

        function Es(a, b) {
            var c = [];
            try {
                for (; b.oa();) {
                    var d = ss(b).value, e = (d & 224) >> 5, f = d & 31;
                    7 === e && 0 != f && (e = ss(b).value & 63);
                    if (0 != e) {
                        a.A.add("svc" + e);
                        a.j.has(e) || a.j.set(e, new ts(e));
                        for (var g = a.j.get(e), h = b.ua(); b.ua() - h < f;) {
                            e = b;
                            var k = ss(e), l = k.value, m = k.pts;
                            if (16 === l) {
                                var n = ss(e);
                                l = l << 16 | n.value
                            }
                            if (0 <= l && 31 >= l) {
                                var p = m;
                                if (g.g) {
                                    var q = g.g;
                                    e = null;
                                    switch (l) {
                                        case 8:
                                            !cs(q) || 0 >= q.g && 0 >= q.h || (0 >= q.g ? (q.g = q.m - 1, q.h--) : q.g--, q.i[q.h][q.g] = null);
                                            break;
                                        case 13:
                                            q.isVisible() && (e = ds(q, p, g.i));
                                            if (q.h + 1 >= q.o) {
                                                p = q;
                                                for (var u =
                                                    0, w = 1; 16 > w; w++, u++) p.i[u] = p.i[w];
                                                for (w = 0; 1 > w; w++, u++) p.i[u] = as()
                                            } else q.h++;
                                            q.g = 0;
                                            break;
                                        case 14:
                                            q.isVisible() && (e = ds(q, p, g.i));
                                            q.i[q.h] = as();
                                            q.g = 0;
                                            break;
                                        case 12:
                                            q.isVisible() && (e = ds(q, p, g.i)), $r(q), p = q, p.h = 0, p.g = 0
                                    }
                                    var v = e
                                } else v = null
                            } else if (128 <= l && 159 >= l) v = us(g, e, l, m); else {
                                if (4096 <= l && 4127 >= l) p = l & 255, 8 <= p && 15 >= p ? e.skip(1) : 16 <= p && 23 >= p ? e.skip(2) : 24 <= p && 31 >= p && e.skip(3); else if (4224 <= l && 4255 >= l) p = l & 255, 128 <= p && 135 >= p ? e.skip(4) : 136 <= p && 143 >= p && e.skip(5); else if (32 <= l && 127 >= l) e = l, g.g && (127 === e ? bs(g.g,
                                    "\u266a") : bs(g.g, String.fromCharCode(e))); else if (160 <= l && 255 >= l) g.g && bs(g.g, String.fromCharCode(l)); else if (4128 <= l && 4223 >= l) {
                                    if (e = l & 255, g.g) if (As.has(e)) {
                                        var A = As.get(e);
                                        bs(g.g, A)
                                    } else bs(g.g, "_")
                                } else 4256 <= l && 4351 >= l && g.g && (160 != (l & 255) ? bs(g.g, "_") : bs(g.g, "[CC]"));
                                v = null
                            }
                            (e = v) && c.push(e)
                        }
                    }
                }
            } catch (y) {
                if (y instanceof T && 3E3 === y.code) ab("CEA708_INVALID_DATA", "Buffer read out of bounds / invalid CEA-708 Data."); else throw y;
            }
            return c
        }

        function Fs(a) {
            for (var b = 0; a;) b ^= a & 1, a >>= 1;
            return 1 === b
        }

        Bs.prototype.getStreams = function () {
            return Array.from(this.A)
        };
        S("shaka.cea.CeaDecoder", Bs);
        Jb = function () {
            return new Bs
        };

        function Gs(a) {
            for (var b = [], c = a, d = a = 0; d < c.length;) 2 == a && 3 == c[d] ? (a = 0, c = [].concat(x(c)), c.splice(d, 1), c = new Uint8Array(c)) : 0 == c[d] ? a++ : a = 0, d++;
            a = c;
            for (d = 0; d < a.length;) {
                for (c = 0; 255 == a[d];) c += 255, d++;
                c += a[d++];
                for (var e = 0; 255 == a[d];) e += 255, d++;
                e += a[d++];
                4 == c && b.push(a.subarray(d, d + e));
                d += e
            }
            return b
        };

        function Hs() {
            this.j = new Map;
            this.i = this.h = 0;
            this.g = Is
        }

        Hs.prototype.init = function (a) {
            function b(f) {
                f = f.name;
                f in Js && (c.g = Js[f])
            }

            var c = this, d = [], e = [];
            (new Lg).box("moov", Qg).box("mvex", Qg).S("trex", function (f) {
                var g = f.reader;
                g.skip(4);
                g.skip(4);
                f = g.P();
                g = g.P();
                c.h = f;
                c.i = g
            }).box("trak", Qg).S("tkhd", function (f) {
                var g = f.reader;
                f = f.version;
                1 == f ? (g.skip(8), g.skip(8)) : (g.skip(4), g.skip(4));
                var h = g.P();
                1 == f ? g.skip(8) : g.skip(4);
                g.skip(4);
                g.skip(8);
                g.skip(2);
                g.skip(2);
                g.skip(2);
                g.skip(2);
                g.skip(36);
                g.ka();
                g.ka();
                g.ka();
                g.ka();
                d.push(h)
            }).box("mdia", Qg).S("mdhd",
                function (f) {
                    f = Yi(f.reader, f.version);
                    e.push(f.timescale)
                }).box("minf", Qg).box("stbl", Qg).S("stsd", Ug).box("avc1", b).box("avc3", b).box("hev1", b).box("hvc1", b).box("dvav", b).box("dva1", b).box("dvh1", b).box("dvhe", b).box("vvc1", b).box("vvi1", b).box("encv", Vg).box("sinf", Qg).box("frma", function (f) {
                f = aj(f.reader).Na;
                f in Js && (c.g = Js[f])
            }).parse(a, !0);
            if (!d.length || !e.length || d.length != e.length) throw new T(2, 2, 2010);
            this.g == Is && $a("Unable to determine bitstream format for CEA parsing!");
            d.forEach(function (f,
                                g) {
                c.j.set(f, e[g])
            })
        };
        Hs.prototype.parse = function (a) {
            var b = this;
            if (this.g == Is) return [];
            var c = [], d = 0, e = [];
            (new Lg).box("moof", function (f) {
                d = f.start;
                e = [];
                Qg(f)
            }).box("traf", function (f) {
                e.push({baseMediaDecodeTime: null, qd: b.h, fe: b.i, ah: [], timescale: 9E4});
                Qg(f)
            }).S("trun", function (f) {
                var g = e[e.length - 1];
                f = Zi(f.reader, f.version, f.flags);
                g.ah.push(f)
            }).S("tfhd", function (f) {
                var g = e[e.length - 1];
                f = Wi(f.reader, f.flags);
                g.qd = f.qd || b.h;
                g.fe = f.fe || b.i;
                f = f.trackId;
                b.j.has(f) && (g.timescale = b.j.get(f))
            }).S("tfdt", function (f) {
                var g = e[e.length -
                1];
                f = Xi(f.reader, f.version);
                g.baseMediaDecodeTime = f.baseMediaDecodeTime
            }).box("mdat", function (f) {
                for (var g = d - f.start - 8, h = f.reader.ua(), k = t(e), l = k.next(); !l.done; l = k.next()) {
                    l = l.value;
                    if (null === l.baseMediaDecodeTime) throw $a("Unable to find base media decode time for CEA captions!"), new T(2, 2, 2010);
                    f.reader.seek(h);
                    Ks(b, f.reader, l.baseMediaDecodeTime, l.timescale, l.qd, l.fe, g, l.ah, c)
                }
            }).parse(a, !1);
            return c
        };

        function Ks(a, b, c, d, e, f, g, h, k) {
            var l = 0, m = f, n = h.map(function (u) {
                return u.fh
            });
            n = [].concat.apply([], x(n));
            n.length && (m = n[0].sampleSize || f);
            for (b.skip(g + h[0].Mh); b.oa();) {
                g = b.P();
                var p = b.T(), q = null;
                q = !1;
                h = 1;
                switch (a.g) {
                    case Ls:
                        q = p & 31;
                        q = 6 == q;
                        break;
                    case Ms:
                        h = 2;
                        b.skip(1);
                        q = p >> 1 & 63;
                        q = 39 == q || 40 == q;
                        break;
                    case Ns:
                        h = 2;
                        b.skip(1);
                        q = p >> 1 & 63;
                        q = 23 == q || 24 == q;
                        break;
                    default:
                        return
                }
                if (q) for (p = 0, l < n.length && (p = n[l].He || 0), p = (c + p) / d, h = t(Gs(b.rb(g - h))), q = h.next(); !q.done; q = h.next()) k.push({
                    packet: q.value,
                    pts: p
                }); else try {
                    b.skip(g -
                        h)
                } catch (u) {
                    break
                }
                m -= g + 4;
                0 == m && (c = l < n.length ? c + (n[l].$f || e) : c + e, l++, l < n.length ? m = n[l].sampleSize || f : m = f)
            }
        }

        S("shaka.cea.Mp4CeaParser", Hs);
        var Is = 0, Ls = 1, Ms = 2, Ns = 3,
            Js = {avc1: Ls, avc3: Ls, hev1: Ms, hvc1: Ms, dvav: Ls, dva1: Ls, dvh1: Ms, dvhe: Ms, vvc1: Ns, vvi1: Ns};
        Ib["video/mp4"] = function () {
            return new Hs
        };

        function Os() {
            this.g = null
        }

        Os.prototype.init = function () {
        };
        Os.prototype.parse = function (a) {
            this.g ? this.g.clearData() : this.g = new pj;
            var b = [];
            a = Ab(a);
            if (!Dj(a)) return b;
            a = this.g.parse(a);
            var c = a.sd(), d = a.ke();
            a = [];
            switch (c.video) {
                case "avc":
                    a.push(6);
                    break;
                case "hvc":
                    a.push(39), a.push(40)
            }
            if (!a.length) return b;
            c = t(d);
            for (d = c.next(); !d.done; d = c.next()) if (d = d.value, a.includes(d.type) && null != d.time) for (var e = t(Gs(d.data)), f = e.next(); !f.done; f = e.next()) b.push({
                packet: f.value,
                pts: d.time
            });
            return b
        };
        S("shaka.cea.TsCeaParser", Os);
        Ib["video/mp2t"] = function () {
            return new Os
        };

        function Ps(a, b, c) {
            var d = Qs(a), e = null;
            a = [];
            var f = [], g = null, h = new Set(d.map(function (l) {
                return l.keyId
            }));
            h.delete(null);
            var k = "cenc";
            if (1 < h.size) throw new T(2, 4, 4010);
            if (!b) {
                f = d.filter(function (l) {
                    return "urn:mpeg:dash:sea:2012" == l.Sc
                });
                if (1 < f.length) throw new T(2, 4, 4050);
                f.length && (g = Rs(f[0]));
                (f = d.find(function (l) {
                    return "urn:mpeg:dash:mp4protection:2011" == l.Sc
                })) && f.encryptionScheme && (k = f.encryptionScheme);
                f = d.filter(function (l) {
                    return "urn:mpeg:dash:mp4protection:2011" == l.Sc ? (e = l.init || e, !1) : "urn:mpeg:dash:sea:2012" !=
                        l.Sc
                });
                f.length && (a = Ss(e, k, f, c, h), 0 == a.length && (a = [Qd("", k, e)]))
            }
            if (d.length && !g && (b || !f.length)) for (a = [], b = t(Object.values(c)), c = b.next(); !c.done; c = b.next()) c = c.value, "org.w3.clearkey" != c && a.push(Qd(c, k, e));
            if (h = Array.from(h)[0] || null) for (k = t(a), b = k.next(); !b.done; b = k.next()) for (b = t(b.value.initData), c = b.next(); !c.done; c = b.next()) c.value.keyId = h;
            return {Dg: h, kk: e, drmInfos: a, bf: g, Hg: !0}
        }

        function Ts(a, b, c, d) {
            var e = Ps(a, c, d);
            if (b.Hg) {
                a = 1 == b.drmInfos.length && !b.drmInfos[0].keySystem;
                c = 0 == e.drmInfos.length;
                if (0 == b.drmInfos.length || a && !c) b.drmInfos = e.drmInfos;
                b.Hg = !1
            } else if (0 < e.drmInfos.length && (b.drmInfos = b.drmInfos.filter(function (f) {
                return e.drmInfos.some(function (g) {
                    return g.keySystem == f.keySystem
                })
            }), 0 == b.drmInfos.length)) throw new T(2, 4, 4008);
            return e.Dg || b.Dg
        }

        function Us(a) {
            var b = 0, c = Fb(a), d = c.getUint32(b, !0);
            if (d != a.byteLength) return [];
            a:{
                a = b + 6;
                for (b = []; a < c.byteLength - 1;) {
                    d = c.getUint16(a, !0);
                    a += 2;
                    var e = c.getUint16(a, !0);
                    a += 2;
                    if (0 != (e & 1) || e + a > c.byteLength) {
                        c = [];
                        break a
                    }
                    var f = Ab(c, a, e);
                    b.push({type: d, value: f});
                    a += e
                }
                c = b
            }
            return c
        }

        function Vs(a) {
            a = t(jh(a, "DATA"));
            for (var b = a.next(); !b.done; b = a.next()) if (b = b.value, b.children) {
                b = t(b.children);
                for (var c = b.next(); !c.done; c = b.next()) if (c = c.value, "LA_URL" == c.tagName) return hh(c)
            }
            return ""
        }

        function Ws(a) {
            var b = lh(a.node, "https://dashif.org/CPS", "Laurl");
            if (b && (b = hh(b))) return b;
            a = lh(a.node, "urn:microsoft:playready", "pro");
            if (!a || !hh(a)) return "";
            a = hh(a);
            a = Hd(a);
            a = Us(a).filter(function (c) {
                return c.type === Xs
            })[0];
            if (!a) return "";
            a = xd(a.value, !0);
            return (a = ah(a, "WRMHEADER")) ? Vs(a) : ""
        }

        function Ss(a, b, c, d, e) {
            var f = [];
            c = t(c);
            for (var g = c.next(); !g.done; g = c.next()) {
                g = g.value;
                var h = d[g.Sc];
                if (h) {
                    var k;
                    if ((k = lh(g.node, "urn:microsoft:playready", "pro")) && hh(k)) {
                        k = hh(k);
                        k = Hd(k);
                        var l = new Uint8Array([154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149]);
                        k = [{initData: Zg(k, l, new Set, 0), initDataType: "cenc", keyId: g.keyId}]
                    } else k = null;
                    l = null;
                    if ("urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e" === g.Sc) if (l = e, 0 == l.size) l = null; else {
                        var m = new Uint8Array([16, 119, 239, 236, 192, 178, 77, 2, 172, 227,
                            60, 30, 82, 226, 251, 75]), n = new Uint8Array([]);
                        l = [{initData: Zg(n, m, l, 1), initDataType: "cenc", keyId: g.keyId}]
                    }
                    k = Qd(h, b, g.init || a || k || l);
                    if (h = Ys.get(h)) k.licenseServerUri = h(g);
                    f.push(k)
                }
            }
            return f
        }

        function Qs(a) {
            var b = [];
            a = t(a);
            for (var c = a.next(); !c.done; c = a.next()) (c = Zs(c.value)) && b.push(c);
            return b
        }

        function Zs(a) {
            var b = a.attributes.schemeIdUri, c = oh(a, "urn:mpeg:cenc:2013", "default_KID"),
                d = mh(a, "urn:mpeg:cenc:2013", "pssh").map(ih), e = a.attributes.value;
            if (!b) return null;
            b = b.toLowerCase();
            if (c && (c = c.replace(/-/g, "").toLowerCase(), c.includes(" "))) throw new T(2, 4, 4009);
            var f = [];
            try {
                f = d.map(function (g) {
                    return {initDataType: "cenc", initData: Hd(g), keyId: null}
                })
            } catch (g) {
                throw new T(2, 4, 4007);
            }
            return {node: a, Sc: b, keyId: c, init: 0 < f.length ? f : null, encryptionScheme: e}
        }

        function Rs(a) {
            if (!window.crypto || !window.crypto.subtle) throw $a("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"), new T(2, 4, 4042);
            var b = lh(a.node, "urn:mpeg:dash:schema:sea:2012", "SegmentEncryption");
            if (!b) throw new T(2, 4, 4051);
            if ("urn:mpeg:dash:sea:aes128-cbc:2013" != b.attributes.schemeIdUri) throw new T(2, 4, 4051);
            b = lh(a.node, "urn:mpeg:dash:schema:sea:2012", "CryptoPeriod");
            if (!b) throw new T(2, 4, 4051);
            a = b.attributes.IV;
            b = Dd(b.attributes.keyUriTemplate);
            if (!a || !b) throw new T(2, 4, 4051);
            a = Id(a.substr(2));
            if (16 != a.byteLength) throw new T(2, 4, 4048);
            return {Ai: b, iv: a}
        }

        var Xs = 1, Ys = (new Map).set("com.widevine.alpha", function (a) {
            var b = lh(a.node, "https://dashif.org/CPS", "Laurl");
            return b && (b = hh(b)) ? b : (a = lh(a.node, "urn:microsoft", "laurl")) ? Dd(a.attributes.licenseUrl) || "" : ""
        }).set("com.microsoft.playready", Ws).set("com.microsoft.playready.recommendation", Ws).set("com.microsoft.playready.software", Ws).set("com.microsoft.playready.hardware", Ws).set("org.w3.clearkey", function (a) {
            var b = lh(a.node, "https://dashif.org/CPS", "Laurl");
            return b && (b = hh(b)) ? b : (a = lh(a.node, "http://dashif.org/guidelines/clearKey",
                "Laurl")) && "EME-1.0" === a.attributes.Lic_type && a && (a = hh(a)) ? a : ""
        });

        function $s(a, b, c, d, e, f) {
            var g = {RepresentationID: b, Number: c, SubNumber: d, Bandwidth: e, Time: f};
            return a.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g, function (h, k, l, m) {
                if ("$$" == h) return "$";
                var n = g[k];
                if (null == n) return h;
                "RepresentationID" == k && l && (l = void 0);
                "Time" == k && "bigint" != typeof n && (.2 <= Math.abs(n - Math.round(n)) && $a("Calculated $Time$ values must be close to integers"), n = Math.round(n));
                switch (m) {
                    case void 0:
                    case "d":
                    case "i":
                    case "u":
                        h = n.toString();
                        break;
                    case "o":
                        h = n.toString(8);
                        break;
                    case "x":
                        h = n.toString(16);
                        break;
                    case "X":
                        h = n.toString(16).toUpperCase();
                        break;
                    default:
                        h = n.toString()
                }
                l = window.parseInt(l, 10) || 1;
                return Array(Math.max(0, l - h.length) + 1).join("0") + h
            })
        }

        function at(a, b) {
            var c = bt(a, b, "timescale"), d = 1;
            c && (d = uh(c) || 1);
            c = bt(a, b, "duration");
            (c = uh(c || "")) && (c /= d);
            var e = bt(a, b, "startNumber"), f = Number(bt(a, b, "presentationTimeOffset")) || 0, g = vh(e || "");
            if (null == e || null == g) g = 1;
            e = null;
            if (b = ct(a, b, "SegmentTimeline")) {
                b = gh(b, "S");
                e = d;
                a = a.ja.duration || Infinity;
                for (var h = g, k = [], l = -f, m = 0; m < b.length; ++m) {
                    var n = b[m], p = b[m + 1], q = nh(n, "t", vh), u = nh(n, "d", vh), w = nh(n, "r", th);
                    n = nh(n, "k", th) || 0;
                    null != q && (q -= f);
                    if (u) {
                        q = null != q ? q : l;
                        w = w || 0;
                        if (0 > w) if (p) {
                            p = nh(p, "t", vh);
                            if (null ==
                                p) break; else if (q >= p) break;
                            w = Math.ceil((p - q) / u) - 1
                        } else {
                            if (Infinity == a) break; else if (q / e >= a) break;
                            w = Math.ceil((a * e - q) / u) - 1
                        }
                        0 < k.length && q != l && (k[k.length - 1].end = q / e);
                        for (p = 0; p <= w; ++p) l = q + u, k.push({
                            start: q / e,
                            end: l / e,
                            og: q,
                            Bb: n,
                            Zi: k.length + h
                        }), q = l
                    }
                }
                e = k
            }
            return {timescale: d, La: c, Od: g, Pb: f / d || 0, ng: f, timeline: e}
        }

        function dt(a, b) {
            return [b(a.J), b(a.la), b(a.va)].filter(Be)
        }

        function bt(a, b, c) {
            b = dt(a, b);
            a = null;
            b = t(b);
            for (var d = b.next(); !d.done && !(a = d.value.attributes[c]); d = b.next()) ;
            return a
        }

        function ct(a, b, c) {
            b = dt(a, b);
            a = null;
            b = t(b);
            for (var d = b.next(); !d.done && !(a = kh(d.value, c)); d = b.next()) ;
            return a
        }

        function et(a, b, c, d, e, f) {
            for (var g = oh(a, "http://www.w3.org/1999/xlink", "href"), h = oh(a, "http://www.w3.org/1999/xlink", "actuate") || "onRequest", k = t(Object.keys(a.attributes)), l = k.next(); !l.done; l = k.next()) {
                l = l.value;
                var m = l.split(":"), n = ch("http://www.w3.org/1999/xlink");
                m[0] == n && delete a.attributes[l]
            }
            if (5 <= f) return dg(new T(2, 4, 4028));
            if ("onLoad" != h) return dg(new T(2, 4, 4027));
            var p = Nd([d], [g]);
            return e.request(0, tg(p, b)).Aa(function (q) {
                q = $g(q.data, a.tagName);
                if (!q) return dg(new T(2, 4, 4001, g));
                for (a.children =
                         []; q.children.length;) {
                    var u = q.children.shift();
                    u.tagName && (u.parent = a);
                    a.children.push(u)
                }
                u = t(Object.keys(q.attributes));
                for (var w = u.next(); !w.done; w = u.next()) w = w.value, a.attributes[w] = q.attributes[w];
                return ft(a, b, c, p[0], e, f + 1)
            })
        }

        function ft(a, b, c, d, e, f) {
            f = void 0 === f ? 0 : f;
            if (oh(a, "http://www.w3.org/1999/xlink", "href")) {
                var g = et(a, b, c, d, e, f);
                c && (g = g.Aa(void 0, function () {
                    return ft(a, b, c, d, e, f)
                }));
                return g
            }
            g = [];
            for (var h = {}, k = t(fh(a)), l = k.next(); !l.done; h = {Bc: h.Bc}, l = k.next()) h.Bc = l.value, "urn:mpeg:dash:resolve-to-zero:2013" == oh(h.Bc, "http://www.w3.org/1999/xlink", "href") ? a.children = a.children.filter(function (m) {
                return function (n) {
                    return n !== m.Bc
                }
            }(h)) : "SegmentTimeline" != h.Bc.tagName && g.push(ft(h.Bc, b, c, d, e, f));
            return hg(g).Aa(function () {
                return a
            })
        }
        ;

        function gt(a, b, c, d, e, f, g) {
            var h, k = (new Lg).S("sidx", function (l) {
                h = ht(b, d, e, f, g, c, l)
            });
            a && k.parse(a);
            if (h) return h;
            throw new T(2, 3, 3004);
        }

        function ht(a, b, c, d, e, f, g) {
            var h = [];
            g.reader.skip(4);
            var k = g.reader.P();
            if (0 == k) throw new T(2, 3, 3005);
            if (0 == g.version) {
                var l = g.reader.P();
                var m = g.reader.P()
            } else l = g.reader.Qc(), m = g.reader.Qc();
            g.reader.skip(2);
            var n = g.reader.ka();
            a = a + g.size + m;
            for (m = 0; m < n; m++) {
                var p = g.reader.P(), q = (p & 2147483648) >>> 31;
                p &= 2147483647;
                var u = g.reader.P();
                g.reader.skip(4);
                if (1 == q) throw new T(2, 3, 3006);
                h.push(new Ci(l / k + c, (l + u) / k + c, function () {
                    return f
                }, a, a + p - 1, b, c, d, e));
                l += u;
                a += p
            }
            g.parser.stop();
            return h
        };

        function it(a) {
            this.h = Fb(a);
            this.g = new Ig(this.h, 0)
        }

        it.prototype.oa = function () {
            return this.g.oa()
        };

        function jt(a) {
            var b = kt(a);
            if (7 < b.length) throw new T(2, 3, 3002);
            var c = 0;
            b = t(b);
            for (var d = b.next(); !d.done; d = b.next()) c = 256 * c + d.value;
            b = kt(a);
            a:{
                d = t(lt);
                for (var e = d.next(); !e.done; e = d.next()) if (yb(b, new Uint8Array(e.value))) {
                    d = !0;
                    break a
                }
                d = !1
            }
            if (d) b = a.h.byteLength - a.g.ua(); else {
                if (8 == b.length && b[1] & 224) throw new T(2, 3, 3001);
                for (e = d = 0; e < b.length; e++) {
                    var f = b[e];
                    d = 0 == e ? f & (1 << 8 - b.length) - 1 : 256 * d + f
                }
                b = d
            }
            b = a.g.ua() + b <= a.h.byteLength ? b : a.h.byteLength - a.g.ua();
            d = Fb(a.h, a.g.ua(), b);
            a.g.skip(b);
            return new mt(c,
                d)
        }

        function kt(a) {
            var b = a.g.ua(), c = a.g.T();
            if (0 == c) throw new T(2, 3, 3002);
            c = 8 - Math.floor(Math.log2(c));
            a.g.skip(c - 1);
            return Ab(a.h, b, c)
        }

        var lt = [[255], [127, 255], [63, 255, 255], [31, 255, 255, 255], [15, 255, 255, 255, 255], [7, 255, 255, 255, 255, 255], [3, 255, 255, 255, 255, 255, 255], [1, 255, 255, 255, 255, 255, 255, 255]];

        function mt(a, b) {
            this.id = a;
            this.g = b
        }

        function nt(a) {
            if (8 < a.g.byteLength) throw new T(2, 3, 3002);
            if (8 == a.g.byteLength && a.g.getUint8(0) & 224) throw new T(2, 3, 3001);
            for (var b = 0, c = 0; c < a.g.byteLength; c++) {
                var d = a.g.getUint8(c);
                b = 256 * b + d
            }
            return b
        };

        function ot(a, b, c, d, e, f, g, h, k) {
            function l() {
                return e
            }

            var m = [];
            a = new it(a.g);
            for (var n = null, p = null; a.oa();) {
                var q = jt(a);
                if (187 == q.id) {
                    var u = pt(q);
                    u && (q = c * u.kj, u = b + u.Pi, null != n && m.push(new Ci(n + g, q + g, l, p, u - 1, f, g, h, k)), n = q, p = u)
                }
            }
            null != n && m.push(new Ci(n + g, d + g, l, p, null, f, g, h, k));
            return m
        }

        function pt(a) {
            var b = new it(a.g);
            a = jt(b);
            if (179 != a.id) throw new T(2, 3, 3013);
            a = nt(a);
            b = jt(b);
            if (183 != b.id) throw new T(2, 3, 3012);
            b = new it(b.g);
            for (var c = 0; b.oa();) {
                var d = jt(b);
                if (241 == d.id) {
                    c = nt(d);
                    break
                }
            }
            return {kj: a, Pi: c}
        };

        function qt(a, b, c) {
            b = ct(a, b, "Initialization");
            if (!b) return null;
            var d = a.J.Ga(), e = b.attributes.sourceURL;
            e && (d = Nd(d, [Dd(e)]));
            e = 0;
            var f = null;
            if (b = nh(b, "range", sh)) e = b.start, f = b.end;
            c = new Ai(function () {
                return d
            }, e, f, rt(a), null, null, c);
            c.codecs = a.J.codecs;
            c.mimeType = a.J.mimeType;
            return c
        }

        function st(a, b, c) {
            var d = Number(bt(a, tt, "presentationTimeOffset")) || 0, e = bt(a, tt, "timescale"), f = 1;
            e && (f = uh(e) || 1);
            var g = d / f || 0, h = qt(a, tt, c);
            ut(a, h);
            var k = Ne(a);
            return {
                mc: function () {
                    var l = ct(k, tt, "RepresentationIndex");
                    var m = k.J.Ga();
                    l && (l = Dd(l.attributes.sourceURL)) && (m = Nd(m, [l]));
                    l = vt(k);
                    return wt(k, b, h, m, l.start, l.end, g)
                }
            }
        }

        function wt(a, b, c, d, e, f, g) {
            var h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I;
            return O(function (L) {
                if (1 == L.g) return h = a.presentationTimeline, k = !a.xb || !a.ja.Dd, l = a.ja.start, m = a.ja.duration, n = a.J.mimeType.split("/")[1], p = b, q = null, u = [p(d, e, f, !1), "webm" == n ? p(c.M(), c.Ha, c.sa, !0) : null], p = null, G(L, Promise.all(u), 2);
                w = L.h;
                v = w[0];
                A = w[1] || null;
                y = null;
                D = l - g;
                z = l;
                B = m ? l + m : Infinity;
                if ("mp4" == n) var J = gt(v, e, d, c, D, z, B); else {
                    J = new it(A);
                    if (440786851 != jt(J).id) throw new T(2, 3, 3008);
                    var E = jt(J);
                    if (408125543 != E.id) throw new T(2,
                        3, 3009);
                    J = E.g.byteOffset;
                    E = new it(E.g);
                    for (var K = null; E.oa();) {
                        var N = jt(E);
                        if (357149030 == N.id) {
                            K = N;
                            break
                        }
                    }
                    if (!K) throw new T(2, 3, 3010);
                    K = new it(K.g);
                    N = 1E6;
                    for (E = null; K.oa();) {
                        var M = jt(K);
                        if (2807729 == M.id) N = nt(M); else if (17545 == M.id) if (4 == M.g.byteLength) E = M.g.getFloat32(0); else if (8 == M.g.byteLength) E = M.g.getFloat64(0); else throw new T(2, 3, 3003);
                    }
                    if (null == E) throw new T(2, 3, 3011);
                    K = N / 1E9;
                    E *= K;
                    N = jt(new it(v));
                    if (475249515 != N.id) throw new T(2, 3, 3007);
                    J = ot(N, J, K, E, d, c, D, z, B)
                }
                y = J;
                C = t(y);
                for (F = C.next(); !F.done; F =
                    C.next()) I = F.value, I.codecs = a.J.codecs, I.mimeType = a.J.mimeType;
                h.Jd(y);
                q = new Rk(y);
                k && q.Ec(z, B, !0);
                return L.return(q)
            })
        }

        function tt(a) {
            return a.Tc
        }

        function vt(a) {
            var b = ct(a, tt, "RepresentationIndex");
            a = bt(a, tt, "indexRange");
            a = sh(a || "");
            b && (a = nh(b, "range", sh, a));
            return a
        }

        function ut(a, b) {
            xt(a, b);
            if (!vt(a)) throw new T(2, 4, 4002);
        }

        function xt(a, b) {
            var c = a.J.mimeType.split("/")[1];
            if (a.J.contentType != Vd && "mp4" != c && "webm" != c) throw new T(2, 4, 4006);
            if ("webm" == c && !b) throw new T(2, 4, 4005);
        }

        function rt(a) {
            var b = a.J;
            return {
                bandwidth: a.bandwidth,
                audioSamplingRate: b.audioSamplingRate,
                codecs: b.codecs,
                contentType: b.contentType,
                frameRate: b.frameRate || null,
                height: b.height || null,
                mimeType: b.mimeType,
                channelsCount: b.Nc,
                pixelAspectRatio: b.pixelAspectRatio || null,
                width: b.width || null,
                label: a.la.label || null,
                roles: a.roles || null,
                language: a.la.language || null
            }
        };

        function yt(a, b, c) {
            var d = qt(a, zt, c), e = At(a);
            if (!e.La && !e.timeline && 1 < e.Mc.length) throw new T(2, 4, 4002);
            if (!e.La && !a.ja.duration && !e.timeline && 1 == e.Mc.length) throw new T(2, 4, 4002);
            if (e.timeline && 0 == e.timeline.length) throw new T(2, 4, 4002);
            var f = null, g = null;
            a.va.id && a.J.id && (g = b[a.va.id + "," + a.J.id]) && (f = g.segmentIndex);
            var h = Bt(a.ja.start, a.ja.duration, a.J.Ga, e, d, c, a.J.mimeType, a.J.codecs);
            b = !f;
            f ? f.Id(h, a.presentationTimeline.nb()) : f = new Rk(h);
            a.presentationTimeline.Jd(h);
            a.xb && a.ja.Dd || f.Ec(a.ja.start,
                a.ja.duration ? a.ja.start + a.ja.duration : Infinity, b);
            g && (g.segmentIndex = f);
            return {
                mc: function () {
                    f && 0 != f.getNumReferences() || f.ue(h);
                    return Promise.resolve(f)
                }
            }
        }

        function zt(a) {
            return a.Rb
        }

        function At(a) {
            var b = Ct(a);
            a = at(a, zt);
            var c = a.Od;
            0 == c && (c = 1);
            var d = 0;
            a.La ? d = a.La * (c - 1) : a.timeline && 0 < a.timeline.length && (d = a.timeline[0].start);
            return {La: a.La, startTime: d, Od: c, Pb: a.Pb, timeline: a.timeline, Mc: b}
        }

        function Bt(a, b, c, d, e, f, g, h) {
            var k = d.Mc.length;
            d.timeline && d.timeline.length != d.Mc.length && (k = Math.min(d.timeline.length, d.Mc.length));
            for (var l = a - d.Pb, m = b ? a + b : Infinity, n = [], p = d.startTime, q = {}, u = 0; u < k; q = {
                jd: q.jd,
                ed: q.ed
            }, u++) {
                q.ed = d.Mc[u];
                var w = p;
                p = void 0;
                p = null != d.La ? w + d.La : d.timeline ? d.timeline[u].end : w + b;
                q.jd = null;
                w = new Ci(a + w, a + p, function (v) {
                    return function () {
                        null == v.jd && (v.jd = Nd(c(), [v.ed.Gi]));
                        return v.jd
                    }
                }(q), q.ed.start, q.ed.end, e, l, a, m, [], "", null, null, Di, f);
                w.codecs = h;
                w.mimeType = g;
                n.push(w)
            }
            return n
        }

        function Ct(a) {
            return [a.J.Rb, a.la.Rb, a.va.Rb].filter(Be).map(function (b) {
                return gh(b, "SegmentURL")
            }).reduce(function (b, c) {
                return 0 < b.length ? b : c
            }).map(function (b) {
                b.attributes.indexRange && !a.If && (a.If = !0);
                var c = Dd(b.attributes.media);
                b = nh(b, "mediaRange", sh, {start: 0, end: null});
                return {Gi: c, start: b.start, end: b.end}
            })
        };

        function Dt(a, b, c, d, e, f, g, h, k) {
            k || a.J.Jc || (a.J.Jc = bt(a, Et, "initialization"));
            var l = a.J.Jc ? Ft(a, g) : null, m = Gt(a);
            Ht(m);
            var n = Ne(a);
            if (m.Bd) return xt(a, l), {
                mc: function () {
                    var v = $s(m.Bd, n.J.id, null, null, n.bandwidth || null, null);
                    v = Nd(n.J.Ga(), [v]);
                    return wt(n, b, l, v, 0, null, m.Pb)
                }
            };
            if (m.La) return d || "image" === a.la.contentType || (a.presentationTimeline.Pf(m.La), a.presentationTimeline.ye(a.ja.start)), {
                mc: function () {
                    return It(n, m, e, l, f, g, h)
                }
            };
            var p = null;
            d = d = null;
            a.va.id && a.J.id && (d = a.va.id + "," + a.J.id, d = c[d]) &&
            (p = d.segmentIndex);
            var q = a.ja.start, u = a.ja.duration ? q + a.ja.duration : Infinity, w = !(a.xb && a.ja.Dd);
            p ? (c = p, Jt(c, m, q, u, w, l), c.Oa(a.presentationTimeline.nb())) : p = new Kt(m, a.J.id, a.bandwidth, a.J.Ga, q, u, l, w, g, a.J.ag);
            m.timeline && "image" !== a.la.contentType && a.presentationTimeline.$g(m.timeline, q);
            d && a.xb && (d.segmentIndex = p);
            return {
                mc: function () {
                    p instanceof Kt && 0 == p.getNumReferences() && Jt(p, m, q, u, w, l);
                    return Promise.resolve(p)
                }
            }
        }

        function Et(a) {
            return a.cc
        }

        function Gt(a) {
            var b = at(a, Et), c = bt(a, Et, "media"), d = bt(a, Et, "index");
            return {
                La: b.La,
                timescale: b.timescale,
                Od: b.Od,
                Pb: b.Pb,
                ng: b.ng,
                timeline: b.timeline,
                bc: c && Dd(c),
                Bd: d,
                mimeType: a.J.mimeType,
                codecs: a.J.codecs
            }
        }

        function Ht(a) {
            var b = a.Bd ? 1 : 0;
            b += a.timeline ? 1 : 0;
            b += a.La ? 1 : 0;
            if (0 == b) throw new T(2, 4, 4002);
            1 != b && (a.Bd && (a.timeline = null), a.La = null);
            if (!a.Bd && !a.bc) throw new T(2, 4, 4002);
        }

        function It(a, b, c, d, e, f, g) {
            function h(E) {
                var K = (E - w) * u, N = K + b.Pb, M = K + n;
                K = M + u;
                var P = Math.min(K, l());
                M = new Ci(M, P, function () {
                    var R = N * v;
                    "BigInt" in window && R > Number.MAX_SAFE_INTEGER && (R = BigInt(N) * BigInt(v));
                    R = $s(A, D, E, null, y, R);
                    return Nd(z(), [R])
                }, 0, null, d, B, n, l(), [], "", null, null, Di, f);
                M.codecs = a.J.codecs;
                M.mimeType = a.J.mimeType;
                M.j = K;
                return M
            }

            function k() {
                var E = [Math.max(m.nb(), n), Math.min(m.Zb(), l())].map(function (K) {
                    return K - n
                });
                E = [Math.ceil(E[0] / u), Math.ceil(E[1] / u) - 1];
                a.J.Ia && E[1]++;
                return E.map(function (K) {
                    return K +
                        w
                })
            }

            function l() {
                var E = null != p && e[p] || q;
                return E ? n + E : Infinity
            }

            var m = a.presentationTimeline, n = a.ja.start, p = a.va.id, q = a.ja.duration, u = b.La, w = b.Od,
                v = b.timescale, A = b.bc, y = a.bandwidth || null, D = a.J.id, z = a.J.Ga, B = n - b.Pb, C = k();
            c = a.xb ? Math.max(C[0], C[1] - c + 1) : C[0];
            g = g || C[1];
            C = [];
            for (var F = c; F <= g; ++F) {
                var I = h(F);
                C.push(I)
            }
            var L = new Rk(C);
            C = m.Zb() < l();
            F = m.V();
            if (C || F) {
                var J = Math.max(c, g + 1);
                c = u;
                a.J.Ia && (c = .1);
                L.Me(c, function () {
                    var E = m.nb();
                    L.Oa(E);
                    var K = t(k());
                    K.next();
                    K = K.next().value;
                    for (var N = []; J <= K;) {
                        var M =
                            h(J);
                        N.push(M);
                        J++
                    }
                    return E > l() && !N.length ? null : N
                })
            }
            return Promise.resolve(L)
        }

        function Ft(a, b) {
            var c = a.J.Jc;
            c || (c = bt(a, Et, "initialization"));
            if (!c) return null;
            c = Dd(c);
            var d = a.J.id, e = a.bandwidth || null, f = a.J.Ga;
            b = new Ai(function () {
                var g = $s(c, d, null, null, e, null);
                return Nd(f(), [g])
            }, 0, null, rt(a), null, null, b);
            b.codecs = a.J.codecs;
            b.mimeType = a.J.mimeType;
            return b
        }

        function Kt(a, b, c, d, e, f, g, h, k, l) {
            Rk.call(this, []);
            this.g = a;
            this.C = b;
            this.A = c;
            this.B = d;
            this.h = e;
            this.j = f;
            this.o = g;
            this.s = k;
            this.F = l;
            h && Lt(this)
        }

        oa(Kt, Rk);
        r = Kt.prototype;
        r.getNumReferences = function () {
            return this.g ? this.g.timeline.length : 0
        };
        r.release = function () {
            Rk.prototype.release.call(this);
            this.g = null
        };
        r.Oa = function (a) {
            if (this.g) {
                for (var b = 0, c = this.g.timeline, d = 0; d < c.length; d += 1) if (c[d].end + this.h <= a) b += 1; else break;
                0 < b && (this.g.timeline = c.slice(b), this.O.length >= b && (this.O = this.O.slice(b)), this.i += b, 0 === this.getNumReferences() && this.release())
            }
        };

        function Jt(a, b, c, d, e, f) {
            Mt(a, f);
            if (a.g) {
                c = a.g.timeline;
                a.g.bc !== b.bc && (a.g.bc = b.bc);
                if (c.length) {
                    var g = c[c.length - 1];
                    b = b.timeline.filter(function (h) {
                        return h.start >= g.end
                    })
                } else b = b.timeline.slice();
                0 < b.length && a.g.timeline.push.apply(a.g.timeline, x(b));
                a.j !== d && (a.j = d)
            } else a.g = b, a.h = c, a.j = d;
            e && Lt(a)
        }

        function Mt(a, b) {
            if (a.o !== b) {
                a.o = b;
                a = t(a.O);
                for (var c = a.next(); !c.done; c = a.next()) (c = c.value) && Fi(c, b)
            }
        }

        function Lt(a) {
            if (!a.m) {
                for (var b = a.g.timeline; b.length;) if (b[b.length - 1].start >= a.j) b.pop(); else break;
                a.Oa(a.h)
            }
        }

        r.find = function (a) {
            if (this.g && this.g.timeline && this.g.timeline.length && a < this.g.timeline[0].start + this.h) return this.i;
            if (!this.g) return null;
            var b = this.g.timeline;
            if (a < this.h || a >= this.j) return null;
            for (var c = b.length - 1, d = 0; d < b.length; d++) {
                var e = b[d], f = e.start + this.h;
                e = d < c ? b[d + 1].start + this.h : Infinity === this.j ? e.end + this.h : this.j;
                if (a >= f && a < e) return d + this.i
            }
            return null
        };
        r.get = function (a) {
            var b = this;
            a -= this.i;
            if (0 > a || a >= this.getNumReferences() || !this.g) return null;
            var c = this.O[a];
            if (!c) {
                var d = this.g.timeline[a], e = d.Zi, f = this.g.ng + d.og;
                c = this.h - this.g.Pb;
                var g = this.h + d.end, h = g;
                a === this.getNumReferences() - 1 && Infinity !== this.j && (h = this.j);
                for (var k = this.g.codecs, l = this.g.mimeType, m = [], n = (d.end - d.start) / d.Bb, p = {}, q = 0; q < d.Bb; p = {
                    kd: p.kd,
                    We: p.We
                }, q++) {
                    var u = d.start + n * q, w = u + n;
                    p.We = q + 1;
                    p.kd = null;
                    u = new Ci(this.h + u, this.h + w, function (v) {
                        return function () {
                            if (!b.g) return [];
                            null ==
                            v.kd && (v.kd = Nt(b.g.bc, b.C, e, b.A, f, v.We, b.B));
                            return v.kd
                        }
                    }(p), 0, null, this.o, c, this.h, this.j, [], "", null, null, Di, this.s);
                    u.codecs = k;
                    u.mimeType = l;
                    0 == this.F ? 0 < q && u.se() : 0 != q % this.F && u.se();
                    m.push(u)
                }
                c = new Ci(this.h + d.start, h, function () {
                    return 0 < d.Bb || !b.g ? [] : Nt(b.g.bc, b.C, e, b.A, f, null, b.B)
                }, 0, null, this.o, c, this.h, this.j, m, "", null, null, Di, this.s, 0 < d.Bb);
                c.codecs = k;
                c.mimeType = l;
                c.j = g;
                this.O[a] = c
            }
            return c
        };

        function Nt(a, b, c, d, e, f, g) {
            a = $s(a, b, c, f, d || null, e);
            return Nd(g(), [a]).map(function (h) {
                return h.toString()
            })
        };

        function Ot(a) {
            this.o = null;
            this.A = a;
            this.G = new mg;
            this.i = [];
            this.h = null;
            this.m = [];
            this.B = null;
            this.F = [];
            this.C = 300;
            this.l = new Map;
            this.j = new Map;
            this.g = null;
            this.s = "UNKNOWN"
        }

        Ot.prototype.configure = function (a) {
            this.o = a
        };
        Ot.prototype.destroy = function () {
            this.A = this.o = null;
            this.i = [];
            this.h = null;
            this.m = [];
            this.F = [];
            this.l.clear();
            null != this.g && (this.g.stop(), this.g = null);
            return this.G.destroy()
        };
        Ot.prototype.setManifestType = function (a) {
            this.s = a
        };

        function Pt(a, b) {
            var c, d, e, f, g, h, k;
            return O(function (l) {
                if (1 == l.g) return c = Nd(a.i, [Qt(a, b)]), d = tg(c, a.o.retryParameters), e = a.A.networkingEngine.request(8, d), ng(a.G, e), sa(l, 2), G(l, e.promise, 4);
                if (2 != l.g) return f = l.h, g = vd(f.data), h = JSON.parse(g), 1 == h.VERSION && Rt(a, h, f.uri), va(l, 0);
                if ((k = wa(l)) && 7001 == k.code) return l.return();
                null != a.g && (a.g.stop(), a.g = null);
                a.g = new Tc(function () {
                    Pt(a, b)
                });
                a.g.Y(a.C);
                H(l)
            })
        }

        function Qt(a, b) {
            if (!a.m.length) return b;
            b = new uc(b);
            var c = a.B || a.m[0], d = Math.round(a.A.getBandwidthEstimate()), e = b.g;
            "DASH" == a.s ? (e.add("_DASH_pathway", c), e.add("_DASH_throughput", String(d))) : "HLS" == a.s && (e.add("_HLS_pathway", c), e.add("_HLS_throughput", String(d)));
            Jc(e) && yc(b, e);
            return b.toString()
        }

        function Rt(a, b, c) {
            null != a.g && (a.g.stop(), a.g = null);
            var d = b["RELOAD-URI"] || c;
            a.g = new Tc(function () {
                Pt(a, d)
            });
            if (c = b.TTL) a.C = c;
            a.g.Y(a.C);
            a.m = b["PATHWAY-PRIORITY"] || [];
            a.F = b["PATHWAY-CLONES"] || []
        }

        function St(a, b, c, d) {
            var e = a.l.get(b);
            e || (e = new Map);
            e.set(c, d);
            a.l.set(b, e)
        }

        Ot.prototype.banLocation = function (a) {
            this.j.set(a, Date.now() + 6E4)
        };

        function Tt(a, b, c) {
            c = void 0 === c ? !1 : c;
            b = a.l.get(b) || new Map;
            for (var d = [], e = {}, f = t(a.m), g = f.next(); !g.done; e = {jc: e.jc}, g = f.next()) if (e.jc = g.value, g = b.get(e.jc)) d.push({
                Vf: e.jc,
                location: g
            }); else if (g = a.F.find(function (k) {
                return function (l) {
                    return l.Dj == k.jc
                }
            }(e))) {
                var h = b.get(g["BASE-ID"]);
                h && (g["URI-REPLACEMENT"].xh ? (h = new uc(h), wc(h, g["URI-REPLACEMENT"].xh), d.push({
                    Vf: e.jc,
                    location: h.toString()
                })) : d.push({Vf: e.jc, location: h}))
            }
            e = Date.now();
            f = t(a.j.keys());
            for (g = f.next(); !g.done; g = f.next()) g = g.value,
                h = a.j.get(g), e > h && a.j.delete(g);
            d = d.filter(function (k) {
                for (var l = t(a.j.keys()), m = l.next(); !m.done; m = l.next()) if (m.value.includes((new uc(k.location)).Gb)) return !1;
                return !0
            });
            d.length && (a.B = d[0].Vf);
            d = d.map(function (k) {
                return k.location
            });
            if (!d.length && a.h) for (e = t(a.h.split(",")), g = e.next(); !g.done; g = e.next()) if (f = b.get(g.value)) a.B = a.h, d.push(f);
            if (!d.length) for (b = t(b.values()), e = b.next(); !e.done; e = b.next()) d.push(e.value);
            return c ? d : Nd(a.i, d)
        };

        function Ut() {
            this.j = [];
            this.h = [];
            this.g = [];
            this.l = [];
            this.i = [];
            this.s = this.o = !1;
            this.m = new Set
        }

        r = Ut.prototype;
        r.release = function () {
            for (var a = t(this.h.concat(this.g, this.l, this.i)), b = a.next(); !b.done; b = a.next()) b = b.value, b.segmentIndex && b.segmentIndex.release();
            this.h = [];
            this.g = [];
            this.l = [];
            this.i = [];
            this.j = []
        };
        r.li = function () {
            return this.j
        };
        r.Gf = function () {
            return this.l.slice()
        };
        r.Uh = function () {
            return this.i
        };

        function Vt(a, b) {
            var c = [], d = [], e = [], f = [];
            a = t(a);
            for (var g = a.next(); !g.done; g = a.next()) {
                var h = g.value;
                g = new Map(h.audioStreams.map(function (n) {
                    return [Wt(n), n]
                }));
                var k = new Map(h.videoStreams.map(function (n) {
                    return [Xt(n), n]
                })), l = new Map(h.textStreams.map(function (n) {
                    return [Yt(n), n]
                }));
                h = new Map(h.imageStreams.map(function (n) {
                    return [Zt(n), n]
                }));
                if (b) {
                    var m = $t(Vd);
                    l.set(Yt(m), m);
                    m = $t("image");
                    h.set(Zt(m), m)
                }
                c.push(g);
                d.push(k);
                e.push(l);
                f.push(h)
            }
            return {xg: c, vh: d, sh: e, Sg: f}
        }

        r.gf = function (a, b, c) {
            c = void 0 === c ? !1 : c;
            var d = this, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L, J, E, K, N, M, P, R, Q;
            return O(function (W) {
                if (1 == W.g) {
                    e = Xd;
                    if (!b && 1 == a.length) return f = Vt(a, !1), g = f.xg, h = f.vh, k = f.sh, l = f.Sg, d.h = Array.from(g[0].values()), d.g = Array.from(h[0].values()), d.l = Array.from(k[0].values()), d.i = Array.from(l[0].values()), W.u(2);
                    m = c ? d.m.size : 0;
                    n = -1;
                    for (p = 0; p < a.length; p++) q = a[p], d.m.has(q.id) || (d.m.add(q.id), -1 == n && (n = p));
                    if (-1 == n) return W.return();
                    u = Vt(a, !0);
                    w = u.xg;
                    v = u.vh;
                    A = u.sh;
                    y = u.Sg;
                    return G(W,
                        Promise.all([au(d, d.h, w, n, bu, cu, m), au(d, d.g, v, n, bu, cu, m), au(d, d.l, A, n, bu, cu, m), au(d, d.i, y, n, bu, cu, m)]), 2)
                }
                D = 0;
                z = [];
                if (d.g.length && d.h.length) for (J = t(d.h), E = J.next(); !E.done; E = J.next()) for (K = E.value, N = t(d.g), M = N.next(); !M.done; M = N.next()) P = M.value, R = Oc(K.drmInfos, P.drmInfos), K.drmInfos.length && P.drmInfos.length && !R.length || (Q = D++, z.push({
                    id: Q,
                    language: K.language,
                    disabledUntilTime: 0,
                    primary: K.primary,
                    audio: K,
                    video: P,
                    bandwidth: (K.bandwidth || 0) + (P.bandwidth || 0),
                    drmInfos: R,
                    allowedByApplication: !0,
                    allowedByKeySystem: !0,
                    decodingInfos: []
                })); else for (B = d.g.length ? d.g : d.h, C = t(B), F = C.next(); !F.done; F = C.next()) I = F.value, L = D++, z.push({
                    id: L,
                    language: I.language,
                    disabledUntilTime: 0,
                    primary: I.primary,
                    audio: I.type == e.X ? I : null,
                    video: I.type == e.ga ? I : null,
                    bandwidth: I.bandwidth || 0,
                    drmInfos: I.drmInfos,
                    allowedByApplication: !0,
                    allowedByKeySystem: !0,
                    decodingInfos: []
                });
                d.j = z;
                H(W)
            })
        };

        function du(a) {
            var b, c, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L, J, E, K, N, M;
            return O(function (P) {
                switch (P.g) {
                    case 1:
                        b = Xd;
                        if (1 == a.length) return P.return(a[0]);
                        c = a.map(function (R) {
                            return new Map(R.filter(function (Q) {
                                return Q.type === b.X
                            }).map(function (Q) {
                                return [Wt(Q), Q]
                            }))
                        });
                        d = a.map(function (R) {
                            return new Map(R.filter(function (Q) {
                                return Q.type === b.ga
                            }).map(function (Q) {
                                return [Xt(Q), Q]
                            }))
                        });
                        e = a.map(function (R) {
                            return new Map(R.filter(function (Q) {
                                return Q.type === b.ta
                            }).map(function (Q) {
                                return [Yt(Q), Q]
                            }))
                        });
                        f = a.map(function (R) {
                            return new Map(R.filter(function (Q) {
                                return Q.type === b.Ze
                            }).map(function (Q) {
                                return [Zt(Q), Q]
                            }))
                        });
                        g = t(e);
                        for (h = g.next(); !h.done; h = g.next()) k = h.value, l = eu(b.ta), k.set(Yt(l), l);
                        m = t(f);
                        for (n = m.next(); !n.done; n = m.next()) p = n.value, q = eu(b.Ze), p.set(Zt(q), q);
                        u = new Ut;
                        return G(P, au(u, [], c, 0, fu, gu, 0), 2);
                    case 2:
                        return w = P.h, G(P, au(u, [], d, 0, fu, gu, 0), 3);
                    case 3:
                        return v = P.h, G(P, au(u, [], e, 0, fu, gu, 0), 4);
                    case 4:
                        return A = P.h, G(P, au(u, [], f, 0, fu, gu, 0), 5);
                    case 5:
                        y = P.h;
                        D = 0;
                        if (v.length && w.length) for (I =
                                                           t(w), L = I.next(); !L.done; L = I.next()) for (J = L.value, E = t(v), K = E.next(); !K.done; K = E.next()) N = K.value, M = D++, N.variantIds.push(M), J.variantIds.push(M); else for (z = v.concat(w), B = t(z), C = B.next(); !C.done; C = B.next()) F = C.value, F.variantIds = [D++];
                        return P.return(v.concat(w).concat(A).concat(y))
                }
            })
        }

        function au(a, b, c, d, e, f, g) {
            var h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I;
            return O(function (L) {
                switch (L.g) {
                    case 1:
                        h = [];
                        for (k = 0; k < c.length; k++) k >= d ? h.push(new Set(c[k].values())) : h.push(new Set);
                        l = t(b);
                        m = l.next();
                    case 2:
                        if (m.done) {
                            L.u(4);
                            break
                        }
                        n = m.value;
                        return G(L, hu(a, n, c, d, f, h, g), 5);
                    case 5:
                        p = L.h;
                        if (!p) throw new T(2, 4, 4037);
                        m = l.next();
                        L.u(2);
                        break;
                    case 4:
                        q = t(h);
                        for (u = q.next(); !u.done; u = q.next()) for (w = u.value, v = t(w), A = v.next(); !A.done; A = v.next()) y = A.value, (D = iu(a, y, c, e, f, h)) && b.push(D);
                        z = t(h);
                        for (u = z.next(); !u.done; u =
                            z.next()) for (B = u.value, C = {}, F = t(B), A = F.next(); !A.done; C = {Yd: C.Yd}, A = F.next()) if (C.Yd = A.value, !ju(C.Yd) && (I = b.some(function (J) {
                            return function (E) {
                                return ku(a, J.Yd, E)
                            }
                        }(C)))) throw new T(2, 4, 4037);
                        return L.return(b)
                }
            })
        }

        function hu(a, b, c, d, e, f, g) {
            return O(function (h) {
                if (1 == h.g) return lu(a, c, b, 0 < g), b.matchedStreams ? b.segmentIndex ? G(h, mu(b, d + g), 2) : h.u(2) : h.return(!1);
                nu(b, d, e, f, g);
                return h.return(!0)
            })
        }

        function mu(a, b) {
            var c, d, e, f, g, h, k;
            return O(function (l) {
                if (1 == l.g) {
                    c = [];
                    d = a.matchedStreams;
                    e = t(d);
                    for (f = e.next(); !f.done; f = e.next()) g = f.value, c.push(g.createSegmentIndex()), g.trickModeVideo && !g.trickModeVideo.segmentIndex && c.push(g.trickModeVideo.createSegmentIndex());
                    return G(l, Promise.all(c), 2)
                }
                if (a.segmentIndex instanceof Uk) for (h = b; h < d.length; h++) k = d[h], k.segmentIndex && a.segmentIndex.g.push(k.segmentIndex);
                H(l)
            })
        }

        function iu(a, b, c, d, e, f) {
            if (ju(b)) return null;
            var g = d(b);
            lu(a, c, g);
            g.createSegmentIndex && (g.createSegmentIndex = function () {
                return O(function (h) {
                    if (g.segmentIndex) return h.u(0);
                    g.segmentIndex = new Uk;
                    return G(h, mu(g, 0), 0)
                })
            });
            if (!g.matchedStreams || !g.matchedStreams.length) return null;
            nu(g, 0, e, f, 0);
            return g
        }

        function nu(a, b, c, d, e) {
            var f = a.matchedStreams;
            for (b += e; b < f.length; b++) {
                var g = f[b];
                c(a, g);
                var h = !0;
                "audio" == a.type && 0 == Ie(a.language, g.language) && (h = !1);
                if (h && (d[b - e].delete(g), g.fullMimeTypes)) for (g = t(g.fullMimeTypes.values()), h = g.next(); !h.done; h = g.next()) a.fullMimeTypes.add(h.value)
            }
        }

        function bu(a) {
            var b = Object.assign({}, a);
            b.originalId = null;
            b.createSegmentIndex = function () {
                return Promise.resolve()
            };
            b.closeSegmentIndex = function () {
                b.segmentIndex && (b.segmentIndex.release(), b.segmentIndex = null);
                if (b.matchedStreams) for (var c = t(b.matchedStreams), d = c.next(); !d.done; d = c.next()) d = d.value, d.segmentIndex && (d.segmentIndex.release(), d.segmentIndex = null)
            };
            b.roles = b.roles.slice();
            b.segmentIndex = null;
            b.emsgSchemeIdUris = [];
            b.keyIds = new Set;
            b.closedCaptions = null;
            b.trickModeVideo = null;
            return b
        }

        function fu(a) {
            a = Object.assign({}, a);
            a.roles = a.roles.slice();
            a.keyIds = new Set;
            a.segments = [];
            a.variantIds = [];
            a.closedCaptions = null;
            return a
        }

        function cu(a, b) {
            function c(g, h) {
                g || (g = []);
                h = t(h);
                for (var k = h.next(); !k.done; k = h.next()) k = k.value, g.includes(k) || g.push(k);
                return g
            }

            a.roles = c(a.roles, b.roles);
            b.emsgSchemeIdUris && (a.emsgSchemeIdUris = c(a.emsgSchemeIdUris, b.emsgSchemeIdUris));
            for (var d = t(b.keyIds), e = d.next(); !e.done; e = d.next()) a.keyIds.add(e.value);
            null == a.originalId ? a.originalId = b.originalId : a.originalId += "," + (b.originalId || "");
            d = Oc(a.drmInfos, b.drmInfos);
            if (b.drmInfos.length && a.drmInfos.length && !d.length) throw new T(2, 4, 4038);
            a.drmInfos =
                d;
            a.encrypted = a.encrypted || b.encrypted;
            if (b.closedCaptions) for (a.closedCaptions || (a.closedCaptions = new Map), d = t(b.closedCaptions), e = d.next(); !e.done; e = d.next()) {
                var f = t(e.value);
                e = f.next().value;
                f = f.next().value;
                a.closedCaptions.set(e, f)
            }
            a.bandwidth && b.bandwidth && (a.bandwidth = Math.max(a.bandwidth, b.bandwidth));
            b.trickModeVideo ? (a.trickModeVideo || (a.trickModeVideo = bu(b.trickModeVideo), a.trickModeVideo.createSegmentIndex = function () {
                a.trickModeVideo.segmentIndex = a.segmentIndex.clone();
                return Promise.resolve()
            }),
                cu(a.trickModeVideo, b.trickModeVideo)) : a.trickModeVideo && cu(a.trickModeVideo, b)
        }

        function gu(a, b) {
            var c = a.roles;
            c || (c = []);
            for (var d = t(b.roles), e = d.next(); !e.done; e = d.next()) e = e.value, c.includes(e) || c.push(e);
            a.roles = c;
            c = t(b.keyIds);
            for (d = c.next(); !d.done; d = c.next()) a.keyIds.add(d.value);
            a.encrypted = a.encrypted && b.encrypted;
            a.segments.push.apply(a.segments, x(b.segments));
            if (b.closedCaptions) for (a.closedCaptions || (a.closedCaptions = new Map), b = t(b.closedCaptions), c = b.next(); !c.done; c = b.next()) d = t(c.value), c = d.next().value, d = d.next().value, a.closedCaptions.set(c, d)
        }

        function lu(a, b, c, d) {
            d = (void 0 === d ? 0 : d) ? c.matchedStreams : [];
            b = t(b);
            for (var e = b.next(); !e.done; e = b.next()) {
                e = ou(a, e.value, c);
                if (!e) return;
                d.push(e)
            }
            c.matchedStreams = d
        }

        function ou(a, b, c) {
            var d = {audio: Wt, video: Xt, text: Yt, image: Zt}[c.type], e = null, f = d(c);
            if (b.has(f)) e = b.get(f); else {
                f = {
                    audio: function (l, m) {
                        return ku(a, l, m)
                    }, video: function (l, m) {
                        return ku(a, l, m)
                    }, text: pu, image: qu
                }[c.type];
                for (var g = {
                    audio: ru,
                    video: su,
                    text: tu,
                    image: uu
                }[c.type], h = t(b.values()), k = h.next(); !k.done; k = h.next()) k = k.value, !f(c, k) || c.fastSwitching != k.fastSwitching || e && !g(c, e, k) || (e = k)
            }
            a.s && !ju(e) && b.delete(d(e));
            return e
        }

        function vu(a, b) {
            return a.mimeType != b.mimeType ? !1 : wu(a.codecs) === wu(b.codecs)
        }

        r.ih = function (a) {
            this.o = a
        };
        r.ph = function (a) {
            this.s = a
        };

        function ku(a, b, c) {
            return !vu(b, c) && !a.o || b.drmInfos && !Mc(b.drmInfos, c.drmInfos) ? !1 : !0
        }

        function pu(a, b) {
            return b.language ? a.forced !== b.forced || 0 == Ie(a.language, b.language) || b.kind != a.kind ? !1 : !0 : !0
        }

        function qu() {
            return !0
        }

        function ru(a, b, c) {
            var d = vu(a, b), e = vu(a, c);
            if (d && !e) return !1;
            if (!d && e) return !0;
            d = Ie(a.language, b.language);
            e = Ie(a.language, c.language);
            if (e > d) return !0;
            if (e < d) return !1;
            if (b.label !== c.label) {
                if (a.label === b.label) return !1;
                if (a.label === c.label) return !0
            }
            if (a.roles.length) {
                d = b.roles.filter(function (f) {
                    return a.roles.includes(f)
                });
                e = c.roles.filter(function (f) {
                    return a.roles.includes(f)
                });
                if (e.length > d.length) return !0;
                if (e.length < d.length) return !1;
                if (c.roles.length !== b.roles.length) return c.roles.length <
                    b.roles.length
            } else {
                if (!c.roles.length && b.roles.length) return !0;
                if (c.roles.length && !b.roles.length) return !1
            }
            if (!b.primary && c.primary) return !0;
            if (b.primary && !c.primary) return !1;
            d = xu(a.channelsCount, b.channelsCount, c.channelsCount);
            if (d == yu) return !0;
            if (d == zu) return !1;
            d = xu(a.audioSamplingRate, b.audioSamplingRate, c.audioSamplingRate);
            return d == yu ? !0 : d == zu ? !1 : a.bandwidth && Au(a.bandwidth, b.bandwidth, c.bandwidth) == yu ? !0 : !1
        }

        function su(a, b, c) {
            var d = vu(a, b), e = vu(a, c);
            if (d && !e) return !1;
            if (!d && e) return !0;
            d = xu(a.width * a.height, b.width * b.height, c.width * c.height);
            if (d == yu) return !0;
            if (d == zu) return !1;
            if (a.frameRate) {
                d = xu(a.frameRate, b.frameRate, c.frameRate);
                if (d == yu) return !0;
                if (d == zu) return !1
            }
            return a.bandwidth && Au(a.bandwidth, b.bandwidth, c.bandwidth) == yu ? !0 : !1
        }

        function tu(a, b, c) {
            var d = Ie(a.language, b.language), e = Ie(a.language, c.language);
            if (e > d) return !0;
            if (e < d) return !1;
            if (!b.primary && c.primary) return !0;
            if (b.primary && !c.primary) return !1;
            if (b.label !== c.label) {
                if (a.label === b.label) return !1;
                if (a.label === c.label) return !0
            }
            if (a.roles.length) {
                d = b.roles.filter(function (f) {
                    return a.roles.includes(f)
                });
                e = c.roles.filter(function (f) {
                    return a.roles.includes(f)
                });
                if (e.length > d.length) return !0;
                if (e.length < d.length) return !1
            } else {
                if (!c.roles.length && b.roles.length) return !0;
                if (c.roles.length && !b.roles.length) return !1
            }
            return c.mimeType != a.mimeType || c.codecs != a.codecs || b.mimeType == a.mimeType && b.codecs == a.codecs ? !1 : !0
        }

        function uu(a, b, c) {
            return xu(a.width * a.height, b.width * b.height, c.width * c.height) == yu ? !0 : !1
        }

        function eu(a) {
            return {
                id: 0,
                originalId: "",
                groupId: null,
                primary: !1,
                type: a,
                mimeType: "",
                codecs: "",
                language: "",
                originalLanguage: null,
                label: null,
                width: null,
                height: null,
                encrypted: !1,
                keyIds: new Set,
                segments: [],
                variantIds: [],
                roles: [],
                forced: !1,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                closedCaptions: null,
                external: !1,
                fastSwitching: !1
            }
        }

        function $t(a) {
            return {
                id: 0,
                originalId: "",
                groupId: null,
                createSegmentIndex: function () {
                    return Promise.resolve()
                },
                segmentIndex: new Rk([]),
                mimeType: "",
                codecs: "",
                encrypted: !1,
                drmInfos: [],
                keyIds: new Set,
                language: "",
                originalLanguage: null,
                label: null,
                type: a,
                primary: !1,
                trickModeVideo: null,
                emsgSchemeIdUris: null,
                roles: [],
                forced: !1,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: !1,
                closedCaptions: null,
                accessibilityPurpose: null,
                external: !1,
                fastSwitching: !1,
                fullMimeTypes: new Set
            }
        }

        function xu(a, b, c) {
            if (b == a && a != c) return zu;
            if (c == a && a != b) return yu;
            if (b > a) {
                if (c <= a || c - a < b - a) return yu;
                if (c - a > b - a) return zu
            } else {
                if (c > a) return zu;
                if (a - c < a - b) return yu;
                if (a - c > a - b) return zu
            }
            return Bu
        }

        function Au(a, b, c) {
            b = Math.abs(a - b);
            a = Math.abs(a - c);
            return a < b ? yu : b < a ? zu : Bu
        }

        function ju(a) {
            switch (a.type) {
                case Vd:
                    return !a.language;
                case "image":
                    return !a.tilesLayout;
                default:
                    return !1
            }
        }

        function Xt(a) {
            return JSON.stringify([a.fastSwitching, a.width, a.frameRate, wu(a.codecs), a.mimeType, a.label, a.roles, a.closedCaptions ? Array.from(a.closedCaptions.entries()) : null, a.bandwidth])
        }

        function Wt(a) {
            return JSON.stringify([a.fastSwitching, a.channelsCount, a.language, a.bandwidth, a.label, wu(a.codecs), a.mimeType, a.roles, a.audioSamplingRate, a.primary])
        }

        function Yt(a) {
            return JSON.stringify([a.language, a.label, a.codecs, a.mimeType, a.bandwidth, a.roles])
        }

        function Zt(a) {
            return JSON.stringify([a.width, a.codecs, a.mimeType])
        }

        function wu(a) {
            if (!Cu.has(a)) {
                var b = ge(a);
                Cu.set(a, b)
            }
            return Cu.get(a)
        }

        S("shaka.util.PeriodCombiner", Ut);
        Ut.prototype.setUseStreamOnce = Ut.prototype.ph;
        Ut.prototype.setAllowMultiTypeVariants = Ut.prototype.ih;
        Ut.prototype.combinePeriods = Ut.prototype.gf;
        Ut.prototype.getImageStreams = Ut.prototype.Uh;
        Ut.prototype.getTextStreams = Ut.prototype.Gf;
        Ut.prototype.getVariants = Ut.prototype.li;
        var yu = 1, Bu = 0, zu = -1, Cu = new Map;

        function Du(a, b) {
            var c = new DOMParser, d = Eu.value()(a);
            a = null;
            try {
                a = c.parseFromString(d, "text/xml")
            } catch (e) {
                return null
            }
            c = a.documentElement;
            if (!c || c.getElementsByTagName("parsererror").length || c.tagName != b) return null;
            if (!("createNodeIterator" in document)) return c;
            for (b = document.createNodeIterator(a, NodeFilter.SHOW_ALL); a = b.nextNode();) if (a instanceof HTMLElement || a instanceof SVGElement) return null;
            return c
        }

        function Fu(a, b) {
            try {
                var c = zd(a);
                return Du(c, b)
            } catch (d) {
                return null
            }
        }

        var Eu = new Lc(function () {
            if ("undefined" !== typeof trustedTypes) {
                var a = trustedTypes.createPolicy("shaka-player#xml", {
                    createHTML: function (b) {
                        return b
                    }
                });
                return function (b) {
                    return a.createHTML(b)
                }
            }
            return function (b) {
                return b
            }
        });

        function Gu() {
            var a = this;
            this.j = this.g = null;
            this.A = [];
            this.i = null;
            this.ea = 1;
            this.B = [];
            this.l = {we: "", type: "", profiles: [], Mb: null, Ia: 0, Ga: null, Ld: 0};
            this.o = new Map;
            this.s = {};
            this.aa = {};
            this.m = new Ut;
            this.H = 0;
            this.da = new Qa(5);
            this.I = new Tc(function () {
                if (a.G && !a.g.continueLoadingWhenPaused && (a.C.lb(a.G, "timeupdate"), a.G.paused)) {
                    a.C.ha(a.G, "timeupdate", function () {
                        return Hu(a)
                    });
                    return
                }
                Hu(a)
            });
            this.N = new mg;
            this.L = null;
            this.fa = [];
            this.R = Infinity;
            this.F = !1;
            this.h = null;
            this.K = 0;
            this.U = !1;
            this.C = new gb;
            this.G = null;
            this.Z = !1
        }

        r = Gu.prototype;
        r.configure = function (a) {
            var b = this.j && a.dash.updatePeriod != this.g.dash.updatePeriod && 0 <= a.dash.updatePeriod;
            this.g = a;
            b && this.i && this.i.presentationTimeline.V() && this.I.xc();
            this.h && this.h.configure(this.g);
            this.m && (this.m.ih(this.g.dash.multiTypeVariantsAllowed && pb()), this.m.ph(this.g.dash.useStreamOnceInPeriodFlattening))
        };
        r.start = function (a, b) {
            var c = this, d;
            return O(function (e) {
                if (1 == e.g) return c.F = b.isLowLatencyMode(), c.A = [a], c.j = b, G(e, Iu(c), 2);
                d = e.h;
                c.j && Ju(c, d);
                if (!c.j) throw new T(2, 7, 7001);
                return e.return(c.i)
            })
        };
        r.stop = function () {
            for (var a = t(Object.values(this.s)), b = a.next(); !b.done; b = a.next()) b = b.value, b.segmentIndex && b.segmentIndex.release();
            this.m && this.m.release();
            this.g = this.j = null;
            this.A = [];
            this.i = null;
            this.s = {};
            this.o.clear();
            this.l = {we: "", type: "", profiles: [], Mb: null, Ia: 0, Ga: null, Ld: 0};
            this.m = null;
            null != this.I && (this.I.stop(), this.I = null);
            this.h && this.h.destroy();
            this.C && (this.C.release(), this.C = null);
            return this.N.destroy()
        };
        r.update = function () {
            var a = this, b;
            return O(function (c) {
                if (1 == c.g) return sa(c, 2), G(c, Iu(a), 4);
                if (2 != c.g) return va(c, 0);
                b = wa(c);
                if (!a.j || !b) return c.return();
                a.j.onError(b);
                H(c)
            })
        };
        r.onExpirationUpdated = function () {
        };
        r.onInitialVariantChosen = function (a) {
            if (this.i && this.i.presentationTimeline.V()) {
                var b = a.video || a.audio;
                if (b && b.segmentIndex) {
                    a = this.i.presentationTimeline.Zb();
                    var c = b.segmentIndex.find(a);
                    null != c && (b = b.segmentIndex.get(c)) && (this.H = b.endTime - a, Ju(this, 0))
                }
            }
        };
        r.banLocation = function (a) {
            this.h && this.h.banLocation(a)
        };
        r.setMediaElement = function (a) {
            this.G = a
        };

        function Iu(a) {
            var b, c, d, e, f, g, h, k, l, m;
            return O(function (n) {
                if (1 == n.g) return b = 4, c = "MPD", d = Ku(a), e = a.A, d.length ? (e = d, c = "Patch", b = 6) : 1 < a.A.length && a.h && (f = Tt(a.h, "Location", !0), f.length && (e = f)), g = tg(e, a.g.retryParameters), h = Date.now(), G(n, Lu(a, g, 0, {type: b}), 2);
                if (3 != n.g) {
                    k = n.h;
                    if (!a.j) return n.return(0);
                    k.uri && k.uri != k.originalUri && !a.A.includes(k.uri) && a.A.unshift(k.uri);
                    return G(n, Mu(a, k.data, k.uri, c), 3)
                }
                l = Date.now();
                m = (l - h) / 1E3;
                a.da.sample(1, m);
                return n.return(m)
            })
        }

        function Mu(a, b, c, d) {
            var e, f, g, h, k, l, m, n, p, q, u;
            return O(function (w) {
                if (1 == w.g) {
                    e = b;
                    f = a.g.dash.manifestPreprocessor;
                    g = ym;
                    if (f != g) {
                        rb("manifest.dash.manifestPreprocessor configuration", "Please Use manifest.dash.manifestPreprocessorTXml instead.");
                        h = Fu(e, d);
                        if (!h) throw new T(2, 4, 4001, c);
                        f(h);
                        e = Ad(h.outerHTML)
                    }
                    k = $g(e, d);
                    if (!k) throw new T(2, 4, 4001, c);
                    l = a.g.dash.manifestPreprocessorTXml;
                    m = zm;
                    l != m && l(k);
                    if ("Patch" === d) return w.return(Nu(a, k));
                    if (n = a.g.dash.disableXlinkProcessing) return w.return(Ou(a, k, c));
                    p = a.g.dash.xlinkFailGracefully;
                    q = ft(k, a.g.retryParameters, p, c, a.j.networkingEngine);
                    ng(a.N, q);
                    return G(w, q.promise, 2)
                }
                u = w.h;
                return w.return(Ou(a, u, c))
            })
        }

        function Ou(a, b, c) {
            var d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L, J, E, K, N, M, P, R, Q, W, aa, Sa,
                ta, Ma, Ya, Ta, hb, Wa, Ua, mc, Oa, lb, Pb, Nc, ke, le, me, Kd, Li, Ld, Mi, Ni, Eg, ne;
            return O(function (nc) {
                switch (nc.g) {
                    case 1:
                        a.h && a.h.l.clear();
                        d = [c];
                        e = [];
                        f = new Map;
                        g = gh(b, "Location");
                        h = t(g);
                        for (k = h.next(); !k.done; k = h.next()) if (l = k.value, m = l.attributes.serviceLocation, n = ih(l)) p = Nd(d, [n])[0], m && (a.h ? St(a.h, "Location", m, p) : f.set(m, p)), e.push(p);
                        a.h ? (q = Tt(a.h, "Location", !0), 0 < q.length && (d = a.A = q)) : e.length && (d = a.A = e);
                        a.l.we = b.attributes.id ||
                            "";
                        a.l.Ld = nh(b, "publishTime", qh) || 0;
                        a.B = gh(b, "PatchLocation");
                        u = Promise.resolve();
                        if ((w = kh(b, "ContentSteering")) && a.j) {
                            v = w.attributes.defaultServiceLocation;
                            if (a.h) a.h.i = d, a.h.h = v; else if (a.h = new Ot(a.j), a.h.configure(a.g), a.h.setManifestType("DASH"), a.h.i = d, a.h.h = v, A = ih(w)) (y = nh(w, "queryBeforeStart", xh, !1)) ? u = Pt(a.h, A) : Pt(a.h, A);
                            D = t(f.keys());
                            for (z = D.next(); !z.done; z = D.next()) B = z.value, C = f.get(B), St(a.h, "Location", B, C)
                        }
                        F = gh(b, "BaseURL");
                        L = !1;
                        if (a.h) for (J = t(F), E = J.next(); !E.done; E = J.next()) K = E.value,
                            N = K.attributes.serviceLocation, M = ih(K), N && M && (St(a.h, "BaseURL", N, M), L = !0);
                        L && a.h || (P = F.map(ih), I = Nd(d, P));
                        R = function () {
                            return a.h && L ? Tt(a.h, "BaseURL") : I ? I : []
                        };
                        a.l.Ga = R;
                        Q = 0;
                        F && F.length && (Q = nh(F[0], "availabilityTimeOffset", wh) || 0);
                        a.l.Ia = Q;
                        W = a.g.dash.ignoreMinBufferTime;
                        aa = 0;
                        W || (aa = nh(b, "minBufferTime", rh) || 0);
                        a.H = nh(b, "minimumUpdatePeriod", rh, -1);
                        Sa = nh(b, "availabilityStartTime", qh);
                        ta = nh(b, "timeShiftBufferDepth", rh);
                        Ma = a.g.dash.ignoreSuggestedPresentationDelay;
                        Ya = null;
                        Ma || (Ya = nh(b, "suggestedPresentationDelay",
                            rh));
                        Ta = a.g.dash.ignoreMaxSegmentDuration;
                        hb = null;
                        Ta || (hb = nh(b, "maxSegmentDuration", rh));
                        Wa = b.attributes.type || "static";
                        a.i && a.i.presentationTimeline && (a.Z = a.i.presentationTimeline.V() && "static" == Wa);
                        a.l.type = Wa;
                        if (a.i) for (Ua = a.i.presentationTimeline, mc = t(Object.values(a.s)), Oa = mc.next(); !Oa.done; Oa = mc.next()) lb = Oa.value, lb.segmentIndex && lb.segmentIndex.Oa(Ua.nb()); else Pb = a.g.defaultPresentationDelay || 1.5 * aa, Nc = null != Ya ? Ya : Pb, Ua = new vk(Sa, Nc, a.g.dash.autoCorrectDrift);
                        Ua.wc("static" == Wa);
                        (ke = Ua.V()) &&
                        !isNaN(a.g.availabilityWindowOverride) && (ta = a.g.availabilityWindowOverride);
                        null == ta && (ta = Infinity);
                        Ua.Ie(ta);
                        le = b.attributes.profiles || "";
                        a.l.profiles = le.split(",");
                        me = {
                            xb: "static" != Wa,
                            presentationTimeline: Ua,
                            va: null,
                            ja: null,
                            la: null,
                            J: null,
                            bandwidth: 0,
                            If: !1,
                            Ia: Q,
                            Mb: null,
                            profiles: le.split(","),
                            roles: null
                        };
                        a.K = 0;
                        Kd = Pu(a, me, R, b);
                        Li = Kd.duration;
                        Ld = Kd.periods;
                        ("static" != Wa || a.Z) && Kd.Fg || Ua.$a(Li || Infinity);
                        a.U && !a.F && (Mi = a.j.isAutoLowLatencyMode()) && (a.j.enableLowLatencyMode(), a.F = a.j.isLowLatencyMode());
                        a.F && Ua.jh(a.R);
                        Ua.Pf(hb || 1);
                        return G(nc, u, 2);
                    case 2:
                        a.F && (aa = 0, Ni = null != Ya ? Ya : a.g.defaultPresentationDelay, Ua.eg(Ni));
                        if (!a.i) return G(nc, a.m.gf(Ld, me.xb), 6);
                        a.i.periodCount = Ld.length;
                        a.i.gapCount = a.K;
                        return G(nc, Qu(a, Ld, !1), 4);
                    case 6:
                        a.i = {
                            presentationTimeline: Ua,
                            variants: a.m.j,
                            textStreams: a.m.Gf(),
                            imageStreams: a.m.i,
                            offlineSessionIds: [],
                            minBufferTime: aa || 0,
                            sequenceMode: a.g.dash.sequenceMode,
                            ignoreManifestTimestampsInSegmentsMode: !1,
                            type: "DASH",
                            serviceDescription: Ru(b),
                            nextUrl: dv(b),
                            periodCount: Ld.length,
                            gapCount: a.K,
                            isLowLatency: a.U
                        };
                        if (!Ua.uh()) {
                            nc.u(7);
                            break
                        }
                        Eg = gh(b, "UTCTiming");
                        return G(nc, ev(a, R, Eg), 8);
                    case 8:
                        ne = nc.h;
                        if (!a.j) return nc.return();
                        Ua.kh(ne);
                    case 7:
                        Ua.re();
                    case 4:
                        a.j.makeTextStreamsForClosedCaptions(a.i), H(nc)
                }
            })
        }

        function Qu(a, b, c) {
            var d;
            return O(function (e) {
                if (1 == e.g) return G(e, a.m.gf(b, !0, c), 2);
                a.i.variants = a.m.j;
                d = a.m.Gf();
                0 < d.length && (a.i.textStreams = d);
                a.i.imageStreams = a.m.i;
                a.j.filter(a.i);
                H(e)
            })
        }

        function Nu(a, b) {
            var c, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L, J;
            return O(function (E) {
                if (1 == E.g) {
                    c = b.attributes.mpdId;
                    d = nh(b, "originalPublishTime", qh);
                    if (!c || c !== a.l.we || d !== a.l.Ld) throw a.B = [], new T(1, 4, 4052);
                    e = [];
                    f = [];
                    g = new Set;
                    h = t(fh(b));
                    for (k = h.next(); !k.done; k = h.next()) if (l = k.value, m = zh(l.attributes.sel || ""), n = m[m.length - 1], p = ih(l) || "", "MPD" === n.name) if ("mediaPresentationDuration" === n.Vb) {
                        q = ih(l) || "";
                        var K = rh(q);
                        if (null != K) {
                            a.l.Mb = K;
                            for (var N = t(a.o.values()), M = N.next(); !M.done; M = N.next()) M.value.Mb =
                                K
                        }
                    } else if ("type" === n.Vb) {
                        a.i.presentationTimeline.wc("static" == p);
                        a.l.type = p;
                        K = t(a.o.values());
                        for (N = K.next(); !N.done; N = K.next()) N.value.xb = "dynamic" == p;
                        "static" == p && (a.H = -1)
                    } else "publishTime" === n.Vb ? a.l.Ld = qh(p) || 0 : null === n.Vb && "add" === l.tagName && f.push(l); else if ("PatchLocation" === n.name) Ah(a.B, l); else if ("Period" === n.name) if ("add" === l.tagName) f.push(l); else {
                        if ("remove" === l.tagName && n.id) for (K = n.id, a.i.periodCount--, N = t(a.o.keys()), M = N.next(); !M.done; M = N.next()) if (M = M.value, M.startsWith(K)) {
                            var P =
                                a.o.get(M);
                            ct(P, Et, "SegmentTimeline").children = [];
                            fv(a, M);
                            a.o.delete(M)
                        }
                    } else if ("SegmentTemplate" === n.name) {
                        N = zh(l.attributes.sel || "");
                        K = N[N.length - 1];
                        if (K.Vb) {
                            N = gv(a, N);
                            M = ih(l) || "";
                            P = t(N);
                            for (var R = P.next(); !R.done; R = P.next()) R = a.o.get(R.value), Bh(R.J.cc, l.tagName, K.Vb, M);
                            K = N
                        } else K = [];
                        u = K;
                        w = t(u);
                        for (v = w.next(); !v.done; v = w.next()) A = v.value, g.add(A)
                    } else if ("SegmentTimeline" === n.name || "S" === n.name) {
                        K = zh(l.attributes.sel || "");
                        K = gv(a, K);
                        N = t(K);
                        for (M = N.next(); !M.done; M = N.next()) M = a.o.get(M.value), M =
                            ct(M, Et, "SegmentTimeline"), P = gh(M, "S"), Ah(P, l), M.children = P;
                        y = K;
                        D = t(y);
                        for (v = D.next(); !v.done; v = D.next()) z = v.value, g.add(z)
                    }
                    B = t(g);
                    for (v = B.next(); !v.done; v = B.next()) C = v.value, fv(a, C);
                    F = t(f);
                    for (I = F.next(); !I.done; I = F.next()) L = I.value, e.push.apply(e, x(Pu(a, {
                        xb: "dynamic" == a.l.type,
                        presentationTimeline: a.i.presentationTimeline,
                        va: null,
                        ja: null,
                        la: null,
                        J: null,
                        bandwidth: 0,
                        If: !1,
                        Ia: a.l.Ia,
                        profiles: a.l.profiles,
                        Mb: a.l.Mb,
                        roles: null
                    }, a.l.Ga, L).periods));
                    if (!e.length) return E.u(2);
                    a.i.periodCount += e.length;
                    a.i.gapCount = a.K;
                    return G(E, Qu(a, e, !0), 2)
                }
                "static" == a.l.type && (J = a.l.Mb, a.i.presentationTimeline.$a(J || Infinity));
                H(E)
            })
        }

        function gv(a, b) {
            var c = "", d = "", e = "";
            b = t(b);
            for (var f = b.next(); !f.done; f = b.next()) f = f.value, "Period" === f.name ? c = f.id : "AdaptationSet" === f.name ? d = f.id : "Representation" === f.name && (e = f.id);
            b = [];
            if (e) b.push(c + "," + e); else for (a = t(a.o.values()), e = a.next(); !e.done; e = a.next()) e = e.value, e.va.id === c && e.la.id === d && e.J.id && b.push(c + "," + e.J.id);
            return b
        }

        function fv(a, b) {
            var c = a.o.get(b), d = a.s[b];
            d.segmentIndex && d.segmentIndex.Oa(a.i.presentationTimeline.nb());
            try {
                var e = Dt(c, function (f, g, h, k) {
                    return hv(a, f, g, h, k)
                }, a.s, !0, a.g.dash.initialSegmentLimit, a.aa, c.J.aesKey, null, !0);
                d.createSegmentIndex = function () {
                    var f;
                    return O(function (g) {
                        if (1 == g.g) {
                            if (d.segmentIndex) return g.u(0);
                            f = d;
                            return G(g, e.mc(), 3)
                        }
                        f.segmentIndex = g.h;
                        H(g)
                    })
                }
            } catch (f) {
                if (b = c.J.contentType, b != Vd && "application" != b && "image" != b || 4002 != f.code) throw f;
            }
        }

        function Ru(a) {
            var b = kh(a, "ServiceDescription");
            if (!b) return null;
            a = kh(b, "Latency");
            b = kh(b, "PlaybackRate");
            if (!a && !b) return null;
            var c = {};
            a && ("target" in a.attributes && (c.targetLatency = parseInt(a.attributes.target, 10) / 1E3), "max" in a.attributes && (c.maxLatency = parseInt(a.attributes.max, 10) / 1E3), "min" in a.attributes && (c.minLatency = parseInt(a.attributes.min, 10) / 1E3));
            b && ("max" in b.attributes && (c.maxPlaybackRate = parseFloat(b.attributes.max)), "min" in b.attributes && (c.minPlaybackRate = parseFloat(b.attributes.min)));
            return c
        }

        function dv(a) {
            a = gh(a, "SupplementalProperty");
            if (!a.length) return null;
            a = t(a);
            for (var b = a.next(); !b.done; b = a.next()) if (b = b.value, "urn:mpeg:dash:chaining:2016" == b.attributes.schemeIdUri) return b.attributes.value;
            return null
        }

        function Pu(a, b, c, d) {
            var e = b.Mb;
            e || (e = nh(d, "mediaPresentationDuration", rh), a.l.Mb = e);
            var f = 0;
            a.i && a.i.presentationTimeline && a.Z && (f = a.i.presentationTimeline.Yb());
            var g = [], h = f;
            d = gh(d, "Period");
            for (var k = 0; k < d.length; k++) {
                var l = d[k], m = d[k + 1], n = nh(l, "start", rh, h), p = l.attributes.id, q = nh(l, "duration", rh),
                    u = null;
                if (m) {
                    var w = nh(m, "start", rh);
                    null != w && (u = w - n)
                } else null != e && (u = e - n + f);
                w = Yd;
                u && q && Math.abs(u - q) > w && u > q && a.K++;
                null == u && (u = q);
                if (!(null !== a.L && null !== p && null !== n && n < a.L) || a.fa.includes(p) || k + 1 ==
                    d.length) {
                    null !== n && (null === a.L || n > a.L) && (a.L = n);
                    h = iv(a, b, c, {start: n, duration: u, node: l, Dd: null == u || !m});
                    g.push(h);
                    b.va.id && u && (a.aa[b.va.id] = u);
                    if (null == u) {
                        h = null;
                        break
                    }
                    h = n + u
                }
            }
            a.fa = g.map(function (v) {
                return v.id
            });
            return null != e ? {periods: g, duration: e + f, Fg: !1} : {periods: g, duration: h, Fg: !0}
        }

        function iv(a, b, c, d) {
            b.va = jv(a, d.node, null, c);
            b.ja = d;
            b.va.Ia = b.Ia;
            b.va.id || (b.va.id = "__shaka_period_" + d.start);
            var e = gh(d.node, "EventStream");
            c = b.presentationTimeline.nb();
            e = t(e);
            for (var f = e.next(); !f.done; f = e.next()) kv(a, d.start, d.duration, f.value, c);
            c = gh(d.node, "AdaptationSet").map(function (m) {
                return lv(a, b, m)
            }).filter(Be);
            if (b.xb) {
                d = [];
                e = t(c);
                for (f = e.next(); !f.done; f = e.next()) {
                    f = t(f.value.Ti);
                    for (var g = f.next(); !g.done; g = f.next()) d.push(g.value)
                }
                if (d.length != (new Set(d)).size) throw new T(2, 4, 4018);
            }
            d = c.filter(function (m) {
                return !m.mg
            });
            c = c.filter(function (m) {
                return m.mg
            });
            c = t(c);
            for (e = c.next(); !e.done; e = c.next()) {
                e = e.value;
                f = e.mg.split(" ");
                g = t(d);
                for (var h = g.next(); !h.done; h = g.next()) {
                    var k = h.value;
                    if (f.includes(k.id)) {
                        h = {};
                        k = t(k.streams);
                        for (var l = k.next(); !l.done; h = {Zd: h.Zd}, l = k.next()) h.Zd = l.value, h.Zd.trickModeVideo = e.streams.find(function (m) {
                            return function (n) {
                                return ge(m.Zd.codecs) == ge(n.codecs)
                            }
                        }(h))
                    }
                }
            }
            c = mv(a.g.disableAudio, d, "audio");
            e = mv(a.g.disableVideo, d, "video");
            f = mv(a.g.disableText,
                d, Vd);
            d = mv(a.g.disableThumbnails, d, "image");
            if (0 === e.length && 0 === c.length) throw new T(2, 4, 4004);
            return {id: b.va.id, audioStreams: c, videoStreams: e, textStreams: f, imageStreams: d}
        }

        function mv(a, b, c) {
            return a || !b.length ? [] : b.reduce(function (d, e) {
                if (e.contentType != c) return d;
                d.push.apply(d, x(e.streams));
                return d
            }, [])
        }

        function lv(a, b, c) {
            function d(E) {
                switch (E) {
                    case 1:
                    case 5:
                    case 6:
                    case 7:
                        return "srgb";
                    case 9:
                        return "rec2020";
                    case 11:
                    case 12:
                        return "p3"
                }
            }

            function e(E) {
                switch (E) {
                    case 1:
                    case 6:
                    case 13:
                    case 14:
                    case 15:
                        return "SDR";
                    case 16:
                        return "PQ";
                    case 18:
                        return "HLG"
                }
            }

            b.la = jv(a, c, b.va, null);
            var f = !1, g = gh(c, "Role"), h = g.map(function (E) {
                return E.attributes.value
            }).filter(Be), k = void 0, l = b.la.contentType == Vd;
            l && (k = "subtitle");
            g = t(g);
            for (var m = g.next(); !m.done; m = g.next()) {
                m = m.value;
                var n = m.attributes.schemeIdUri;
                if (null ==
                    n || "urn:mpeg:dash:role:2011" == n) switch (m = m.attributes.value, m) {
                    case "main":
                        f = !0;
                        break;
                    case "caption":
                    case "subtitle":
                        k = m
                }
            }
            var p, q;
            n = gh(c, "EssentialProperty");
            g = null;
            var u = !1;
            m = !1;
            n = t(n);
            for (var w = n.next(); !w.done; w = n.next()) {
                w = w.value;
                var v = w.attributes.schemeIdUri;
                "http://dashif.org/guidelines/trickmode" == v ? g = w.attributes.value : "urn:mpeg:mpegB:cicp:TransferCharacteristics" == v ? p = e(parseInt(w.attributes.value, 10)) : "urn:mpeg:mpegB:cicp:ColourPrimaries" == v ? q = d(parseInt(w.attributes.value, 10)) : "urn:mpeg:mpegB:cicp:MatrixCoefficients" !=
                    v && ("urn:mpeg:dash:ssr:2023" == v && a.g.dash.enableFastSwitching ? u = !0 : m = !0)
            }
            var A = null;
            n = gh(c, "SupplementalProperty");
            n = t(n);
            for (w = n.next(); !w.done; w = n.next()) w = w.value, v = w.attributes.schemeIdUri, "http://dashif.org/guidelines/last-segment-number" == v ? A = parseInt(w.attributes.value, 10) - 1 : "urn:mpeg:mpegB:cicp:TransferCharacteristics" == v ? p = e(parseInt(w.attributes.value, 10)) : "urn:mpeg:mpegB:cicp:ColourPrimaries" == v && (q = d(parseInt(w.attributes.value, 10)));
            n = gh(c, "Accessibility");
            var y = new Map, D;
            n = t(n);
            for (w =
                     n.next(); !w.done; w = n.next()) if (v = w.value, w = v.attributes.schemeIdUri, v = v.attributes.value, "urn:scte:dash:cc:cea-608:2015" != w || a.g.disableText) if ("urn:scte:dash:cc:cea-708:2015" != w || a.g.disableText) "urn:mpeg:dash:role:2011" == w ? null != v && (h.push(v), "captions" == v && (k = "caption")) : "urn:tva:metadata:cs:AudioPurposeCS:2007" == w && ("1" == v ? D = "visually impaired" : "2" == v && (D = "hard of hearing")); else if (w = 1, null != v) for (v = t(v.split(";")), C = v.next(); !C.done; C = v.next()) {
                C = C.value;
                var z = void 0, B = void 0;
                C.includes("=") ?
                    (C = C.split("="), z = "svc" + C[0], B = C[1].split(",")[0].split(":").pop()) : (z = "svc" + w, w++, B = C);
                y.set(z, Ee(B))
            } else y.set("svc1", "und"); else if (w = 1, null != v) {
                v = v.split(";");
                z = t(v);
                for (var C = z.next(); !C.done; C = z.next()) {
                    B = C.value;
                    var F = C = void 0;
                    B.includes("=") ? (B = B.split("="), C = B[0].startsWith("CC") ? B[0] : "CC" + B[0], F = B[1] || "und") : (C = "CC" + w, 2 == v.length ? w += 2 : w++, F = B);
                    y.set(C, Ee(F))
                }
            } else y.set("CC1", "und");
            if (m) return null;
            m = gh(c, "ContentProtection");
            var I = Ps(m, a.g.dash.ignoreDrmInfo, a.g.dash.keySystemsByURI),
                L = Ee(b.la.language || "und"), J = b.la.label;
            m = gh(c, "Representation");
            c = m.map(function (E) {
                if (E = nv(a, b, I, k, L, J, f, h, y, E, D, A)) E.hdr = E.hdr || p, E.colorGamut = E.colorGamut || q, E.fastSwitching = u;
                return E
            }).filter(function (E) {
                return !!E
            });
            if (0 == c.length) {
                g = "image" == b.la.contentType;
                if (a.g.dash.ignoreEmptyAdaptationSet || l || g) return null;
                throw new T(2, 4, 4003);
            }
            if (!b.la.contentType || "application" == b.la.contentType) for (b.la.contentType = ov(c[0].mimeType, c[0].codecs), l = t(c), w = l.next(); !w.done; w = l.next()) w.value.type = b.la.contentType;
            l = b.la.id || "__fake__" + a.ea++;
            n = t(c);
            for (w = n.next(); !w.done; w = n.next()) {
                w = w.value;
                v = t(I.drmInfos);
                for (z = v.next(); !z.done; z = v.next()) z = z.value, z.keyIds = z.keyIds && w.keyIds ? new Set([].concat(x(z.keyIds), x(w.keyIds))) : z.keyIds || w.keyIds;
                a.g.dash.enableAudioGroups && (w.groupId = l)
            }
            m = m.map(function (E) {
                return E.attributes.id
            }).filter(Be);
            return {
                id: l,
                contentType: b.la.contentType,
                language: L,
                lk: f,
                streams: c,
                drmInfos: I.drmInfos,
                mg: g,
                Ti: m
            }
        }

        function nv(a, b, c, d, e, f, g, h, k, l, m, n) {
            b.J = jv(a, l, b.la, null);
            var p = b.J.id;
            a.R = Math.min(a.R, b.J.Ia);
            a.U = 0 < a.R;
            if (!pv(b.J)) return null;
            var q = b.ja.start;
            b.bandwidth = nh(l, "bandwidth", uh) || 0;
            b.roles = h;
            var u = b.J.contentType, w = u == Vd || "application" == u;
            u = "image" == u;
            try {
                var v = void 0;
                if (c.bf) {
                    var A = b.J.Ga, y = Nd(A(), [c.bf.Ai]), D = tg(y, a.g.retryParameters);
                    v = {
                        bitsKey: 128,
                        blockCipherMode: "CBC",
                        iv: c.bf.iv,
                        firstMediaSequenceNumber: 0,
                        fetchKey: function () {
                            var K, N, M;
                            return O(function (P) {
                                if (1 == P.g) return G(P, Lu(a, D, 6), 2);
                                if (3 != P.g) {
                                    K = P.h;
                                    if (!K.data || 16 != K.data.byteLength) throw new T(2, 4, 4049);
                                    N = {name: "AES-CBC"};
                                    M = v;
                                    return G(P, window.crypto.subtle.importKey("raw", K.data, N, !0, ["decrypt"]), 3)
                                }
                                M.cryptoKey = P.h;
                                v.fetchKey = void 0;
                                H(P)
                            })
                        }
                    }
                }
                b.J.aesKey = v;
                A = function (K, N, M, P) {
                    return hv(a, K, N, M, P)
                };
                if (b.J.Tc) var z = st(b, A, v); else if (b.J.Rb) z = yt(b, a.s, v); else if (b.J.cc) z = Dt(b, A, a.s, !!a.i, a.g.dash.initialSegmentLimit, a.aa, v, n, !1); else {
                    var B = b.ja.duration || 0, C = b.J.Ga, F = b.J.mimeType, I = b.J.codecs;
                    z = {
                        mc: function () {
                            var K = Tk(q, B, C());
                            K.Jb(function (N) {
                                N.mimeType = F;
                                N.codecs = I
                            });
                            return Promise.resolve(K)
                        }
                    }
                }
            } catch (K) {
                if ((w || u) && 4002 == K.code) return null;
                throw K;
            }
            n = gh(l, "ContentProtection");
            n = Ts(n, c, a.g.dash.ignoreDrmInfo, a.g.dash.keySystemsByURI);
            n = new Set(n ? [n] : []);
            A = !1;
            gh(l, "SupplementalProperty").some(function (K) {
                return "tag:dolby.com,2018:dash:EC3_ExtensionType:2018" == K.attributes.schemeIdUri && "JOC" == K.attributes.value
            }) && (A = !0);
            y = !1;
            w && (y = h.includes("forced_subtitle") || h.includes("forced-subtitle"));
            var L;
            if (u && ((l = gh(l, "EssentialProperty").find(function (K) {
                return ["http://dashif.org/thumbnail_tile",
                    "http://dashif.org/guidelines/thumbnail_tile"].includes(K.attributes.schemeIdUri)
            })) && (L = l.attributes.value), !L)) return null;
            var J;
            l = b.J.codecs;
            b.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10") && (l.includes("hvc1.2.4.L153.B0") || l.includes("hev1.2.4.L153.B0")) && (J = "PQ");
            w = b.J.id ? b.va.id + "," + b.J.id : "";
            a.B.length && p && a.o.set(b.va.id + "," + p, qv(b));
            var E = w && a.s[w] ? a.s[w] : {
                id: a.ea++,
                originalId: b.J.id,
                groupId: null,
                createSegmentIndex: function () {
                    return Promise.resolve()
                },
                closeSegmentIndex: function () {
                    E.segmentIndex &&
                    (E.segmentIndex.release(), E.segmentIndex = null)
                },
                segmentIndex: null,
                mimeType: b.J.mimeType,
                codecs: l,
                frameRate: b.J.frameRate,
                pixelAspectRatio: b.J.pixelAspectRatio,
                bandwidth: b.bandwidth,
                width: b.J.width,
                height: b.J.height,
                kind: d,
                encrypted: 0 < c.drmInfos.length,
                drmInfos: c.drmInfos,
                keyIds: n,
                language: e,
                originalLanguage: b.la.language,
                label: f,
                type: b.la.contentType,
                primary: g,
                trickModeVideo: null,
                emsgSchemeIdUris: b.J.emsgSchemeIdUris,
                roles: h,
                forced: y,
                channelsCount: b.J.Nc,
                audioSamplingRate: b.J.audioSamplingRate,
                spatialAudio: A,
                closedCaptions: k,
                hdr: J,
                colorGamut: void 0,
                videoLayout: void 0,
                tilesLayout: L,
                accessibilityPurpose: m,
                external: !1,
                fastSwitching: !1,
                fullMimeTypes: new Set([$d(b.J.mimeType, b.J.codecs)])
            };
            E.createSegmentIndex = function () {
                var K;
                return O(function (N) {
                    if (1 == N.g) {
                        if (E.segmentIndex) return N.u(0);
                        K = E;
                        return G(N, z.mc(), 3)
                    }
                    K.segmentIndex = N.h;
                    H(N)
                })
            };
            w && b.xb && !a.s[w] && (a.s[w] = E);
            return E
        }

        function qv(a) {
            for (var b = {}, c = t(Object.keys(a)), d = c.next(); !d.done; d = c.next()) if (d = d.value, ["period", "adaptationSet", "representation"].includes(d)) {
                var e = a[d];
                b[d] = {
                    Tc: null,
                    Rb: null,
                    cc: e.cc,
                    Ga: e.Ga,
                    width: e.width,
                    height: e.height,
                    contentType: e.contentType,
                    mimeType: e.mimeType,
                    language: e.language,
                    codecs: e.codecs,
                    frameRate: e.frameRate,
                    pixelAspectRatio: e.pixelAspectRatio,
                    emsgSchemeIdUris: e.emsgSchemeIdUris,
                    id: e.id,
                    Nc: e.Nc,
                    audioSamplingRate: e.audioSamplingRate,
                    Ia: e.Ia,
                    Jc: e.Jc
                }
            } else "periodInfo" == d ? (e = a[d],
                b[d] = {start: e.start, duration: e.duration, node: null, Dd: e.Dd}) : b[d] = a[d];
            return b
        }

        function Hu(a) {
            var b, c;
            return O(function (d) {
                switch (d.g) {
                    case 1:
                        return b = 0, sa(d, 2), G(d, Iu(a), 4);
                    case 4:
                        b = d.h;
                        va(d, 3);
                        break;
                    case 2:
                        if (c = wa(d), a.j) {
                            if (a.g.raiseFatalErrorOnManifestUpdateRequestFailure) return a.j.onError(c), d.return();
                            c.severity = 1;
                            a.j.onError(c)
                        }
                    case 3:
                        if (!a.j) return d.return();
                        a.j.onManifestUpdated();
                        Ju(a, b);
                        H(d)
                }
            })
        }

        function Ju(a, b) {
            if (!(0 > a.H)) {
                var c = a.H;
                0 <= a.g.dash.updatePeriod && (c = a.g.dash.updatePeriod);
                a.I.Y(Math.max(c - b, Ra(a.da)))
            }
        }

        function jv(a, b, c, d) {
            c = c || {
                contentType: "",
                mimeType: "",
                codecs: "",
                emsgSchemeIdUris: [],
                frameRate: void 0,
                pixelAspectRatio: void 0,
                Nc: null,
                audioSamplingRate: null,
                Ia: 0,
                ag: 0
            };
            d = d || c.Ga;
            var e = b.attributes.id, f = gh(b, "BaseURL"), g, h = !1;
            if (a.h) for (var k = t(f), l = k.next(); !l.done; l = k.next()) {
                var m = l.value;
                l = m.attributes.serviceLocation;
                m = ih(m);
                l && m && (St(a.h, e, l, m), h = !0)
            }
            h && a.h || (g = f.map(ih));
            k = b.attributes.contentType || c.contentType;
            l = b.attributes.mimeType || c.mimeType;
            m = [b.attributes.codecs || c.codecs];
            var n = oh(b,
                "urn:scte:dash:scte214-extensions", "supplementalCodecs");
            n && m.push(n);
            m = zl(m).join(",");
            n = nh(b, "frameRate", yh) || c.frameRate;
            var p = b.attributes.sar || c.pixelAspectRatio, q = rv(gh(b, "InbandEventStream"), c.emsgSchemeIdUris),
                u = gh(b, "AudioChannelConfiguration");
            u = sv(u) || c.Nc;
            var w = nh(b, "audioSamplingRate", vh) || c.audioSamplingRate;
            k || (k = ov(l, m));
            var v = kh(b, "SegmentBase"), A = kh(b, "SegmentTemplate"),
                y = v ? nh(v, "availabilityTimeOffset", wh) || 0 : 0,
                D = A ? nh(A, "availabilityTimeOffset", wh) || 0 : 0,
                z = f && f.length ? nh(f[0], "availabilityTimeOffset",
                    wh) || 0 : 0;
            y = c.Ia + z + y + D;
            D = null;
            (z = kh(b, "SegmentSequenceProperties")) && (z = kh(z, "SAP")) && (D = nh(z, "cadence", th));
            z = b.attributes.label;
            var B = gh(b, "Label");
            B && B.length && (B = B[0], hh(B) && (z = hh(B)));
            return {
                Ga: function () {
                    return Nd(d(), f.length ? a.h && h ? Tt(a.h, e) : g ? g : [] : [])
                },
                Tc: v || c.Tc,
                Rb: kh(b, "SegmentList") || c.Rb,
                cc: A || c.cc,
                width: nh(b, "width", vh) || c.width,
                height: nh(b, "height", vh) || c.height,
                contentType: k,
                mimeType: l,
                codecs: m,
                frameRate: n,
                pixelAspectRatio: p,
                emsgSchemeIdUris: q,
                id: e,
                language: b.attributes.lang,
                Nc: u,
                audioSamplingRate: w,
                Ia: y,
                Jc: null,
                ag: D || c.ag,
                label: z || null
            }
        }

        function rv(a, b) {
            b = b.slice();
            a = t(a);
            for (var c = a.next(); !c.done; c = a.next()) c = c.value.attributes.schemeIdUri, b.includes(c) || b.push(c);
            return b
        }

        function sv(a) {
            a = t(a);
            for (var b = a.next(); !b.done; b = a.next()) {
                var c = b.value;
                if (b = c.attributes.schemeIdUri) if (c = c.attributes.value) switch (b) {
                    case "urn:mpeg:dash:outputChannelPositionList:2012":
                        return c.trim().split(/ +/).length;
                    case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":
                    case "urn:dts:dash:audio_channel_configuration:2012":
                        b = parseInt(c, 10);
                        if (!b) continue;
                        return b;
                    case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":
                    case "urn:dolby:dash:audio_channel_configuration:2011":
                        b =
                            parseInt(c, 16);
                        if (!b) continue;
                        for (a = 0; b;) b & 1 && ++a, b >>= 1;
                        return a;
                    case "urn:mpeg:mpegB:cicp:ChannelConfiguration":
                        if (b = [0, 1, 2, 3, 4, 5, 6, 8, 2, 3, 4, 7, 8, 24, 8, 12, 10, 12, 14, 12, 14], (c = parseInt(c, 10)) && 0 < c && c < b.length) return b[c]
                }
            }
            return null
        }

        function pv(a) {
            var b = a.Tc ? 1 : 0;
            b += a.Rb ? 1 : 0;
            b += a.cc ? 1 : 0;
            if (0 == b) return a.contentType == Vd || "application" == a.contentType ? !0 : !1;
            1 != b && (a.Tc && (a.Rb = null), a.cc = null);
            return !0
        }

        function tv(a, b, c, d) {
            var e, f, g, h, k, l, m;
            return O(function (n) {
                if (1 == n.g) return e = [Dd(c)], f = Nd(b(), e), g = tg(f, a.g.retryParameters), g.method = d, h = a.j.networkingEngine.request(4, g), ng(a.N, h), G(n, h.promise, 2);
                k = n.h;
                if ("HEAD" == d) {
                    if (!k.headers || !k.headers.date) return n.return(0);
                    l = k.headers.date
                } else l = vd(k.data);
                m = Date.parse(l);
                return isNaN(m) ? n.return(0) : n.return(m - Date.now())
            })
        }

        function ev(a, b, c) {
            var d, e, f, g, h, k, l, m;
            return O(function (n) {
                switch (n.g) {
                    case 1:
                        d = c.map(function (p) {
                            return {scheme: p.attributes.schemeIdUri, value: p.attributes.value}
                        }), e = a.g.dash.clockSyncUri, !d.length && e && d.push({
                            scheme: "urn:mpeg:dash:utc:http-head:2014",
                            value: e
                        }), f = t(d), g = f.next();
                    case 2:
                        if (g.done) {
                            n.u(4);
                            break
                        }
                        h = g.value;
                        sa(n, 5);
                        k = h.scheme;
                        l = h.value;
                        switch (k) {
                            case "urn:mpeg:dash:utc:http-head:2014":
                            case "urn:mpeg:dash:utc:http-head:2012":
                                return n.u(7);
                            case "urn:mpeg:dash:utc:http-xsdate:2014":
                            case "urn:mpeg:dash:utc:http-iso:2014":
                            case "urn:mpeg:dash:utc:http-xsdate:2012":
                            case "urn:mpeg:dash:utc:http-iso:2012":
                                return n.u(8);
                            case "urn:mpeg:dash:utc:direct:2014":
                            case "urn:mpeg:dash:utc:direct:2012":
                                return m = Date.parse(l), n.return(isNaN(m) ? 0 : m - Date.now());
                            case "urn:mpeg:dash:utc:http-ntp:2014":
                            case "urn:mpeg:dash:utc:ntp:2014":
                            case "urn:mpeg:dash:utc:sntp:2014":
                                $a("NTP UTCTiming scheme is not supported");
                                break;
                            default:
                                $a("Unrecognized scheme in UTCTiming element", k)
                        }
                        n.u(9);
                        break;
                    case 7:
                        return G(n, tv(a, b, l, "HEAD"), 10);
                    case 10:
                        return n.return(n.h);
                    case 8:
                        return G(n, tv(a, b, l, "GET"), 11);
                    case 11:
                        return n.return(n.h);
                    case 9:
                        va(n,
                            3);
                        break;
                    case 5:
                        wa(n);
                    case 3:
                        g = f.next();
                        n.u(2);
                        break;
                    case 4:
                        return $a("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"), n.return(0)
                }
            })
        }

        function kv(a, b, c, d, e) {
            var f = d.attributes.schemeIdUri || "", g = d.attributes.value || "", h = nh(d, "timescale", vh) || 1;
            d = t(gh(d, "Event"));
            for (var k = d.next(); !k.done; k = d.next()) {
                k = k.value;
                var l = nh(k, "presentationTime", vh) || 0, m = nh(k, "duration", vh) || 0;
                l = l / h + b;
                m = l + m / h;
                null != c && (l = Math.min(l, b + c), m = Math.min(m, b + c));
                m < e || (k = {
                    schemeIdUri: f,
                    value: g,
                    startTime: l,
                    endTime: m,
                    id: k.attributes.id || "",
                    eventElement: Ch(k),
                    eventNode: k
                }, a.j.onTimelineRegionAdded(k))
            }
        }

        function hv(a, b, c, d, e) {
            var f, g, h, k;
            return O(function (l) {
                if (1 == l.g) return f = zg, g = e ? 0 : 1, h = Dl(b, c, d, a.g.retryParameters), G(l, Lu(a, h, f, {type: g}), 2);
                k = l.h;
                return l.return(k.data)
            })
        }

        function ov(a, b) {
            b = $d(a, b);
            return se(b) ? Vd : a.split("/")[0]
        }

        function Lu(a, b, c, d) {
            b = a.j.networkingEngine.request(c, b, d);
            ng(a.N, b);
            return b.promise
        }

        function Ku(a) {
            var b = a.l.Ld;
            if (!a.l.we || !b || !a.B.length) return [];
            var c = Date.now() / 1E3, d = a.B.filter(function (e) {
                e = vh(e.attributes.ttl);
                return !e || b + e > c
            }).map(ih).filter(Be);
            return d.length ? Nd(a.A, d) : []
        }

        S("shaka.dash.DashParser", Gu);
        vi["application/dash+xml"] = function () {
            return new Gu
        };
        vi["video/vnd.mpeg.dash.mpd"] = function () {
            return new Gu
        };

        function uv() {
        }

        S("shaka.dependencies", uv);
        uv.has = function (a) {
            return vv.has(a)
        };
        uv.add = function (a, b) {
            if (!wv[a]) throw Error(a + " is not supported");
            a == xv ? rb("mux.js", "mux.js is no longer used in Shaka Player.") : vv.set(a, function () {
                return b
            })
        };
        var xv = "muxjs", wv = {mk: xv, ISOBoxer: "ISOBoxer"};
        uv.Allowed = wv;
        var vv = new Map([["ISOBoxer", function () {
            return window.ISOBoxer
        }]]);

        function yv(a, b, c) {
            this.type = a;
            this.g = b;
            this.segments = c || null
        }

        function zv(a, b, c, d) {
            this.id = a;
            this.name = b;
            this.attributes = c;
            this.value = void 0 === d ? null : d
        }

        zv.prototype.toString = function (a) {
            function b(e) {
                return e.name + "=" + (isNaN(Number(e.value)) ? '"' + e.value + '"' : e.value)
            }

            var c = "#" + this.name, d = this.attributes ? this.attributes.filter(function (e) {
                return a ? !a.has(e.name) : !0
            }).map(b) : [];
            this.value && d.unshift(this.value);
            0 < d.length && (c += ":" + d.join(","));
            return c
        };

        function Av(a) {
            var b = (new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");
            return a.toString(b)
        }

        function Bv(a, b) {
            a = a.attributes.filter(function (c) {
                return c.name == b
            });
            return a.length ? a[0] : null
        }

        function Z(a, b, c) {
            return (a = Bv(a, b)) ? a.value : c || null
        }

        function Cv(a, b) {
            a = Bv(a, b);
            if (!a) throw new T(2, 4, 4023, b);
            return a.value
        }

        function Dv(a, b, c) {
            c = void 0 === c ? [] : c;
            this.g = b;
            this.h = a;
            this.Bb = c
        }

        function Ev(a, b) {
            this.name = a;
            this.value = b
        };

        function Fv(a, b) {
            return a.filter(function (c) {
                return c.name == b
            })
        }

        function Gv(a, b) {
            return a.filter(function (c) {
                return Cv(c, "TYPE") == b
            })
        }

        function Hv(a, b) {
            a = t(a);
            for (var c = a.next(); !c.done; c = a.next()) if (c = c.value, c.name === b) return c;
            return null
        }

        function Iv(a, b, c) {
            c = void 0 === c ? 0 : c;
            return (a = Hv(a, b)) ? Number(a.value) : c
        }

        function Jv(a, b, c) {
            return b ? Kv(a, [b], c) : []
        }

        function Kv(a, b, c) {
            if (!b.length) return [];
            b = Nd(a, b);
            a = [];
            b = t(b);
            for (var d = b.next(); !d.done; d = b.next()) a.push(Lv(d.value, c));
            return a
        }

        function Lv(a, b) {
            if (!b || !b.size) return a;
            a = String(a).replace(/%7B/g, "{").replace(/%7D/g, "}");
            var c = a.match(/{\$\w*}/g);
            if (c) {
                c = t(c);
                for (var d = c.next(); !d.done; d = c.next()) {
                    d = d.value;
                    var e = d.slice(2, d.length - 1), f = b.get(e);
                    if (f) a = a.replace(d, f); else throw new T(2, 4, 4039, e);
                }
            }
            return a
        };

        function Mv() {
            this.g = 0
        }

        function Nv(a, b) {
            b = vd(b);
            b = b.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n").trim();
            var c = b.split(/\n+/m);
            if (!/^#EXTM3U($|[ \t\n])/m.test(c[0])) throw new T(2, 4, 4015);
            b = 0;
            for (var d = !0, e = t(c), f = e.next(); !f.done; f = e.next()) if (f = f.value, /^#(?!EXT)/m.test(f) || d) d = !1; else if (f = Ov(a, f), --a.g, Pv.includes(f.name)) {
                b = 1;
                break
            } else "EXT-X-STREAM-INF" == f.name && (d = !0);
            e = [];
            d = !0;
            for (f = 0; f < c.length; f++) {
                var g = c[f], h = c[f + 1];
                if (/^#(?!EXT)/m.test(g) || d) d = !1; else {
                    g = Ov(a, g);
                    if (Qv.includes(g.name)) {
                        if (1 != b) throw new T(2, 4, 4017);
                        g =
                            c.splice(f, c.length - f);
                        c = [];
                        d = [];
                        f = [];
                        h = null;
                        g = t(g);
                        for (var k = g.next(); !k.done; k = g.next()) k = k.value, /^(#EXT)/.test(k) ? (k = Ov(a, k), Pv.includes(k.name) ? e.push(k) : "EXT-X-MAP" == k.name ? h = k : "EXT-X-PART" == k.name ? f.push(k) : "EXT-X-PRELOAD-HINT" == k.name ? "PART" == Z(k, "TYPE") ? f.push(k) : "MAP" == Z(k, "TYPE") && (k.name = "EXT-X-MAP", h = k) : d.push(k)) : /^#(?!EXT)/m.test(k) || (k = k.trim(), h && d.push(h), c.push(new Dv(k, d, f)), d = [], f = []);
                        f.length && (h && d.push(h), c.push(new Dv("", d, f)));
                        return new yv(b, e, c)
                    }
                    e.push(g);
                    "EXT-X-STREAM-INF" ==
                    g.name && (g.attributes.push(new Ev("URI", h)), d = !0)
                }
            }
            return new yv(b, e)
        }

        function Ov(a, b) {
            a = a.g++;
            var c = b.match(/^#(EXT[^:]*)(?::(.*))?$/);
            if (!c) throw new T(2, 4, 4016, b);
            b = c[1];
            var d = c[2];
            c = [];
            var e;
            if (d) {
                d = new Vp(d);
                var f;
                (f = Xp(d, /^([^,=]+)(?:,|$)/g)) && (e = f[1]);
                for (var g = /([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g; f = Xp(d, g);) c.push(new Ev(f[1], f[2] || f[3])), Wp(d)
            }
            return new zv(a, b, c, e)
        }

        var Pv = "EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),
            Qv = "EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");

        function Rv() {
        }

        function Sv(a) {
            try {
                var b = Tv(a);
                return fg({uri: a, originalUri: a, data: b.data, headers: {"content-type": b.contentType}})
            } catch (c) {
                return dg(c)
            }
        }

        function Tv(a) {
            var b = a.split(":");
            if (2 > b.length || "data" != b[0]) throw new T(2, 1, 1004, a);
            b = b.slice(1).join(":").split(",");
            if (2 > b.length) throw new T(2, 1, 1004, a);
            var c = b[0];
            a = window.decodeURIComponent(b.slice(1).join(","));
            b = c.split(";");
            c = b[0];
            var d = !1;
            1 < b.length && "base64" == b[b.length - 1] && (d = !0, b.pop());
            var e;
            d ? e = Hd(a) : e = Ad(a);
            return {data: e, contentType: c}
        }

        S("shaka.net.DataUriPlugin", Rv);
        Rv.parse = Sv;
        pg("data", Sv);

        function Uv() {
            var a = this;
            this.g = this.h = null;
            this.B = 1;
            this.s = new Map;
            this.G = new Map;
            this.N = new Map;
            this.N.set("video", new Map);
            this.N.set("audio", new Map);
            this.N.set(Vd, new Map);
            this.N.set("image", new Map);
            this.wb = new Set;
            this.i = new Map;
            this.j = null;
            this.L = "";
            this.Fa = new Mv;
            this.H = -1;
            this.fa = Infinity;
            this.ea = this.Ib = !1;
            this.A = new Tc(function () {
                if (a.aa && !a.g.continueLoadingWhenPaused && (a.Z.lb(a.aa, "timeupdate"), a.aa.paused)) {
                    a.Z.ha(a.aa, "timeupdate", function () {
                        return Vv(a)
                    });
                    return
                }
                Vv(a)
            });
            this.xa = Wv;
            this.m = null;
            this.bb = 0;
            this.o = Infinity;
            this.Da = this.za = this.U = 0;
            this.da = new mg;
            this.C = new Map;
            this.F = new Map;
            this.ra = new Map;
            this.pa = new Map;
            this.K = new Map;
            this.qa = new Map;
            this.ya = new Map;
            this.Hb = this.I = !1;
            this.Fb = new Qa(5);
            this.l = null;
            this.R = !0;
            this.Ea = new Set;
            this.Z = new gb;
            this.aa = null
        }

        r = Uv.prototype;
        r.configure = function (a) {
            this.g = a;
            this.l && this.l.configure(this.g)
        };
        r.start = function (a, b) {
            var c = this, d;
            return O(function (e) {
                return 1 == e.g ? (c.h = b, c.I = b.isLowLatencyMode(), G(e, Xv(c, [a]), 2)) : 3 != e.g ? (d = e.h, c.L = d.uri, G(e, Yv(c, d.data, a), 3)) : e.return(c.m)
            })
        };
        r.stop = function () {
            this.A && (this.A.stop(), this.A = null);
            var a = [];
            this.da && (a.push(this.da.destroy()), this.da = null);
            this.g = this.h = null;
            this.wb.clear();
            this.m = null;
            this.i.clear();
            this.G.clear();
            this.F.clear();
            this.s.clear();
            this.ra.clear();
            this.pa.clear();
            this.K.clear();
            this.qa.clear();
            this.ya.clear();
            this.Ea.clear();
            this.l && this.l.destroy();
            this.Z && (this.Z.release(), this.Z = null);
            return Promise.all(a)
        };
        r.update = function () {
            var a = this, b, c, d, e, f, g, h, k, l, m, n;
            return O(function (p) {
                if (1 == p.g) {
                    if (!Zv(a)) return p.return();
                    b = [];
                    c = Array.from(a.i.values());
                    a.o = Infinity;
                    a.m.gapCount = 0;
                    d = c.filter(function (q) {
                        return q.stream.segmentIndex
                    });
                    e = t(d);
                    for (f = e.next(); !f.done; f = e.next()) g = f.value, b.push($v(a, g));
                    return G(p, Promise.all(b), 2)
                }
                aw(a, d.map(function (q) {
                    return q.stream
                }));
                h = d.some(function (q) {
                    return 0 == q.xd
                });
                d.length && !h && (k = bw, cw(a, k.zh), l = d.map(function (q) {
                    return q.Lb
                }), a.j.$a(Math.min.apply(Math, x(l))),
                    a.h.updateDuration());
                h && dw(a);
                m = t(d);
                for (f = m.next(); !f.done; f = m.next()) n = f.value, n.stream.segmentIndex && !n.stream.segmentIndex.O[0] && a.h.disableStream(n.stream);
                H(p)
            })
        };

        function ew(a, b) {
            return Zv(a) ? a.N.get(b.type) : b.te
        }

        function $v(a, b) {
            var c, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L, J, E, K, N, M, P, R, Q, W, aa,
                Sa;
            return O(function (ta) {
                switch (ta.g) {
                    case 1:
                        c = [];
                        d = t(b.M());
                        for (e = d.next(); !e.done; e = d.next()) f = e.value, g = new uc(f), h = g.g, b.ce && (0 <= b.pb && h.add("_HLS_msn", String(b.pb)), 0 <= b.qb && h.add("_HLS_part", String(b.qb))), b.de && h.add("_HLS_skip", "YES"), Jc(h) && yc(g, h), c.push(g.toString());
                        sa(ta, 2);
                        return G(ta, Xv(a, c, !0), 4);
                    case 4:
                        k = ta.h;
                        va(ta, 3);
                        break;
                    case 2:
                        throw l = wa(ta), a.h && a.h.disableStream(b.stream), l;
                    case 3:
                        if (!b.stream.segmentIndex) return ta.return();
                        m = Nv(a.Fa, k.data);
                        if (1 != m.type) throw new T(2, 4, 4017);
                        n = k.uri;
                        n == k.originalUri || b.M().includes(n) || b.dh.push(n);
                        p = Fv(m.g, "EXT-X-DEFINE");
                        q = fw(a, p, n);
                        u = b.stream;
                        w = ew(a, b);
                        return G(ta, gw(a, m, u.mimeType, b.M, q), 5);
                    case 5:
                        v = ta.h;
                        A = v.keyIds;
                        y = v.drmInfos;
                        D = function (Ma, Ya) {
                            return Ma.size === Ya.size && [].concat(x(Ma)).every(function (Ta) {
                                return Ya.has(Ta)
                            })
                        };
                        D(u.keyIds, A) || (u.keyIds = A, u.drmInfos = y, a.h.newDrmInfo(u));
                        z = hw(a, m, w, q, b.M, b.type);
                        B = z.segments;
                        if (C = z.bandwidth) u.bandwidth = C;
                        F = wl(u);
                        I = t(B);
                        for (L = I.next(); !L.done; L =
                            I.next()) J = L.value, J.$ && (J.$.Lc = F);
                        u.segmentIndex.Id(B, a.j.nb());
                        B.length && (E = Iv(m.g, "EXT-X-MEDIA-SEQUENCE", 0), N = (K = Hv(m.g, "EXT-X-SKIP")) ? Number(Z(K, "SKIPPED-SEGMENTS")) : 0, M = iw(E, B), P = M.pb, R = M.qb, b.pb = P + N, b.qb = R, Q = w.get(E), u.segmentIndex.Oa(Q));
                        if (W = u.segmentIndex.O[0] || null) b.rc = W.startTime, aa = B[B.length - 1], b.Lb = aa.endTime;
                        if (Sa = Hv(m.g, "EXT-X-ENDLIST")) b.xd = !0;
                        jw(a, m);
                        kw(a, m.g, u.type, q, b.M);
                        H(ta)
                }
            })
        }

        r.onExpirationUpdated = function () {
        };
        r.onInitialVariantChosen = function () {
        };
        r.banLocation = function (a) {
            this.l && this.l.banLocation(a)
        };
        r.setMediaElement = function (a) {
            this.aa = a
        };

        function lw(a, b) {
            for (var c = -1 == a.H, d = t(b), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                var f = e.stream.segmentIndex, g = ew(a, e);
                if (f = f.O[0] || null) {
                    g = t(g);
                    for (var h = g.next(); !h.done; h = g.next()) {
                        h = t(h.value);
                        var k = h.next().value;
                        if (h.next().value == f.startTime) {
                            c && (a.H = Math.max(a.H, k));
                            e.mf = k;
                            break
                        }
                    }
                }
            }
            if (!(0 > a.H)) for (b = t(b), e = b.next(); !e.done; e = b.next()) if (c = e.value, mw(a, c.type) && (d = c.stream.segmentIndex)) if (e = a.H - c.mf, 0 < e && (d.O.splice(0, e), d = d.O[0] || null)) d = -d.startTime, c.stream.segmentIndex.offset(d), nw(a,
                c, d)
        }

        function ow(a, b) {
            if (Infinity == a.fa) {
                b = t(b);
                for (var c = b.next(); !c.done; c = b.next()) {
                    var d = c.value.stream.segmentIndex.O[0] || null;
                    null != d && null != d.h && (a.fa = Math.min(a.fa, d.h))
                }
            }
            b = a.fa;
            if (Infinity != b) for (d = t(a.i.values()), c = d.next(); !c.done; c = d.next()) if (c = c.value, !mw(a, c.type)) {
                var e = c.stream.segmentIndex;
                if (null != e) {
                    var f = e.O[0] || null;
                    if (null == f.h) Za("Missing EXT-X-PROGRAM-DATE-TIME for stream", c.M(), "Expect AV sync issues!"); else for (nw(a, c, f.h - b - f.startTime), c = t(e), e = c.next(); !e.done; e = c.next()) e.value.jg(b)
                }
            }
        }

        function nw(a, b, c) {
            b.rc += c;
            b.Lb += c;
            a = ew(a, b);
            for (var d = t(a), e = d.next(); !e.done; e = d.next()) {
                var f = t(e.value);
                e = f.next().value;
                f = f.next().value;
                a.set(e, f + c)
            }
            b.M()
        }

        function Yv(a, b, c) {
            var d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L, J, E, K, N, M, P, R, Q, W;
            return O(function (aa) {
                switch (aa.g) {
                    case 1:
                        d = Xd;
                        e = Nv(a.Fa, b);
                        f = Fv(e.g, "EXT-X-DEFINE");
                        g = [];
                        h = [];
                        k = [];
                        a.j = new vk(null, 0);
                        a.j.wc(!0);
                        l = function () {
                            return [c]
                        };
                        m = null;
                        n = new Map;
                        if (1 == e.type) return a.R = !1, D = Fv(e.g, "EXT-X-DEFINE"), n = fw(a, D, a.L), m = d.ga, z = "", B = new Map, G(aa, pw(a, a.B++, n, e, l, "", m, z, !0, "Media Playlist", null, B, null, !1, null, !1), 7);
                        qw(a, f);
                        p = Fv(e.g, "EXT-X-MEDIA");
                        q = Fv(e.g, "EXT-X-STREAM-INF");
                        u = Fv(e.g, "EXT-X-IMAGE-STREAM-INF");
                        w = Fv(e.g, "EXT-X-I-FRAME-STREAM-INF");
                        v = Fv(e.g, "EXT-X-SESSION-KEY");
                        A = Fv(e.g, "EXT-X-SESSION-DATA");
                        y = Fv(e.g, "EXT-X-CONTENT-STEERING");
                        rw(a, A);
                        return G(aa, sw(a, y), 4);
                    case 4:
                        return tw(a, q), uw(a, p), G(aa, vw(a, q, v, p, l, a.s), 5);
                    case 5:
                        return g = aa.h, h = ww(a, p), G(aa, xw(a, u, w), 6);
                    case 6:
                        k = aa.h;
                        aa.u(3);
                        break;
                    case 7:
                        C = aa.h, a.i.set(c, C), C.stream && (F = wl(C.stream), C.stream.segmentIndex.Jb(function (Sa) {
                            Sa.$ && (Sa.$.Lc = F)
                        })), m = C.stream.type, g.push({
                            id: 0,
                            language: Ee(z || "und"),
                            disabledUntilTime: 0,
                            primary: !0,
                            audio: "audio" ==
                            m ? C.stream : null,
                            video: "video" == m ? C.stream : null,
                            bandwidth: C.stream.bandwidth || 0,
                            allowedByApplication: !0,
                            allowedByKeySystem: !0,
                            decodingInfos: []
                        });
                    case 3:
                        if (!a.h) throw new T(2, 7, 7001);
                        1 == e.type && (Zv(a) && (yw(a, e), I = a.o, a.A.Y(I)), L = Array.from(a.i.values()), zw(a, L), dw(a), kw(a, e.g, m, n, l));
                        a.m = {
                            presentationTimeline: a.j,
                            variants: g,
                            textStreams: h,
                            imageStreams: k,
                            offlineSessionIds: [],
                            minBufferTime: 0,
                            sequenceMode: a.g.hls.sequenceMode,
                            ignoreManifestTimestampsInSegmentsMode: a.g.hls.ignoreManifestTimestampsInSegmentsMode,
                            type: "HLS",
                            serviceDescription: null,
                            nextUrl: null,
                            periodCount: 1,
                            gapCount: 0,
                            isLowLatency: !1
                        };
                        if (a.ea || !a.g.hls.disableCodecGuessing) {
                            aa.u(8);
                            break
                        }
                        J = [];
                        E = t(a.m.variants);
                        for (K = E.next(); !K.done; K = E.next()) N = K.value, N.audio && "" === N.audio.codecs && J.push(N.audio.createSegmentIndex()), N.video && "" === N.video.codecs && J.push(N.video.createSegmentIndex());
                        return G(aa, Promise.all(J), 8);
                    case 8:
                        a.h.makeTextStreamsForClosedCaptions(a.m);
                        if (1 == g.length) {
                            M = [];
                            P = g[0];
                            R = t([P.video, P.audio]);
                            for (Q = R.next(); !Q.done; Q = R.next()) (W =
                                Q.value) && !W.segmentIndex && M.push(W.createSegmentIndex());
                            if (0 < M.length) return G(aa, Promise.all(M), 0)
                        }
                        aa.u(0)
                }
            })
        }

        function Aw(a, b) {
            var c, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I;
            return O(function (L) {
                switch (L.g) {
                    case 1:
                        c = xl(a.g.hls.mediaPlaylistFullMimeType);
                        if (!b.length) return L.return(c);
                        d = Bw(a, b);
                        e = d.segment;
                        f = d.segmentIndex;
                        g = e.M();
                        h = g[0];
                        k = new uc(h);
                        l = k.Pa.split(".").pop();
                        if (m = Cw[l]) return L.return(xl(m));
                        n = zg;
                        q = p = null;
                        u = e.$;
                        if (!u) {
                            L.u(2);
                            break
                        }
                        w = Dl(u.M(), u.$b(), u.Xb(), a.g.retryParameters);
                        return G(L, Dw(a, w, n, {type: 0}), 3);
                    case 3:
                        v = L.h;
                        p = v.data;
                        if (!u.aesKey) {
                            L.u(4);
                            break
                        }
                        return G(L, Cl(p, u.aesKey, 0), 5);
                    case 5:
                        p = L.h;
                    case 4:
                        (q = v.headers["content-type"]) && (q = q.split(";")[0].toLowerCase());
                    case 2:
                        return A = Dl(e.M(), e.$b(), e.Xb(), a.g.retryParameters), G(L, Dw(a, A, n, {type: 1}), 6);
                    case 6:
                        y = L.h;
                        D = y.data;
                        if (!e.aesKey) {
                            L.u(7);
                            break
                        }
                        return G(L, Cl(D, e.aesKey, f), 8);
                    case 8:
                        D = L.h;
                    case 7:
                        (z = y.headers["content-type"]) && (z = z.split(";")[0].toLowerCase());
                        B = "mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" ");
                        C = ["audio/mp4", "video/mp4", "video/iso.segment"];
                        if (Dj(Ab(D))) {
                            var J = D;
                            var E = Ab(J);
                            E = (new pj).parse(E);
                            var K = E.sd();
                            E = E.Hf();
                            var N = [], M = !1, P = !1;
                            switch (K.audio) {
                                case "aac":
                                case "aac-loas":
                                    N.push("mp4a.40.2");
                                    M = !0;
                                    break;
                                case "mp3":
                                    N.push("mp4a.40.34");
                                    M = !0;
                                    break;
                                case "ac3":
                                    N.push("ac-3");
                                    M = !0;
                                    break;
                                case "ec3":
                                    N.push("ec-3");
                                    M = !0;
                                    break;
                                case "opus":
                                    N.push("opus"), M = !0
                            }
                            switch (K.video) {
                                case "avc":
                                    E.Na ? N.push(E.Na) : N.push("avc1.42E01E");
                                    P = !0;
                                    break;
                                case "hvc":
                                    E.Na ? N.push(E.Na) : N.push("hvc1.1.6.L93.90");
                                    P = !0;
                                    break;
                                case "av1":
                                    N.push("av01.0.01M.08"), P = !0
                            }
                            if (N.length) {
                                K = M && !P;
                                M = new Map;
                                if (P) {
                                    P = new Hb("video/mp2t");
                                    P.i(J);
                                    J = t(P.j());
                                    for (var R = J.next(); !R.done; R = J.next()) R = R.value, M.set(R, R);
                                    P.g()
                                }
                                E = {
                                    type: K ? "audio" : "video",
                                    mimeType: "video/mp2t",
                                    codecs: N.join(", "),
                                    language: null,
                                    height: E.height,
                                    width: E.width,
                                    channelCount: null,
                                    sampleRate: null,
                                    closedCaptions: M,
                                    Qd: null,
                                    colorGamut: null
                                }
                            } else E = null;
                            if (F = E) return L.return(F)
                        } else if (B.includes(l) || C.includes(z) || q && C.includes(q)) if (I = yl(p, D)) return L.return(I);
                        return z ? L.return(xl(z)) : q ? L.return(xl(q)) : L.return(c)
                }
            })
        }

        function dw(a) {
            if (Zv(a)) {
                if (a.xa == Ew) {
                    for (var b, c = b = Infinity, d = t(a.i.values()), e = d.next(); !e.done; e = d.next()) e = e.value, e.stream.segmentIndex && "text" != e.stream.type && (b = Math.min(b, e.Lb), c = Math.min(c, e.rc));
                    b -= c;
                    a.g.hls.useSafariBehaviorForLive && (b = a.j.A);
                    isNaN(a.g.availabilityWindowOverride) || (b = a.g.availabilityWindowOverride);
                    a.j.Ie(b)
                }
            } else a.j.$a(Fw(a));
            if (!a.j.s) for (b = t(a.i.values()), c = b.next(); !c.done; c = b.next()) c = c.value, !c.stream.segmentIndex || "audio" != c.type && "video" != c.type || (c = c.stream.segmentIndex.get(0)) &&
            c.h && a.j.lh(c.h);
            a.j.re()
        }

        function qw(a, b) {
            var c = (new uc(a.L)).g;
            b = t(b);
            for (var d = b.next(); !d.done; d = b.next()) {
                var e = d.value;
                d = Z(e, "NAME");
                var f = Z(e, "VALUE");
                e = Z(e, "QUERYPARAM");
                d && f && (a.s.has(d) || a.s.set(d, f));
                e && (d = c.get(e)[0]) && !a.s.has(d) && a.s.set(e, d)
            }
        }

        function fw(a, b, c) {
            c = (new uc(c)).g;
            var d = new Map;
            b = t(b);
            for (var e = b.next(); !e.done; e = b.next()) {
                var f = e.value, g = Z(f, "NAME"), h = Z(f, "VALUE");
                e = Z(f, "QUERYPARAM");
                f = Z(f, "IMPORT");
                g && h && (d.has(g) || d.set(g, h));
                e && (g = c.get(e)[0]) && !d.has(g) && d.set(e, g);
                f && (e = a.s.get(f)) && d.set(f, e)
            }
            return d
        }

        function tw(a, b) {
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) {
                var d = c.value, e = Z(d, "AUDIO");
                c = Z(d, "VIDEO");
                var f = Z(d, "SUBTITLES");
                d = Gw(a, d);
                if (f) {
                    var g = Td(Vd, d);
                    a.F.set(f, g);
                    Ob(d, g)
                }
                e && (f = Td("audio", d), f || (f = a.g.hls.defaultAudioCodec), a.F.set(e, f));
                c && (e = Td("video", d), e || (e = a.g.hls.defaultVideoCodec), a.F.set(c, e))
            }
        }

        function rw(a, b) {
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) {
                var d = c.value, e = Z(d, "DATA-ID");
                c = Z(d, "URI");
                var f = Z(d, "LANGUAGE");
                d = Z(d, "VALUE");
                e = (new Map).set("id", e);
                c && e.set("uri", Jv([a.L], c, a.s)[0]);
                f && e.set("language", f);
                d && e.set("value", d);
                c = new U("sessiondata", e);
                if (a.h) a.h.onEvent(c)
            }
        }

        function sw(a, b) {
            var c, d, e, f, g, h;
            return O(function (k) {
                if (!a.h || !a.g) return k.return();
                d = t(b);
                for (e = d.next(); !e.done; e = d.next()) if (f = e.value, g = Z(f, "PATHWAY-ID"), h = Z(f, "SERVER-URI"), g && h) {
                    a.l = new Ot(a.h);
                    a.l.configure(a.g);
                    a.l.i = [a.L];
                    a.l.setManifestType("HLS");
                    a.l.h = g;
                    c = Pt(a.l, h);
                    break
                }
                return G(k, c, 0)
            })
        }

        function ww(a, b) {
            var c = Gv(b, "SUBTITLES");
            b = c.map(function (g) {
                if (a.g.disableText) return null;
                try {
                    return Hw(a, [g], new Map).stream
                } catch (h) {
                    if (a.g.hls.ignoreTextStreamFailures) return null;
                    throw h;
                }
            });
            c = t(c);
            for (var d = c.next(); !d.done; d = c.next()) {
                var e = Cv(d.value, "GROUP-ID");
                if (d = a.F.get(e)) if (e = a.G.get(e)) {
                    e = t(e);
                    for (var f = e.next(); !f.done; f = e.next()) f = f.value, f.stream.codecs = d, f.stream.mimeType = Iw(Vd, d) || Jw(Vd), Kw(f.stream)
                }
            }
            return b.filter(function (g) {
                return g
            })
        }

        function Kw(a) {
            var b = new Set([$d(a.mimeType, a.codecs)]);
            a.segmentIndex && a.segmentIndex.Jb(function (c) {
                c.mimeType && b.add($d(c.mimeType, a.codecs))
            });
            a.fullMimeTypes = b
        }

        function xw(a, b, c) {
            var d, e;
            return O(function (f) {
                if (1 == f.g) return d = b.map(function (g) {
                    var h, k, l;
                    return O(function (m) {
                        if (1 == m.g) {
                            if (h = a.g.disableThumbnails) return m.return(null);
                            sa(m, 2);
                            return G(m, Lw(a, g), 4)
                        }
                        if (2 != m.g) return k = m.h, m.return(k.stream);
                        l = wa(m);
                        if (a.g.hls.ignoreImageStreamFailures) return m.return(null);
                        throw l;
                    })
                }).concat(c.map(function (g) {
                    if (a.g.disableThumbnails) return null;
                    try {
                        var h = Cv(g, "URI"), k = Z(g, "CODECS") || "";
                        if (a.i.has(h)) var l = a.i.get(h); else {
                            var m = Z(g, "LANGUAGE"), n = Z(g, "NAME"),
                                p = Z(g, "CHARACTERISTICS"),
                                q = Mw(a, a.B++, [h], k, "image", m, !1, n, null, null, p, !1, null, !1),
                                u = Z(g, "RESOLUTION"), w = t(u ? u.split("x") : [null, null]), v = w.next().value,
                                A = w.next().value;
                            q.stream.width = Number(v) || void 0;
                            q.stream.height = Number(A) || void 0;
                            var y = Z(g, "BANDWIDTH");
                            y && (q.stream.bandwidth = Number(y));
                            a.i.set(h, q);
                            l = q
                        }
                        g = l;
                        return "mjpg" !== g.stream.codecs ? null : g.stream
                    } catch (D) {
                        if (a.g.hls.ignoreImageStreamFailures) return null;
                        throw D;
                    }
                })), G(f, Promise.all(d), 2);
                e = f.h;
                return f.return(e.filter(function (g) {
                    return g
                }))
            })
        }

        function Nw(a, b, c) {
            b = b.filter(function (h) {
                var k = Z(h, "URI") || "";
                return "SUBTITLES" != Z(h, "TYPE") && "" != k
            });
            var d = {};
            b = t(b);
            for (var e = b.next(); !e.done; e = b.next()) {
                e = e.value;
                var f = Av(e);
                d[f] ? d[f].push(e) : d[f] = [e]
            }
            for (var g in d) Hw(a, d[g], c)
        }

        function vw(a, b, c, d, e, f) {
            var g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L, J, E, K, N, M, P, R, Q, W, aa, Sa, ta, Ma,
                Ya, Ta;
            return O(function (hb) {
                switch (hb.g) {
                    case 1:
                        g = [];
                        h = new Set;
                        if (!(0 < c.length)) {
                            hb.u(2);
                            break
                        }
                        k = t(c);
                        l = k.next();
                    case 3:
                        if (l.done) {
                            hb.u(2);
                            break
                        }
                        m = l.value;
                        n = Cv(m, "METHOD");
                        p = Z(m, "KEYFORMAT") || "identity";
                        q = null;
                        if ("NONE" == n) {
                            hb.u(4);
                            break
                        }
                        if (Ow(n)) {
                            u = Jv(e(), Cv(m, "URI"), f);
                            w = u.sort().join("");
                            a.K.has(w) || (v = tg(u, a.g.retryParameters), A = Dw(a, v, 6), a.K.set(w, A));
                            hb.u(4);
                            break
                        }
                        if ("identity" != p) {
                            q = (y = Pw[p]) ?
                                y(m, "") : null;
                            hb.u(6);
                            break
                        }
                        return G(hb, Qw(a, m, "", e, null, f), 9);
                    case 9:
                        q = hb.h;
                    case 6:
                        if (q) {
                            if (q.keyIds) for (D = t(q.keyIds), z = D.next(); !z.done; z = D.next()) B = z.value, h.add(B);
                            g.push(q)
                        }
                    case 4:
                        l = k.next();
                        hb.u(3);
                        break;
                    case 2:
                        C = {};
                        F = t(b);
                        for (I = F.next(); !I.done; I = F.next()) L = I.value, J = Av(L), C[J] ? C[J].push(L) : C[J] = [L];
                        E = [];
                        for (K in C) N = C[K], M = N[0], P = Z(M, "FRAME-RATE"), R = Number(Z(M, "AVERAGE-BANDWIDTH")) || Number(Cv(M, "BANDWIDTH")), Q = Z(M, "RESOLUTION"), W = t(Q ? Q.split("x") : [null, null]), aa = W.next().value, Sa = W.next().value,
                            ta = Z(M, "VIDEO-RANGE"), (Ma = Z(M, "REQ-VIDEO-LAYOUT")) && Ma.includes(",") && (Ya = Ma.split(",").filter(function (Wa) {
                            return "CH-STEREO" == Wa || "CH-MONO" == Wa
                        }), Ma = Ya[0]), Ma = Ma || "CH-MONO", Ta = Rw(a, N, d), E.push.apply(E, x(Sw(a, Ta.audio, Ta.video, R, aa, Sa, P, ta, Ma, g, h)));
                        return hb.return(E.filter(function (Wa) {
                            return null != Wa
                        }))
                }
            })
        }

        function Rw(a, b, c) {
            for (var d = {
                audio: [],
                video: []
            }, e = new Map, f = [], g = !1, h = !1, k = t(b), l = k.next(); !l.done; l = k.next()) {
                var m = l.value;
                l = Z(m, "AUDIO");
                var n = Z(m, "VIDEO"), p = l || n;
                p && (f.includes(p) || f.push(p), (m = Z(m, "PATHWAY-ID")) && e.set(p, m), l ? g = !0 : n && (h = !0))
            }
            f.length && c.length && (k = c.filter(function (w) {
                return f.includes(Cv(w, "GROUP-ID"))
            }), Nw(a, k, e));
            k = (e = f.sort().join(",")) && a.G.has(e) ? a.G.get(e) : [];
            g ? d.audio.push.apply(d.audio, x(k)) : h && d.video.push.apply(d.video, x(k));
            l = !1;
            var q = b.map(function (w) {
                return Cv(w,
                    "URI")
            });
            h = d.audio.find(function (w) {
                return w && w.M().find(function (v) {
                    return q.includes(v)
                })
            });
            g = Gw(a, b[0]);
            n = Td("video", g);
            (p = Td("audio", g)) && !n ? (h = "audio", l = 0 < d.audio.length) : !d.audio.length && !d.video.length && p && n ? (h = "video", g = [[n, p].join()]) : d.audio.length && h ? (h = "audio", l = !0) : h = d.video.length && !d.audio.length ? "audio" : "video";
            if (!l) {
                var u = m = p = n = l = null;
                !k.length && (c = c.find(function (w) {
                    var v = Z(w, "URI") || "", A = Z(w, "TYPE");
                    w = Cv(w, "GROUP-ID");
                    return "SUBTITLES" != A && "" == v && f.includes(w)
                })) && (l = Z(c, "LANGUAGE"),
                    n = Z(c, "NAME"), p = Tw(c), Uw(c), m = Z(c, "CHARACTERISTICS"), u = Vw(c));
                a = Ww(a, b, g, h, l, n, p, m, u);
                e && (a.stream.groupId = e);
                d[a.stream.type] = [a]
            }
            return d
        }

        function Gw(a, b) {
            var c = Z(b, "CODECS") || "";
            b = Z(b, "SUPPLEMENTAL-CODECS");
            a.ea = 0 < c.length;
            a.ea || a.g.hls.disableCodecGuessing || (c = [], a.g.disableVideo || c.push(a.g.hls.defaultVideoCodec), a.g.disableAudio || c.push(a.g.hls.defaultAudioCodec), c = c.join(","));
            a = c.split(/\s*,\s*/);
            b && (b = b.split(/\s*,\s*/).map(function (d) {
                return d.split("/")[0]
            }), a.push.apply(a, x(b)));
            return zl(a)
        }

        function Tw(a) {
            return (a = Z(a, "CHANNELS")) ? parseInt(a.split("/")[0], 10) : null
        }

        function Vw(a) {
            return (a = Z(a, "SAMPLE-RATE")) ? parseInt(a, 10) : null
        }

        function Uw(a) {
            return (a = Z(a, "CHANNELS")) ? a.includes("/JOC") : !1
        }

        function Sw(a, b, c, d, e, f, g, h, k, l, m) {
            for (var n = t(c), p = n.next(); !p.done; p = n.next()) Xw(p.value.stream, e, f, g, h, k, null);
            e = a.g.disableAudio;
            if (!b.length || e) b = [null];
            e = a.g.disableVideo;
            if (!c.length || e) c = [null];
            e = [];
            b = t(b);
            for (f = b.next(); !f.done; f = b.next()) for (f = f.value, g = t(c), h = g.next(); !h.done; h = g.next()) {
                var q = h.value;
                if (h = f ? f.stream : null) h.drmInfos = l, h.keyIds = m;
                if (k = q ? q.stream : null) k.drmInfos = l, k.keyIds = m;
                k && !h && (k.bandwidth = d);
                !k && h && (h.bandwidth = d);
                n = f ? f.stream.drmInfos : null;
                p = q ? q.stream.drmInfos : null;
                q = q ? q.M().sort().join(",") : "";
                var u = f ? f.M().sort().join(",") : "";
                q = q + " - " + u;
                h && k && !Mc(n, p) || a.wb.has(q) || (h = {
                    id: a.B++,
                    language: h ? h.language : "und",
                    disabledUntilTime: 0,
                    primary: !!h && h.primary || !!k && k.primary,
                    audio: h,
                    video: k,
                    bandwidth: d,
                    allowedByApplication: !0,
                    allowedByKeySystem: !0,
                    decodingInfos: []
                }, e.push(h), a.wb.add(q))
            }
            return e
        }

        function uw(a, b) {
            b = Gv(b, "CLOSED-CAPTIONS");
            a.R = 0 == b.length;
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) {
                var d = c.value, e = Z(d, "LANGUAGE");
                c = Ee(e || "und");
                e || (e = Z(d, "NAME")) && (c = e);
                e = Cv(d, "GROUP-ID");
                d = Cv(d, "INSTREAM-ID").replace("SERVICE", "svc");
                a.C.get(e) || a.C.set(e, new Map);
                a.C.get(e).set(d, c)
            }
        }

        function Hw(a, b, c) {
            for (var d = [], e = [], f = new Map, g = t(b), h = g.next(); !h.done; h = g.next()) {
                var k = h.value;
                h = Cv(k, "URI");
                k = Cv(k, "GROUP-ID");
                d.push(h);
                e.push(k);
                f.set(k, h)
            }
            g = e.sort().join(",");
            h = b[0];
            b = "";
            k = Cv(h, "TYPE").toLowerCase();
            "subtitles" == k && (k = Vd);
            if (k == Vd) b = Z(h, "CODECS") || ""; else {
                e = t(e);
                for (var l = e.next(); !l.done; l = e.next()) if (l = l.value, a.F.has(l)) {
                    b = a.F.get(l);
                    break
                }
            }
            e = d.sort().join(",");
            if (a.i.has(e)) return a.i.get(e);
            l = a.B++;
            if (a.l) {
                f = t(f);
                for (var m = f.next(); !m.done; m = f.next()) {
                    var n = t(m.value);
                    m = n.next().value;
                    n = n.next().value;
                    (m = c.get(m)) && St(a.l, l, m, n)
                }
            }
            c = Z(h, "LANGUAGE");
            f = Z(h, "NAME");
            m = "YES" == Z(h, "DEFAULT");
            n = "audio" == k ? Tw(h) : null;
            var p = "audio" == k ? Uw(h) : !1, q = Z(h, "CHARACTERISTICS"), u = "YES" == Z(h, "FORCED");
            h = "audio" == k ? Vw(h) : null;
            d = Mw(a, l, d, b, k, c, m, f, n, null, q, u, h, p);
            d.stream && (d.stream.groupId = g);
            a.G.has(g) ? a.G.get(g).push(d) : a.G.set(g, [d]);
            a.i.set(e, d);
            return d
        }

        function Lw(a, b) {
            var c, d, e, f, g, h, k, l, m, n;
            return O(function (p) {
                if (1 == p.g) {
                    c = Cv(b, "URI");
                    d = Z(b, "CODECS", "jpeg") || "";
                    if (a.i.has(c)) return p.return(a.i.get(c));
                    e = Z(b, "LANGUAGE");
                    f = Z(b, "NAME");
                    g = Z(b, "CHARACTERISTICS");
                    h = Mw(a, a.B++, [c], d, "image", e, !1, f, null, null, g, !1, null, !1);
                    return (k = Z(b, "RESOLUTION")) ? G(p, h.stream.createSegmentIndex(), 3) : p.u(2)
                }
                2 != p.g && (l = h.stream.segmentIndex.get(0), m = l.tilesLayout) && (h.stream.width = Number(k.split("x")[0]) * Number(m.split("x")[0]), h.stream.height = Number(k.split("x")[1]) *
                    Number(m.split("x")[1]));
                if (n = Z(b, "BANDWIDTH")) h.stream.bandwidth = Number(n);
                a.i.set(c, h);
                return p.return(h)
            })
        }

        function Ww(a, b, c, d, e, f, g, h, k) {
            for (var l = a.B++, m = [], n = t(b), p = n.next(); !p.done; p = n.next()) {
                var q = p.value;
                p = Cv(q, "URI");
                q = Z(q, "PATHWAY-ID");
                a.l && q && St(a.l, l, q, p);
                m.push(p)
            }
            n = m.sort().join(",");
            if (a.i.has(n)) return a.i.get(n);
            a:{
                b = Z(b[0], "CLOSED-CAPTIONS");
                if ("video" == d) {
                    if (a.g.disableText) {
                        a.R = !1;
                        b = null;
                        break a
                    }
                    if (b) {
                        if ("NONE" != b) {
                            b = a.C.get(b);
                            break a
                        }
                        a.R = !1
                    } else if (!b && a.C.size) for (b = t(a.C.keys()).next(); !b.done;) {
                        b = a.C.get(b.value);
                        break a
                    }
                }
                b = null
            }
            c = Sd(d, c);
            d = Mw(a, l, m, c, d, e, !1, f, g, b, h, !1, k, !1);
            a.i.set(n,
                d);
            return d
        }

        function Mw(a, b, c, d, e, f, g, h, k, l, m, n, p, q) {
            function u(B) {
                var C, F, I, L, J, E, K, N, M, P, R, Q, W, aa, Sa, ta, Ma, Ya, Ta, hb, Wa, Ua, mc;
                return O(function (Oa) {
                    switch (Oa.g) {
                        case 1:
                            return C = Xd, F = y.M(), sa(Oa, 2), G(Oa, Xv(a, y.M(), !0), 4);
                        case 4:
                            I = Oa.h;
                            va(Oa, 3);
                            break;
                        case 2:
                            L = wa(Oa);
                            v.closeSegmentIndex();
                            if (J = a.h.disableStream(v)) return Oa.return();
                            throw L;
                        case 3:
                            if (B.aborted) return Oa.return();
                            E = I.uri;
                            E == I.originalUri || F.includes(E) || A.push(E);
                            K = Nv(a.Fa, I.data);
                            if (1 != K.type) throw new T(2, 4, 4017);
                            N = Fv(K.g, "EXT-X-DEFINE");
                            M = fw(a,
                                N, E);
                            P = !1;
                            (!a.ea && a.g.hls.disableCodecGuessing || a.R && e == C.ga && !a.g.hls.disableClosedCaptionsDetection) && 0 < K.segments.length && (a.R = !1, P = !0);
                            R = !a.ea && a.g.hls.disableCodecGuessing;
                            Q = Zv(a);
                            return G(Oa, pw(a, 0, M, K, w, d, e, f, g, h, k, l, m, n, p, q, void 0, P, R), 5);
                        case 5:
                            W = Oa.h;
                            if (B.aborted) return Oa.return();
                            aa = W.stream;
                            Zv(a) && !Q && yw(a, K);
                            y.rc = W.rc;
                            y.Lb = W.Lb;
                            y.de = W.de;
                            y.ce = W.ce;
                            y.xd = W.xd;
                            y.te = W.te;
                            y.pb = W.pb;
                            y.qb = W.qb;
                            y.Nf = !0;
                            v.segmentIndex = aa.segmentIndex;
                            v.encrypted = aa.encrypted;
                            v.drmInfos = aa.drmInfos;
                            v.keyIds = aa.keyIds;
                            v.mimeType = aa.mimeType;
                            v.bandwidth = v.bandwidth || aa.bandwidth;
                            v.codecs = v.codecs || aa.codecs;
                            v.closedCaptions = v.closedCaptions || aa.closedCaptions;
                            v.width = v.width || aa.width;
                            v.height = v.height || aa.height;
                            v.hdr = v.hdr || aa.hdr;
                            v.colorGamut = v.colorGamut || aa.colorGamut;
                            "und" == v.language && "und" != aa.language && (v.language = aa.language);
                            v.language = v.language || aa.language;
                            v.channelsCount = v.channelsCount || aa.channelsCount;
                            v.audioSamplingRate = v.audioSamplingRate || aa.audioSamplingRate;
                            Kw(v);
                            v.drmInfos.length && a.h.newDrmInfo(v);
                            Sa = !1;
                            if (!l && v.closedCaptions || l && v.closedCaptions && l.size != v.closedCaptions.size) Sa = !0;
                            a.m && Sa && a.h.makeTextStreamsForClosedCaptions(a.m);
                            if (e == C.ga || e == C.X) for (ta = t(a.i.values()), Ma = ta.next(); !Ma.done; Ma = ta.next()) Ya = Ma.value, Ya.Nf || Ya.type != e || (Ya.stream.mimeType = aa.mimeType, Kw(Ya.stream));
                            e == C.ta && (Ta = aa.segmentIndex.get(0)) && Ta.$ && (v.mimeType = "application/mp4", Kw(v));
                            hb = wl(v);
                            v.segmentIndex.Jb(function (lb) {
                                lb.$ && (lb.$.Lc = hb)
                            });
                            Yw(a) && (a.Ib ? zw(a, [y]) : (a.Ib = !0, Wa = Array.from(a.i.values()), Ua = Wa.filter(function (lb) {
                                return lb.stream.segmentIndex
                            }),
                                zw(a, Ua), dw(a), mc = a.o, 0 < mc && a.A.Y(mc)));
                            kw(a, K.g, v.type, M, w);
                            H(Oa)
                    }
                })
            }

            function w() {
                return a.l && 1 < c.length ? Tt(a.l, b) : A.concat(Kv([a.L], c, a.s))
            }

            var v = Zw(a, d, e, f, g, h, k, l, m, n, p, q), A = [], y = {
                stream: v,
                type: e,
                dh: A,
                M: w,
                rc: 0,
                Lb: 0,
                te: new Map,
                de: !1,
                ce: !1,
                xd: !1,
                mf: -1,
                pb: -1,
                qb: -1,
                Nf: !1
            }, D = null, z = new AbortController;
            v.createSegmentIndex = function () {
                if (D) return D;
                z = new AbortController;
                return D = new Promise(function (B) {
                    B(u(z.signal))
                })
            };
            v.closeSegmentIndex = function () {
                D && !v.segmentIndex && z.abort();
                v.segmentIndex && (v.segmentIndex.release(),
                    v.segmentIndex = null);
                D = null
            };
            return y
        }

        function Fw(a) {
            var b = Infinity;
            a = t(a.i.values());
            for (var c = a.next(); !c.done; c = a.next()) c = c.value, c.stream.segmentIndex && "text" != c.stream.type && (b = Math.min(b, c.Lb));
            return b
        }

        function aw(a, b) {
            var c = [];
            b = t(b);
            for (var d = b.next(); !d.done; d = b.next()) d = d.value, d.segmentIndex && d.segmentIndex.Jb(function (e) {
                c.push(e)
            });
            a.j.Jd(c)
        }

        function zw(a, b) {
            if (!Zv(a)) for (var c = Fw(a), d = t(b), e = d.next(); !e.done; e = d.next()) e.value.stream.segmentIndex.Ec(0, c);
            aw(a, b.map(function (f) {
                return f.stream
            }));
            a.g.hls.ignoreManifestProgramDateTime ? lw(a, b) : (ow(a, b), 0 < a.g.hls.ignoreManifestProgramDateTimeForTypes.length && lw(a, b))
        }

        function mw(a, b) {
            return a.g.hls.ignoreManifestProgramDateTime ? !0 : a.g.hls.ignoreManifestProgramDateTimeForTypes.includes(b)
        }

        function Yw(a) {
            if (!a.m) return !1;
            var b = [], c = [];
            a = t(a.m.variants);
            for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.video && b.push(d.video), d.audio && c.push(d.audio);
            return 0 < b.length && !b.some(function (e) {
                return e.segmentIndex
            }) || 0 < c.length && !c.some(function (e) {
                return e.segmentIndex
            }) ? !1 : !0
        }

        function pw(a, b, c, d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y) {
            A = void 0 === A ? !0 : A;
            y = void 0 === y ? !0 : y;
            var D, z, B, C, F, I, L, J, E, K, N, M, P, R, Q, W, aa, Sa, ta, Ma, Ya, Ta, hb, Wa, Ua, mc;
            return O(function (Oa) {
                switch (Oa.g) {
                    case 1:
                        var lb = Hv(d.g, "EXT-X-PLAYLIST-TYPE"), Pb = Hv(d.g, "EXT-X-ENDLIST");
                        Pb = lb && "VOD" == lb.value || Pb;
                        lb = lb && "EVENT" == lb.value && !Pb;
                        lb = !Pb && !lb;
                        Pb ? cw(a, Wv) : lb ? cw(a, Ew) : cw(a, $w);
                        Zv(a) && jw(a, d);
                        D = Zv(a) ? a.N.get(g) : new Map;
                        z = hw(a, d, D, c, e, g);
                        B = z.segments;
                        C = z.bandwidth;
                        J = L = I = F = null;
                        if (!(0 < B.length && A)) {
                            Oa.u(2);
                            break
                        }
                        return G(Oa,
                            Aw(a, B), 3);
                    case 3:
                        E = Oa.h, g = E.type, h = E.language, m = E.channelCount, u = E.sampleRate, a.g.disableText || (n = E.closedCaptions), I = E.height, F = E.width, L = E.Qd, J = E.colorGamut, y && (v = E.mimeType, f = E.codecs);
                    case 2:
                        if (v) {
                            Oa.u(4);
                            break
                        }
                        return G(Oa, ax(a, g, f, B), 5);
                    case 5:
                        v = Oa.h;
                    case 4:
                        return G(Oa, gw(a, d, v, e, c), 6);
                    case 6:
                        K = Oa.h;
                        N = K.drmInfos;
                        M = K.keyIds;
                        P = K.encrypted;
                        R = K.Dh;
                        if (P && !N.length && !R) throw new T(2, 4, 4026);
                        Q = Zw(a, f, g, h, k, l, m, n, p, q, u, w);
                        Q.encrypted = P;
                        Q.drmInfos = N;
                        Q.keyIds = M;
                        Q.mimeType = v;
                        C && (Q.bandwidth = C);
                        Kw(Q);
                        "video" ==
                        g && (F || I || L || J) && Xw(Q, F, I, null, L, null, J);
                        Zv(a) && jw(a, d);
                        W = B[0].startTime;
                        aa = B[B.length - 1];
                        Sa = aa.endTime;
                        ta = new Rk(B);
                        Q.segmentIndex = ta;
                        Ya = (Ma = Hv(d.g, "EXT-X-SERVER-CONTROL")) ? null != Bv(Ma, "CAN-SKIP-UNTIL") : !1;
                        Ta = Ma ? null != Bv(Ma, "CAN-BLOCK-RELOAD") : !1;
                        hb = Iv(d.g, "EXT-X-MEDIA-SEQUENCE", 0);
                        Wa = iw(hb, B);
                        Ua = Wa.pb;
                        mc = Wa.qb;
                        return Oa.return({
                            stream: Q,
                            type: g,
                            dh: [],
                            M: e,
                            rc: W,
                            Lb: Sa,
                            de: Ya,
                            ce: Ta,
                            xd: !1,
                            mf: -1,
                            pb: Ua,
                            qb: mc,
                            te: D,
                            Nf: !1
                        })
                }
            })
        }

        function iw(a, b) {
            a = a + b.length - 1;
            var c = -1;
            if (!b.length) return a++, {pb: a, qb: c};
            b = b[b.length - 1];
            var d = b.g;
            if (!b.g.length) return a++, b.m && (c = 0), {pb: a, qb: c};
            c = d.length - 1;
            d[d.length - 1].preload || (a++, c = 0);
            return {pb: a, qb: c}
        }

        function Zw(a, b, c, d, e, f, g, h, k, l, m, n) {
            var p = Iw(c, b) || Jw(c), q = [];
            if (k) {
                k = t(k.split(","));
                for (var u = k.next(); !u.done; u = k.next()) q.push(u.value)
            }
            k = void 0;
            u = null;
            c == Vd ? k = q.includes("public.accessibility.transcribes-spoken-dialog") && q.includes("public.accessibility.describes-music-and-sound") ? "caption" : "subtitle" : q.includes("public.accessibility.describes-video") && (u = "visually impaired");
            q.length || "subtitle" !== k || q.push("subtitle");
            a = {
                id: a.B++,
                originalId: f,
                groupId: null,
                createSegmentIndex: function () {
                    return Promise.resolve()
                },
                segmentIndex: null,
                mimeType: p,
                codecs: b,
                kind: c == Vd ? "subtitle" : void 0,
                encrypted: !1,
                drmInfos: [],
                keyIds: new Set,
                language: Ee(d || "und"),
                originalLanguage: d,
                label: f,
                type: c,
                primary: e,
                trickModeVideo: null,
                emsgSchemeIdUris: null,
                frameRate: void 0,
                pixelAspectRatio: void 0,
                width: void 0,
                height: void 0,
                bandwidth: void 0,
                roles: q,
                forced: l,
                channelsCount: g,
                audioSamplingRate: m,
                spatialAudio: n,
                closedCaptions: h,
                hdr: void 0,
                colorGamut: void 0,
                videoLayout: void 0,
                tilesLayout: void 0,
                accessibilityPurpose: u,
                external: !1,
                fastSwitching: !1,
                fullMimeTypes: new Set
            };
            Kw(a);
            return a
        }

        function gw(a, b, c, d, e) {
            var f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L, J, E, K, N, M, P, R;
            return O(function (Q) {
                switch (Q.g) {
                    case 1:
                        f = new Map;
                        if (b.segments) for (g = t(b.segments), h = g.next(); !h.done; h = g.next()) if (k = h.value, l = Fv(k.g, "EXT-X-KEY"), m = null, l.length) for (m = bx(a, b, k.g, d, e), n = t(l), p = n.next(); !p.done; p = n.next()) q = p.value, f.set(q, m);
                        w = u = !1;
                        v = [];
                        A = new Set;
                        y = t(f);
                        D = y.next();
                    case 2:
                        if (D.done) {
                            Q.u(4);
                            break
                        }
                        z = D.value;
                        B = t(z);
                        C = B.next().value;
                        F = B.next().value;
                        I = C;
                        L = F;
                        J = Cv(I, "METHOD");
                        if ("NONE" == J) {
                            Q.u(3);
                            break
                        }
                        u =
                            !0;
                        E = Z(I, "KEYFORMAT") || "identity";
                        K = null;
                        if (Ow(J)) {
                            w = !0;
                            Q.u(3);
                            break
                        }
                        if ("identity" != E) {
                            K = (N = Pw[E]) ? N(I, c) : null;
                            Q.u(6);
                            break
                        }
                        return G(Q, Qw(a, I, c, d, L, e), 8);
                    case 8:
                        K = Q.h;
                    case 6:
                        if (K) {
                            if (K.keyIds) for (M = t(K.keyIds), P = M.next(); !P.done; P = M.next()) R = P.value, A.add(R);
                            v.push(K)
                        }
                    case 3:
                        D = y.next();
                        Q.u(2);
                        break;
                    case 4:
                        return Q.return({drmInfos: v, keyIds: A, encrypted: u, Dh: w})
                }
            })
        }

        function cx(a, b, c, d, e) {
            if (!window.crypto || !window.crypto.subtle) throw $a("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"), new T(2, 4, 4042);
            var f = 0, g = Z(b, "IV", "");
            if (g) {
                var h = Id(g.substr(2));
                if (16 != h.byteLength) throw new T(2, 4, 4048);
            } else f = Iv(c.g, "EXT-X-MEDIA-SEQUENCE", 0);
            c = b.toString() + "-" + f;
            if (!a.pa.has(c)) {
                var k = {bitsKey: 128, blockCipherMode: "CBC", iv: h, firstMediaSequenceNumber: f};
                switch (Cv(b, "METHOD")) {
                    case "AES-256":
                        k.bitsKey = 256;
                        break;
                    case "AES-256-CTR":
                        k.bitsKey =
                            256, k.blockCipherMode = "CTR"
                }
                k.fetchKey = function () {
                    var l, m, n, p, q, u, w;
                    return O(function (v) {
                        if (1 == v.g) return l = Jv(d(), Cv(b, "URI"), e), m = l.sort().join(""), a.K.has(m) || (n = tg(l, a.g.retryParameters), p = Dw(a, n, 6), a.K.set(m, p)), G(v, a.K.get(m), 2);
                        if (3 != v.g) {
                            q = v.h;
                            if (!q.data || q.data.byteLength != k.bitsKey / 8) throw new T(2, 4, 4049);
                            u = {name: "CTR" == k.blockCipherMode ? "AES-CTR" : "AES-CBC", length: k.bitsKey};
                            w = k;
                            return G(v, window.crypto.subtle.importKey("raw", q.data, u, !0, ["decrypt"]), 3)
                        }
                        w.cryptoKey = v.h;
                        k.fetchKey = void 0;
                        H(v)
                    })
                };
                a.pa.set(c, k)
            }
            return a.pa.get(c)
        }

        function jw(a, b) {
            var c = Infinity, d = b.segments;
            if (d.length) for (var e = d.length - 1; 0 <= e;) {
                var f = Hv(d[e].g, "EXTINF");
                if (f) {
                    c = Number(f.value.split(",")[0]);
                    break
                }
                e--
            }
            d = Hv(b.g, "EXT-X-TARGETDURATION");
            if (!d) throw new T(2, 4, 4024, "EXT-X-TARGETDURATION");
            d = Number(d.value);
            if (e = Hv(b.g, "EXT-X-PART-INF")) a.U = Number(Cv(e, "PART-TARGET"));
            b = Hv(b.g, "EXT-X-SERVER-CONTROL");
            a.I && a.U ? (a.o = a.Hb ? 5 * a.U <= c ? Math.min(a.U, a.o) : Math.min(c, a.o) : Math.min(a.U, a.o), a.Da = b ? Number(Cv(b, "PART-HOLD-BACK")) : 0) : (a.o = Math.min(c, a.o), c = b ?
                Bv(b, "HOLD-BACK") : null, a.za = c ? Number(c.value) : 0);
            a.bb = Math.max(d, a.bb)
        }

        function yw(a, b) {
            if (a.g.defaultPresentationDelay) b = a.g.defaultPresentationDelay; else if (a.Da) b = a.Da; else if (a.za) b = a.za; else {
                b = b.segments.length;
                var c = a.g.hls.liveSegmentsDelay;
                c > b - 2 && (c = Math.max(1, b - 2));
                b = a.bb * c
            }
            a.j.mh(0);
            a.j.eg(b);
            a.j.wc(!1)
        }

        function bx(a, b, c, d, e) {
            var f = Hv(c, "EXT-X-MAP");
            if (!f) return null;
            var g = Cv(f, "URI"), h = Jv(d(), g, e);
            g = [h.toString(), Z(f, "BYTERANGE", "")].join("-");
            if (!a.ra.has(g)) {
                var k = void 0, l = null;
                c = t(c);
                for (var m = c.next(); !m.done; m = c.next()) m = m.value, "EXT-X-KEY" == m.name ? Ow(Cv(m, "METHOD")) && m.id < f.id && (k = cx(a, m, b, d, e)) : "EXT-X-BYTERANGE" == m.name && m.id < f.id && (l = m);
                b = dx(h, f, l, k);
                a.ra.set(g, b)
            }
            return a.ra.get(g)
        }

        function dx(a, b, c, d) {
            var e = 0, f = null;
            b = Z(b, "BYTERANGE");
            !b && c && (b = c.value);
            b && (e = b.split("@"), f = Number(e[0]), e = Number(e[1]), f = e + f - 1, d && (c = f + 1 - e, c % 16 && (f += 16 - c % 16)));
            return new Ai(function () {
                return a
            }, e, f, null, null, null, d)
        }

        function ex(a, b, c, d, e, f, g, h, k) {
            function l(W) {
                W = (new uc(W)).Pa.split(".").pop();
                var aa = fx[g][W];
                aa || (aa = Cw[W]);
                return aa
            }

            var m = d.g, n = Hv(m, "EXTINF"), p = 0, q = 0, u = null;
            d.Bb.length && (a.m.isLowLatency = !0);
            var w = null;
            if (!a.g.hls.ignoreManifestProgramDateTime) {
                var v = Hv(m, "EXT-X-PROGRAM-DATE-TIME");
                v && v.value && (w = qh(v.value))
            }
            var A = Di;
            Hv(m, "EXT-X-GAP") && (a.m.gapCount++, A = 2);
            if (!n) {
                if (0 == d.Bb.length) throw new T(2, 4, 4024, "EXTINF");
                if (!a.I) return null
            }
            var y = [];
            v = !1;
            var D = null, z = !1, B = !1;
            if (a.I && d.Bb.length) {
                p = b &&
                    window.ReadableStream && a.g.hls.allowLowLatencyByteRangeOptimization;
                for (var C = w, F = {}, I = 0; I < d.Bb.length; F = {gd: F.gd, bd: F.bd}, I++) {
                    var L = d.Bb[I], J = 0 == I ? c : y[y.length - 1], E = 0 == I ? e : J.endTime,
                        K = Number(Z(L, "DURATION")) || a.U;
                    if (K) {
                        var N = E + K, M = 0, P = null;
                        "EXT-X-PRELOAD-HINT" == L.name ? (M = (M = Z(L, "BYTERANGE-START")) ? Number(M) : 0, (J = Z(L, "BYTERANGE-LENGTH")) ? P = M + Number(J) - 1 : M && (P = Number.MAX_SAFE_INTEGER)) : (M = Z(L, "BYTERANGE"), P = t(gx(J, M)), M = P.next().value, P = P.next().value);
                        F.bd = Z(L, "URI");
                        if (F.bd) {
                            J = Di;
                            "YES" == Z(L, "GAP") &&
                            (a.m.gapCount++, J = 2, z = !0);
                            F.gd = null;
                            var R = function (W) {
                                return function () {
                                    null == W.gd && (W.gd = Jv(h(), W.bd, f));
                                    return W.gd
                                }
                            }(F);
                            p && 0 <= M && null != P && (D = R, v = !0);
                            E = new Ci(E, N, R, M, P, b, 0, 0, Infinity, [], "", null, C, J, k);
                            "EXT-X-PRELOAD-HINT" == L.name && (E.Of(), B = !0);
                            "YES" != Z(L, "INDEPENDENT") && 0 < I && E.se();
                            if (L = l(F.bd)) E.mimeType = L, hx.has(L) && (E.$ = null);
                            y.push(E);
                            C && (C += K)
                        }
                    }
                }
            }
            if (n) {
                n = Number(n.value.split(",")[0]);
                if (0 == n) return null;
                p = e + n
            } else if (y.length) p = y[y.length - 1].endTime; else return null;
            v && (z || 0 != y[0].Ha ? (v =
                !1, D = null) : y = []);
            (n = Hv(m, "EXT-X-BYTERANGE")) ? (u = t(gx(c, n.value)), q = u.next().value, u = u.next().value) : y.length && (q = y[0].Ha, u = y[y.length - 1].sa);
            c = "";
            n = null;
            "image" == g && (c = "1x1", m = Hv(m, "EXT-X-TILES")) && (c = Cv(m, "LAYOUT"), (m = Z(m, "DURATION")) && (n = Number(m)));
            var Q = null;
            b = new Ci(e, p, function () {
                if (D) return D();
                null == Q && (Q = Jv(h(), d.h, f));
                return Q || []
            }, q, u, b, 0, 0, Infinity, y, c, n, w, A, k, 0 < y.length && !!d.h);
            if (e = l(d.h)) b.mimeType = e, hx.has(e) && (b.$ = null);
            v && (a.Hb = !0, b.Vg(), B && b.Of());
            return b
        }

        function gx(a, b) {
            var c = 0, d = null;
            b && (c = b.split("@"), b = Number(c[0]), c = c[1] ? Number(c[1]) : a.sa + 1, d = c + b - 1);
            return [c, d]
        }

        function kw(a, b, c, d, e) {
            if ("video" == c || "audio" == c) {
                var f = a.j.m;
                if (f && !mw(a, c)) for (b = Fv(b, "EXT-X-DATERANGE"), b = b.sort(function (w, v) {
                    w = Cv(w, "START-DATE");
                    v = Cv(v, "START-DATE");
                    return w < v ? -1 : w > v ? 1 : 0
                }), c = 0; c < b.length; c++) {
                    var g = b[c], h = Cv(g, "ID");
                    if (!a.Ea.has(h)) {
                        var k = Cv(g, "START-DATE"), l = qh(k);
                        if (!isNaN(l)) {
                            k = Math.max(0, l - f);
                            var m = null, n = Z(g, "END-DATE");
                            if (n && (n = qh(n), !isNaN(n) && (m = n - f, 0 > m))) continue;
                            if (null == m && (n = Z(g, "DURATION") || Z(g, "PLANNED-DURATION")) && (n = parseFloat(n), isNaN(n) || (m = k + n), 0 > l - f + n)) continue;
                            n = Z(g, "CLASS") || "com.apple.quicktime.HLS";
                            var p = "YES" == Z(g, "END-ON-NEXT");
                            if (null == m && p) {
                                for (p = c + 1; p < b.length; p++) {
                                    var q = Z(b[p], "CLASS") || "com.apple.quicktime.HLS";
                                    if (n == q && (q = Cv(b[p], "START-DATE"), q = qh(q), !isNaN(q) && q && q > l)) {
                                        m = Math.max(0, q - f);
                                        break
                                    }
                                }
                                if (null == m) continue
                            }
                            l = "ID CLASS START-DATE END-DATE DURATION END-ON-NEXT".split(" ");
                            p = [];
                            g = t(g.attributes);
                            for (q = g.next(); !q.done; q = g.next()) if (q = q.value, !l.includes(q.name)) {
                                var u = Lv(q.value, d);
                                if ("X-ASSET-URI" == q.name || "X-ASSET-LIST" == q.name) u = Jv(e(),
                                    q.value, d)[0];
                                p.push({key: q.name, description: "", data: u, mimeType: null, pictureType: null})
                            }
                            if (p.length) a.h.onMetadata(n, k, m, p);
                            a.Ea.add(h)
                        }
                    }
                }
            }
        }

        function hw(a, b, c, d, e, f) {
            var g = b.segments, h = void 0, k = Iv(b.g, "EXT-X-DISCONTINUITY-SEQUENCE", 0),
                l = Iv(b.g, "EXT-X-MEDIA-SEQUENCE", 0), m = Hv(b.g, "EXT-X-SKIP"),
                n = m ? Number(Z(m, "SKIPPED-SEGMENTS")) : 0, p = l + n, q = 0;
            Zv(a) && c.has(p) && (q = c.get(p));
            0 === q && a.xa == Ew && 0 < c.size && !c.has(p) && (q = a.j.nb());
            var u = [], w = null;
            m = [];
            for (var v = 0; v < g.length; v++) {
                var A = g[v], y = 0 == v ? q : w.endTime;
                p = l + n + v;
                Hv(A.g, "EXT-X-DISCONTINUITY") && k++;
                var D = t(A.g);
                for (var z = D.next(); !z.done; z = D.next()) z = z.value, "EXT-X-KEY" == z.name && (Ow(Cv(z, "METHOD")) ?
                    h = cx(a, z, b, e, d) : h = void 0);
                c.set(p, y);
                D = bx(a, b, A.g, e, d);
                !a.I && a.h.isAutoLowLatencyMode() && (a.h.enableLowLatencyMode(), a.I = a.h.isLowLatencyMode());
                if (y = ex(a, D, w, A, y, d, f, e, h)) (w = Iv(A.g, "EXT-X-BITRATE")) ? m.push({
                    bitrate: w,
                    duration: y.endTime - y.startTime
                }) : m.length && (w = m.pop(), w.duration += y.endTime - y.startTime, m.push(w)), w = y, y.i = k, mw(a, f) && null != a.H && p < a.H || u.push(y)
            }
            b = void 0;
            m.length && (b = m.reduce(function (B, C) {
                return B + C.duration
            }, 0), b = Math.round(m.reduce(function (B, C) {
                    return B + C.bitrate * C.duration
                }, 0) /
                b * 1E3));
            if (m = u.some(function (B) {
                return null != B.h
            })) for (c = {}, d = 0; d < u.length; c = {
                Zc: c.Zc,
                Yc: c.Yc,
                Rd: c.Rd,
                Sb: c.Sb,
                Vc: c.Vc
            }, d++) if (c.Sb = u[d], null == c.Sb.h) for (c.Yc = 0, c.Zc = d, e = function (B) {
                return function () {
                    var C = u[B.Zc];
                    if (C) {
                        if (null != C.h) return C.h + B.Yc;
                        B.Yc -= C.endTime - C.startTime;
                        B.Zc += 1
                    }
                    return null
                }
            }(c), c.Vc = 0, c.Rd = d, g = function (B) {
                return function () {
                    var C = u[B.Rd];
                    if (C) {
                        C != B.Sb && (B.Vc += C.endTime - C.startTime);
                        if (null != C.h) return C.h + B.Vc;
                        --B.Rd
                    }
                    return null
                }
            }(c); null == c.Sb.h;) c.Sb.h = g(), null == c.Sb.h && (c.Sb.h =
                e());
            if (m) for (c = t(u), d = c.next(); !d.done; d = c.next()) for (e = d.value, d = e.h, e = t(e.g), g = e.next(); !g.done; g = e.next()) g = g.value, g.h = d, d += g.endTime - g.startTime;
            c = a.fa;
            if (m && Infinity != c && !mw(a, f)) for (a = t(u), d = a.next(); !d.done; d = a.next()) d.value.jg(c);
            return {segments: u, bandwidth: b}
        }

        function Iw(a, b) {
            if (a == Vd) {
                if ("vtt" == b || "wvtt" == b) return "text/vtt";
                if (b && "" !== b) return "application/mp4"
            }
            return "image" != a || b && "jpeg" != b ? "audio" == a && "mp4a.40.34" == b ? "audio/mpeg" : "mjpg" == b ? "application/mp4" : null : "image/jpeg"
        }

        function Jw(a) {
            return a == Vd ? "text/vtt" : fx[a].mp4
        }

        function Bw(a, b) {
            a = Zv(a) ? Math.trunc((b.length - 1) / 2) : 0;
            for (var c = b[a]; 2 == c.ac() && a + 1 < b.length;) a++, c = b[a];
            return {segment: c, segmentIndex: a}
        }

        function ax(a, b, c, d) {
            var e, f, g, h, k, l, m, n, p, q, u, w, v, A;
            return O(function (y) {
                switch (y.g) {
                    case 1:
                        e = zg;
                        f = Bw(a, d);
                        g = f.segment;
                        if (2 == g.status) return y.return(Jw(b));
                        h = g.M();
                        k = new uc(h[0]);
                        l = k.Pa.split(".").pop();
                        m = fx[b];
                        if ((n = m[l]) || (n = Cw[l]) || (n = Iw(b, c))) return y.return(n);
                        q = 1;
                        u = tg(h, a.g.retryParameters);
                        sa(y, 2);
                        u.method = "HEAD";
                        return G(y, Dw(a, u, e, {type: q}), 4);
                    case 4:
                        w = y.h;
                        p = w.headers["content-type"];
                        va(y, 3);
                        break;
                    case 2:
                        v = wa(y);
                        if (!v || 1002 != v.code && 1001 != v.code) {
                            y.u(3);
                            break
                        }
                        u.method = "GET";
                        return G(y,
                            Dw(a, u, e, {type: q}), 6);
                    case 6:
                        A = y.h, p = A.headers["content-type"];
                    case 3:
                        return p ? y.return(p.toLowerCase().split(";")[0]) : y.return(Jw(b))
                }
            })
        }

        function Xw(a, b, c, d, e, f, g) {
            a && (a.width = Number(b) || void 0, a.height = Number(c) || void 0, a.frameRate = Number(d) || void 0, a.hdr = e || void 0, a.videoLayout = f || void 0, a.colorGamut = g || void 0)
        }

        function Xv(a, b, c) {
            return Dw(a, tg(b, a.g.retryParameters), 0, {type: c ? 2 : 3})
        }

        function Vv(a) {
            var b, c, d, e, f, g;
            return O(function (h) {
                switch (h.g) {
                    case 1:
                        if (!a.h) return h.return();
                        sa(h, 2);
                        b = Date.now();
                        return G(h, a.update(), 4);
                    case 4:
                        c = Date.now();
                        Zv(a) && (d = (c - b) / 1E3, a.Fb.sample(1, d), e = a.o, f = Math.max(0, e - Ra(a.Fb)), a.A.Y(f));
                        va(h, 3);
                        break;
                    case 2:
                        g = wa(h);
                        if (!a.h) return h.return();
                        if (a.g.raiseFatalErrorOnManifestUpdateRequestFailure) return a.h.onError(g), h.return();
                        g.severity = 1;
                        a.h.onError(g);
                        a.A.Y(.1);
                    case 3:
                        if (!a.h) return h.return();
                        a.h.onManifestUpdated();
                        H(h)
                }
            })
        }

        function Zv(a) {
            return a.xa != Wv
        }

        function cw(a, b) {
            a.xa = b;
            a.j && a.j.wc(!Zv(a));
            Zv(a) || a.A.stop()
        }

        function Dw(a, b, c, d) {
            if (!a.da) throw new T(2, 7, 7001);
            b = a.h.networkingEngine.request(c, b, d);
            ng(a.da, b);
            return b.promise
        }

        function Ow(a) {
            return "AES-128" == a || "AES-256" == a || "AES-256-CTR" == a
        }

        function Qw(a, b, c, d, e, f) {
            var g, h, k, l, m, n, p, q, u, w, v, A, y, D, z;
            return O(function (B) {
                switch (B.g) {
                    case 1:
                        if ("video/mp2t" == c) throw new T(2, 4, 4040);
                        if (sd()) throw new T(2, 4, 4041);
                        g = Cv(b, "METHOD");
                        h = ["SAMPLE-AES", "SAMPLE-AES-CTR"];
                        if (!h.includes(g)) return B.return(null);
                        k = Jv(d(), Cv(b, "URI"), f);
                        if (k[0].startsWith("data:text/plain;base64,")) {
                            l = Jd(Hd(k[0].split("data:text/plain;base64,").pop()));
                            B.u(2);
                            break
                        }
                        m = k.sort().join("");
                        a.qa.has(m) || (n = tg(k, a.g.retryParameters), p = Dw(a, n, 6), a.qa.set(m, p));
                        return G(B, a.qa.get(m),
                            3);
                    case 3:
                        q = B.h, l = Jd(q.data);
                    case 2:
                        u = "00000000000000000000000000000000";
                        if (!e) {
                            B.u(4);
                            break
                        }
                        if (a.ya.has(e)) {
                            w = a.ya.get(e);
                            B.u(5);
                            break
                        }
                        v = Dl(e.M(), e.$b(), e.Xb(), a.g.retryParameters);
                        A = zg;
                        return G(B, Dw(a, v, A, {type: 0}), 6);
                    case 6:
                        y = B.h, w = Bl(y.data), a.ya.set(e, w);
                    case 5:
                        w && (u = w);
                    case 4:
                        return D = new Map, D.set(u, l), z = "cenc", "SAMPLE-AES" == g && (z = "cbcs"), B.return(Rd(D, z))
                }
            })
        }

        S("shaka.hls.HlsParser", Uv);
        var Cw = {aac: "audio/aac", ac3: "audio/ac3", ec3: "audio/ec3", mp3: "audio/mpeg"}, fx = {
            audio: {
                mp4: "audio/mp4",
                mp4a: "audio/mp4",
                m4s: "audio/mp4",
                m4i: "audio/mp4",
                m4a: "audio/mp4",
                m4f: "audio/mp4",
                cmfa: "audio/mp4",
                ts: "video/mp2t",
                tsa: "video/mp2t"
            },
            video: {
                mp4: "video/mp4",
                mp4v: "video/mp4",
                m4s: "video/mp4",
                m4i: "video/mp4",
                m4v: "video/mp4",
                m4f: "video/mp4",
                cmfv: "video/mp4",
                ts: "video/mp2t",
                tsv: "video/mp2t"
            },
            text: {
                mp4: "application/mp4",
                m4s: "application/mp4",
                m4i: "application/mp4",
                m4f: "application/mp4",
                cmft: "application/mp4",
                vtt: "text/vtt",
                webvtt: "text/vtt",
                ttml: "application/ttml+xml"
            },
            image: {jpg: "image/jpeg", png: "image/png", svg: "image/svg+xml", webp: "image/webp", avif: "image/avif"}
        }, hx = new Set(["video/mp2t"].concat(x(ae))), Pw = {
            "com.apple.streamingkeydelivery": function (a, b) {
                if ("video/mp2t" == b) throw new T(2, 4, 4040);
                if (sd()) throw new T(2, 4, 4041);
                b = Cv(a, "METHOD");
                if (!["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(b)) return null;
                var c = "cenc";
                "SAMPLE-AES" == b && (c = "cbcs");
                return Qd("com.apple.fps", c, [{
                    initDataType: "sinf", initData: new Uint8Array(0),
                    keyId: null
                }], Cv(a, "URI"))
            }, "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": function (a) {
                var b = Cv(a, "METHOD");
                if (!["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(b)) return null;
                var c = "cenc";
                "SAMPLE-AES" == b && (c = "cbcs");
                b = Cv(a, "URI");
                b = Tv(b.split("?")[0]);
                b = Ab(b.data);
                c = Qd("com.widevine.alpha", c, [{initDataType: "cenc", initData: b}]);
                if (a = Z(a, "KEYID")) c.keyIds = new Set([a.toLowerCase().substr(2)]);
                return c
            }, "com.microsoft.playready": function (a) {
                var b = Cv(a, "METHOD");
                if (!["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(b)) return null;
                var c = "cenc";
                "SAMPLE-AES" == b && (c = "cbcs");
                a = Cv(a, "URI");
                a = Tv(a.split("?")[0]);
                a = Ab(a.data);
                b = new Uint8Array([154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149]);
                a = Zg(a, b, new Set, 0);
                return Qd("com.microsoft.playready", c, [{initDataType: "cenc", initData: a}])
            }
        }, Wv = "VOD", $w = "EVENT", Ew = "LIVE", bw = {zh: Wv, xj: $w, Fj: Ew};
        vi["application/x-mpegurl"] = function () {
            return new Uv
        };
        vi["application/vnd.apple.mpegurl"] = function () {
            return new Uv
        };

        function ix(a) {
            var b = 0, c = Fb(a), d = c.getUint32(b, !0);
            if (d != a.byteLength) return [];
            a:{
                a = b + 6;
                for (b = []; a < c.byteLength - 1;) {
                    d = c.getUint16(a, !0);
                    a += 2;
                    var e = c.getUint16(a, !0);
                    a += 2;
                    if (0 != (e & 1) || e + a > c.byteLength) {
                        c = [];
                        break a
                    }
                    var f = Ab(c, a, e);
                    b.push({type: d, value: f});
                    a += e
                }
                c = b
            }
            return c
        }

        function jx(a) {
            if (a = kx(a)) a:{
                a = t(jh(a, "DATA"));
                for (var b = a.next(); !b.done; b = a.next()) if (b = kh(b.value, "LA_URL")) {
                    a = hh(b);
                    break a
                }
                a = ""
            } else a = "";
            return a
        }

        function kx(a) {
            a = Hd(hh(a));
            a = ix(a).filter(function (b) {
                return b.type === lx
            })[0];
            if (!a) return null;
            a = xd(a.value, !0);
            return (a = ah(a, "WRMHEADER")) ? a : null
        }

        var lx = 1,
            mx = (new Map).set("com.microsoft.playready", jx).set("com.microsoft.playready.recommendation", jx).set("com.microsoft.playready.software", jx).set("com.microsoft.playready.hardware", jx);

        function nx(a) {
            if (!ox) {
                ox = !0;
                var b = new Uint8Array([105, 115, 111, 109]), c = new Uint8Array([97, 118, 99, 49]),
                    d = new Uint8Array([0, 0, 0, 1]);
                px = qx("ftyp", b, d, b, c);
                b = qx("dref", rx);
                sx = qx("dinf", b)
            }
            this.g = a
        }

        function tx(a) {
            for (var b = [], c = t(a.g), d = c.next(); !d.done; d = c.next()) {
                var e = b, f = e.push;
                var g = d.value;
                d = qx;
                var h = g.id + 1;
                var k = g.stream.width || 0, l = g.stream.height || 0;
                "audio" == g.type && (l = k = 0);
                var m = g.duration * g.timescale, n = Math.floor(m / (ux + 1));
                m = Math.floor(m % (ux + 1));
                h = new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(x(vx(h, 4)), [0, 0, 0, 0], x(vx(n, 4)), x(vx(m, 4)), [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0], x(vx(k, 2)), [0, 0], x(vx(l,
                    2)), [0, 0]));
                h = qx("tkhd", h);
                k = qx;
                n = g.duration * g.timescale;
                l = Math.floor(n / (ux + 1));
                n = Math.floor(n % (ux + 1));
                m = g.stream.language;
                m = m.charCodeAt(0) - 96 << 10 | m.charCodeAt(1) - 96 << 5 | m.charCodeAt(2) - 96;
                l = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(x(vx(g.timescale, 4)), x(vx(l, 4)), x(vx(n, 4)), x(vx(m, 2)), [0, 0]));
                l = qx("mdhd", l);
                n = g;
                m = new Uint8Array([]);
                switch (n.type) {
                    case "video":
                        m = wx;
                        break;
                    case "audio":
                        m = xx
                }
                n = qx("hdlr", m);
                a:{
                    switch (g.type) {
                        case "video":
                            g = qx("minf", qx("vmhd", yx), sx, zx(g));
                            break a;
                        case "audio":
                            g = qx("minf", qx("smhd", Ax), sx, zx(g));
                            break a
                    }
                    g = new Uint8Array([])
                }
                g = k("mdia", l, n, g);
                d = d("trak", h, g);
                f.call(e, d)
            }
            b = Md.apply(Ed, x(b));
            f = a.g[0];
            c = qx;
            d = f.duration * f.timescale;
            e = Math.floor(d / (ux + 1));
            d = Math.floor(d % (ux + 1));
            e = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(x(vx(f.timescale, 4)), x(vx(e, 4)), x(vx(d, 4)), [0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255,
                255]));
            e = qx("mvhd", e);
            d = [];
            a = t(a.g);
            for (k = a.next(); !k.done; k = a.next()) g = d, h = g.push, k = new Uint8Array([0, 0, 0, 0].concat(x(vx(k.value.id + 1, 4)), [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1])), k = qx("trex", k), h.call(g, k);
            a = Md.apply(Ed, x(d));
            a = qx("mvex", a);
            d = [];
            if (f.encrypted) {
                f = t(f.stream.drmInfos);
                for (g = f.next(); !g.done; g = f.next()) if (g = g.value, g.initData) for (g = t(g.initData), h = g.next(); !h.done; h = g.next()) d.push(h.value.initData);
                f = Md.apply(Ed, x(d))
            } else f = new Uint8Array([]);
            a = c("moov", e, b, a, f);
            b = new Uint8Array(px.byteLength +
                a.byteLength);
            b.set(px);
            b.set(a, px.byteLength);
            return b
        }

        function zx(a) {
            var b = qx, c = new Uint8Array([]);
            switch (a.type) {
                case "video":
                    if (a.codecs.includes("avc1")) {
                        c = a.stream.width || 0;
                        var d = a.stream.height || 0;
                        if (0 < a.wa.byteLength) var e = qx("avcC", a.wa); else {
                            e = qx;
                            for (var f = 7, g = [], h = [], k = 0, l = 0, m = 0, n = 0; n < a.ab.length; n++) {
                                var p = Bx(a.ab[n]);
                                switch (p[0] & 31) {
                                    case 7:
                                        g.push(p);
                                        f += p.length + 2;
                                        break;
                                    case 8:
                                        h.push(p), f += p.length + 2
                                }
                            }
                            0 < g.length && (k = g[0][1], m = g[0][2], l = g[0][3]);
                            f = new Uint8Array(f);
                            n = 0;
                            f[n++] = 1;
                            f[n++] = k;
                            f[n++] = m;
                            f[n++] = l;
                            f[n++] = 255;
                            f[n++] = 224 | g.length;
                            for (k =
                                     0; k < g.length; k++) f[n++] = (g[k].length & 65280) >> 8, f[n++] = g[k].length & 255, f.set(g[k], n), n += g[k].length;
                            f[n++] = h.length;
                            for (g = 0; g < h.length; g++) f[n++] = (h[g].length & 65280) >> 8, f[n++] = h[g].length & 255, f.set(h[g], n), n += h[g].length;
                            e = e("avcC", f)
                        }
                        c = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(x(vx(c, 2)), x(vx(d, 2)), [0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]));
                        d = "avc1";
                        h = Cx(a);
                        g = new Uint8Array([]);
                        a.encrypted && (g = Dx(a), d = "encv");
                        c = qx(d, c, e, h, g)
                    } else a.codecs.includes("hvc1") && (d = a.stream.width || 0, e = a.stream.height || 0, c = new Uint8Array([]), 0 < a.wa.byteLength && (c = qx("hvcC", a.wa)), d = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(x(vx(d, 2)), x(vx(e, 2)), [0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17])), e = "hvc1", h = Cx(a), g = new Uint8Array([]), a.encrypted && (g = Dx(a), e = "encv"), c = qx(e, d,
                        c, h, g));
                    break;
                case "audio":
                    if (a.codecs.includes("mp3")) a = qx(".mp3", Ex(a)); else if (a.codecs.includes("ac-3")) c = qx("dac3", a.ma), d = "ac-3", e = new Uint8Array([]), a.encrypted && (e = Dx(a), d = "enca"), a = qx(d, Ex(a), c, e); else if (a.codecs.includes("ec-3")) c = qx("dec3", a.ma), d = "ec-3", e = new Uint8Array([]), a.encrypted && (e = Dx(a), d = "enca"), a = qx(d, Ex(a), c, e); else if (a.codecs.includes("opus")) c = qx("dOps", a.ma), d = "Opus", e = new Uint8Array([]), a.encrypted && (e = Dx(a), d = "enca"), a = qx(d, Ex(a), c, e); else {
                        if (0 < a.ma.byteLength) c = qx("esds",
                            a.ma); else {
                            c = qx;
                            d = a.id + 1;
                            e = a.stream.channelsCount || 2;
                            g = a.stream.audioSamplingRate || 44100;
                            k = Sd("audio", a.codecs.split(","));
                            l = {
                                96E3: 0,
                                88200: 1,
                                64E3: 2,
                                48E3: 3,
                                44100: 4,
                                32E3: 5,
                                24E3: 6,
                                22050: 7,
                                16E3: 8,
                                12E3: 9,
                                11025: 10,
                                8E3: 11,
                                7350: 12
                            };
                            h = l[g];
                            if ("mp4a.40.5" === k || "mp4a.40.29" === k) h = l[2 * g];
                            g = parseInt(k.split(".").pop(), 10);
                            d = new Uint8Array([0, 0, 0, 0, 3, 25].concat(x(vx(d, 2)), [0, 4, 17, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 2, g << 3 | h >>> 1, h << 7 | e << 3, 6, 1, 2]));
                            c = c("esds", d)
                        }
                        d = "mp4a";
                        e = new Uint8Array([]);
                        a.encrypted && (e = Dx(a), d = "enca");
                        a = qx(d, Ex(a), c, e)
                    }
                    c = a
            }
            a = qx("stsd", Fx, c);
            return b("stbl", a, qx("stts", Gx), qx("stsc", Hx), qx("stsz", Ix), qx("stco", Jx))
        }

        function Cx(a) {
            if (!a.Ba && !a.Ca) return new Uint8Array([]);
            var b = a.Ca;
            a = new Uint8Array([].concat(x(vx(a.Ba, 4)), x(vx(b, 4))));
            return qx("pasp", a)
        }

        function Ex(a) {
            return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, a.stream.channelsCount || 2, 0, 16, 0, 0, 0, 0].concat(x(vx(a.stream.audioSamplingRate || 44100, 2)), [0, 0]))
        }

        function Dx(a) {
            var b = qx;
            var c = a.codecs.substring(0, a.codecs.indexOf("."));
            for (var d = 0, e = 0; e < c.length; e += 1) d |= c.charCodeAt(e) << 8 * (c.length - e - 1);
            c = new Uint8Array([].concat(x(vx(d, 4))));
            c = qx("frma", c);
            d = new Uint8Array([0, 0, 0, 0, 99, 101, 110, 99, 0, 1, 0, 0]);
            d = qx("schm", d);
            e = qx;
            var f = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
            a = t(a.stream.drmInfos);
            for (var g = a.next(); !g.done; g = a.next()) if ((g = g.value) && g.keyIds && g.keyIds.size) {
                g = t(g.keyIds);
                for (var h = g.next(); !h.done; h = g.next()) f = Bx(h.value)
            }
            a = new Uint8Array([0,
                0, 0, 0, 0, 0, 1, 8]);
            f = qx("tenc", a, f);
            return b("sinf", c, d, e("schi", f))
        }

        function Kx(a) {
            var b = [];
            a = t(a.g);
            for (var c = a.next(); !c.done; c = a.next()) {
                c = c.value;
                var d = b.push, e = d.apply;
                var f = qx;
                var g = new Uint8Array([0, 0, 0, 0].concat(x(vx(c.data ? c.data.sb : 0, 4))));
                g = qx("mfhd", g);
                var h;
                var k = c.data ? c.data.Za : [];
                var l = new Uint8Array(4 + k.length);
                for (h = 0; h < k.length; h++) {
                    var m = k[h].flags;
                    l[h + 4] = m.Va << 4 | m.Xa << 2 | m.Wa
                }
                k = qx("sdtp", l);
                var n = k.length + 92;
                l = qx;
                h = new Uint8Array([0, 0, 0, 58].concat(x(vx(c.id + 1, 4)), [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]));
                h = qx("tfhd", h);
                m = c.data ? c.data.baseMediaDecodeTime :
                    0;
                var p = Math.floor(m % (ux + 1));
                m = new Uint8Array([1, 0, 0, 0].concat(x(vx(Math.floor(m / (ux + 1)), 4)), x(vx(p, 4))));
                m = qx("tfdt", m);
                var q = n;
                n = c.data ? c.data.Za : [];
                p = n.length;
                var u = 12 + 16 * p, w = new Uint8Array(u);
                q += 8 + u;
                w.set(["video" === c.type ? 1 : 0, 0, 15, 1].concat(x(vx(p, 4)), x(vx(q, 4))), 0);
                for (q = 0; q < p; q++) {
                    var v = n[q];
                    u = vx(v.duration, 4);
                    var A = vx(v.size, 4), y = v.flags;
                    v = vx(v.eb, 4);
                    w.set([].concat(x(u), x(A), [y.hb << 2 | y.Va, y.Xa << 6 | y.Wa << 4 | y.ib, y.Ua & 61440, y.Ua & 15], x(v)), 12 + 16 * q)
                }
                n = qx("trun", w);
                k = l("traf", h, m, n, k);
                f = f("moof",
                    g, k);
                e.call(d, b, [f, Lx(c)])
            }
            return Md.apply(Ed, x(b))
        }

        function Lx(a) {
            a = (a.data ? a.data.Za : []).map(function (b) {
                return b.data
            });
            a = Md.apply(Ed, x(a));
            return qx("mdat", a)
        }

        function vx(a, b) {
            var c = [];
            for (--b; 0 <= b; b--) c.push(a >> 8 * b & 255);
            return c
        }

        function Bx(a) {
            for (var b = new Uint8Array(a.length / 2), c = 0; c < a.length / 2; c += 1) b[c] = parseInt(String(a[2 * c] + a[2 * c + 1]), 16);
            return b
        }

        function qx(a) {
            var b = Fa.apply(1, arguments), c = Mx[a];
            c || (c = [a.charCodeAt(0), a.charCodeAt(1), a.charCodeAt(2), a.charCodeAt(3)], Mx[a] = c);
            for (var d = 8, e = b.length - 1; 0 <= e; e--) d += b[e].byteLength;
            e = new Uint8Array(d);
            e[0] = d >> 24 & 255;
            e[1] = d >> 16 & 255;
            e[2] = d >> 8 & 255;
            e[3] = d & 255;
            e.set(c, 4);
            c = 0;
            for (d = 8; c < b.length; c++) e.set(b[c], d), d += b[c].byteLength;
            return e
        }

        var ox = !1, ux = Math.pow(2, 32) - 1, Mx = {},
            wx = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]),
            xx = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]),
            Gx = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), Hx = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
            Jx = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), Ix = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]),
            yx = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]), Ax = new Uint8Array([0,
                0, 0, 0, 0, 0, 0, 0]), Fx = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]), px = new Uint8Array([]),
            rx = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]),
            sx = new Uint8Array([]);

        function Nx() {
            var a = this;
            this.h = this.g = null;
            this.l = [];
            this.j = null;
            this.s = 1;
            this.i = null;
            this.B = new Qa(5);
            this.o = new Tc(function () {
                Ox(a)
            });
            this.A = new mg;
            this.m = new Map
        }

        r = Nx.prototype;
        r.configure = function (a) {
            this.g = a
        };
        r.start = function (a, b) {
            var c = this;
            return O(function (d) {
                if (1 == d.g) return c.l = [a], c.h = b, G(d, Px(c), 2);
                if (!c.h) throw new T(2, 7, 7001);
                return d.return(c.j)
            })
        };

        function Ox(a) {
            var b;
            O(function (c) {
                switch (c.g) {
                    case 1:
                        return sa(c, 2), G(c, Px(a), 4);
                    case 4:
                        va(c, 3);
                        break;
                    case 2:
                        b = wa(c), a.h && (b.severity = 1, a.h.onError(b));
                    case 3:
                        if (!a.h) return c.return();
                        H(c)
                }
            })
        }

        r.stop = function () {
            this.g = this.h = null;
            this.l = [];
            this.j = null;
            null != this.o && (this.o.stop(), this.o = null);
            this.m.clear();
            return this.A.destroy()
        };
        r.update = function () {
            var a = this, b;
            return O(function (c) {
                if (1 == c.g) return sa(c, 2), G(c, Px(a), 4);
                if (2 != c.g) return va(c, 0);
                b = wa(c);
                if (!a.h || !b) return c.return();
                a.h.onError(b);
                H(c)
            })
        };
        r.onExpirationUpdated = function () {
        };
        r.onInitialVariantChosen = function () {
        };
        r.banLocation = function () {
        };
        r.setMediaElement = function () {
        };

        function Px(a) {
            var b, c, d, e, f, g, h;
            return O(function (k) {
                if (1 == k.g) return b = tg(a.l, a.g.retryParameters), c = a.h.networkingEngine, d = Date.now(), e = c.request(0, b, {type: 5}), ng(a.A, e), G(k, e.promise, 2);
                f = k.h;
                if (!a.h) return k.return();
                f.uri && !a.l.includes(f.uri) && a.l.unshift(f.uri);
                var l = f.uri, m = f.data, n = a.g.mss.manifestPreprocessor;
                if (n != ym) {
                    rb("manifest.mss.manifestPreprocessor configuration", "Please Use manifest.mss.manifestPreprocessorTXml instead.");
                    m = Fu(m, "SmoothStreamingMedia");
                    if (!m) throw new T(2, 4, 4046,
                        l);
                    n(m);
                    m = Ad(m.outerHTML)
                }
                var p = $g(m, "SmoothStreamingMedia");
                if (!p) throw new T(2, 4, 4046, l);
                l = a.g.mss.manifestPreprocessorTXml;
                l != zm && l(p);
                a.i || (a.i = new vk(null, 0));
                if (l = nh(p, "IsLive", xh, !1)) throw new T(2, 4, 4047);
                a.i.wc(!l);
                n = nh(p, "TimeScale", vh, 1E7);
                m = nh(p, "DVRWindowLength", vh);
                l && (0 === m || isNaN(m)) && (m = Infinity);
                var q = nh(p, "CanSeek", xh, !1);
                0 === m && q && (m = Infinity);
                q = null;
                m && 0 < m && (q = m / n);
                l && !isNaN(a.g.availabilityWindowOverride) && (q = a.g.availabilityWindowOverride);
                null == q && (q = Infinity);
                a.i.Ie(q);
                m = nh(p,
                    "Duration", vh, Infinity);
                l || a.i.$a(m / n);
                l = {variants: [], textStreams: [], timescale: n, duration: m / n};
                q = gh(p, "Protection");
                var u;
                n = a.g.mss.keySystemsBySystemId;
                m = [];
                q = t(q);
                for (u = q.next(); !u.done; u = q.next()) m = m.concat(gh(u.value, "ProtectionHeader"));
                if (m.length) {
                    q = [];
                    for (u = 0; u < m.length; u++) {
                        var w = m[u], v = w.attributes.SystemID.toLowerCase(), A = n[v];
                        if (A) {
                            var y = kx(w);
                            if (y) a:{
                                y = t(jh(y, "DATA"));
                                for (var D = y.next(); !D.done; D = y.next()) if (D = kh(D.value, "KID")) {
                                    y = Hd(hh(D));
                                    y = new Uint8Array([y[3], y[2], y[1], y[0], y[5],
                                        y[4], y[7], y[6]].concat(x(y.slice(8))));
                                    y = Jd(y);
                                    break a
                                }
                                y = null
                            } else y = null;
                            D = Hd(hh(w));
                            v = Id(v.replace(/-/g, ""));
                            v = [{initData: Zg(D, v, new Set, 0), initDataType: "cenc", keyId: y}];
                            v = Qd(A, "cenc", v);
                            y && v.keyIds.add(y);
                            if (A = mx.get(A)) v.licenseServerUri = A(w);
                            q.push(v)
                        }
                    }
                    n = q
                } else n = [];
                u = n;
                q = [];
                n = [];
                m = [];
                p = gh(p, "StreamIndex");
                p = t(p);
                for (w = p.next(); !w.done; w = p.next()) {
                    w = w.value;
                    A = gh(w, "QualityLevel");
                    v = l.timescale;
                    y = l.duration;
                    D = gh(w, "c");
                    for (var z = [], B = 0, C = 0; C < D.length; ++C) {
                        var F = D[C], I = D[C + 1], L = nh(F, "t", vh), J =
                            nh(F, "d", vh);
                        F = nh(F, "r", th);
                        if (!J) break;
                        L = null != L ? L : B;
                        F = F || 0;
                        if (0 > F) if (I) {
                            I = nh(I, "t", vh);
                            if (null == I) break; else if (L >= I) break;
                            F = Math.ceil((I - L) / J) - 1
                        } else {
                            if (Infinity == y) break; else if (L / v >= y) break;
                            F = Math.ceil((y * v - L) / J) - 1
                        }
                        for (I = 0; I <= F; ++I) B = L + J, z.push({start: L / v, end: B / v, og: L}), L = B
                    }
                    v = z;
                    A = t(A);
                    for (y = A.next(); !y.done; y = A.next()) (y = Qx(a, w, y.value, v, u, l)) && ("audio" != y.type || a.g.disableAudio ? "video" != y.type || a.g.disableVideo ? y.type != Vd || a.g.disableText || m.push(y) : n.push(y) : q.push(y))
                }
                p = [];
                q = t(0 < q.length ?
                    q : [null]);
                for (u = q.next(); !u.done; u = q.next()) for (u = u.value, w = t(0 < n.length ? n : [null]), y = w.next(); !y.done; y = w.next()) A = p, v = A.push, y = y.value, D = 0, u && u.bandwidth && 0 < u.bandwidth && (D += u.bandwidth), y && y.bandwidth && 0 < y.bandwidth && (D += y.bandwidth), y = {
                    id: a.s++,
                    language: u ? u.language : "und",
                    disabledUntilTime: 0,
                    primary: !!u && u.primary || !!y && y.primary,
                    audio: u,
                    video: y,
                    bandwidth: D,
                    allowedByApplication: !0,
                    allowedByKeySystem: !0,
                    decodingInfos: []
                }, v.call(A, y);
                l.variants = p;
                l.textStreams = m;
                a.j ? (a.j.variants = l.variants, a.j.textStreams =
                    l.textStreams, a.h.filter(a.j)) : (a.j = {
                    presentationTimeline: a.i,
                    variants: l.variants,
                    textStreams: l.textStreams,
                    imageStreams: [],
                    offlineSessionIds: [],
                    minBufferTime: 0,
                    sequenceMode: a.g.mss.sequenceMode,
                    ignoreManifestTimestampsInSegmentsMode: !1,
                    type: "MSS",
                    serviceDescription: null,
                    nextUrl: null,
                    periodCount: 1,
                    gapCount: 0,
                    isLowLatency: !1
                }, a.i.re());
                Promise.resolve();
                g = Date.now();
                h = (g - d) / 1E3;
                a.B.sample(1, h);
                H(k)
            })
        }

        function Qx(a, b, c, d, e, f) {
            var g = b.attributes.Type;
            if ("audio" !== g && "video" !== g && "text" !== g) return $a("Ignoring unrecognized type:", g), null;
            var h = b.attributes.Language, k = a.s++, l = nh(c, "Bitrate", uh), m = nh(c, "MaxWidth", uh),
                n = nh(c, "MaxHeight", uh), p = nh(c, "Channels", uh), q = nh(c, "SamplingRate", uh), u = f.duration;
            d.length && (u = d[d.length - 1].end - d[0].start);
            var w = a.i.getDuration();
            a.i.$a(Math.min(u, w));
            var v = {
                id: k,
                originalId: b.attributes.Name || String(k),
                groupId: null,
                createSegmentIndex: function () {
                    return Promise.resolve()
                },
                closeSegmentIndex: function () {
                    return Promise.resolve()
                },
                segmentIndex: null,
                mimeType: "",
                codecs: "",
                frameRate: void 0,
                pixelAspectRatio: void 0,
                bandwidth: l || 0,
                width: m || void 0,
                height: n || void 0,
                kind: "",
                encrypted: 0 < e.length,
                drmInfos: e,
                keyIds: new Set,
                language: Ee(h || "und"),
                originalLanguage: h,
                label: "",
                type: "",
                primary: !1,
                trickModeVideo: null,
                emsgSchemeIdUris: [],
                roles: [],
                forced: !1,
                channelsCount: p,
                audioSamplingRate: q,
                spatialAudio: !1,
                closedCaptions: null,
                hdr: void 0,
                colorGamut: void 0,
                videoLayout: void 0,
                tilesLayout: void 0,
                matchedStreams: [],
                mssPrivateData: {duration: u, timescale: f.timescale, codecPrivateData: null},
                accessibilityPurpose: null,
                external: !1,
                fastSwitching: !1,
                fullMimeTypes: new Set
            };
            if (e = b.attributes.Subtype) (e = Rx[e]) && v.roles.push(e), "main" === e && (v.primary = !0);
            e = c.attributes.FourCC;
            if (null === e || "" === e) e = b.attributes.FourCC;
            if (!e) if ("audio" === g) e = "AAC"; else if ("video" === g) return $a('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'), null;
            if (!Sx.includes(e.toUpperCase())) return $a("Codec not supported:",
                e), null;
            c = Tx(c, g, e, v);
            v.mssPrivateData.codecPrivateData = c;
            switch (g) {
                case "audio":
                    if (!c) return $a("Quality unsupported without CodecPrivateData", g), null;
                    v.type = "audio";
                    v.mimeType = "mss/audio/mp4";
                    v.codecs = Ux(e, c);
                    break;
                case "video":
                    if (!c) return $a("Quality unsupported without CodecPrivateData", g), null;
                    v.type = "video";
                    v.mimeType = "mss/video/mp4";
                    v.codecs = Vx(c);
                    break;
                case "text":
                    if (v.type = Vd, v.mimeType = "application/mp4", "TTML" === e || "DFXP" === e) v.codecs = "stpp"
            }
            v.fullMimeTypes.add($d(v.mimeType, v.codecs));
            v.createSegmentIndex = function () {
                if (v.segmentIndex) return Promise.resolve();
                if (a.m.has(v.id)) var A = a.m.get(v.id); else A = [], "video" == v.type && (A = v.mssPrivateData.codecPrivateData.split("00000001").slice(1)), A = {
                    id: v.id,
                    type: v.type,
                    codecs: v.codecs,
                    encrypted: v.encrypted,
                    timescale: v.mssPrivateData.timescale,
                    duration: v.mssPrivateData.duration,
                    ab: A,
                    ma: new Uint8Array([]),
                    wa: new Uint8Array([]),
                    Ba: 0,
                    Ca: 0,
                    data: null,
                    stream: v
                }, A = tx(new nx([A])), a.m.set(v.id, A);
                A = Wx(a, new Ai(function () {
                        return []
                    }, 0, null, wl(v), v.mssPrivateData.timescale,
                    A), v, b, d);
                v.segmentIndex = new Rk(A);
                return Promise.resolve()
            };
            v.closeSegmentIndex = function () {
                v.segmentIndex && (v.segmentIndex.release(), v.segmentIndex = null)
            };
            return v
        }

        function Tx(a, b, c, d) {
            if (a = a.attributes.CodecPrivateData) return a;
            if ("audio" !== b) return null;
            b = d.channelsCount || 2;
            a = d.audioSamplingRate || 44100;
            var e = {
                96E3: 0,
                88200: 1,
                64E3: 2,
                48E3: 3,
                44100: 4,
                32E3: 5,
                24E3: 6,
                22050: 7,
                16E3: 8,
                12E3: 9,
                11025: 10,
                8E3: 11,
                7350: 12
            };
            d = e[a];
            if ("AACH" === c) return c = new Uint8Array(4), a = e[2 * a], c[0] = 40 | d >> 1, c[1] = d << 7 | b << 3 | a >> 1, c[2] = a << 7 | 8, c[3] = 0, b = new Uint16Array(2), b[0] = (c[0] << 8) + c[1], b[1] = (c[2] << 8) + c[3], b[0].toString(16) + b[1].toString(16);
            c = new Uint8Array(2);
            c[0] = 16 | d >> 1;
            c[1] = d << 7 | b << 3;
            b = new Uint16Array(1);
            b[0] = (c[0] << 8) + c[1];
            return b[0].toString(16)
        }

        function Ux(a, b) {
            var c = 0;
            "AACH" === a && (c = 5);
            b ? 0 === c && (c = (parseInt(b.substr(0, 2), 16) & 248) >> 3) : (c = 2, "AACH" === a && (c = 5));
            return "mp4a.40." + c
        }

        function Vx(a) {
            var b = /00000001[0-9]7/.exec(a);
            return b.length && a ? "avc1." + a.substr(a.indexOf(b[0]) + 10, 6) : ""
        }

        function Wx(a, b, c, d, e) {
            var f = d.attributes.Url.replace("{bitrate}", String(c.bandwidth));
            d = [];
            var g = {};
            e = t(e);
            for (var h = e.next(); !h.done; g = {fd: g.fd}, h = e.next()) g.fd = h.value, d.push(new Ci(g.fd.start, g.fd.end, function (k) {
                return function () {
                    return Nd(a.l, [f.replace("{start time}", String(k.fd.og))])
                }
            }(g), 0, null, b, 0, 0, c.mssPrivateData.duration));
            return d
        }

        S("shaka.mss.MssParser", Nx);
        var Sx = "AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),
            Rx = {CAPT: "main", SUBT: "alternate", DESC: "main"};
        vi["application/vnd.ms-sstr+xml"] = function () {
            return new Nx
        };

        function Xx(a, b, c, d, e, f) {
            if (200 <= c && 299 >= c && 202 != c) return {
                uri: e || d,
                originalUri: d,
                data: b,
                status: c,
                headers: a,
                fromCache: !!a["x-shaka-from-cache"]
            };
            var g = null;
            try {
                g = zd(b)
            } catch (h) {
            }
            throw new T(401 == c || 403 == c ? 2 : 1, 1, 1001, d, c, g, a, f, e || d);
        };

        function Yx() {
        }

        function Zx(a, b, c, d, e) {
            var f = new $x;
            Gg(b.headers).forEach(function (l, m) {
                f.append(m, l)
            });
            var g = new ay, h = {zg: !1, th: !1};
            a = by(a, c, {
                body: b.body || void 0,
                headers: f,
                method: b.method,
                signal: g.signal,
                credentials: b.allowCrossSiteCredentials ? "include" : void 0
            }, h, d, e, b.streamDataCallback);
            a = new cg(a, function () {
                h.zg = !0;
                g.abort();
                return Promise.resolve()
            });
            if (b = b.retryParameters.timeout) {
                var k = new Tc(function () {
                    h.th = !0;
                    g.abort()
                });
                k.Y(b / 1E3);
                a.finally(function () {
                    k.stop()
                })
            }
            return a
        }

        function by(a, b, c, d, e, f, g) {
            var h, k, l, m, n, p, q, u, w, v, A, y, D;
            return O(function (z) {
                switch (z.g) {
                    case 1:
                        return h = cy, k = dy, p = n = 0, q = Date.now(), sa(z, 2), G(z, h(a, c), 4);
                    case 4:
                        l = z.h;
                        f(ey(l.headers));
                        if ("HEAD" == c.method) {
                            z.u(5);
                            break
                        }
                        u = l.clone().body.getReader();
                        v = (w = l.headers.get("Content-Length")) ? parseInt(w, 10) : 0;
                        A = function (B) {
                            function C() {
                                var F, I, L;
                                return O(function (J) {
                                    switch (J.g) {
                                        case 1:
                                            return sa(J, 2), G(J, u.read(), 4);
                                        case 4:
                                            F = J.h;
                                            va(J, 3);
                                            break;
                                        case 2:
                                            return wa(J), J.return();
                                        case 3:
                                            if (F.done) {
                                                J.u(5);
                                                break
                                            }
                                            n +=
                                                F.value.byteLength;
                                            if (!g) {
                                                J.u(5);
                                                break
                                            }
                                            return G(J, g(F.value), 5);
                                        case 5:
                                            I = Date.now();
                                            if (100 < I - q || F.done) L = F.done ? 0 : v - n, e(I - q, n - p, L), p = n, q = I;
                                            F.done ? B.close() : (B.enqueue(F.value), C());
                                            H(J)
                                    }
                                })
                            }

                            C()
                        };
                        new k({start: A});
                        return G(z, l.arrayBuffer(), 6);
                    case 6:
                        m = z.h;
                    case 5:
                        va(z, 3);
                        break;
                    case 2:
                        y = wa(z);
                        if (d.zg) throw new T(1, 1, 7001, a, b);
                        if (d.th) throw new T(1, 1, 1003, a, b);
                        throw new T(1, 1, 1002, a, y, b);
                    case 3:
                        return D = ey(l.headers), z.return(Xx(D, m, l.status, a, l.url, b))
                }
            })
        }

        function ey(a) {
            var b = {};
            a.forEach(function (c, d) {
                b[d.trim()] = c
            });
            return b
        }

        function fy() {
            if (window.ReadableStream) try {
                new ReadableStream({})
            } catch (a) {
                return !1
            } else return !1;
            if (window.Response) {
                if (!(new Response("")).body) return !1
            } else return !1;
            return !(!window.fetch || "polyfill" in window.fetch || !window.AbortController)
        }

        S("shaka.net.HttpFetchPlugin", Yx);
        Yx.isSupported = fy;
        Yx.parse = Zx;
        var cy = window.fetch, ay = window.AbortController, dy = window.ReadableStream, $x = window.Headers;
        fy() && (pg("http", Zx, 2, !0), pg("https", Zx, 2, !0), pg("blob", Zx, 2, !0));

        function gy() {
        }

        function hy(a, b, c, d, e) {
            var f = new iy, g = Date.now(), h = 0, k = new Promise(function (l, m) {
                f.open(b.method, a, !0);
                f.responseType = "arraybuffer";
                f.timeout = b.retryParameters.timeout;
                f.withCredentials = b.allowCrossSiteCredentials;
                f.onabort = function () {
                    m(new T(1, 1, 7001, a, c))
                };
                var n = !1;
                f.onreadystatechange = function () {
                    if (2 == f.readyState && !n) {
                        var q = jy(f);
                        e(q);
                        n = !0
                    }
                };
                f.onload = function (q) {
                    var u = jy(f), w = f.response;
                    try {
                        d(Date.now() - g, q.loaded - h, 0);
                        var v = Xx(u, w, f.status, a, f.responseURL, c);
                        l(v)
                    } catch (A) {
                        m(A)
                    }
                };
                f.onerror = function (q) {
                    m(new T(1,
                        1, 1002, a, q, c))
                };
                f.ontimeout = function () {
                    m(new T(1, 1, 1003, a, c))
                };
                f.onprogress = function (q) {
                    var u = Date.now();
                    if (100 < u - g || q.lengthComputable && q.loaded == q.total) d(u - g, q.loaded - h, 4 == f.readyState ? 0 : q.total - q.loaded), h = q.loaded, g = u
                };
                for (var p in b.headers) f.setRequestHeader(p.toLowerCase(), b.headers[p]);
                f.send(b.body)
            });
            return new cg(k, function () {
                f.abort();
                return Promise.resolve()
            })
        }

        function jy(a) {
            var b = a.getAllResponseHeaders().trim().split("\r\n");
            a = {};
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value.split(": "), a[c[0].toLowerCase()] = c.slice(1).join(": ");
            return a
        }

        S("shaka.net.HttpXHRPlugin", gy);
        gy.parse = hy;
        var iy = window.XMLHttpRequest;
        pg("http", hy, 1, !0);
        pg("https", hy, 1, !0);
        pg("blob", hy, 1, !0);

        function ky(a, b, c, d) {
            this.g = a;
            this.i = b;
            this.groupId = c;
            this.h = d
        }

        function ly(a) {
            return a.M().map(function (b) {
                return "{" + encodeURI(b) + "}"
            }).join("") + ":" + a.Ha + ":" + a.sa
        }

        function my(a, b) {
            return Dl(a.g.M(), a.g.Ha, a.g.sa, b.streaming.retryParameters)
        };

        function ny() {
            this.h = this.j = this.i = 0;
            this.g = new Map;
            this.l = 0
        }

        function oy(a, b) {
            a.i += b;
            var c = a.l;
            a.l++;
            a.g.set(c, b);
            return c
        }

        ny.prototype.close = function (a, b) {
            if (this.g.has(a)) {
                var c = this.g.get(a);
                this.g.delete(a);
                this.j += c;
                this.h += b
            }
        };

        function py(a) {
            var b = this;
            this.o = a;
            this.j = new Map;
            this.i = new Bg(function () {
                return qy(b).catch(function () {
                })
            });
            this.h = [];
            this.m = function () {
            };
            this.l = function () {
            };
            this.g = new ny
        }

        py.prototype.destroy = function () {
            return this.i.destroy()
        };

        function ry(a, b, c) {
            a.m = b;
            a.l = c
        }

        function qy(a) {
            var b = a.h.map(function (c) {
                return c()
            });
            a.h = [];
            return Promise.all(b)
        }

        function sy(a, b, c, d, e, f) {
            Cg(a.i);
            var g = (a.j.get(b) || Promise.resolve()).then(function () {
                var h, k, l, m, n, p, q;
                return O(function (u) {
                    if (1 == u.g) return G(u, ty(a, c), 2);
                    h = u.h;
                    if (a.i.g) throw new T(2, 9, 7001);
                    if (e) for (m in k = Ab(h), l = new Yg(k), l.data) n = Number(m), p = l.data[n], q = l.g[n], a.l(p, q);
                    a.g.close(d, h.byteLength);
                    var w = a.g;
                    a.m(0 == w.i ? 0 : w.j / w.i, a.g.h);
                    return u.return(f(h))
                })
            });
            a.j.set(b, g)
        }

        function uy(a) {
            return O(function (b) {
                return 1 == b.g ? G(b, Promise.all(a.j.values()), 2) : b.return(a.g.h)
            })
        }

        function ty(a, b) {
            var c, d, e, f;
            return O(function (g) {
                if (1 == g.g) return c = zg, d = a.o.request(c, b), e = function () {
                    return d.abort()
                }, a.h.push(e), G(g, d.promise, 2);
                f = g.h;
                Ob(a.h, e);
                return g.return(f.data)
            })
        };

        function vy(a, b) {
            var c = this;
            this.i = a;
            this.h = a.objectStore(b);
            this.g = new bg;
            a.onabort = function (d) {
                d.preventDefault();
                c.g.reject()
            };
            a.onerror = function (d) {
                d.preventDefault();
                c.g.reject()
            };
            a.oncomplete = function () {
                c.g.resolve()
            }
        }

        vy.prototype.abort = function () {
            var a = this;
            return O(function (b) {
                if (1 == b.g) {
                    try {
                        a.i.abort()
                    } catch (c) {
                    }
                    sa(b, 2);
                    return G(b, a.g, 4)
                }
                if (2 != b.g) return va(b, 0);
                wa(b);
                H(b)
            })
        };

        function wy(a, b) {
            return new Promise(function (c, d) {
                var e = a.h.openCursor();
                e.onerror = d;
                e.onsuccess = function () {
                    var f;
                    return O(function (g) {
                        if (1 == g.g) {
                            if (null == e.result) return c(), g.return();
                            f = e.result;
                            return G(g, b(f.key, f.value, f), 2)
                        }
                        f.continue();
                        H(g)
                    })
                }
            })
        }

        vy.prototype.store = function () {
            return this.h
        };
        vy.prototype.promise = function () {
            return this.g
        };

        function xy(a) {
            this.h = a;
            this.g = []
        }

        xy.prototype.destroy = function () {
            return Promise.all(this.g.map(function (a) {
                return a.abort()
            }))
        };

        function yy(a, b) {
            return zy(a, b, "readwrite")
        }

        function zy(a, b, c) {
            c = a.h.transaction([b], c);
            var d = new vy(c, b);
            a.g.push(d);
            d.promise().then(function () {
                Ob(a.g, d)
            }, function () {
                Ob(a.g, d)
            });
            return d
        };

        function Ay(a, b, c) {
            this.h = new xy(a);
            this.i = b;
            this.g = c
        }

        r = Ay.prototype;
        r.destroy = function () {
            return this.h.destroy()
        };
        r.hasFixedKeySpace = function () {
            return !0
        };
        r.addSegments = function () {
            return By(this.i)
        };
        r.removeSegments = function (a, b) {
            return Cy(this, this.i, a, b)
        };
        r.getSegments = function (a) {
            var b = this, c;
            return O(function (d) {
                if (1 == d.g) return G(d, Dy(b, b.i, a), 2);
                c = d.h;
                return d.return(c.map(function (e) {
                    return b.Cg(e)
                }))
            })
        };
        r.addManifests = function () {
            return By(this.g)
        };
        r.updateManifest = function () {
            return Promise.reject(new T(2, 9, 9016, "Cannot modify values in " + this.g))
        };

        function Ey(a, b, c) {
            a = yy(a.h, a.g);
            var d = a.store();
            d.get(b).onsuccess = function () {
                d.put(c, b)
            };
            return a.promise()
        }

        r.updateManifestExpiration = function (a, b) {
            var c = yy(this.h, this.g), d = c.store();
            d.get(a).onsuccess = function (e) {
                if (e = e.target.result) e.expiration = b, d.put(e, a)
            };
            return c.promise()
        };
        r.removeManifests = function (a, b) {
            return Cy(this, this.g, a, b)
        };
        r.getManifests = function (a) {
            var b = this, c;
            return O(function (d) {
                if (1 == d.g) return G(d, Dy(b, b.g, a), 2);
                c = d.h;
                return d.return(Promise.all(c.map(function (e) {
                    return b.od(e)
                })))
            })
        };
        r.getAllManifests = function () {
            var a = this, b, c;
            return O(function (d) {
                return 1 == d.g ? (b = zy(a.h, a.g, "readonly"), c = new Map, G(d, wy(b, function (e, f) {
                    var g;
                    return O(function (h) {
                        if (1 == h.g) return G(h, a.od(f), 2);
                        g = h.h;
                        c.set(e, g);
                        H(h)
                    })
                }), 2)) : 3 != d.g ? G(d, b.promise(), 3) : d.return(c)
            })
        };
        r.Cg = function (a) {
            return a
        };
        r.od = function (a) {
            return Promise.resolve(a)
        };

        function By(a) {
            return Promise.reject(new T(2, 9, 9011, "Cannot add new value to " + a))
        }

        r.add = function (a, b) {
            var c = this, d, e, f, g, h, k, l;
            return O(function (m) {
                if (1 == m.g) {
                    d = yy(c.h, a);
                    e = d.store();
                    f = [];
                    g = {};
                    h = t(b);
                    for (k = h.next(); !k.done; g = {Xd: g.Xd}, k = h.next()) l = k.value, g.Xd = e.add(l), g.Xd.onsuccess = function (n) {
                        return function () {
                            f.push(n.Xd.result)
                        }
                    }(g);
                    return G(m, d.promise(), 2)
                }
                return m.return(f)
            })
        };

        function Cy(a, b, c, d) {
            a = yy(a.h, b);
            b = a.store();
            var e = {};
            c = t(c);
            for (var f = c.next(); !f.done; e = {Wd: e.Wd}, f = c.next()) e.Wd = f.value, b.delete(e.Wd).onsuccess = function (g) {
                return function () {
                    return d(g.Wd)
                }
            }(e);
            return a.promise()
        }

        function Dy(a, b, c) {
            var d, e, f, g, h, k, l;
            return O(function (m) {
                if (1 == m.g) {
                    d = zy(a.h, b, "readonly");
                    e = d.store();
                    f = {};
                    g = [];
                    h = {};
                    k = t(c);
                    for (l = k.next(); !l.done; h = {
                        dd: h.dd,
                        ad: h.ad
                    }, l = k.next()) h.ad = l.value, h.dd = e.get(h.ad), h.dd.onsuccess = function (n) {
                        return function () {
                            void 0 == n.dd.result && g.push(n.ad);
                            f[n.ad] = n.dd.result
                        }
                    }(h);
                    return G(m, d.promise(), 2)
                }
                if (g.length) throw new T(2, 9, 9012, "Could not find values for " + g);
                return m.return(c.map(function (n) {
                    return f[n]
                }))
            })
        };

        function Fy(a) {
            this.g = new xy(a)
        }

        Fy.prototype.destroy = function () {
            return this.g.destroy()
        };
        Fy.prototype.getAll = function () {
            var a = this, b, c;
            return O(function (d) {
                return 1 == d.g ? (b = zy(a.g, "session-ids", "readonly"), c = [], G(d, wy(b, function (e, f) {
                    c.push(f)
                }), 2)) : 3 != d.g ? G(d, b.promise(), 3) : d.return(c)
            })
        };
        Fy.prototype.add = function (a) {
            var b = yy(this.g, "session-ids"), c = b.store();
            a = t(a);
            for (var d = a.next(); !d.done; d = a.next()) c.add(d.value);
            return b.promise()
        };
        Fy.prototype.remove = function (a) {
            var b = this, c;
            return O(function (d) {
                return 1 == d.g ? (c = yy(b.g, "session-ids"), G(d, wy(c, function (e, f, g) {
                    a.includes(f.sessionId) && g.delete()
                }), 2)) : G(d, c.promise(), 0)
            })
        };

        function Gy() {
            this.g = new Map
        }

        Gy.prototype.destroy = function () {
            for (var a = [], b = t(this.g.values()), c = b.next(); !c.done; c = b.next()) a.push(c.value.destroy());
            this.g.clear();
            return Promise.all(a)
        };
        Gy.prototype.init = function () {
            var a = this;
            Hy.forEach(function (e, f) {
                (e = e()) && a.g.set(f, e)
            });
            for (var b = [], c = t(this.g.values()), d = c.next(); !d.done; d = c.next()) b.push(d.value.init());
            return Promise.all(b)
        };

        function Iy(a) {
            var b = null;
            a.g.forEach(function (c, d) {
                c.getCells().forEach(function (e, f) {
                    e.hasFixedKeySpace() || b || (b = {path: {ob: d, Ja: f}, Ja: e})
                })
            });
            if (b) return b;
            throw new T(2, 9, 9013, "Could not find a cell that supports add-operations");
        }

        function Jy(a, b) {
            a.g.forEach(function (c, d) {
                c.getCells().forEach(function (e, f) {
                    b({ob: d, Ja: f}, e)
                })
            })
        }

        function Ky(a, b, c) {
            a = a.g.get(b);
            if (!a) throw new T(2, 9, 9013, "Could not find mechanism with name " + b);
            b = a.getCells().get(c);
            if (!b) throw new T(2, 9, 9013, "Could not find cell with name " + c);
            return b
        }

        function Ly(a, b) {
            a.g.forEach(function (c) {
                b(c.getEmeSessionCell())
            })
        }

        function My(a) {
            var b = Array.from(a.g.keys());
            if (!b.length) throw new T(2, 9, 9E3, "No supported storage mechanisms found");
            return a.g.get(b[0]).getEmeSessionCell()
        }

        function Ny(a) {
            var b, c, d;
            return O(function (e) {
                return 1 == e.g ? (b = Array.from(a.g.values()), c = 0 < b.length, c || (d = Hy, d.forEach(function (f) {
                    (f = f()) && b.push(f)
                })), G(e, Promise.all(b.map(function (f) {
                    return f.erase()
                })), 2)) : c ? e.u(0) : G(e, Promise.all(b.map(function (f) {
                    return f.destroy()
                })), 0)
            })
        }

        function Oy(a, b) {
            Hy.set(a, b)
        }

        S("shaka.offline.StorageMuxer", Gy);
        Gy.unregister = function (a) {
            Hy.delete(a)
        };
        Gy.register = Oy;
        Gy.prototype.destroy = Gy.prototype.destroy;
        var Hy = new Map;

        function Py() {
            Ay.apply(this, arguments)
        }

        oa(Py, Ay);
        Py.prototype.updateManifestExpiration = function (a, b) {
            var c = this, d, e, f;
            return O(function (g) {
                d = yy(c.h, c.g);
                e = d.store();
                f = new bg;
                e.get(a).onsuccess = function (h) {
                    (h = h.target.result) ? (h.expiration = b, e.put(h), f.resolve()) : f.reject(new T(2, 9, 9012, "Could not find values for " + a))
                };
                return G(g, Promise.all([d.promise(), f]), 0)
            })
        };
        Py.prototype.od = function (a) {
            var b, c, d, e, f, g;
            return O(function (h) {
                if (1 == h.g) {
                    b = [];
                    for (c = 0; c < a.periods.length; ++c) d = c == a.periods.length - 1 ? a.duration : a.periods[c + 1].startTime, e = d - a.periods[c].startTime, f = Qy(a.periods[c], e), b.push(f);
                    return G(h, du(b), 2)
                }
                g = h.h;
                return h.return({
                    creationTime: 0,
                    originalManifestUri: a.originalManifestUri,
                    duration: a.duration,
                    size: a.size,
                    expiration: null == a.expiration ? Infinity : a.expiration,
                    streams: g,
                    sessionIds: a.sessionIds,
                    drmInfo: a.drmInfo,
                    appMetadata: a.appMetadata,
                    sequenceMode: !1
                })
            })
        };

        function Qy(a, b) {
            Ry(a);
            for (var c = t(a.streams), d = c.next(); !d.done; d = c.next()) ;
            return a.streams.map(function (e) {
                return Sy(e, a.startTime, b)
            })
        }

        function Sy(a, b, c) {
            var d = a.initSegmentUri ? Ty(a.initSegmentUri) : null, e = b + a.presentationTimeOffset, f = b + c;
            return {
                id: a.id,
                originalId: null,
                groupId: null,
                primary: a.primary,
                type: a.contentType,
                mimeType: a.mimeType,
                codecs: a.codecs,
                frameRate: a.frameRate,
                pixelAspectRatio: void 0,
                hdr: void 0,
                colorGamut: void 0,
                videoLayout: void 0,
                kind: a.kind,
                language: a.language,
                originalLanguage: a.language || null,
                label: a.label,
                width: a.width,
                height: a.height,
                initSegmentKey: d,
                encrypted: a.encrypted,
                keyIds: new Set([a.keyId]),
                segments: a.segments.map(function (g) {
                    var h =
                        Ty(g.uri);
                    return {
                        startTime: b + g.startTime,
                        endTime: b + g.endTime,
                        dataKey: h,
                        initSegmentKey: d,
                        appendWindowStart: b,
                        appendWindowEnd: f,
                        timestampOffset: e,
                        tilesLayout: "",
                        mimeType: null,
                        codecs: null
                    }
                }),
                variantIds: a.variantIds,
                roles: [],
                forced: !1,
                audioSamplingRate: null,
                channelsCount: null,
                spatialAudio: !1,
                closedCaptions: null,
                tilesLayout: void 0,
                external: !1,
                fastSwitching: !1
            }
        }

        Py.prototype.Cg = function (a) {
            return {data: a.data}
        };

        function Ty(a) {
            var b;
            if ((b = /^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a)) || (b = /^offline:segment\/([0-9]+)$/.exec(a))) return Number(b[1]);
            throw new T(2, 9, 9004, "Could not parse uri " + a);
        }

        function Ry(a) {
            var b = a.streams.filter(function (h) {
                return "audio" == h.contentType
            });
            a = a.streams.filter(function (h) {
                return "video" == h.contentType
            });
            if (!b.every(function (h) {
                return h.variantIds
            }) || !a.every(function (h) {
                return h.variantIds
            })) {
                for (var c = t(b), d = c.next(); !d.done; d = c.next()) d.value.variantIds = [];
                c = t(a);
                for (d = c.next(); !d.done; d = c.next()) d.value.variantIds = [];
                c = 0;
                if (a.length && !b.length) {
                    var e = c++, f = t(a);
                    for (d = f.next(); !d.done; d = f.next()) d.value.variantIds.push(e)
                }
                if (!a.length && b.length) for (e = c++,
                                                    f = t(b), d = f.next(); !d.done; d = f.next()) d.value.variantIds.push(e);
                if (a.length && b.length) for (b = t(b), d = b.next(); !d.done; d = b.next()) for (d = d.value, e = t(a), f = e.next(); !f.done; f = e.next()) {
                    f = f.value;
                    var g = c++;
                    d.variantIds.push(g);
                    f.variantIds.push(g)
                }
            }
        };

        function Uy() {
            Ay.apply(this, arguments)
        }

        oa(Uy, Ay);
        Uy.prototype.od = function (a) {
            var b, c, d, e, f, g;
            return O(function (h) {
                if (1 == h.g) {
                    b = [];
                    for (c = 0; c < a.periods.length; ++c) {
                        d = c == a.periods.length - 1 ? a.duration : a.periods[c + 1].startTime;
                        e = d - a.periods[c].startTime;
                        for (var k = a.periods[c], l = [], m = t(k.streams), n = m.next(); !n.done; n = m.next()) n = n.value, 0 != n.variantIds.length && l.push(Vy(n, k.startTime, k.startTime + e));
                        f = l;
                        b.push(f)
                    }
                    return G(h, du(b), 2)
                }
                g = h.h;
                return h.return({
                    appMetadata: a.appMetadata,
                    creationTime: 0,
                    drmInfo: a.drmInfo,
                    duration: a.duration,
                    expiration: null == a.expiration ?
                        Infinity : a.expiration,
                    originalManifestUri: a.originalManifestUri,
                    sessionIds: a.sessionIds,
                    size: a.size,
                    streams: g,
                    sequenceMode: !1
                })
            })
        };

        function Vy(a, b, c) {
            return {
                id: a.id,
                originalId: a.originalId,
                groupId: null,
                primary: a.primary,
                type: a.contentType,
                mimeType: a.mimeType,
                codecs: a.codecs,
                frameRate: a.frameRate,
                pixelAspectRatio: a.pixelAspectRatio,
                hdr: void 0,
                colorGamut: void 0,
                videoLayout: void 0,
                kind: a.kind,
                language: a.language,
                originalLanguage: a.language || null,
                label: a.label,
                width: a.width,
                height: a.height,
                encrypted: a.encrypted,
                keyIds: new Set([a.keyId]),
                segments: a.segments.map(function (d) {
                    return {
                        startTime: b + d.startTime,
                        endTime: b + d.endTime,
                        initSegmentKey: a.initSegmentKey,
                        appendWindowStart: b,
                        appendWindowEnd: c,
                        timestampOffset: b - a.presentationTimeOffset,
                        dataKey: d.dataKey,
                        tilesLayout: "",
                        mimeType: null,
                        codecs: null
                    }
                }),
                variantIds: a.variantIds,
                roles: [],
                forced: !1,
                audioSamplingRate: null,
                channelsCount: null,
                spatialAudio: !1,
                closedCaptions: null,
                tilesLayout: void 0,
                external: !1,
                fastSwitching: !1
            }
        };

        function Wy() {
            Ay.apply(this, arguments)
        }

        oa(Wy, Ay);
        r = Wy.prototype;
        r.hasFixedKeySpace = function () {
            return !1
        };
        r.addSegments = function (a) {
            return this.add(this.i, a)
        };
        r.addManifests = function (a) {
            return this.add(this.g, a)
        };
        r.updateManifest = function (a, b) {
            return Ey(this, a, b)
        };
        r.od = function (a) {
            null == a.expiration && (a.expiration = Infinity);
            return Promise.resolve(a)
        };

        function Xy() {
            this.m = this.j = this.i = this.h = this.g = this.l = null
        }

        r = Xy.prototype;
        r.init = function () {
            var a = this, b = new bg, c = !1, d = new Tc(function () {
                c = !0;
                b.reject(new T(2, 9, 9017))
            });
            d.Y(5);
            var e = window.indexedDB.open("shaka_offline_db", 5);
            e.onsuccess = function () {
                if (!c) {
                    var f = e.result;
                    a.l = f;
                    var g = f.objectStoreNames;
                    g = g.contains("manifest") && g.contains("segment") ? new Py(f, "segment", "manifest") : null;
                    a.g = g;
                    g = f.objectStoreNames;
                    g = g.contains("manifest-v2") && g.contains("segment-v2") ? new Uy(f, "segment-v2", "manifest-v2") : null;
                    a.h = g;
                    g = f.objectStoreNames;
                    g = g.contains("manifest-v3") && g.contains("segment-v3") ?
                        new Uy(f, "segment-v3", "manifest-v3") : null;
                    a.i = g;
                    g = f.objectStoreNames;
                    g = g.contains("manifest-v5") && g.contains("segment-v5") ? new Wy(f, "segment-v5", "manifest-v5") : null;
                    a.j = g;
                    f = f.objectStoreNames.contains("session-ids") ? new Fy(f) : null;
                    a.m = f;
                    d.stop();
                    b.resolve()
                }
            };
            e.onupgradeneeded = function () {
                for (var f = e.result, g = t(["segment-v5", "manifest-v5", "session-ids"]), h = g.next(); !h.done; h = g.next()) h = h.value, f.objectStoreNames.contains(h) || f.createObjectStore(h, {autoIncrement: !0})
            };
            e.onerror = function (f) {
                c || (b.reject(new T(2,
                    9, 9001, e.error)), d.stop(), f.preventDefault())
            };
            return b
        };
        r.destroy = function () {
            var a = this;
            return O(function (b) {
                switch (b.g) {
                    case 1:
                        if (!a.g) {
                            b.u(2);
                            break
                        }
                        return G(b, a.g.destroy(), 2);
                    case 2:
                        if (!a.h) {
                            b.u(4);
                            break
                        }
                        return G(b, a.h.destroy(), 4);
                    case 4:
                        if (!a.i) {
                            b.u(6);
                            break
                        }
                        return G(b, a.i.destroy(), 6);
                    case 6:
                        if (!a.j) {
                            b.u(8);
                            break
                        }
                        return G(b, a.j.destroy(), 8);
                    case 8:
                        if (!a.m) {
                            b.u(10);
                            break
                        }
                        return G(b, a.m.destroy(), 10);
                    case 10:
                        a.l && a.l.close(), H(b)
                }
            })
        };
        r.getCells = function () {
            var a = new Map;
            this.g && a.set("v1", this.g);
            this.h && a.set("v2", this.h);
            this.i && a.set("v3", this.i);
            this.j && a.set("v5", this.j);
            return a
        };
        r.getEmeSessionCell = function () {
            return this.m
        };
        r.erase = function () {
            var a = this;
            return O(function (b) {
                switch (b.g) {
                    case 1:
                        if (!a.g) {
                            b.u(2);
                            break
                        }
                        return G(b, a.g.destroy(), 2);
                    case 2:
                        if (!a.h) {
                            b.u(4);
                            break
                        }
                        return G(b, a.h.destroy(), 4);
                    case 4:
                        if (!a.i) {
                            b.u(6);
                            break
                        }
                        return G(b, a.i.destroy(), 6);
                    case 6:
                        if (!a.j) {
                            b.u(8);
                            break
                        }
                        return G(b, a.j.destroy(), 8);
                    case 8:
                        return a.l && a.l.close(), G(b, Yy(), 10);
                    case 10:
                        return a.l = null, a.g = null, a.h = null, a.i = null, a.j = null, G(b, a.init(), 0)
                }
            })
        };

        function Yy() {
            var a = new bg, b = window.indexedDB.deleteDatabase("shaka_offline_db");
            b.onblocked = function () {
            };
            b.onsuccess = function () {
                a.resolve()
            };
            b.onerror = function (c) {
                a.reject(new T(2, 9, 9001, b.error));
                c.preventDefault()
            };
            return a
        }

        Oy("idb", function () {
            return gd() || Zc() || !window.indexedDB ? null : new Xy
        });

        function Zy(a, b, c, d) {
            this.g = a;
            this.i = b;
            this.h = c;
            this.l = d;
            this.j = ["offline:", a, "/", b, "/", c, "/", d].join("")
        }

        Zy.prototype.ob = function () {
            return this.i
        };
        Zy.prototype.Ja = function () {
            return this.h
        };
        Zy.prototype.key = function () {
            return this.l
        };
        Zy.prototype.toString = function () {
            return this.j
        };

        function $y(a) {
            a = /^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(a);
            if (null == a) return null;
            var b = a[1];
            if ("manifest" != b && "segment" != b) return null;
            var c = a[2];
            if (!c) return null;
            var d = a[3];
            return d && null != b ? new Zy(b, c, d, Number(a[4])) : null
        };

        function az(a, b) {
            this.h = a;
            this.g = b
        }

        function bz(a, b) {
            var c = new vk(null, 0);
            c.$a(b.duration);
            var d = b.streams.filter(function (l) {
                return "audio" == l.type
            }), e = b.streams.filter(function (l) {
                return "video" == l.type
            });
            d = cz(a, d, e, c);
            e = b.streams.filter(function (l) {
                return l.type == Vd
            }).map(function (l) {
                return dz(a, l, c)
            });
            var f = b.streams.filter(function (l) {
                return "image" == l.type
            }).map(function (l) {
                return dz(a, l, c)
            }), g = b.drmInfo ? [b.drmInfo] : [];
            if (b.drmInfo) for (var h = t(d.values()), k = h.next(); !k.done; k = h.next()) k = k.value, k.audio && k.audio.encrypted && (k.audio.drmInfos =
                g), k.video && k.video.encrypted && (k.video.drmInfos = g);
            return {
                presentationTimeline: c,
                minBufferTime: 2,
                offlineSessionIds: b.sessionIds,
                variants: Array.from(d.values()),
                textStreams: e,
                imageStreams: f,
                sequenceMode: b.sequenceMode || !1,
                ignoreManifestTimestampsInSegmentsMode: !1,
                type: b.type || "UNKNOWN",
                serviceDescription: null,
                nextUrl: null,
                periodCount: 1,
                gapCount: 0,
                isLowLatency: !1
            }
        }

        function cz(a, b, c, d) {
            for (var e = new Set, f = t(b), g = f.next(); !g.done; g = f.next()) {
                var h = t(g.value.variantIds);
                for (g = h.next(); !g.done; g = h.next()) e.add(g.value)
            }
            f = t(c);
            for (g = f.next(); !g.done; g = f.next()) for (h = t(g.value.variantIds), g = h.next(); !g.done; g = h.next()) e.add(g.value);
            f = new Map;
            e = t(e);
            for (g = e.next(); !g.done; g = e.next()) g = g.value, f.set(g, {
                id: g,
                language: "",
                disabledUntilTime: 0,
                primary: !1,
                audio: null,
                video: null,
                bandwidth: 0,
                allowedByApplication: !0,
                allowedByKeySystem: !0,
                decodingInfos: []
            });
            b = t(b);
            for (e = b.next(); !e.done; e =
                b.next()) for (e = e.value, g = dz(a, e, d), h = t(e.variantIds), e = h.next(); !e.done; e = h.next()) e = f.get(e.value), e.language = g.language, e.primary = e.primary || g.primary, e.audio = g;
            c = t(c);
            for (b = c.next(); !b.done; b = c.next()) for (e = b.value, b = dz(a, e, d), g = t(e.variantIds), e = g.next(); !e.done; e = g.next()) e = f.get(e.value), e.primary = e.primary || b.primary, e.video = b;
            return f
        }

        function dz(a, b, c) {
            var d = b.segments.map(function (e) {
                return ez(a, e, b)
            });
            c.Jd(d);
            return {
                id: b.id,
                originalId: b.originalId,
                groupId: b.groupId,
                createSegmentIndex: function () {
                    return Promise.resolve()
                },
                segmentIndex: new Rk(d),
                mimeType: b.mimeType,
                codecs: b.codecs,
                width: b.width || void 0,
                height: b.height || void 0,
                frameRate: b.frameRate,
                pixelAspectRatio: b.pixelAspectRatio,
                hdr: b.hdr,
                colorGamut: b.colorGamut,
                videoLayout: b.videoLayout,
                kind: b.kind,
                encrypted: b.encrypted,
                drmInfos: [],
                keyIds: b.keyIds,
                language: b.language,
                originalLanguage: b.originalLanguage ||
                    null,
                label: b.label,
                type: b.type,
                primary: b.primary,
                trickModeVideo: null,
                emsgSchemeIdUris: null,
                roles: b.roles,
                forced: b.forced,
                channelsCount: b.channelsCount,
                audioSamplingRate: b.audioSamplingRate,
                spatialAudio: b.spatialAudio,
                closedCaptions: b.closedCaptions,
                tilesLayout: b.tilesLayout,
                accessibilityPurpose: null,
                external: b.external,
                fastSwitching: b.fastSwitching,
                fullMimeTypes: new Set([$d(b.mimeType, b.codecs)])
            }
        }

        function ez(a, b, c) {
            var d = new Zy("segment", a.h, a.g, b.dataKey);
            a = new Ci(b.startTime, b.endTime, function () {
                return [d.toString()]
            }, 0, null, null != b.initSegmentKey ? fz(a, b.initSegmentKey) : null, b.timestampOffset, b.appendWindowStart, b.appendWindowEnd, [], b.tilesLayout || "");
            a.mimeType = b.mimeType || c.mimeType || "";
            a.codecs = b.codecs || c.codecs || "";
            return a
        }

        function fz(a, b) {
            var c = new Zy("segment", a.h, a.g, b);
            return new Ai(function () {
                return [c.toString()]
            }, 0, null)
        };

        function gz() {
            this.g = null
        }

        r = gz.prototype;
        r.configure = function () {
        };
        r.start = function (a, b) {
            var c = this, d, e, f, g, h, k, l;
            return O(function (m) {
                switch (m.g) {
                    case 1:
                        d = $y(a);
                        c.g = d;
                        if (null == d || "manifest" != d.g) throw new T(2, 1, 9004, a);
                        e = new Gy;
                        ua(m, 2);
                        return G(m, e.init(), 4);
                    case 4:
                        return G(m, Ky(e, d.ob(), d.Ja()), 5);
                    case 5:
                        return f = m.h, G(m, f.getManifests([d.key()]), 6);
                    case 6:
                        return g = m.h, h = g[0], k = new az(d.ob(), d.Ja()), l = bz(k, h), b.makeTextStreamsForClosedCaptions(l), m.return(l);
                    case 2:
                        return xa(m), G(m, e.destroy(), 7);
                    case 7:
                        ya(m, 0)
                }
            })
        };
        r.stop = function () {
            return Promise.resolve()
        };
        r.update = function () {
        };
        r.onExpirationUpdated = function (a, b) {
            var c = this, d, e, f, g, h, k, l;
            return O(function (m) {
                switch (m.g) {
                    case 1:
                        return d = c.g, e = new Gy, sa(m, 2, 3), G(m, e.init(), 5);
                    case 5:
                        return G(m, Ky(e, d.ob(), d.Ja()), 6);
                    case 6:
                        return f = m.h, G(m, f.getManifests([d.key()]), 7);
                    case 7:
                        g = m.h;
                        h = g[0];
                        k = h.sessionIds.includes(a);
                        l = void 0 == h.expiration || h.expiration > b;
                        if (!k || !l) {
                            m.u(3);
                            break
                        }
                        return G(m, f.updateManifestExpiration(d.key(), b), 3);
                    case 3:
                        return xa(m), G(m, e.destroy(), 10);
                    case 10:
                        ya(m, 0);
                        break;
                    case 2:
                        wa(m), m.u(3)
                }
            })
        };
        r.onInitialVariantChosen = function () {
        };
        r.banLocation = function () {
        };
        r.setMediaElement = function () {
        };
        vi["application/x-offline-manifest"] = function () {
            return new gz
        };

        function hz() {
        }

        function iz(a) {
            var b = $y(a);
            b && "manifest" == b.g ? (a = {
                uri: a,
                originalUri: a,
                data: new ArrayBuffer(0),
                headers: {"content-type": "application/x-offline-manifest"}
            }, a = fg(a)) : a = b && "segment" == b.g ? jz(b.key(), b) : dg(new T(2, 1, 9004, a));
            return a
        }

        function jz(a, b) {
            var c = new Gy;
            return fg(void 0).Aa(function () {
                return c.init()
            }).Aa(function () {
                return Ky(c, b.ob(), b.Ja())
            }).Aa(function (d) {
                return d.getSegments([b.key()])
            }).Aa(function (d) {
                return {uri: b, data: d[0].data, headers: {}}
            }).finally(function () {
                return c.destroy()
            })
        }

        S("shaka.offline.OfflineScheme", hz);
        hz.plugin = iz;
        pg("offline", iz);

        function kz(a, b, c) {
            var d, e, f, g, h, k;
            return O(function (l) {
                switch (l.g) {
                    case 1:
                        d = [];
                        for (var m = [], n = t(c), p = n.next(); !p.done; p = n.next()) {
                            p = p.value;
                            for (var q = !1, u = t(m), w = u.next(); !w.done; w = u.next()) if (w = w.value, lz(w.info, p)) {
                                w.sessionIds.push(p.sessionId);
                                q = !0;
                                break
                            }
                            q || m.push({info: p, sessionIds: [p.sessionId]})
                        }
                        e = t(m);
                        f = e.next();
                    case 2:
                        if (f.done) {
                            l.u(4);
                            break
                        }
                        g = f.value;
                        h = mz(a, b, g);
                        return G(l, h, 5);
                    case 5:
                        k = l.h;
                        d = d.concat(k);
                        f = e.next();
                        l.u(2);
                        break;
                    case 4:
                        return l.return(d)
                }
            })
        }

        function mz(a, b, c) {
            var d, e;
            return O(function (f) {
                switch (f.g) {
                    case 1:
                        return d = new Dh({
                            Nb: b, onError: function () {
                            }, Ae: function () {
                            }, onExpirationUpdated: function () {
                            }, onEvent: function () {
                            }
                        }), sa(f, 2), d.configure(a), G(f, Lh(d, c.info.keySystem, c.info.licenseUri, c.info.serverCertificate, c.info.audioCapabilities, c.info.videoCapabilities), 4);
                    case 4:
                        va(f, 3);
                        break;
                    case 2:
                        return wa(f), G(f, d.destroy(), 5);
                    case 5:
                        return f.return([]);
                    case 3:
                        return e = [], G(f, Promise.all(c.sessionIds.map(function (g) {
                            return O(function (h) {
                                if (1 ==
                                    h.g) return sa(h, 2), G(h, Xh(d, g), 4);
                                if (2 != h.g) return e.push(g), va(h, 0);
                                wa(h);
                                H(h)
                            })
                        })), 6);
                    case 6:
                        return G(f, d.destroy(), 7);
                    case 7:
                        return f.return(e)
                }
            })
        }

        function lz(a, b) {
            function c(d, e) {
                return d.robustness == e.robustness && d.contentType == e.contentType
            }

            return a.keySystem == b.keySystem && a.licenseUri == b.licenseUri && Qb(a.audioCapabilities, b.audioCapabilities, c) && Qb(a.videoCapabilities, b.videoCapabilities, c)
        };

        function nz(a, b, c) {
            var d = b.presentationTimeline.getDuration();
            b = oz(b);
            return {
                offlineUri: null,
                originalManifestUri: a,
                duration: d,
                size: 0,
                expiration: Infinity,
                tracks: b,
                appMetadata: c,
                isIncomplete: !1
            }
        }

        function pz(a, b) {
            var c = bz(new az(a.ob(), a.Ja()), b), d = b.appMetadata || {};
            c = oz(c);
            return {
                offlineUri: a.toString(),
                originalManifestUri: b.originalManifestUri,
                duration: b.duration,
                size: b.size,
                expiration: b.expiration,
                tracks: c,
                appMetadata: d,
                isIncomplete: b.isIncomplete || !1
            }
        }

        function oz(a) {
            var b = [], c = uf(a.variants);
            c = t(c);
            for (var d = c.next(); !d.done; d = c.next()) b.push(lf(d.value));
            a = t(a.textStreams);
            for (c = a.next(); !c.done; c = a.next()) b.push(mf(c.value));
            return b
        };

        function qz() {
            this.g = {}
        }

        function rz(a, b) {
            var c = b.audio, d = b.video;
            c && !d && (a.g[c.id] = c.bandwidth || b.bandwidth);
            !c && d && (a.g[d.id] = d.bandwidth || b.bandwidth);
            if (c && d) {
                var e = c.bandwidth || 393216, f = d.bandwidth || b.bandwidth - e;
                0 >= f && (f = b.bandwidth);
                a.g[c.id] = e;
                a.g[d.id] = f
            }
        }

        function sz(a, b) {
            a.g[b.id] = b.bandwidth || 2048
        }

        function tz(a, b) {
            a = a.g[b];
            null == a && (a = 0);
            return a
        };

        function uz(a) {
            var b = this;
            if (a && a.constructor != X) throw new T(2, 9, 9008);
            this.g = this.h = null;
            a ? (this.h = a.g, this.g = a.zb()) : (this.h = xm(), this.g = new og);
            this.i = [];
            this.j = [];
            var c = !a;
            this.l = new Bg(function () {
                var d, e, f, g, h;
                return O(function (k) {
                    switch (k.g) {
                        case 1:
                            return G(k, Promise.all(b.j.map(function (l) {
                                return qy(l)
                            })), 2);
                        case 2:
                            d = function () {
                            };
                            e = [];
                            f = t(b.i);
                            for (g = f.next(); !g.done; g = f.next()) h = g.value, e.push(h.then(d, d));
                            return G(k, Promise.all(e), 3);
                        case 3:
                            if (!c) {
                                k.u(4);
                                break
                            }
                            return G(k, b.g.destroy(), 4);
                        case 4:
                            b.h = null, b.g = null, H(k)
                    }
                })
            })
        }

        function vz() {
            if (Uc()) a:{
                var a = t(Hy.values());
                for (var b = a.next(); !b.done; b = a.next()) if (b = b.value, b = b()) {
                    b.destroy();
                    a = !0;
                    break a
                }
                a = !1
            } else a = !1;
            return a
        }

        r = uz.prototype;
        r.destroy = function () {
            return this.l.destroy()
        };
        r.configure = function (a, b) {
            2 == arguments.length && "string" == typeof a && (a = om(a, b));
            return Bm(this.h, a)
        };
        r.getConfiguration = function () {
            var a = xm();
            Bm(a, this.h, xm());
            return a
        };
        r.zb = function () {
            return this.g
        };
        r.store = function (a, b, c) {
            var d = this, e = this.getConfiguration(), f = new py(this.g);
            this.j.push(f);
            b = wz(this, a, b || {}, function () {
                var g;
                return O(function (h) {
                    if (1 == h.g) return c ? h.u(2) : G(h, kn(a, d.g, e.manifest.retryParameters), 3);
                    2 != h.g && (c = h.h);
                    g = ui(a, c || null);
                    return h.return(g())
                })
            }, e, f);
            b = new cg(b, function () {
                return qy(f)
            });
            b.finally(function () {
                Ob(d.j, f)
            });
            return xz(this, b)
        };

        function wz(a, b, c, d, e, f) {
            var g, h, k, l, m, n, p, q, u, w, v, A, y, D;
            return O(function (z) {
                switch (z.g) {
                    case 1:
                        return yz(), h = g = null, k = new Gy, n = m = l = null, sa(z, 2, 3), G(z, d(), 5);
                    case 5:
                        return g = z.h, G(z, zz(a, b, g, e), 6);
                    case 6:
                        p = z.h;
                        Az(a);
                        q = !p.presentationTimeline.V() && !p.presentationTimeline.qc();
                        if (!q) throw new T(2, 9, 9005, b);
                        return G(z, a.Dc(p, function (B) {
                            n = n || B
                        }, e), 7);
                    case 7:
                        h = z.h;
                        Az(a);
                        if (n) throw n;
                        return G(z, Bz(p, h, e), 8);
                    case 8:
                        return G(z, k.init(), 9);
                    case 9:
                        return Az(a), G(z, Iy(k), 10);
                    case 10:
                        return l = z.h, Az(a), u = Cz(h,
                            p, b, c, e, f), w = u.Bi, v = u.lg, G(z, l.Ja.addManifests([w]), 11);
                    case 11:
                        A = z.h;
                        Az(a);
                        m = A[0];
                        Az(a);
                        if (n) throw n;
                        return G(z, Dz(a, v, m, w, f, e, l.Ja, p, h), 12);
                    case 12:
                        return Az(a), Ez(p, w, h, e), G(z, l.Ja.updateManifest(m, w), 13);
                    case 13:
                        return Az(a), y = new Zy("manifest", l.path.ob, l.path.Ja, m), z.return(pz(y, w));
                    case 3:
                        return xa(z), G(z, k.destroy(), 14);
                    case 14:
                        if (!g) {
                            z.u(15);
                            break
                        }
                        return G(z, g.stop(), 15);
                    case 15:
                        if (!h) {
                            z.u(17);
                            break
                        }
                        return G(z, h.destroy(), 17);
                    case 17:
                        ya(z, 0);
                        break;
                    case 2:
                        D = wa(z);
                        if (null == m) {
                            z.u(19);
                            break
                        }
                        return G(z,
                            Fz(m), 19);
                    case 19:
                        throw n || D;
                }
            })
        }

        function Dz(a, b, c, d, e, f, g, h, k) {
            var l, m, n, p, q, u, w, v, A, y;
            return O(function (D) {
                switch (D.g) {
                    case 1:
                        l = {};
                        m = 0;
                        n = function (z, B) {
                            var C, F, I, L, J, E, K;
                            return O(function (N) {
                                if (1 == N.g) {
                                    C = {};
                                    F = t(z);
                                    for (I = F.next(); !I.done; C = {ic: C.ic}, I = F.next()) C.ic = I.value, L = my(C.ic, f), J = C.ic.i, E = C.ic.h, K = function (M) {
                                        return function (P) {
                                            var R, Q, W;
                                            return O(function (aa) {
                                                if (1 == aa.g) return G(aa, g.addSegments([{data: P}]), 2);
                                                R = aa.h;
                                                Az(a);
                                                Q = M.ic.g;
                                                W = ly(Q);
                                                l[W] = R[0];
                                                m += P.byteLength;
                                                H(aa)
                                            })
                                        }
                                    }(C), sy(e, C.ic.groupId, L, J, E, K);
                                    return G(N, uy(e),
                                        2)
                                }
                                if (!B) return N.u(0);
                                Az(a);
                                Ez(h, d, k, f);
                                return G(N, g.updateManifest(c, d), 0)
                            })
                        };
                        p = !1;
                        sa(D, 2);
                        if (!Gz(h) || !p || Hz(h)) {
                            D.u(4);
                            break
                        }
                        return G(D, n(b.filter(function (z) {
                            return z.h
                        }), !0), 5);
                    case 5:
                        return Az(a), b = b.filter(function (z) {
                            return !z.h
                        }), q = l, u = m, l = {}, m = 0, G(D, Iz(g, c, d, q, u, function () {
                            return Az(a)
                        }), 6);
                    case 6:
                        Az(a);
                    case 4:
                        if (p) {
                            D.u(7);
                            break
                        }
                        return G(D, n(b, !1), 8);
                    case 8:
                        return Az(a), w = l, v = m, l = {}, m = 0, G(D, Iz(g, c, d, w, v, function () {
                            return Az(a)
                        }), 9);
                    case 9:
                        Az(a);
                    case 7:
                        va(D, 0);
                        break;
                    case 2:
                        return A = wa(D),
                            y = Object.values(l), G(D, g.removeSegments(y, function () {
                        }), 10);
                    case 10:
                        throw A;
                }
            })
        }

        function Fz(a) {
            var b, c, d, e;
            return O(function (f) {
                switch (f.g) {
                    case 1:
                        return b = new Gy, G(f, b.init(), 2);
                    case 2:
                        return G(f, Iy(b), 3);
                    case 3:
                        return c = f.h, d = new Zy("manifest", c.path.ob, c.path.Ja, a), G(f, b.destroy(), 4);
                    case 4:
                        return e = new uz, G(f, e.remove(d.toString()), 0)
                }
            })
        }

        function Iz(a, b, c, d, e, f) {
            var g, h, k, l, m, n, p, q, u, w, v;
            return O(function (A) {
                switch (A.g) {
                    case 1:
                        g = !1;
                        sa(A, 2);
                        h = !0;
                        k = t(c.streams);
                        for (l = k.next(); !l.done; l = k.next()) for (m = l.value, n = t(m.segments), p = n.next(); !p.done; p = n.next()) q = p.value, u = q.pendingSegmentRefId ? d[q.pendingSegmentRefId] : null, null != u && (q.dataKey = u, q.pendingSegmentRefId = void 0), u = q.pendingInitSegmentRefId ? d[q.pendingInitSegmentRefId] : null, null != u && (q.initSegmentKey = u, q.pendingInitSegmentRefId = void 0), q.pendingSegmentRefId && (h = !1), q.pendingInitSegmentRefId &&
                        (h = !1);
                        c.size += e;
                        h && (c.isIncomplete = !1);
                        return G(A, a.updateManifest(b, c), 4);
                    case 4:
                        g = !0;
                        f();
                        va(A, 0);
                        break;
                    case 2:
                        return w = wa(A), G(A, Fz(b), 5);
                    case 5:
                        if (g) {
                            A.u(6);
                            break
                        }
                        v = Object.values(d);
                        return G(A, a.removeSegments(v, function () {
                        }), 6);
                    case 6:
                        throw w;
                }
            })
        }

        function Bz(a, b, c) {
            var d, e, f, g, h, k, l, m, n, p, q, u, w, v, A, y, D, z, B, C, F, I, L, J, E, K, N, M;
            return O(function (P) {
                switch (P.g) {
                    case 1:
                        return d = {
                            width: Infinity,
                            height: Infinity
                        }, Re(a, c.restrictions, d), G(P, Ve(b, a, c.offline.usePersistentLicense, c.drm.preferredKeySystems), 2);
                    case 2:
                        e = [];
                        f = c.preferredDecodingAttributes;
                        g = c.preferredVideoCodecs;
                        h = c.preferredAudioCodecs;
                        Pe(a, g, h, f);
                        k = t(a.variants);
                        for (l = k.next(); !l.done; l = k.next()) m = l.value, e.push(lf(m));
                        n = t(a.textStreams);
                        for (p = n.next(); !p.done; p = n.next()) q = p.value, e.push(mf(q));
                        u = t(a.imageStreams);
                        for (w = u.next(); !w.done; w = u.next()) v = w.value, e.push(nf(v));
                        return G(P, c.offline.trackSelectionCallback(e), 3);
                    case 3:
                        A = P.h;
                        y = a.presentationTimeline.getDuration();
                        D = 0;
                        z = t(A);
                        for (B = z.next(); !B.done; B = z.next()) C = B.value, F = C.bandwidth * y / 8, D += F;
                        sa(P, 4);
                        return G(P, c.offline.downloadSizeCallback(D), 6);
                    case 6:
                        I = P.h;
                        if (!I) throw new T(2, 9, 9014);
                        va(P, 5);
                        break;
                    case 4:
                        L = wa(P);
                        if (L instanceof T) throw L;
                        throw new T(2, 9, 9015);
                    case 5:
                        J = new Set;
                        E = new Set;
                        K = new Set;
                        N = t(A);
                        for (B = N.next(); !B.done; B =
                            N.next()) M = B.value, "variant" == M.type && J.add(M.id), "text" == M.type && E.add(M.id), "image" == M.type && K.add(M.id);
                        a.variants = a.variants.filter(function (R) {
                            return J.has(R.id)
                        });
                        a.textStreams = a.textStreams.filter(function (R) {
                            return E.has(R.id)
                        });
                        a.imageStreams = a.imageStreams.filter(function (R) {
                            return K.has(R.id)
                        });
                        Jz(a);
                        H(P)
                }
            })
        }

        function Cz(a, b, c, d, e, f) {
            var g = nz(c, b, d), h = e.offline.progressCallback;
            ry(f, function (q, u) {
                g.size = u;
                h(g, q)
            }, function (q, u) {
                k && e.offline.usePersistentLicense && l == u && Th(a, "cenc", q)
            });
            var k = Gz(b) && !Hz(b), l = null;
            k && (l = Kz.get(a.g.keySystem));
            for (var m = new qz, n = t(b.textStreams), p = n.next(); !p.done; p = n.next()) m.g[p.value.id] = 52;
            n = t(b.imageStreams);
            for (p = n.next(); !p.done; p = n.next()) sz(m, p.value);
            p = t(b.variants);
            for (n = p.next(); !n.done; n = p.next()) rz(m, n.value);
            m = Lz(f, m, b, e);
            f = m.streams;
            m = m.lg;
            p = a.g;
            n = e.offline.usePersistentLicense;
            p && n && (p.initData = []);
            return {
                Bi: {
                    creationTime: Date.now(),
                    originalManifestUri: c,
                    duration: b.presentationTimeline.getDuration(),
                    size: 0,
                    expiration: a.td(),
                    streams: f,
                    sessionIds: n ? bi(a) : [],
                    drmInfo: p,
                    appMetadata: d,
                    isIncomplete: !0,
                    sequenceMode: b.sequenceMode,
                    type: b.type
                }, lg: m
            }
        }

        function Gz(a) {
            return a.variants.some(function (b) {
                var c = b.audio && b.audio.encrypted;
                return b.video && b.video.encrypted || c
            })
        }

        function Hz(a) {
            return a.variants.some(function (b) {
                return (b.video ? b.video.drmInfos : []).concat(b.audio ? b.audio.drmInfos : []).some(function (c) {
                    return c.initData && c.initData.length
                })
            })
        }

        function Ez(a, b, c, d) {
            b.expiration = c.td();
            c = bi(c);
            b.sessionIds = d.offline.usePersistentLicense ? c : [];
            if (Gz(a) && d.offline.usePersistentLicense && !c.length) throw new T(2, 9, 9007);
        }

        r.remove = function (a) {
            return Mz(this, Nz(this, a))
        };

        function Nz(a, b) {
            var c, d, e, f, g, h;
            return O(function (k) {
                switch (k.g) {
                    case 1:
                        yz();
                        c = $y(b);
                        if (null == c || "manifest" != c.g) throw new T(2, 9, 9004, b);
                        d = c;
                        e = new Gy;
                        ua(k, 2);
                        return G(k, e.init(), 4);
                    case 4:
                        return G(k, Ky(e, d.ob(), d.Ja()), 5);
                    case 5:
                        return f = k.h, G(k, f.getManifests([d.key()]), 6);
                    case 6:
                        return g = k.h, h = g[0], G(k, Promise.all([Oz(a, h, e), Pz(f, d, h)]), 2);
                    case 2:
                        return xa(k), G(k, e.destroy(), 8);
                    case 8:
                        ya(k, 0)
                }
            })
        }

        function Qz(a, b) {
            for (var c = [], d = t(a.streams), e = d.next(); !e.done; e = d.next()) e = e.value, b && "video" == e.type ? c.push({
                contentType: $d(e.mimeType, e.codecs),
                robustness: a.drmInfo.videoRobustness
            }) : b || "audio" != e.type || c.push({
                contentType: $d(e.mimeType, e.codecs),
                robustness: a.drmInfo.audioRobustness
            });
            return c
        }

        function Oz(a, b, c) {
            return O(function (d) {
                return G(d, Rz(a.g, a.h.drm, c, b), 0)
            })
        }

        function Pz(a, b, c) {
            function d() {
            }

            var e = Sz(c);
            pz(b, c);
            return Promise.all([a.removeSegments(e, d), a.removeManifests([b.key()], d)])
        }

        r.Si = function () {
            return Mz(this, Tz(this))
        };

        function Tz(a) {
            var b, c, d, e, f, g, h, k, l, m;
            return O(function (n) {
                switch (n.g) {
                    case 1:
                        return yz(), b = a.g, c = a.h.drm, d = new Gy, e = !1, ua(n, 2), G(n, d.init(), 4);
                    case 4:
                        f = [], Ly(d, function (p) {
                            return f.push(p)
                        }), g = t(f), h = g.next();
                    case 5:
                        if (h.done) {
                            n.u(2);
                            break
                        }
                        k = h.value;
                        return G(n, k.getAll(), 8);
                    case 8:
                        return l = n.h, G(n, kz(c, b, l), 9);
                    case 9:
                        return m = n.h, G(n, k.remove(m), 10);
                    case 10:
                        m.length != l.length && (e = !0);
                        h = g.next();
                        n.u(5);
                        break;
                    case 2:
                        return xa(n), G(n, d.destroy(), 11);
                    case 11:
                        ya(n, 3);
                        break;
                    case 3:
                        return n.return(!e)
                }
            })
        }

        r.list = function () {
            return Mz(this, Uz())
        };

        function Uz() {
            var a, b, c;
            return O(function (d) {
                switch (d.g) {
                    case 1:
                        return yz(), a = [], b = new Gy, ua(d, 2), G(d, b.init(), 4);
                    case 4:
                        return c = Promise.resolve(), Jy(b, function (e, f) {
                            c = c.then(function () {
                                var g;
                                return O(function (h) {
                                    if (1 == h.g) return G(h, f.getAllManifests(), 2);
                                    g = h.h;
                                    g.forEach(function (k, l) {
                                        k = pz(new Zy("manifest", e.ob, e.Ja, l), k);
                                        a.push(k)
                                    });
                                    H(h)
                                })
                            })
                        }), G(d, c, 2);
                    case 2:
                        return xa(d), G(d, b.destroy(), 6);
                    case 6:
                        ya(d, 3);
                        break;
                    case 3:
                        return d.return(a)
                }
            })
        }

        function zz(a, b, c, d) {
            var e, f, g, h, k;
            return O(function (l) {
                if (1 == l.g) return e = null, f = a.g, g = {
                    networkingEngine: f, filter: function () {
                        return Promise.resolve()
                    }, makeTextStreamsForClosedCaptions: function () {
                    }, onTimelineRegionAdded: function () {
                    }, onEvent: function () {
                    }, onError: function (m) {
                        e = m
                    }, isLowLatencyMode: function () {
                        return !1
                    }, isAutoLowLatencyMode: function () {
                        return !1
                    }, enableLowLatencyMode: function () {
                    }, updateDuration: function () {
                    }, newDrmInfo: function () {
                    }, onManifestUpdated: function () {
                    }, getBandwidthEstimate: function () {
                        return d.abr.defaultBandwidthEstimate
                    },
                    onMetadata: function () {
                    }, disableStream: function () {
                    }
                }, c.configure(d.manifest), Az(a), G(l, c.start(b, g), 2);
                if (3 != l.g) return h = l.h, Az(a), k = Vz(h), G(l, Promise.all(Dg(k, function (m) {
                    return m.createSegmentIndex()
                })), 3);
                Az(a);
                if (e) throw e;
                return l.return(h)
            })
        }

        r.Dc = function (a, b, c) {
            var d = this, e;
            return O(function (f) {
                return 1 == f.g ? (e = new Dh({
                    Nb: d.g, onError: b, Ae: function () {
                    }, onExpirationUpdated: function () {
                    }, onEvent: function () {
                    }
                }), e.configure(c.drm), G(f, Ih(e, a.variants, c.offline.usePersistentLicense), 2)) : 3 != f.g ? G(f, Vh(e), 3) : f.return(e)
            })
        };

        function Lz(a, b, c, d) {
            var e = new Map, f = Vz(c), g = new Map;
            f = t(f);
            for (var h = f.next(); !h.done; h = f.next()) {
                h = h.value;
                var k = Wz(a, b, c, h, d, e);
                g.set(h.id, k)
            }
            a = t(c.variants);
            for (b = a.next(); !b.done; b = a.next()) b = b.value, b.audio && g.get(b.audio.id).variantIds.push(b.id), b.video && g.get(b.video.id).variantIds.push(b.id);
            return {streams: Array.from(g.values()), lg: Array.from(e.values())}
        }

        function Wz(a, b, c, d, e, f) {
            var g = {
                id: d.id,
                originalId: d.originalId,
                groupId: d.groupId,
                primary: d.primary,
                type: d.type,
                mimeType: d.mimeType,
                codecs: d.codecs,
                frameRate: d.frameRate,
                pixelAspectRatio: d.pixelAspectRatio,
                hdr: d.hdr,
                colorGamut: d.colorGamut,
                videoLayout: d.videoLayout,
                kind: d.kind,
                language: d.language,
                originalLanguage: d.originalLanguage,
                label: d.label,
                width: d.width || null,
                height: d.height || null,
                encrypted: d.encrypted,
                keyIds: d.keyIds,
                segments: [],
                variantIds: [],
                roles: d.roles,
                forced: d.forced,
                channelsCount: d.channelsCount,
                audioSamplingRate: d.audioSamplingRate,
                spatialAudio: d.spatialAudio,
                closedCaptions: d.closedCaptions,
                tilesLayout: d.tilesLayout,
                external: d.external,
                fastSwitching: d.fastSwitching
            }, h = e.offline.numberOfParallelDownloads, k = 0;
            Xz(d, c.presentationTimeline.nb(), function (l) {
                var m = ly(l), n = void 0;
                if (!f.has(m)) {
                    var p = l.endTime - l.startTime;
                    p = tz(b, d.id) * p;
                    p = oy(a.g, p);
                    f.set(m, new ky(l, p, k, !1))
                }
                l.$ && (n = ly(l.$), f.has(n) || (p = .5 * tz(b, d.id), p = oy(a.g, p), f.set(n, new ky(l.$, p, k, !0))));
                g.segments.push({
                    pendingInitSegmentRefId: n,
                    initSegmentKey: n ? 0 : null,
                    startTime: l.startTime,
                    endTime: l.endTime,
                    appendWindowStart: l.appendWindowStart,
                    appendWindowEnd: l.appendWindowEnd,
                    timestampOffset: l.timestampOffset,
                    tilesLayout: l.tilesLayout,
                    pendingSegmentRefId: m,
                    dataKey: 0,
                    mimeType: l.mimeType,
                    codecs: l.codecs
                });
                k = (k + 1) % h
            });
            return g
        }

        function Xz(a, b, c) {
            b = a.segmentIndex.find(b);
            if (null != b) for (var d = a.segmentIndex.get(b); d;) c(d), d = a.segmentIndex.get(++b)
        }

        function Az(a) {
            if (a.l.g) throw new T(2, 9, 7001);
        }

        function yz() {
            if (!vz()) throw new T(2, 9, 9E3);
        }

        function Mz(a, b) {
            return O(function (c) {
                if (1 == c.g) return a.i.push(b), ua(c, 2), G(c, b, 4);
                if (2 != c.g) return c.return(c.h);
                xa(c);
                Ob(a.i, b);
                return ya(c, 0)
            })
        }

        function xz(a, b) {
            var c = b.promise;
            a.i.push(c);
            return b.finally(function () {
                Ob(a.i, c)
            })
        }

        function Sz(a) {
            var b = new Set;
            a = t(a.streams);
            for (var c = a.next(); !c.done; c = a.next()) {
                c = t(c.value.segments);
                for (var d = c.next(); !d.done; d = c.next()) d = d.value, null != d.initSegmentKey && b.add(d.initSegmentKey), b.add(d.dataKey)
            }
            return Array.from(b)
        }

        function Rz(a, b, c, d) {
            var e, f, g;
            return O(function (h) {
                if (1 == h.g) {
                    if (!d.drmInfo) return h.return();
                    e = My(c);
                    f = d.sessionIds.map(function (k) {
                        return {
                            sessionId: k,
                            keySystem: d.drmInfo.keySystem,
                            licenseUri: d.drmInfo.licenseServerUri,
                            serverCertificate: d.drmInfo.serverCertificate,
                            audioCapabilities: Qz(d, !1),
                            videoCapabilities: Qz(d, !0)
                        }
                    });
                    return G(h, kz(b, a, f), 2)
                }
                return 3 != h.g ? (g = h.h, G(h, e.remove(g), 3)) : G(h, e.add(f.filter(function (k) {
                    return !g.includes(k.sessionId)
                })), 0)
            })
        }

        function Vz(a) {
            for (var b = new Set, c = t(a.textStreams), d = c.next(); !d.done; d = c.next()) b.add(d.value);
            c = t(a.imageStreams);
            for (d = c.next(); !d.done; d = c.next()) b.add(d.value);
            a = t(a.variants);
            for (c = a.next(); !c.done; c = a.next()) c = c.value, c.audio && b.add(c.audio), c.video && b.add(c.video);
            return b
        }

        function Jz(a) {
            a.variants.map(function (f) {
                return f.video
            });
            var b = new Set(a.variants.map(function (f) {
                return f.audio
            }));
            a = a.textStreams;
            for (var c = t(b), d = c.next(); !d.done; d = c.next()) {
                d = t(b);
                for (var e = d.next(); !e.done; e = d.next()) ;
            }
            b = t(a);
            for (c = b.next(); !c.done; c = b.next()) for (c = t(a), d = c.next(); !d.done; d = c.next()) ;
        }

        S("shaka.offline.Storage", uz);
        uz.deleteAll = function () {
            var a;
            return O(function (b) {
                return 1 == b.g ? (a = new Gy, ua(b, 2), G(b, Ny(a), 2)) : 5 != b.g ? (xa(b), G(b, a.destroy(), 5)) : ya(b, 0)
            })
        };
        uz.prototype.list = uz.prototype.list;
        uz.prototype.removeEmeSessions = uz.prototype.Si;
        uz.prototype.remove = uz.prototype.remove;
        uz.prototype.store = uz.prototype.store;
        uz.prototype.getNetworkingEngine = uz.prototype.zb;
        uz.prototype.getConfiguration = uz.prototype.getConfiguration;
        uz.prototype.configure = uz.prototype.configure;
        uz.prototype.destroy = uz.prototype.destroy;
        uz.support = vz;
        var Kz = (new Map).set("org.w3.clearkey", "1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha", "edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware", "9a04f07998404286ab92e65be0885f95");
        Ap.offline = vz;

        function Yz() {
        }

        function Zz(a, b) {
            a = {priority: b || 0, callback: a};
            for (b = 0; b < $z.length; b++) if ($z[b].priority < a.priority) {
                $z.splice(b, 0, a);
                return
            }
            $z.push(a)
        }

        S("shaka.polyfill", Yz);
        Yz.register = Zz;
        Yz.installAll = function () {
            for (var a = t($z), b = a.next(); !b.done; b = a.next()) {
                b = b.value;
                try {
                    b.callback()
                } catch (c) {
                    $a("Error installing polyfill!", c)
                }
            }
        };
        var $z = [];

        function aA() {
            this.g = new bA
        }

        function cA() {
            window.AbortController || (window.AbortController = aA, window.AbortSignal = bA)
        }

        aA.prototype.abort = function (a) {
            var b = this.g;
            if (!b.h) {
                b.h = !0;
                b.g = a;
                void 0 === b.g && (b.g = new DOMException("signal is aborted without reason", "AbortError"));
                a = new U("abort");
                if (b.onabort) b.onabort(a);
                b.dispatchEvent(a)
            }
        };
        ea.Object.defineProperties(aA.prototype, {
            signal: {
                configurable: !0, enumerable: !0, get: function () {
                    return this.g
                }
            }
        });
        Yz.AbortController = aA;
        aA.install = cA;

        function bA() {
            lg.call(this);
            this.h = !1;
            this.g = void 0;
            this.onabort = null
        }

        oa(bA, lg);
        ea.Object.defineProperties(bA.prototype, {
            aborted: {
                configurable: !0, enumerable: !0, get: function () {
                    return this.h
                }
            }, reason: {
                configurable: !0, enumerable: !0, get: function () {
                    return this.g
                }
            }
        });
        Zz(cA);

        function dA() {
        }

        function eA() {
            if (!Object.getOwnPropertyDescriptor(Element.prototype, "ariaHidden")) for (var a = t(["ariaHidden", "ariaLabel", "ariaPressed", "ariaSelected"]), b = a.next(); !b.done; b = a.next()) fA(b.value)
        }

        function fA(a) {
            var b = "aria-" + a.toLowerCase().replace(/^aria/, "");
            Object.defineProperty(Element.prototype, a, {
                get: function () {
                    return this.getAttribute(b)
                }, set: function (c) {
                    null == c || void 0 == c ? this.removeAttribute(b) : this.setAttribute(b, c)
                }
            })
        }

        Yz.Aria = dA;
        dA.install = eA;
        Zz(eA);

        function gA() {
        }

        function hA() {
            iA()
        }

        Yz.EncryptionScheme = gA;
        gA.install = hA;
        Zz(hA, -2);

        function jA() {
        }

        function kA() {
            if (window.Document) {
                var a = Element.prototype;
                a.requestFullscreen = a.requestFullscreen || a.mozRequestFullScreen || a.msRequestFullscreen || a.webkitRequestFullscreen;
                a = Document.prototype;
                a.exitFullscreen = a.exitFullscreen || a.mozCancelFullScreen || a.msExitFullscreen || a.webkitCancelFullScreen;
                "fullscreenElement" in document || (Object.defineProperty(document, "fullscreenElement", {
                    get: function () {
                        return document.mozFullScreenElement || document.msFullscreenElement || document.webkitCurrentFullScreenElement || document.webkitFullscreenElement
                    }
                }),
                    Object.defineProperty(document, "fullscreenEnabled", {
                        get: function () {
                            return document.mozFullScreenEnabled || document.msFullscreenEnabled || document.webkitFullscreenEnabled
                        }
                    }));
                document.addEventListener("webkitfullscreenchange", lA);
                document.addEventListener("webkitfullscreenerror", lA);
                document.addEventListener("mozfullscreenchange", lA);
                document.addEventListener("mozfullscreenerror", lA);
                document.addEventListener("MSFullscreenChange", lA);
                document.addEventListener("MSFullscreenError", lA)
            }
        }

        function lA(a) {
            var b = a.type.replace(/^(webkit|moz|MS)/, "").toLowerCase(), c = document.createEvent("Event");
            c.initEvent(b, a.bubbles, a.cancelable);
            a.target.dispatchEvent(c)
        }

        Yz.Fullscreen = jA;
        jA.install = kA;
        Zz(kA);

        function mA() {
        }

        function nA() {
            var a = !0;
            !gd() || gd() && od() || gd() && $c("Fuchsia") || (a = !1);
            if (hd() || kd() || jd() || dd() || ad() || $c("PC=EOS") || ld()) a = !1;
            a && navigator.mediaCapabilities || (navigator.mediaCapabilities || (navigator.mediaCapabilities = {}), oA = navigator.mediaCapabilities, navigator.mediaCapabilities.decodingInfo = pA)
        }

        function pA(a) {
            var b, c, d, e, f, g, h, k, l, m, n;
            return O(function (p) {
                switch (p.g) {
                    case 1:
                        b = {supported: !1, powerEfficient: !0, smooth: !0, keySystemAccess: null, configuration: a};
                        c = a.video;
                        d = a.audio;
                        if ("media-source" != a.type) {
                            if ("file" == a.type) {
                                if (c && (e = c.contentType, f = Vc(e), !f) || d && (g = d.contentType, h = Vc(g), !h)) return p.return(b)
                            } else return p.return(b);
                            p.u(2);
                            break
                        }
                        if (!Uc()) return p.return(b);
                        if (!c) {
                            p.u(3);
                            break
                        }
                        return G(p, qA(c), 4);
                    case 4:
                        if (k = p.h, !k) return p.return(b);
                    case 3:
                        if (d) {
                            var q = d.contentType;
                            gd() && d.spatialRendering &&
                            (q += "; spatialRendering=true");
                            l = nb(q);
                            if (!l) return p.return(b)
                        }
                    case 2:
                        if (!a.keySystemConfiguration) return b.supported = !0, p.return(b);
                        m = a.keySystemConfiguration;
                        return G(p, rA(c, d, m), 6);
                    case 6:
                        if (n = p.h) b.supported = !0, b.keySystemAccess = n;
                    case 5:
                        return p.return(b)
                }
            })
        }

        function qA(a) {
            var b, c;
            return O(function (d) {
                return 1 == d.g ? gd() ? G(d, sA(a), 3) : ad() ? (b = a.contentType, a.width && a.height && (b += "; width=" + a.width, b += "; height=" + a.height), a.framerate && (b += "; framerate=" + a.framerate), a.bitrate && (b += "; bitrate=" + a.bitrate), d.return(nb(b))) : d.u(2) : 2 != d.g ? (c = d.h, d.return(c)) : d.return(nb(a.contentType))
            })
        }

        function rA(a, b, c) {
            var d, e, f, g, h, k, l, m, n;
            return O(function (p) {
                switch (p.g) {
                    case 1:
                        d = [];
                        e = [];
                        c.audio && (f = {
                            robustness: c.audio.robustness || "",
                            contentType: b.contentType
                        }, ad() && b.contentType.includes('codecs="ac-3"') && (f.contentType = 'audio/mp4; codecs="ec-3"'), c.audio.encryptionScheme && (f.encryptionScheme = c.audio.encryptionScheme), d.push(f));
                        c.video && (g = {
                            robustness: c.video.robustness || "",
                            contentType: a.contentType
                        }, c.video.encryptionScheme && (g.encryptionScheme = c.video.encryptionScheme), e.push(g));
                        h = {
                            initDataTypes: [c.initDataType],
                            distinctiveIdentifier: c.distinctiveIdentifier,
                            persistentState: c.persistentState,
                            sessionTypes: c.sessionTypes
                        };
                        d.length && (h.audioCapabilities = d);
                        e.length && (h.videoCapabilities = e);
                        k = a ? a.contentType : "";
                        l = b ? b.contentType : "";
                        m = c.keySystem;
                        n = null;
                        sa(p, 2);
                        if (Rc.has(k + "#" + l + "#" + m)) {
                            n = Rc.get(k + "#" + l + "#" + m) || null;
                            p.u(4);
                            break
                        }
                        return G(p, navigator.requestMediaKeySystemAccess(c.keySystem, [h]), 5);
                    case 5:
                        n = p.h, Rc.set(k + "#" + l + "#" + m, n);
                    case 4:
                        va(p, 3);
                        break;
                    case 2:
                        wa(p);
                    case 3:
                        return p.return(n)
                }
            })
        }

        function sA(a) {
            var b, c;
            return O(function (d) {
                if (1 == d.g) {
                    if (!(window.cast && cast.__platform__ && cast.__platform__.canDisplayType)) return d.return(nb(a.contentType));
                    b = a.contentType;
                    a.width && a.height && (b += "; width=" + a.width + "; height=" + a.height);
                    a.framerate && (b += "; framerate=" + a.framerate);
                    "pq" === a.transferFunction && (b += "; eotf=smpte2084");
                    c = !1;
                    return b in tA ? (c = tA[b], d.u(2)) : G(d, cast.__platform__.canDisplayType(b), 3)
                }
                2 != d.g && (c = d.h, tA[b] = c);
                return d.return(c)
            })
        }

        Yz.MediaCapabilities = mA;
        mA.install = nA;
        var oA = null;
        mA.originalMcap = oA;
        var tA = {};
        mA.memoizedCanDisplayTypeRequests_ = tA;
        Zz(nA, -1);

        function uA() {
        }

        function vA() {
            var a = md();
            if (window.MediaSource || window.ManagedMediaSource) a && window.MediaSource ? 10 >= a ? window.MediaSource = null : 12 >= a ? (wA(), xA()) : 15 >= a && wA() : $c("DT_STB_BCM") ? (wA(), xA()) : (cd() || bd() || $c("Tizen 4")) && yA();
            (window.MediaSource || window.ManagedMediaSource) && zA();
            window.MediaSource && MediaSource.isTypeSupported('video/webm; codecs="vp9"') && !MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"') && AA()
        }

        function wA() {
            var a = MediaSource.prototype.addSourceBuffer;
            MediaSource.prototype.addSourceBuffer = function () {
                var b = a.apply(this, Fa.apply(0, arguments));
                b.abort = function () {
                };
                return b
            }
        }

        function xA() {
            var a = SourceBuffer.prototype.remove;
            SourceBuffer.prototype.remove = function (b, c) {
                return a.call(this, b, c - .001)
            }
        }

        function zA() {
            if (window.MediaSource) {
                var a = MediaSource.isTypeSupported.bind(MediaSource);
                MediaSource.isTypeSupported = function (c) {
                    return "mp2t" != fe(c) && a(c)
                }
            }
            if (window.ManagedMediaSource) {
                var b = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
                window.ManagedMediaSource.isTypeSupported = function (c) {
                    return "mp2t" != fe(c) && b(c)
                }
            }
        }

        function yA() {
            var a = MediaSource.isTypeSupported.bind(MediaSource);
            MediaSource.isTypeSupported = function (c) {
                return "opus" != ie(c) && a(c)
            };
            if (window.ManagedMediaSource) {
                var b = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
                window.ManagedMediaSource.isTypeSupported = function (c) {
                    return "opus" != ie(c) && b(c)
                }
            }
        }

        function AA() {
            var a = MediaSource.isTypeSupported;
            dd() || (MediaSource.isTypeSupported = function (b) {
                var c = b.split(/ *; */), d = c.findIndex(function (g) {
                    return g.startsWith("codecs=")
                });
                if (0 > d) return a(b);
                var e = c[d].replace("codecs=", "").replace(/"/g, "").split(/\s*,\s*/), f = e.findIndex(function (g) {
                    return g.startsWith("vp09")
                });
                0 <= f && (e[f] = "vp9", c[d] = 'codecs="' + e.join(",") + '"', b = c.join("; "));
                return a(b)
            })
        }

        Yz.MediaSource = uA;
        uA.install = vA;
        Zz(vA);

        function BA() {
        }

        function CA() {
            screen.orientation && screen.orientation.unlock || (void 0 != screen.orientation ? DA() : void 0 != window.orientation && EA())
        }

        function DA() {
            void 0 === screen.orientation.lock && (screen.orientation.lock = function () {
                return Promise.resolve()
            });
            void 0 === screen.orientation.unlock && (screen.orientation.unlock = function () {
            })
        }

        function EA() {
            function a() {
                switch (window.orientation) {
                    case -90:
                        b.type = "landscape-secondary";
                        b.angle = 270;
                        break;
                    case 0:
                        b.type = "portrait-primary";
                        b.angle = 0;
                        break;
                    case 90:
                        b.type = "landscape-primary";
                        b.angle = 90;
                        break;
                    case 180:
                        b.type = "portrait-secondary", b.angle = 180
                }
            }

            var b = new FA;
            screen.orientation = b;
            a();
            window.addEventListener("orientationchange", function () {
                a();
                var c = new U("change");
                b.dispatchEvent(c)
            })
        }

        Yz.Orientation = BA;
        BA.install = CA;

        function FA() {
            lg.call(this);
            this.type = "";
            this.angle = 0
        }

        oa(FA, lg);
        FA.prototype.lock = function (a) {
            function b(d) {
                return screen.lockOrientation ? screen.lockOrientation(d) : screen.mozLockOrientation ? screen.mozLockOrientation(d) : screen.msLockOrientation ? screen.msLockOrientation(d) : !1
            }

            var c = !1;
            switch (a) {
                case "natural":
                    c = b("default");
                    break;
                case "any":
                    c = !0;
                    this.unlock();
                    break;
                default:
                    c = b(a)
            }
            if (c) return Promise.resolve();
            a = Error("screen.orientation.lock() is not available on this device");
            a.name = "NotSupportedError";
            a.code = DOMException.NOT_SUPPORTED_ERR;
            return Promise.reject(a)
        };
        FA.prototype.unlock = function () {
            screen.unlockOrientation ? screen.unlockOrientation() : screen.mozUnlockOrientation ? screen.mozUnlockOrientation() : screen.msUnlockOrientation && screen.msUnlockOrientation()
        };
        Zz(CA);

        function GA() {
        }

        var HA, IA, JA, KA, LA, MA;

        function NA(a, b) {
            try {
                var c = new OA(a, b);
                return Promise.resolve(c)
            } catch (d) {
                return Promise.reject(d)
            }
        }

        function PA(a) {
            var b = this.mediaKeys;
            b && b != a && QA(b, null);
            delete this.mediaKeys;
            return (this.mediaKeys = a) ? QA(a, this) : Promise.resolve()
        }

        function RA(a) {
            a = Ab(a.initData);
            if (Fb(a).getUint32(0, !0) + 4 != a.byteLength) throw new RangeError("Malformed FairPlay init data");
            a = xd(a.subarray(4), !0);
            a = Ad(a);
            var b = new Event("encrypted");
            b.initDataType = "skd";
            b.initData = Cb(a);
            this.dispatchEvent(b)
        }

        Yz.PatchedMediaKeysApple = GA;
        GA.uninstall = function () {
            HA && (HA = !1, Object.defineProperty(HTMLMediaElement.prototype, "mediaKeys", IA), HTMLMediaElement.prototype.setMediaKeys = JA, window.MediaKeys = KA, window.MediaKeySystemAccess = LA, navigator.requestMediaKeySystemAccess = MA, IA = MA = JA = LA = KA = null, window.shakaMediaKeysPolyfill = "")
        };
        GA.install = function (a) {
            if (window.HTMLVideoElement && window.WebKitMediaKeys) {
                if (void 0 === a ? 0 : a) HA = !0, IA = Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype, "mediaKeys"), JA = HTMLMediaElement.prototype.setMediaKeys, KA = window.MediaKeys, LA = window.MediaKeySystemAccess, MA = navigator.requestMediaKeySystemAccess;
                delete HTMLMediaElement.prototype.mediaKeys;
                HTMLMediaElement.prototype.mediaKeys = null;
                HTMLMediaElement.prototype.setMediaKeys = PA;
                window.MediaKeys = SA;
                window.MediaKeySystemAccess = OA;
                navigator.requestMediaKeySystemAccess =
                    NA;
                window.shakaMediaKeysPolyfill = TA
            }
        };

        function OA(a, b) {
            this.keySystem = a;
            if (a.startsWith("com.apple.fps")) for (a = t(b), b = a.next(); !b.done; b = a.next()) {
                var c = b.value;
                if ("required" == c.persistentState) b = null; else {
                    b = {
                        audioCapabilities: [],
                        videoCapabilities: [],
                        persistentState: "optional",
                        distinctiveIdentifier: "optional",
                        initDataTypes: c.initDataTypes,
                        sessionTypes: ["temporary"],
                        label: c.label
                    };
                    var d = !1, e = !1;
                    if (c.audioCapabilities) for (var f = t(c.audioCapabilities), g = f.next(); !g.done; g = f.next()) g = g.value, g.contentType && (d = !0, WebKitMediaKeys.isTypeSupported(this.keySystem,
                        g.contentType.split(";")[0]) && (b.audioCapabilities.push(g), e = !0));
                    if (c.videoCapabilities) for (c = t(c.videoCapabilities), g = c.next(); !g.done; g = c.next()) f = g.value, f.contentType && (d = !0, WebKitMediaKeys.isTypeSupported(this.keySystem, f.contentType.split(";")[0]) && (b.videoCapabilities.push(f), e = !0));
                    d || (e = WebKitMediaKeys.isTypeSupported(this.keySystem, "video/mp4"));
                    b = e ? b : null
                }
                if (b) {
                    this.g = b;
                    return
                }
            }
            a = Error("Unsupported keySystem");
            a.name = "NotSupportedError";
            a.code = DOMException.NOT_SUPPORTED_ERR;
            throw a;
        }

        OA.prototype.createMediaKeys = function () {
            var a = new SA(this.keySystem);
            return Promise.resolve(a)
        };
        OA.prototype.getConfiguration = function () {
            return this.g
        };

        function SA(a) {
            this.h = new WebKitMediaKeys(a);
            this.g = new gb
        }

        SA.prototype.createSession = function (a) {
            a = a || "temporary";
            if ("temporary" != a) throw new TypeError("Session type " + a + " is unsupported on this platform.");
            return new UA(this.h, a)
        };
        SA.prototype.setServerCertificate = function () {
            return Promise.resolve(!1)
        };

        function QA(a, b) {
            a.g.Ra();
            if (!b) return Promise.resolve();
            a.g.D(b, "webkitneedkey", RA);
            try {
                return Ck(b, HTMLMediaElement.HAVE_METADATA, a.g, function () {
                    b.webkitSetMediaKeys(a.h)
                }), Promise.resolve()
            } catch (c) {
                return Promise.reject(c)
            }
        }

        SA.prototype.getStatusForPolicy = function () {
            return Promise.resolve("usable")
        };

        function UA(a) {
            lg.call(this);
            this.i = null;
            this.l = a;
            this.g = this.h = null;
            this.j = new gb;
            this.sessionId = "";
            this.expiration = NaN;
            this.closed = new bg;
            this.keyStatuses = new VA
        }

        oa(UA, lg);
        r = UA.prototype;
        r.generateRequest = function (a, b) {
            var c = this;
            this.h = new bg;
            try {
                var d = this.l.createSession("video/mp4", Ab(b));
                this.i = d;
                this.sessionId = d.sessionId || "";
                this.j.D(this.i, "webkitkeymessage", function (e) {
                    c.h && (c.h.resolve(), c.h = null);
                    e = (new Map).set("messageType", void 0 == c.keyStatuses.ac() ? "license-request" : "license-renewal").set("message", Cb(e.message));
                    e = new U("message", e);
                    c.dispatchEvent(e)
                });
                this.j.D(d, "webkitkeyadded", function () {
                    c.g && (WA(c, "usable"), c.g.resolve(), c.g = null)
                });
                this.j.D(d, "webkitkeyerror",
                    function () {
                        var e = Error("EME PatchedMediaKeysApple key error");
                        e.errorCode = c.i.error;
                        if (null != c.h) c.h.reject(e), c.h = null; else if (null != c.g) c.g.reject(e), c.g = null; else switch (c.i.error.code) {
                            case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:
                            case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:
                                WA(c, "output-not-allowed");
                                break;
                            default:
                                WA(c, "internal-error")
                        }
                    });
                WA(this, "status-pending")
            } catch (e) {
                this.h.reject(e)
            }
            return this.h
        };
        r.load = function () {
            return Promise.reject(Error("MediaKeySession.load not yet supported"))
        };
        r.update = function (a) {
            this.g = new bg;
            try {
                this.i.update(Ab(a))
            } catch (b) {
                this.g.reject(b)
            }
            return this.g
        };
        r.close = function () {
            try {
                this.i.close(), this.closed.resolve(), this.j.Ra()
            } catch (a) {
                this.closed.reject(a)
            }
            return this.closed
        };
        r.remove = function () {
            return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))
        };

        function WA(a, b) {
            var c = a.keyStatuses;
            c.size = void 0 == b ? 0 : 1;
            c.g = b;
            b = new U("keystatuseschange");
            a.dispatchEvent(b)
        }

        function VA() {
            this.size = 0;
            this.g = void 0
        }

        r = VA.prototype;
        r.ac = function () {
            return this.g
        };
        r.forEach = function (a) {
            this.g && a(this.g, Qc.value())
        };
        r.get = function (a) {
            if (this.has(a)) return this.g
        };
        r.has = function (a) {
            var b = Qc.value();
            return this.g && yb(a, b) ? !0 : !1
        };
        r.entries = function () {
        };
        r.keys = function () {
        };
        r.values = function () {
        };
        var TA = "apple";

        function XA() {
        }

        function YA() {
            window.MediaKeys && (!MediaKeys.prototype.setServerCertificate || bd() || $c("Tizen 4") || $c("Tizen 5.0") || ed()) && (MediaKeys.prototype.setServerCertificate = ZA)
        }

        function ZA() {
            return Promise.resolve(!1)
        }

        Yz.PatchedMediaKeysCert = XA;
        XA.install = YA;
        Zz(YA);

        function $A() {
        }

        function aB() {
            !window.HTMLVideoElement || navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration || (navigator.requestMediaKeySystemAccess = bB, delete HTMLMediaElement.prototype.mediaKeys, HTMLMediaElement.prototype.mediaKeys = null, HTMLMediaElement.prototype.setMediaKeys = cB, window.MediaKeys = dB, window.MediaKeySystemAccess = eB, window.shakaMediaKeysPolyfill = fB)
        }

        function bB() {
            return Promise.reject(Error("The key system specified is not supported."))
        }

        function cB(a) {
            return null == a ? Promise.resolve() : Promise.reject(Error("MediaKeys not supported."))
        }

        Yz.PatchedMediaKeysNop = $A;
        $A.install = aB;

        function dB() {
            throw new TypeError("Illegal constructor.");
        }

        dB.prototype.createSession = function () {
        };
        dB.prototype.setServerCertificate = function () {
        };
        dB.prototype.getStatusForPolicy = function () {
            return Promise.resolve("usable")
        };

        function eB() {
            this.keySystem = "";
            throw new TypeError("Illegal constructor.");
        }

        eB.prototype.getConfiguration = function () {
        };
        eB.prototype.createMediaKeys = function () {
        };
        var fB = "nop";
        Zz(aB, -10);

        function gB() {
        }

        function hB() {
            if (!(!window.HTMLVideoElement || navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration)) {
                if (HTMLMediaElement.prototype.webkitGenerateKeyRequest) iB = "webkit"; else if (!HTMLMediaElement.prototype.generateKeyRequest) return;
                navigator.requestMediaKeySystemAccess = jB;
                delete HTMLMediaElement.prototype.mediaKeys;
                HTMLMediaElement.prototype.mediaKeys = null;
                HTMLMediaElement.prototype.setMediaKeys = kB;
                window.MediaKeys = lB;
                window.MediaKeySystemAccess = mB;
                window.shakaMediaKeysPolyfill = nB
            }
        }

        function oB(a) {
            var b = iB;
            return b ? b + a.charAt(0).toUpperCase() + a.slice(1) : a
        }

        function jB(a, b) {
            try {
                var c = new mB(a, b);
                return Promise.resolve(c)
            } catch (d) {
                return Promise.reject(d)
            }
        }

        function kB(a) {
            var b = this.mediaKeys;
            b && b != a && pB(b, null);
            delete this.mediaKeys;
            (this.mediaKeys = a) && pB(a, this);
            return Promise.resolve()
        }

        Yz.PatchedMediaKeysWebkit = gB;
        gB.install = hB;

        function mB(a, b) {
            this.g = this.keySystem = a;
            var c = !1;
            "org.w3.clearkey" == a && (this.g = "webkit-org.w3.clearkey", c = !1);
            var d = !1;
            var e = document.getElementsByTagName("video");
            e = e.length ? e[0] : document.createElement("video");
            b = t(b);
            for (var f = b.next(); !f.done; f = b.next()) {
                f = f.value;
                var g = {
                    audioCapabilities: [],
                    videoCapabilities: [],
                    persistentState: "optional",
                    distinctiveIdentifier: "optional",
                    initDataTypes: f.initDataTypes,
                    sessionTypes: ["temporary"],
                    label: f.label
                }, h = !1;
                if (f.audioCapabilities) for (var k = t(f.audioCapabilities),
                                                  l = k.next(); !l.done; l = k.next()) l = l.value, l.contentType && (h = !0, e.canPlayType(l.contentType.split(";")[0], this.g) && (g.audioCapabilities.push(l), d = !0));
                if (f.videoCapabilities) for (k = t(f.videoCapabilities), l = k.next(); !l.done; l = k.next()) l = l.value, l.contentType && (h = !0, e.canPlayType(l.contentType, this.g) && (g.videoCapabilities.push(l), d = !0));
                h || (d = e.canPlayType("video/mp4", this.g) || e.canPlayType("video/webm", this.g));
                "required" == f.persistentState && (c ? (g.persistentState = "required", g.sessionTypes = ["persistent-license"]) :
                    d = !1);
                if (d) {
                    this.h = g;
                    return
                }
            }
            c = "Unsupported keySystem";
            if ("org.w3.clearkey" == a || "com.widevine.alpha" == a) c = "None of the requested configurations were supported.";
            a = Error(c);
            a.name = "NotSupportedError";
            a.code = DOMException.NOT_SUPPORTED_ERR;
            throw a;
        }

        mB.prototype.createMediaKeys = function () {
            var a = new lB(this.g);
            return Promise.resolve(a)
        };
        mB.prototype.getConfiguration = function () {
            return this.h
        };

        function lB(a) {
            this.l = a;
            this.h = null;
            this.g = new gb;
            this.i = [];
            this.j = new Map
        }

        function pB(a, b) {
            a.h = b;
            a.g.Ra();
            var c = iB;
            b && (a.g.D(b, c + "needkey", function (d) {
                var e = new CustomEvent("encrypted");
                e.initDataType = "cenc";
                e.initData = Cb(d.initData);
                a.h.dispatchEvent(e)
            }), a.g.D(b, c + "keymessage", function (d) {
                var e = qB(a, d.sessionId);
                e && (d = (new Map).set("messageType", void 0 == e.keyStatuses.ac() ? "licenserequest" : "licenserenewal").set("message", d.message), d = new U("message", d), e.h && (e.h.resolve(), e.h = null), e.dispatchEvent(d))
            }), a.g.D(b, c + "keyadded", function (d) {
                if (d = qB(a, d.sessionId)) rB(d, "usable"),
                d.g && d.g.resolve(), d.g = null
            }), a.g.D(b, c + "keyerror", function (d) {
                var e = qB(a, d.sessionId);
                if (e) {
                    var f = Error("EME v0.1b key error"), g = d.errorCode;
                    g.systemCode = d.systemCode;
                    f.errorCode = g;
                    !d.sessionId && e.h ? (45 == d.systemCode && (f.message = "Unsupported session type."), e.h.reject(f), e.h = null) : d.sessionId && e.g ? (e.g.reject(f), e.g = null) : (f = d.systemCode, d.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT ? rB(e, "output-restricted") : 1 == f ? rB(e, "expired") : rB(e, "internal-error"))
                }
            }))
        }

        lB.prototype.createSession = function (a) {
            a = a || "temporary";
            if ("temporary" != a && "persistent-license" != a) throw new TypeError("Session type " + a + " is unsupported on this platform.");
            var b = this.h || document.createElement("video");
            b.src || (b.src = "about:blank");
            a = new sB(b, this.l, a);
            this.i.push(a);
            return a
        };
        lB.prototype.setServerCertificate = function () {
            return Promise.resolve(!1)
        };
        lB.prototype.getStatusForPolicy = function () {
            return Promise.resolve("usable")
        };

        function qB(a, b) {
            var c = a.j.get(b);
            return c ? c : (c = a.i.shift()) ? (c.sessionId = b, a.j.set(b, c), c) : null
        }

        function sB(a, b, c) {
            lg.call(this);
            this.j = a;
            this.m = !1;
            this.g = this.h = null;
            this.i = b;
            this.l = c;
            this.sessionId = "";
            this.expiration = NaN;
            this.closed = new bg;
            this.keyStatuses = new tB
        }

        oa(sB, lg);

        function uB(a, b, c) {
            if (a.m) return Promise.reject(Error("The session is already initialized."));
            a.m = !0;
            try {
                if ("persistent-license" == a.l) if (c) var d = Ab(Ad("LOAD_SESSION|" + c)); else {
                    var e = Ad("PERSISTENT|");
                    d = Md(e, b)
                } else d = Ab(b)
            } catch (g) {
                return Promise.reject(g)
            }
            a.h = new bg;
            var f = oB("generateKeyRequest");
            try {
                a.j[f](a.i, d)
            } catch (g) {
                if ("InvalidStateError" != g.name) return a.h = null, Promise.reject(g);
                (new Tc(function () {
                    try {
                        a.j[f](a.i, d)
                    } catch (h) {
                        a.h.reject(h), a.h = null
                    }
                })).Y(.01)
            }
            return a.h
        }

        function vB(a, b, c) {
            if (a.g) a.g.then(function () {
                return vB(a, b, c)
            }).catch(function () {
                return vB(a, b, c)
            }); else {
                a.g = b;
                if ("webkit-org.w3.clearkey" == a.i) {
                    var d = vd(c);
                    var e = JSON.parse(d);
                    "oct" != e.keys[0].kty && (a.g.reject(Error("Response is not a valid JSON Web Key Set.")), a.g = null);
                    d = Hd(e.keys[0].k);
                    e = Hd(e.keys[0].kid)
                } else d = Ab(c), e = null;
                var f = oB("addKey");
                try {
                    a.j[f](a.i, d, e, a.sessionId)
                } catch (g) {
                    a.g.reject(g), a.g = null
                }
            }
        }

        function rB(a, b) {
            var c = a.keyStatuses;
            c.size = void 0 == b ? 0 : 1;
            c.g = b;
            b = new U("keystatuseschange");
            a.dispatchEvent(b)
        }

        r = sB.prototype;
        r.generateRequest = function (a, b) {
            return uB(this, b, null)
        };
        r.load = function (a) {
            return "persistent-license" == this.l ? uB(this, null, a) : Promise.reject(Error("Not a persistent session."))
        };
        r.update = function (a) {
            var b = new bg;
            vB(this, b, a);
            return b
        };
        r.close = function () {
            if ("persistent-license" != this.l) {
                if (!this.sessionId) return this.closed.reject(Error("The session is not callable.")), this.closed;
                var a = oB("cancelKeyRequest");
                try {
                    this.j[a](this.i, this.sessionId)
                } catch (b) {
                }
            }
            this.closed.resolve();
            return this.closed
        };
        r.remove = function () {
            return "persistent-license" != this.l ? Promise.reject(Error("Not a persistent session.")) : this.close()
        };

        function tB() {
            this.size = 0;
            this.g = void 0
        }

        r = tB.prototype;
        r.ac = function () {
            return this.g
        };
        r.forEach = function (a) {
            this.g && a(this.g, Qc.value())
        };
        r.get = function (a) {
            if (this.has(a)) return this.g
        };
        r.has = function (a) {
            var b = Qc.value();
            return this.g && yb(a, b) ? !0 : !1
        };
        r.entries = function () {
        };
        r.keys = function () {
        };
        r.values = function () {
        };
        var iB = "", nB = "webkit";
        Zz(hB);

        function wB() {
        }

        function xB() {
            if (window.HTMLVideoElement) {
                var a = HTMLVideoElement.prototype;
                a.requestPictureInPicture && document.exitPictureInPicture || !a.webkitSupportsPresentationMode || (document.pictureInPictureEnabled = !0, document.pictureInPictureElement = null, a.requestPictureInPicture = yB, Object.defineProperty(a, "disablePictureInPicture", {
                    get: zB,
                    set: AB,
                    enumerable: !0,
                    configurable: !0
                }), document.exitPictureInPicture = BB, document.addEventListener("webkitpresentationmodechanged", CB, !0))
            }
        }

        function CB(a) {
            a = a.target;
            if ("picture-in-picture" == a.webkitPresentationMode) {
                document.pictureInPictureElement = a;
                var b = new Event("enterpictureinpicture");
                a.dispatchEvent(b)
            } else document.pictureInPictureElement == a && (document.pictureInPictureElement = null), b = new Event("leavepictureinpicture"), a.dispatchEvent(b)
        }

        function yB() {
            return this.webkitSupportsPresentationMode("picture-in-picture") ? (this.webkitSetPresentationMode("picture-in-picture"), document.pictureInPictureElement = this, Promise.resolve()) : Promise.reject(Error("PiP not allowed by video element"))
        }

        function BB() {
            var a = document.pictureInPictureElement;
            return a ? (a.webkitSetPresentationMode("inline"), document.pictureInPictureElement = null, Promise.resolve()) : Promise.reject(Error("No picture in picture element found"))
        }

        function zB() {
            return this.hasAttribute("disablePictureInPicture") ? !0 : !this.webkitSupportsPresentationMode("picture-in-picture")
        }

        function AB(a) {
            a ? this.setAttribute("disablePictureInPicture", "") : this.removeAttribute("disablePictureInPicture")
        }

        Yz.PiPWebkit = wB;
        wB.install = xB;
        Zz(xB);

        function DB() {
        }

        function EB() {
            window.crypto && ("randomUUID" in window.crypto || (window.crypto.randomUUID = FB))
        }

        function FB() {
            var a = URL.createObjectURL(new Blob), b = a.toString();
            URL.revokeObjectURL(a);
            return b.substr(b.lastIndexOf("/") + 1)
        }

        Yz.RandomUUID = DB;
        DB.install = EB;
        Zz(EB);

        function GB() {
        }

        function HB() {
            var a = Symbol.prototype;
            "description" in a || Object.defineProperty(a, "description", {get: IB})
        }

        function IB() {
            var a = /\((.*)\)/.exec(this.toString());
            return a ? a[1] : void 0
        }

        Yz.Symbol = GB;
        GB.install = HB;
        Zz(HB);

        function JB() {
        }

        function KB() {
            if (window.HTMLMediaElement) {
                var a = HTMLMediaElement.prototype.play;
                HTMLMediaElement.prototype.play = function () {
                    var b = a.apply(this);
                    b && b.catch(function () {
                    });
                    return b
                }
            }
        }

        Yz.VideoPlayPromise = JB;
        JB.install = KB;
        Zz(KB);

        function LB() {
        }

        function MB() {
            if (window.HTMLVideoElement) {
                var a = HTMLVideoElement.prototype;
                !a.getVideoPlaybackQuality && ("webkitDroppedFrameCount" in a || ed()) && (a.getVideoPlaybackQuality = NB)
            }
        }

        function NB() {
            return {
                droppedVideoFrames: this.webkitDroppedFrameCount,
                totalVideoFrames: this.webkitDecodedFrameCount,
                corruptedVideoFrames: 0,
                creationTime: NaN,
                totalFrameDelay: 0
            }
        }

        Yz.VideoPlaybackQuality = LB;
        LB.install = MB;
        Zz(MB);

        function OB() {
        }

        function PB() {
            if (!window.VTTCue && window.TextTrackCue) {
                var a = null, b = TextTrackCue.length;
                if (3 == b) a = QB; else if (6 == b) a = RB; else {
                    try {
                        var c = !!QB(1, 2, "")
                    } catch (d) {
                        c = !1
                    }
                    c && (a = QB)
                }
                a && (window.VTTCue = function (d, e, f) {
                    return a(d, e, f)
                })
            }
        }

        function QB(a, b, c) {
            return new window.TextTrackCue(a, b, c)
        }

        function RB(a, b, c) {
            return new window.TextTrackCue(a + "-" + b + "-" + c, a, b, c)
        }

        Yz.VTTCue = OB;
        OB.install = PB;
        Zz(PB);

        function SB() {
        }

        SB.prototype.parseInit = function () {
        };
        SB.prototype.setSequenceMode = function () {
        };
        SB.prototype.setManifestType = function () {
        };
        SB.prototype.parseMedia = function (a, b) {
            var c = null, d = [];
            a = vd(a).split(/\r?\n/);
            a = t(a);
            for (var e = a.next(); !e.done; e = a.next()) if ((e = e.value) && !/^\s+$/.test(e) && (e = TB.exec(e))) {
                var f = UB.exec(e[1]);
                f = 60 * parseInt(f[1], 10) + parseFloat(f[2].replace(",", "."));
                e = new Sb(f, b.segmentEnd ? b.segmentEnd : f + 2, e[2]);
                c && (c.endTime = f, d.push(c));
                c = e
            }
            c && d.push(c);
            return d
        };
        S("shaka.text.LrcTextParser", SB);
        SB.prototype.parseMedia = SB.prototype.parseMedia;
        SB.prototype.setManifestType = SB.prototype.setManifestType;
        SB.prototype.setSequenceMode = SB.prototype.setSequenceMode;
        SB.prototype.parseInit = SB.prototype.parseInit;
        var TB = /^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/, UB = /^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;
        te["application/x-subtitle-lrc"] = function () {
            return new SB
        };

        function VB() {
        }

        VB.prototype.parseInit = function () {
        };
        VB.prototype.setSequenceMode = function () {
        };
        VB.prototype.setManifestType = function () {
        };
        VB.prototype.parseMedia = function (a, b, c) {
            var d = vd(a);
            a = [];
            if ("" == d) return a;
            var e = ah(d, "tt");
            if (!e) throw new T(2, 2, 2005, "Failed to parse TTML.");
            d = jh(e, "body")[0];
            if (!d) return [];
            var f = ph(e, WB, "frameRate"), g = ph(e, WB, "subFrameRate"), h = ph(e, WB, "frameRateMultiplier"),
                k = ph(e, WB, "tickRate"), l = ph(e, WB, "cellResolution"), m = e.attributes["xml:space"] || "default",
                n = ph(e, XB, "extent");
            if ("default" != m && "preserve" != m) throw new T(2, 2, 2005, "Invalid xml:space value: " + m);
            m = "default" == m;
            f = new YB(f, g, h, k);
            l = l ? (l = /^(\d+) (\d+)$/.exec(l)) ?
                {kc: parseInt(l[1], 10), rows: parseInt(l[2], 10)} : null : null;
            g = (g = jh(e, "metadata")[0]) ? g.children : [];
            h = jh(e, "style");
            e = jh(e, "region");
            k = [];
            for (var p = t(e), q = p.next(); !q.done; q = p.next()) {
                var u = q.value;
                q = new Kb;
                var w = u.attributes["xml:id"];
                if (w) {
                    q.id = w;
                    var v = null;
                    n && (v = ZB.exec(n) || $B.exec(n));
                    w = v ? Number(v[1]) : null;
                    v = v ? Number(v[2]) : null;
                    var A, y = aC(u, h, "extent");
                    if (y) {
                        var D = (A = ZB.exec(y)) || $B.exec(y);
                        null != D && (q.width = Number(D[1]), q.height = Number(D[2]), A || (null != w && (q.width = 100 * q.width / w), null != v && (q.height =
                            100 * q.height / v)), q.widthUnits = A || null != w ? Lb : 0, q.heightUnits = A || null != v ? Lb : 0)
                    }
                    if (u = aC(u, h, "origin")) if (D = (A = ZB.exec(u)) || $B.exec(u), null != D) q.viewportAnchorX = Number(D[1]), q.viewportAnchorY = Number(D[2]), A ? y || (q.width = 100 - q.viewportAnchorX, q.widthUnits = Lb, q.height = 100 - q.viewportAnchorY, q.heightUnits = Lb) : (null != v && (q.viewportAnchorY = 100 * q.viewportAnchorY / v), null != w && (q.viewportAnchorX = 100 * q.viewportAnchorX / w)), q.viewportAnchorUnits = A || null != w ? Lb : 0
                } else q = null;
                q && k.push(q)
            }
            if (gh(d, "p").length) throw new T(2,
                2, 2001, "<p> can only be inside <div> in TTML");
            n = t(gh(d, "div"));
            for (p = n.next(); !p.done; p = n.next()) if (gh(p.value, "span").length) throw new T(2, 2, 2001, "<span> can only be inside <p> in TTML");
            if (b = bC(d, b, f, g, h, e, k, m, l, null, !1, c)) b.backgroundColor || (b.backgroundColor = "transparent"), a.push(b);
            return a
        };

        function bC(a, b, c, d, e, f, g, h, k, l, m, n) {
            var p = l;
            if (eh(a)) {
                if (!m) return null;
                var q = {tagName: "span", children: [hh(a)], attributes: {}, parent: null}
            } else q = a;
            for (var u = null, w = t(cC), v = w.next(); !v.done && !(u = dC(q, "backgroundImage", d, "#", v.value)[0]); v = w.next()) ;
            w = null;
            var A = ph(q, cC, "backgroundImage");
            n && A && !A.startsWith("#") && (v = new uc(n), A = new uc(A), (v = v.resolve(A).toString()) && (w = v));
            if ("p" == a.tagName || u || w) m = !0;
            a = m;
            v = "default" == (q.attributes["xml:space"] || (h ? "default" : "preserve"));
            A = q.children.every(eh);
            h =
                [];
            if (!A) for (var y = t(q.children), D = y.next(); !D.done; D = y.next()) (D = bC(D.value, b, c, d, e, f, g, v, k, q, m, n)) && h.push(D);
            d = null != l;
            n = hh(q);
            n = q.children.length && n && /\S/.test(n);
            D = q.attributes.begin || q.attributes.end || q.attributes.dur;
            if (!(D || n || "br" == q.tagName || 0 != h.length || d && !v)) return null;
            y = eC(q, c);
            n = y.start;
            for (y = y.end; p && p.tagName && "tt" != p.tagName;) y = fC(p, c, n, y), n = y.start, y = y.end, p = p.parent;
            null == n && (n = 0);
            n += b.periodStart;
            y = null == y ? Infinity : y + b.periodStart;
            n = Math.max(n, b.segmentStart);
            y = Math.min(y, b.segmentEnd);
            if (!D && 0 < h.length) for (n = Infinity, y = 0, b = t(h), c = b.next(); !c.done; c = b.next()) c = c.value, n = Math.min(n, c.startTime), y = Math.max(y, c.endTime);
            if ("br" == q.tagName) return e = new Sb(n, y, ""), e.lineBreak = !0, e;
            b = "";
            A && (b = Dd(hh(q) || ""), v && (b = b.replace(/\s+/g, " ")));
            b = new Sb(n, y, b);
            b.nestedCues = h;
            m || (b.isContainer = !0);
            k && (b.cellResolution = k);
            k = dC(q, "region", f, "")[0];
            if (q.attributes.region && k && k.attributes["xml:id"]) {
                var z = k.attributes["xml:id"];
                b.region = g.filter(function (B) {
                    return B.id == z
                })[0]
            }
            g = k;
            l && d && !q.attributes.region &&
            !q.attributes.style && (g = dC(l, "region", f, "")[0]);
            gC(b, q, g, u, w, e, a, 0 == h.length);
            return b
        }

        function gC(a, b, c, d, e, f, g, h) {
            g = g || h;
            "rtl" == hC(b, c, f, "direction", g) && (a.direction = "rtl");
            h = hC(b, c, f, "writingMode", g);
            "tb" == h || "tblr" == h ? a.writingMode = "vertical-lr" : "tbrl" == h ? a.writingMode = "vertical-rl" : "rltb" == h || "rl" == h ? a.direction = "rtl" : h && (a.direction = Vb);
            (h = hC(b, c, f, "textAlign", !0)) ? (a.positionAlign = iC[h], a.lineAlign = jC[h], a.textAlign = dc[h.toUpperCase()]) : a.textAlign = Ub;
            if (h = hC(b, c, f, "displayAlign", !0)) a.displayAlign = ec[h.toUpperCase()];
            if (h = hC(b, c, f, "color", g)) a.color = h;
            if (h = hC(b, c, f, "backgroundColor",
                g)) a.backgroundColor = h;
            if (h = hC(b, c, f, "border", g)) a.border = h;
            if (h = hC(b, c, f, "fontFamily", g)) switch (h) {
                case "monospaceSerif":
                    a.fontFamily = "Courier New,Liberation Mono,Courier,monospace";
                    break;
                case "proportionalSansSerif":
                    a.fontFamily = "Arial,Helvetica,Liberation Sans,sans-serif";
                    break;
                case "sansSerif":
                    a.fontFamily = "sans-serif";
                    break;
                case "monospaceSansSerif":
                    a.fontFamily = "Consolas,monospace";
                    break;
                case "proportionalSerif":
                    a.fontFamily = "serif";
                    break;
                default:
                    a.fontFamily = h.split(",").filter(function (k) {
                        return "default" !=
                            k
                    }).join(",")
            }
            (h = hC(b, c, f, "fontWeight", g)) && "bold" == h && (a.fontWeight = 700);
            h = hC(b, c, f, "wrapOption", g);
            a.wrapLine = h && "noWrap" == h ? !1 : !0;
            (h = hC(b, c, f, "lineHeight", g)) && h.match(kC) && (a.lineHeight = h);
            (h = hC(b, c, f, "fontSize", g)) && (h.match(kC) || h.match(lC)) && (a.fontSize = h);
            if (h = hC(b, c, f, "fontStyle", g)) a.fontStyle = ic[h.toUpperCase()];
            d ? (e = d.attributes.imageType || d.attributes.imagetype, h = d.attributes.encoding, d = hh(d).trim(), "PNG" == e && "Base64" == h && d && (a.backgroundImage = "data:image/png;base64," + d)) : e && (a.backgroundImage =
                e);
            if (d = hC(b, c, f, "textOutline", g)) d = d.split(" "), d[0].match(kC) ? a.textStrokeColor = a.color : (a.textStrokeColor = d[0], d.shift()), d[0] && d[0].match(kC) ? a.textStrokeWidth = d[0] : a.textStrokeColor = "";
            (d = hC(b, c, f, "letterSpacing", g)) && d.match(kC) && (a.letterSpacing = d);
            (d = hC(b, c, f, "linePadding", g)) && d.match(kC) && (a.linePadding = d);
            if (d = hC(b, c, f, "opacity", g)) a.opacity = parseFloat(d);
            (d = aC(c, f, "textDecoration")) && mC(a, d);
            (d = nC(b, f, "textDecoration")) && mC(a, d);
            if (d = hC(b, c, f, "textCombine", g)) a.textCombineUpright = d;
            switch (hC(b,
                c, f, "ruby", g)) {
                case "container":
                    a.rubyTag = "ruby";
                    break;
                case "text":
                    a.rubyTag = "rt"
            }
        }

        function mC(a, b) {
            b = t(b.split(" "));
            for (var c = b.next(); !c.done; c = b.next()) switch (c.value) {
                case "underline":
                    a.textDecoration.includes("underline") || a.textDecoration.push("underline");
                    break;
                case "noUnderline":
                    a.textDecoration.includes("underline") && Ob(a.textDecoration, "underline");
                    break;
                case "lineThrough":
                    a.textDecoration.includes("lineThrough") || a.textDecoration.push("lineThrough");
                    break;
                case "noLineThrough":
                    a.textDecoration.includes("lineThrough") && Ob(a.textDecoration, "lineThrough");
                    break;
                case "overline":
                    a.textDecoration.includes("overline") ||
                    a.textDecoration.push("overline");
                    break;
                case "noOverline":
                    a.textDecoration.includes("overline") && Ob(a.textDecoration, "overline")
            }
        }

        function hC(a, b, c, d, e) {
            e = void 0 === e ? !0 : e;
            return (a = nC(a, c, d)) ? a : e ? aC(b, c, d) : null
        }

        function aC(a, b, c) {
            if (!a) return null;
            var d = ph(a, XB, c);
            return d ? d : oC(a, b, c)
        }

        function nC(a, b, c) {
            var d = ph(a, XB, c);
            return d ? d : oC(a, b, c)
        }

        function oC(a, b, c) {
            a = dC(a, "style", b, "");
            for (var d = null, e = 0; e < a.length; e++) {
                var f = oh(a[e], "urn:ebu:tt:style", c);
                f || (f = ph(a[e], XB, c));
                f || (f = nC(a[e], b, c));
                f && (d = f)
            }
            return d
        }

        function dC(a, b, c, d, e) {
            var f = [];
            if (!a || 1 > c.length) return f;
            var g = a;
            for (a = null; !a && !(a = e ? oh(g, e, b) : g.attributes[b]) && (g = g.parent, g);) ;
            if (b = a) for (b = t(b.split(" ")), e = b.next(); !e.done; e = b.next()) for (e = e.value, a = t(c), g = a.next(); !g.done; g = a.next()) if (g = g.value, d + g.attributes["xml:id"] == e) {
                f.push(g);
                break
            }
            return f
        }

        function fC(a, b, c, d) {
            a = eC(a, b);
            null == c ? c = a.start : null != a.start && (c += a.start);
            null == d ? d = a.end : null != a.start && (d += a.start);
            return {start: c, end: d}
        }

        function eC(a, b) {
            var c = pC(a.attributes.begin, b), d = pC(a.attributes.end, b);
            a = pC(a.attributes.dur, b);
            null == d && null != a && (d = c + a);
            return {start: c, end: d}
        }

        function pC(a, b) {
            var c = null;
            if (qC.test(a)) {
                a = qC.exec(a);
                c = Number(a[1]);
                var d = Number(a[2]), e = Number(a[3]), f = Number(a[4]);
                f += (Number(a[5]) || 0) / b.h;
                e += f / b.frameRate;
                c = e + 60 * d + 3600 * c
            } else if (rC.test(a)) c = sC(rC, a); else if (tC.test(a)) c = sC(tC, a); else if (uC.test(a)) a = uC.exec(a), c = Number(a[1]) / b.frameRate; else if (vC.test(a)) a = vC.exec(a), c = Number(a[1]) / b.g; else if (wC.test(a)) c = sC(wC, a); else if (a) throw new T(2, 2, 2001, "Could not parse cue time range in TTML");
            return c
        }

        function sC(a, b) {
            a = a.exec(b);
            return null == a || "" == a[0] ? null : (Number(a[4]) || 0) / 1E3 + (Number(a[3]) || 0) + 60 * (Number(a[2]) || 0) + 3600 * (Number(a[1]) || 0)
        }

        S("shaka.text.TtmlTextParser", VB);
        VB.prototype.parseMedia = VB.prototype.parseMedia;
        VB.prototype.setManifestType = VB.prototype.setManifestType;
        VB.prototype.setSequenceMode = VB.prototype.setSequenceMode;
        VB.prototype.parseInit = VB.prototype.parseInit;

        function YB(a, b, c, d) {
            this.frameRate = Number(a) || 30;
            this.h = Number(b) || 1;
            this.g = Number(d);
            0 == this.g && (this.g = a ? this.frameRate * this.h : 1);
            c && (a = /^(\d+) (\d+)$/g.exec(c)) && (this.frameRate *= Number(a[1]) / Number(a[2]))
        }

        var ZB = /^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,
            lC = /^(\d{1,4}(?:\.\d+)?|100)%$/, kC = /^(\d+px|\d+em|\d*\.?\d+c)$/, $B = /^(\d+)px (\d+)px$/,
            qC = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/, rC = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,
            tC = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/, uC = /^(\d*(?:\.\d*)?)f$/, vC = /^(\d*(?:\.\d*)?)t$/,
            wC = RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),
            jC = {
                left: Yb, center: "center", right: "end", start: Yb,
                end: "end"
            }, iC = {left: "line-left", center: "center", right: "line-right"},
            WB = ["http://www.w3.org/ns/ttml#parameter", "http://www.w3.org/2006/10/ttaf1#parameter"],
            XB = ["http://www.w3.org/ns/ttml#styling", "http://www.w3.org/2006/10/ttaf1#styling"],
            cC = ["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt", "http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];
        te["application/ttml+xml"] = function () {
            return new VB
        };

        function xC() {
            this.g = new VB
        }

        xC.prototype.parseInit = function (a) {
            var b = !1;
            (new Lg).box("moov", Qg).box("trak", Qg).box("mdia", Qg).box("minf", Qg).box("stbl", Qg).S("stsd", Ug).box("stpp", function (c) {
                b = !0;
                c.parser.stop()
            }).parse(a);
            if (!b) throw new T(2, 2, 2007);
        };
        xC.prototype.setSequenceMode = function () {
        };
        xC.prototype.setManifestType = function () {
        };
        xC.prototype.parseMedia = function (a, b, c) {
            var d = this, e = !1, f = [];
            (new Lg).box("mdat", Xg(function (g) {
                e = !0;
                f = f.concat(d.g.parseMedia(g, b, c))
            })).parse(a, !1);
            if (!e) throw new T(2, 2, 2007);
            return f
        };
        S("shaka.text.Mp4TtmlParser", xC);
        xC.prototype.parseMedia = xC.prototype.parseMedia;
        xC.prototype.setManifestType = xC.prototype.setManifestType;
        xC.prototype.setSequenceMode = xC.prototype.setSequenceMode;
        xC.prototype.parseInit = xC.prototype.parseInit;
        te['application/mp4; codecs="stpp"'] = function () {
            return new xC
        };
        te['application/mp4; codecs="stpp.ttml"'] = function () {
            return new xC
        };
        te['application/mp4; codecs="stpp.ttml.im1t"'] = function () {
            return new xC
        };
        te['application/mp4; codecs="stpp.ttml.im2t"'] = function () {
            return new xC
        };
        te['application/mp4; codecs="stpp.ttml.etd1"'] = function () {
            return new xC
        };
        te['application/mp4; codecs="stpp.ttml.etd1|im1t"'] = function () {
            return new xC
        };
        te['application/mp4; codecs="stpp.ttml.im1t|etd1"'] = function () {
            return new xC
        };
        te['application/mp4; codecs="stpp.TTML.im1t"'] = function () {
            return new xC
        };

        function yC() {
            this.h = !1;
            this.g = "UNKNOWN"
        }

        yC.prototype.parseInit = function () {
        };
        yC.prototype.setSequenceMode = function (a) {
            this.h = a
        };
        yC.prototype.setManifestType = function (a) {
            this.g = a
        };
        yC.prototype.parseMedia = function (a, b) {
            a = vd(a);
            a = a.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n");
            var c = a.split(/\n{2,}/m);
            if (!/^WEBVTT($|[ \t\n])/m.test(c[0])) throw new T(2, 2, 2E3);
            a = b.vttOffset;
            if (c[0].includes("X-TIMESTAMP-MAP") && "HLS" == this.g) if (this.h) {
                var d = c[0];
                a = d.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m);
                d = d.match(/MPEGTS:(\d+)/m);
                if (!a || !d) throw new T(2, 2, 2E3);
                a = zC(new Vp(a[1]));
                if (null == a) throw new T(2, 2, 2E3);
                a = b.periodStart + Number(d[1]) / 9E4 - a
            } else a = b.segmentStart;
            b = [];
            d = t(c[0].split("\n"));
            for (var e = d.next(); !e.done; e = d.next()) if (e = e.value, /^Region:/.test(e)) {
                e = new Vp(e);
                var f = new Kb;
                Yp(e);
                Wp(e);
                for (var g = Yp(e); g;) {
                    var h = f, k = g;
                    (g = /^id=(.*)$/.exec(k)) ? h.id = g[1] : (g = /^width=(\d{1,2}|100)%$/.exec(k)) ? h.width = Number(g[1]) : (g = /^lines=(\d+)$/.exec(k)) ? (h.height = Number(g[1]), h.heightUnits = 2) : (g = /^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(k)) ? (h.regionAnchorX = Number(g[1]), h.regionAnchorY = Number(g[2])) : (g = /^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(k)) ? (h.viewportAnchorX = Number(g[1]),
                        h.viewportAnchorY = Number(g[2])) : /^scroll=up$/.exec(k) && (h.scroll = "up");
                    Wp(e);
                    g = Yp(e)
                }
                b.push(f)
            }
            d = new Map;
            AC(d);
            e = [];
            c = t(c.slice(1));
            for (f = c.next(); !f.done; f = c.next()) {
                f = f.value.split("\n");
                if ((1 != f.length || f[0]) && !/^NOTE($|[ \t])/.test(f[0]) && "STYLE" == f[0]) {
                    h = [];
                    g = -1;
                    for (k = 1; k < f.length; k++) f[k].includes("::cue") && (h.push([]), g = h.length - 1), -1 != g && (h[g].push(f[k]), f[k].includes("}") && (g = -1));
                    h = t(h);
                    for (g = h.next(); !g.done; g = h.next()) {
                        var l = g.value;
                        g = "global";
                        (k = l[0].match(/\((.*)\)/)) && (g = k.pop());
                        k =
                            l.slice(1, -1);
                        l[0].includes("}") && (l = /\{(.*?)\}/.exec(l[0])) && (k = l[1].split(";"));
                        (l = d.get(g)) || (l = new Sb(0, 0, ""));
                        for (var m = !1, n = 0; n < k.length; n++) {
                            var p = /^\s*([^:]+):\s*(.*)/.exec(k[n]);
                            if (p) {
                                var q = p[2].trim().replace(";", "");
                                switch (p[1].trim()) {
                                    case "background-color":
                                    case "background":
                                        m = !0;
                                        l.backgroundColor = q;
                                        break;
                                    case "color":
                                        m = !0;
                                        l.color = q;
                                        break;
                                    case "font-family":
                                        m = !0;
                                        l.fontFamily = q;
                                        break;
                                    case "font-size":
                                        m = !0;
                                        l.fontSize = q;
                                        break;
                                    case "font-weight":
                                        if (700 <= parseInt(q, 10) || "bold" == q) m = !0, l.fontWeight =
                                            700;
                                        break;
                                    case "font-style":
                                        switch (q) {
                                            case "normal":
                                                m = !0;
                                                l.fontStyle = ac;
                                                break;
                                            case "italic":
                                                m = !0;
                                                l.fontStyle = "italic";
                                                break;
                                            case "oblique":
                                                m = !0, l.fontStyle = "oblique"
                                        }
                                        break;
                                    case "opacity":
                                        m = !0;
                                        l.opacity = parseFloat(q);
                                        break;
                                    case "text-combine-upright":
                                        m = !0;
                                        l.textCombineUpright = q;
                                        break;
                                    case "text-shadow":
                                        m = !0;
                                        l.textShadow = q;
                                        break;
                                    case "white-space":
                                        m = !0, l.wrapLine = "noWrap" != q
                                }
                            }
                        }
                        m && d.set(g, l)
                    }
                }
                m = a;
                if (1 == f.length && !f[0] || /^NOTE($|[ \t])/.test(f[0]) || "STYLE" == f[0] || "REGION" == f[0]) f = null; else if (h = null,
                f[0].includes("--\x3e") || (h = f[0], f.splice(0, 1)), g = new Vp(f[0]), k = zC(g), n = Xp(g, /[ \t]+--\x3e[ \t]+/g), l = zC(g), null == k || null == n || null == l) $a("Failed to parse VTT time code. Cue skipped:", h, f), f = null; else {
                    k += m;
                    l += m;
                    f = f.slice(1).join("\n").trim();
                    d.has("global") ? (m = d.get("global").clone(), m.startTime = k, m.endTime = l, m.payload = "") : m = new Sb(k, l, "");
                    Wp(g);
                    for (k = Yp(g); k;) BC(m, k, b), Wp(g), k = Yp(g);
                    CC(f, m, d);
                    null != h && (m.id = h);
                    f = m
                }
                f && e.push(f)
            }
            return e
        };

        function AC(a) {
            for (var b = t(Object.entries(gc)), c = b.next(); !c.done; c = b.next()) {
                var d = t(c.value);
                c = d.next().value;
                d = d.next().value;
                var e = new Sb(0, 0, "");
                e.color = d;
                a.set("." + c, e)
            }
            b = t(Object.entries(hc));
            for (c = b.next(); !c.done; c = b.next()) d = t(c.value), c = d.next().value, d = d.next().value, e = new Sb(0, 0, ""), e.backgroundColor = d, a.set("." + c, e)
        }

        function CC(a, b, c) {
            if (a.includes("<")) {
                0 === c.size && AC(c);
                var d = a;
                a = [];
                for (var e = -1, f = 0; f < d.length; f++) "<" === d[f] ? e = f + 1 : ">" === d[f] && 0 < e && (e = d.substr(e, f - e), e.match(DC) && a.push(e), e = -1);
                a = t(a);
                for (f = a.next(); !f.done; f = a.next()) f = f.value, d = d.replace("<" + f + ">", '<div time="' + f + '">'), d += "</div>";
                a = d;
                a:{
                    f = a;
                    e = [];
                    var g = -1;
                    a = "";
                    d = !1;
                    for (var h = 0; h < f.length; h++) if ("/" === f[h]) {
                        var k = f.indexOf(">", h);
                        if (-1 === k) {
                            a = f;
                            break a
                        }
                        if ((k = f.substring(h + 1, k)) && "v" == k) {
                            d = !0;
                            var l = null;
                            e.length && (l = e[e.length - 1]);
                            if (l) {
                                if (l ===
                                    k) a += "/" + k + ">"; else {
                                    if (!l.startsWith("v")) {
                                        a += f[h];
                                        continue
                                    }
                                    a += "/" + l + ">"
                                }
                                h += k.length + 1
                            } else a += f[h]
                        } else a += f[h]
                    } else "<" === f[h] ? (g = h + 1, "v" != f[g] && (g = -1)) : ">" === f[h] && 0 < g && (e.push(f.substr(g, h - g)), g = -1), a += f[h];
                    f = t(e);
                    for (e = f.next(); !e.done; e = f.next()) e = e.value, g = e.replace(" ", ".voice-"), a = a.replace("<" + e + ">", "<" + g + ">"), a = a.replace("</" + e + ">", "</" + g + ">"), d || (a += "</" + g + ">")
                }
                a = EC(a);
                try {
                    var m = ah("<span>" + a + "</span>", "span")
                } catch (n) {
                }
                if (m) if (m = m.children, 1 != m.length || m[0].tagName) for (m = t(m), a = m.next(); !a.done; a =
                    m.next()) FC(a.value, b, c); else b.payload = Dd(a); else b.payload = Dd(a)
            } else b.payload = Dd(a)
        }

        function EC(a) {
            var b = {"< ": "", " >": " &gt;"}, c = /(< +>|<\s|\s>)/g, d = RegExp(c.source);
            return a && d.test(a) ? a.replace(c, function (e) {
                return b[e] || ""
            }) : a || ""
        }

        function GC(a, b) {
            return a && 0 < a.length ? a : b
        }

        function FC(a, b, c) {
            var d = b.clone();
            d.nestedCues = [];
            d.payload = "";
            d.rubyTag = "";
            d.line = null;
            d.region = new Kb;
            d.position = null;
            d.size = 0;
            if (a.tagName) for (var e = t(a.tagName.split(/(?=[ .])+/g)), f = e.next(); !f.done; f = e.next()) {
                var g = f = f.value;
                if (g.startsWith(".voice-")) {
                    var h = g.split("-").pop();
                    g = 'v[voice="' + h + '"]';
                    c.has(g) || (g = "v[voice=" + h + "]")
                }
                c.has(g) && (g = c.get(g)) && (d.backgroundColor = GC(g.backgroundColor, d.backgroundColor), d.color = GC(g.color, d.color), d.fontFamily = GC(g.fontFamily, d.fontFamily), d.fontSize =
                    GC(g.fontSize, d.fontSize), d.textShadow = GC(g.textShadow, d.textShadow), d.fontWeight = g.fontWeight, d.fontStyle = g.fontStyle, d.opacity = g.opacity, d.rubyTag = g.rubyTag, d.textCombineUpright = g.textCombineUpright, d.wrapLine = g.wrapLine);
                switch (f) {
                    case "br":
                        d = bc(d.startTime, d.endTime);
                        b.nestedCues.push(d);
                        return;
                    case "b":
                        d.fontWeight = 700;
                        break;
                    case "i":
                        d.fontStyle = "italic";
                        break;
                    case "u":
                        d.textDecoration.push("underline");
                        break;
                    case "font":
                        if (f = a.attributes.color) d.color = f;
                        break;
                    case "div":
                        f = a.attributes.time;
                        if (!f) break;
                        if (f = zC(new Vp(f))) d.startTime = f;
                        break;
                    case "ruby":
                    case "rp":
                    case "rt":
                        d.rubyTag = f
                }
            }
            e = a.children;
            if (eh(a) || 1 == e.length && eh(e[0])) for (c = hh(a).split("\n"), a = !0, c = t(c), e = c.next(); !e.done; e = c.next()) e = e.value, a || (a = bc(d.startTime, d.endTime), b.nestedCues.push(a)), 0 < e.length && (a = d.clone(), a.payload = Dd(e), b.nestedCues.push(a)), a = !1; else for (b.nestedCues.push(d), b = t(e), a = b.next(); !a.done; a = b.next()) FC(a.value, d, c)
        }

        function BC(a, b, c) {
            var d;
            if (d = /^align:(start|middle|center|end|left|right)$/.exec(b)) b = d[1], "middle" == b ? a.textAlign = Ub : a.textAlign = dc[b.toUpperCase()]; else if (d = /^vertical:(lr|rl)$/.exec(b)) a.writingMode = "lr" == d[1] ? "vertical-lr" : "vertical-rl"; else if (d = /^size:([\d.]+)%$/.exec(b)) a.size = Number(d[1]); else if (d = /^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(b)) a.position = Number(d[1]), d[2] && (b = d[2], a.positionAlign = "line-left" == b || "start" == b ? "line-left" : "line-right" ==
            b || "end" == b ? "line-right" : "center" == b || "middle" == b ? "center" : Tb); else if (d = /^region:(.*)$/.exec(b)) {
                if (b = HC(c, d[1])) a.region = b
            } else if (c = /^line:([\d.]+)%(?:,(start|end|center))?$/.exec(b)) a.lineInterpretation = 1, a.line = Number(c[1]), c[2] && (a.lineAlign = fc[c[2].toUpperCase()]); else if (c = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(b)) a.lineInterpretation = Xb, a.line = Number(c[1]), c[2] && (a.lineAlign = fc[c[2].toUpperCase()])
        }

        function HC(a, b) {
            a = a.filter(function (c) {
                return c.id == b
            });
            return a.length ? a[0] : null
        }

        function zC(a) {
            a = Xp(a, DC);
            if (null == a) return null;
            var b = Number(a[2]), c = Number(a[3]);
            return 59 < b || 59 < c ? null : Number(a[4]) / 1E3 + c + 60 * b + 3600 * (Number(a[1]) || 0)
        }

        S("shaka.text.VttTextParser", yC);
        yC.prototype.parseMedia = yC.prototype.parseMedia;
        yC.prototype.setManifestType = yC.prototype.setManifestType;
        yC.prototype.setSequenceMode = yC.prototype.setSequenceMode;
        yC.prototype.parseInit = yC.prototype.parseInit;
        var DC = /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;
        te["text/vtt"] = function () {
            return new yC
        };
        te['text/vtt; codecs="vtt"'] = function () {
            return new yC
        };
        te['text/vtt; codecs="wvtt"'] = function () {
            return new yC
        };

        function IC() {
            this.g = null
        }

        IC.prototype.parseInit = function (a) {
            var b = this, c = !1;
            (new Lg).box("moov", Qg).box("trak", Qg).box("mdia", Qg).S("mdhd", function (d) {
                d = Yi(d.reader, d.version);
                b.g = d.timescale
            }).box("minf", Qg).box("stbl", Qg).S("stsd", Ug).box("wvtt", function () {
                c = !0
            }).parse(a);
            if (!this.g) throw new T(2, 2, 2008);
            if (!c) throw new T(2, 2, 2008);
        };
        IC.prototype.setSequenceMode = function () {
        };
        IC.prototype.setManifestType = function () {
        };
        IC.prototype.parseMedia = function (a, b) {
            if (!a.length) return [];
            if (!this.g) throw new T(2, 2, 2008);
            var c = 0, d = [], e, f = [], g = !1, h = !1, k = !1, l = null;
            (new Lg).box("moof", Qg).box("traf", Qg).S("tfdt", function (D) {
                g = !0;
                c = Xi(D.reader, D.version).baseMediaDecodeTime
            }).S("tfhd", function (D) {
                l = Wi(D.reader, D.flags).qd
            }).S("trun", function (D) {
                h = !0;
                d = Zi(D.reader, D.version, D.flags).fh
            }).box("mdat", Xg(function (D) {
                k = !0;
                e = D
            })).parse(a, !1);
            if (!k && !g && !h) throw new T(2, 2, 2008);
            a = c;
            for (var m = new Ig(e, 0), n = t(d), p = n.next(); !p.done; p = n.next()) {
                p =
                    p.value;
                var q = p.$f || l, u = p.He ? c + p.He : a;
                a = u + (q || 0);
                var w = 0;
                do {
                    var v = m.P();
                    w += v;
                    var A = m.P(), y = null;
                    "vttc" == Pg(A) ? 8 < v && (y = m.rb(v - 8)) : m.skip(v - 8);
                    q && y && (v = JC(y, b.periodStart + u / this.g, b.periodStart + a / this.g), f.push(v))
                } while (p.sampleSize && w < p.sampleSize)
            }
            return f.filter(Be)
        };

        function JC(a, b, c) {
            var d, e, f;
            (new Lg).box("payl", Xg(function (g) {
                d = vd(g)
            })).box("iden", Xg(function (g) {
                e = vd(g)
            })).box("sttg", Xg(function (g) {
                f = vd(g)
            })).parse(a);
            return d ? KC(d, e, f, b, c) : null
        }

        function KC(a, b, c, d, e) {
            d = new Sb(d, e, "");
            CC(a, d, new Map);
            b && (d.id = b);
            if (c) for (a = new Vp(c), b = Yp(a); b;) BC(d, b, []), Wp(a), b = Yp(a);
            return d
        }

        S("shaka.text.Mp4VttParser", IC);
        IC.prototype.parseMedia = IC.prototype.parseMedia;
        IC.prototype.setManifestType = IC.prototype.setManifestType;
        IC.prototype.setSequenceMode = IC.prototype.setSequenceMode;
        IC.prototype.parseInit = IC.prototype.parseInit;
        te['application/mp4; codecs="wvtt"'] = function () {
            return new IC
        };

        function LC() {
        }

        LC.prototype.parseInit = function () {
        };
        LC.prototype.setSequenceMode = function () {
        };
        LC.prototype.setManifestType = function () {
        };
        LC.prototype.parseMedia = function (a) {
            var b = vd(a).replace(/\r+/g, "");
            b = b.trim();
            a = [];
            if ("" == b) return a;
            b = t(b.split("\n\n"));
            for (var c = b.next(); !c.done; c = b.next()) {
                c = c.value.split("\n");
                var d = new Vp(c[0]), e = MC(d), f = Xp(d, /,/g);
                d = MC(d);
                if (null == e || null == f || null == d) throw new T(2, 2, 2001, "Could not parse cue time range in SubViewer");
                a.push(new Sb(e, d, c.slice(1).join("\n").trim()))
            }
            return a
        };

        function MC(a) {
            a = Xp(a, /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g);
            if (null == a) return null;
            var b = Number(a[2]), c = Number(a[3]);
            return 59 < b || 59 < c ? null : Number(a[4]) / 1E3 + c + 60 * b + 3600 * (Number(a[1]) || 0)
        }

        S("shaka.text.SbvTextParser", LC);
        LC.prototype.parseMedia = LC.prototype.parseMedia;
        LC.prototype.setManifestType = LC.prototype.setManifestType;
        LC.prototype.setSequenceMode = LC.prototype.setSequenceMode;
        LC.prototype.parseInit = LC.prototype.parseInit;
        te["text/x-subviewer"] = function () {
            return new LC
        };

        function NC() {
            this.g = new yC
        }

        NC.prototype.parseInit = function () {
        };
        NC.prototype.setSequenceMode = function () {
        };
        NC.prototype.setManifestType = function () {
        };
        NC.prototype.parseMedia = function (a, b, c) {
            a = vd(a);
            a = OC(a);
            a = Ab(Ad(a));
            return this.g.parseMedia(a, b, c)
        };

        function OC(a) {
            var b = "WEBVTT\n\n";
            if ("" == a) return b;
            a = a.replace(/\r+/g, "");
            a = a.trim();
            a = t(a.split("\n\n"));
            for (var c = a.next(); !c.done; c = a.next()) c = c.value.split(/\n/), c[0].match(/\d+/) && c.shift(), c[0] = c[0].replace(/,/g, "."), b += c.join("\n").replace(/{b}/g, "<b>").replace(/{\/b}/g, "</b>").replace(/{i}/g, "<i>").replace(/{\/i}/g, "</i>").replace(/{u}/g, "<u>").replace(/{\/u}/g, "</u>") + "\n\n";
            return b
        }

        S("shaka.text.SrtTextParser", NC);
        NC.srt2webvtt = OC;
        NC.prototype.parseMedia = NC.prototype.parseMedia;
        NC.prototype.setManifestType = NC.prototype.setManifestType;
        NC.prototype.setSequenceMode = NC.prototype.setSequenceMode;
        NC.prototype.parseInit = NC.prototype.parseInit;
        te["text/srt"] = function () {
            return new NC
        };

        function PC() {
        }

        PC.prototype.parseInit = function () {
        };
        PC.prototype.setSequenceMode = function () {
        };
        PC.prototype.setManifestType = function () {
        };
        PC.prototype.parseMedia = function (a) {
            var b = "", c = "", d = null, e = null;
            e = vd(a).split(/\r?\n\s*\r?\n/);
            a = t(e);
            for (e = a.next(); !e.done; e = a.next()) {
                var f = e.value;
                e = f;
                if (f = QC.exec(f)) d = f[1], e = f[2];
                "V4 Styles" == d || "V4+ Styles" == d ? (b = e, b = c ? b + ("\n" + e) : e) : "Events" == d && (c = c ? c + ("\n" + e) : e)
            }
            d = [];
            e = null;
            b = t(b.split(/\r?\n/));
            for (f = b.next(); !f.done; f = b.next()) if (a = f.value, !/^\s*;/.test(a) && (f = RC.exec(a))) if (a = f[1].trim(), f = f[2].trim(), "Format" == a) e = f.split(SC); else if ("Style" == a) {
                a = f.split(SC);
                f = {};
                for (var g = 0; g < e.length &&
                g < a.length; g++) f[e[g]] = a[g];
                d.push(f)
            }
            e = [];
            b = null;
            a = {};
            c = t(c.split(/\r?\n/));
            for (f = c.next(); !f.done; a = {Ve: a.Ve}, f = c.next()) if (f = f.value, !/^\s*;/.test(f) && (g = RC.exec(f))) if (f = g[1].trim(), g = g[2].trim(), "Format" == f) b = g.split(SC); else if ("Dialogue" == f) {
                g = g.split(SC);
                f = {};
                for (var h = 0; h < b.length && h < g.length; h++) f[b[h]] = g[h];
                h = TC(f.Start);
                var k = TC(f.End);
                g = new Sb(h, k, g.slice(b.length - 1).join(",").replace(/\\N/g, "\n").replace(/\{[^}]+\}/g, ""));
                a.Ve = f.Style;
                (f = d.find(function (l) {
                    return function (m) {
                        return m.Name ==
                            l.Ve
                    }
                }(a))) && UC(g, f);
                e.push(g)
            }
            return e
        };

        function UC(a, b) {
            var c = b.Fontname;
            c && (a.fontFamily = c);
            if (c = b.Fontsize) a.fontSize = c + "px";
            if (c = b.PrimaryColour) if (c = VC(c)) a.color = c;
            if (c = b.BackColour) if (c = VC(c)) a.backgroundColor = c;
            b.Bold && (a.fontWeight = 700);
            b.Italic && (a.fontStyle = "italic");
            b.Underline && a.textDecoration.push("underline");
            if (c = b.Spacing) a.letterSpacing = c + "px";
            if (c = b.Alignment) switch (parseInt(c, 10)) {
                case 1:
                    a.displayAlign = Zb;
                    a.textAlign = "start";
                    break;
                case 2:
                    a.displayAlign = Zb;
                    a.textAlign = Ub;
                    break;
                case 3:
                    a.displayAlign = Zb;
                    a.textAlign = "end";
                    break;
                case 5:
                    a.displayAlign = "before";
                    a.textAlign = "start";
                    break;
                case 6:
                    a.displayAlign = "before";
                    a.textAlign = Ub;
                    break;
                case 7:
                    a.displayAlign = "before";
                    a.textAlign = "end";
                    break;
                case 9:
                    a.displayAlign = "center";
                    a.textAlign = "start";
                    break;
                case 10:
                    a.displayAlign = "center";
                    a.textAlign = Ub;
                    break;
                case 11:
                    a.displayAlign = "center", a.textAlign = "end"
            }
            if (b = b.AlphaLevel) a.opacity = parseFloat(b)
        }

        function VC(a) {
            a = parseInt(a.replace("&H", ""), 16);
            return 0 <= a ? "rgba(" + (a & 255) + "," + (a >> 8 & 255) + "," + (a >> 16 & 255) + "," + (a >> 24 & 255 ^ 255) / 255 + ")" : null
        }

        function TC(a) {
            a = WC.exec(a);
            return 3600 * (a[1] ? parseInt(a[1].replace(":", ""), 10) : 0) + 60 * parseInt(a[2], 10) + parseFloat(a[3])
        }

        S("shaka.text.SsaTextParser", PC);
        PC.prototype.parseMedia = PC.prototype.parseMedia;
        PC.prototype.setManifestType = PC.prototype.setManifestType;
        PC.prototype.setSequenceMode = PC.prototype.setSequenceMode;
        PC.prototype.parseInit = PC.prototype.parseInit;
        var QC = /^\s*\[([^\]]+)\]\r?\n([\s\S]*)/, RC = /^\s*([^:]+):\s*(.*)/, SC = /\s*,\s*/,
            WC = /^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
        te["text/x-ssa"] = function () {
            return new PC
        };

        function XC(a, b) {
            var c = a[b + 1] & 1 ? 7 : 9;
            return b + c <= a.length && (a = ((a[b + 3] & 3) << 11 | a[b + 4] << 3 | (a[b + 5] & 224) >>> 5) - c, 0 < a) ? {
                le: c,
                ba: a
            } : null
        }

        function YC(a, b) {
            var c = [96E3, 88200, 64E3, 48E3, 44100, 32E3, 24E3, 22050, 16E3, 12E3, 11025, 8E3, 7350],
                d = (a[b + 2] & 60) >>> 2;
            if (d > c.length - 1) return null;
            var e = ((a[b + 2] & 192) >>> 6) + 1, f = (a[b + 2] & 1) << 2;
            f |= (a[b + 3] & 192) >>> 6;
            return {sampleRate: c[d], channelCount: f, Na: "mp4a.40." + e}
        }

        function ZC(a, b) {
            if (b + 1 < a.length && 255 === a[b] && 240 === (a[b + 1] & 246)) {
                var c = a[b + 1] & 1 ? 7 : 9;
                if (b + c >= a.length) return !1;
                var d = (a[b + 3] & 3) << 11 | a[b + 4] << 3 | (a[b + 5] & 224) >>> 5;
                if (d <= c) return !1;
                b += d;
                return b === a.length || b + 1 < a.length && 255 === a[b] && 240 === (a[b + 1] & 246)
            }
            return !1
        }

        function $C(a, b) {
            switch (a) {
                case "mp4a.40.2":
                    if (1 === b) return new Uint8Array([0, 200, 0, 128, 35, 128]);
                    if (2 === b) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                    if (3 === b) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                    if (4 === b) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
                    if (5 === b) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
                    if (6 === b) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144,
                        2, 0, 178, 0, 32, 8, 224]);
                    break;
                default:
                    if (1 === b) return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                    if (2 === b || 3 === b) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94])
            }
            return null
        };

        function aD(a) {
            this.i = a;
            this.h = 0;
            this.g = new Map
        }

        r = aD.prototype;
        r.destroy = function () {
            this.g.clear()
        };
        r.isSupported = function (a) {
            return "audio/aac" == a.toLowerCase().split(";")[0] ? nb(this.convertCodecs("audio", a)) : !1
        };
        r.convertCodecs = function (a, b) {
            return "audio/aac" == b.toLowerCase().split(";")[0] ? 'audio/mp4; codecs="' + (oe(b) || "mp4a.40.2") + '"' : b
        };
        r.getOriginalMimeType = function () {
            return this.i
        };
        r.transmux = function (a, b, c, d) {
            for (var e = Ab(a), f = Vi(e), g = f.length; g < e.length && !ZC(e, g); g++) ;
            a = 1E3 * c.endTime;
            f = Ui(f);
            f.length && c && (f = f.find(function (m) {
                return "com.apple.streaming.transportStreamTimestamp" === m.description
            })) && (a = f.data);
            f = YC(e, g);
            if (!f) return Promise.reject(new T(2, 3, 3018, c ? c.M()[0] : null));
            b.audioSamplingRate = f.sampleRate;
            b.channelsCount = f.channelCount;
            for (var h = []; g < e.length;) {
                var k = XC(e, g);
                if (!k) return Promise.reject(new T(2, 3, 3018, c ? c.M()[0] : null));
                var l = k.le + k.ba;
                g + l <= e.length && h.push({
                    data: e.subarray(g +
                        k.le, g + l),
                    size: k.ba,
                    duration: 1024,
                    eb: 0,
                    flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: 2, ib: 0}
                });
                g += l
            }
            e = f.sampleRate;
            a = Math.floor(a * e / 1E3);
            d = {
                id: b.id,
                type: "audio",
                codecs: f.Na,
                encrypted: b.encrypted && 0 < b.drmInfos.length,
                timescale: e,
                duration: d,
                ab: [],
                ma: new Uint8Array([]),
                wa: new Uint8Array([]),
                Ba: 0,
                Ca: 0,
                data: {sb: this.h, baseMediaDecodeTime: a, Za: h},
                stream: b
            };
            d = new nx([d]);
            c = b.id + "_" + c.i;
            this.g.has(c) ? b = this.g.get(c) : (b = tx(d), this.g.set(c, b));
            c = Kx(d);
            this.h++;
            b = Md(b, c);
            return Promise.resolve(b)
        };
        S("shaka.transmuxer.AacTransmuxer", aD);
        aD.prototype.transmux = aD.prototype.transmux;
        aD.prototype.getOriginalMimeType = aD.prototype.getOriginalMimeType;
        aD.prototype.convertCodecs = aD.prototype.convertCodecs;
        aD.prototype.isSupported = aD.prototype.isSupported;
        aD.prototype.destroy = aD.prototype.destroy;
        kc("audio/aac", function () {
            return new aD("audio/aac")
        }, sc);

        function bD(a, b) {
            if (b + 8 > a.length || 11 !== a[b] || 119 !== a[b + 1]) return null;
            var c = a[b + 4] >> 6;
            if (3 <= c) return null;
            var d = a[b + 4] & 63,
                e = 2 * [64, 69, 96, 64, 70, 96, 80, 87, 120, 80, 88, 120, 96, 104, 144, 96, 105, 144, 112, 121, 168, 112, 122, 168, 128, 139, 192, 128, 140, 192, 160, 174, 240, 160, 175, 240, 192, 208, 288, 192, 209, 288, 224, 243, 336, 224, 244, 336, 256, 278, 384, 256, 279, 384, 320, 348, 480, 320, 349, 480, 384, 417, 576, 384, 418, 576, 448, 487, 672, 448, 488, 672, 512, 557, 768, 512, 558, 768, 640, 696, 960, 640, 697, 960, 768, 835, 1152, 768, 836, 1152, 896, 975, 1344, 896, 976, 1344,
                    1024, 1114, 1536, 1024, 1115, 1536, 1152, 1253, 1728, 1152, 1254, 1728, 1280, 1393, 1920, 1280, 1394, 1920][3 * d + c];
            if (b + e > a.length) return null;
            var f = a[b + 6] >> 5, g = 0;
            2 === f ? g += 2 : (f & 1 && 1 !== f && (g += 2), f & 4 && (g += 2));
            g = (a[b + 6] << 8 | a[b + 7]) >> 12 - g & 1;
            var h = a[b + 5] & 7;
            a = new Uint8Array([c << 6 | a[b + 5] >> 3 << 1 | h >> 2, (h & 3) << 6 | f << 3 | g << 2 | d >> 4, d << 4 & 224]);
            return {sampleRate: [48E3, 44100, 32E3][c], channelCount: [2, 1, 2, 3, 3, 4, 4, 5][f] + g, ma: a, ba: e}
        }

        function cD(a, b) {
            if (11 === a[b] && 119 === a[b + 1]) {
                var c = 0, d = 5;
                b += d;
                for (var e, f; 0 < d;) {
                    f = a[b];
                    var g = Math.min(d, 8), h = 8 - g;
                    e = 4278190080 >>> 24 + h << h;
                    e = (f & e) >> h;
                    c = c ? c << g | e : e;
                    b += 1;
                    d -= g
                }
                if (16 > c) return !0
            }
            return !1
        };

        function dD(a) {
            this.i = a;
            this.h = 0;
            this.g = new Map
        }

        r = dD.prototype;
        r.destroy = function () {
            this.g.clear()
        };
        r.isSupported = function (a) {
            return "audio/ac3" == a.toLowerCase().split(";")[0] ? nb(this.convertCodecs("audio", a)) : !1
        };
        r.convertCodecs = function (a, b) {
            return "audio/ac3" == b.toLowerCase().split(";")[0] ? 'audio/mp4; codecs="ac-3"' : b
        };
        r.getOriginalMimeType = function () {
            return this.i
        };
        r.transmux = function (a, b, c, d) {
            a = Ab(a);
            for (var e = Vi(a), f = e.length; f < a.length && !cD(a, f); f++) ;
            var g = 1E3 * c.endTime;
            e = Ui(e);
            e.length && c && (e = e.find(function (m) {
                return "com.apple.streaming.transportStreamTimestamp" === m.description
            })) && (g = e.data);
            e = 0;
            for (var h = new Uint8Array([]), k = []; f < a.length;) {
                var l = bD(a, f);
                if (!l) return Promise.reject(new T(2, 3, 3018, c ? c.M()[0] : null));
                b.audioSamplingRate = l.sampleRate;
                b.channelsCount = l.channelCount;
                e = l.sampleRate;
                h = l.ma;
                k.push({
                    data: a.subarray(f, f + l.ba), size: l.ba, duration: 1536,
                    eb: 0, flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: 2, ib: 0}
                });
                f += l.ba
            }
            a = Math.floor(g * e / 1E3);
            d = {
                id: b.id,
                type: "audio",
                codecs: "ac-3",
                encrypted: b.encrypted && 0 < b.drmInfos.length,
                timescale: e,
                duration: d,
                ab: [],
                ma: h,
                wa: new Uint8Array([]),
                Ba: 0,
                Ca: 0,
                data: {sb: this.h, baseMediaDecodeTime: a, Za: k},
                stream: b
            };
            d = new nx([d]);
            c = b.id + "_" + c.i;
            this.g.has(c) ? b = this.g.get(c) : (b = tx(d), this.g.set(c, b));
            c = Kx(d);
            this.h++;
            b = Md(b, c);
            return Promise.resolve(b)
        };
        S("shaka.transmuxer.Ac3Transmuxer", dD);
        dD.prototype.transmux = dD.prototype.transmux;
        dD.prototype.getOriginalMimeType = dD.prototype.getOriginalMimeType;
        dD.prototype.convertCodecs = dD.prototype.convertCodecs;
        dD.prototype.isSupported = dD.prototype.isSupported;
        dD.prototype.destroy = dD.prototype.destroy;
        kc("audio/ac3", function () {
            return new dD("audio/ac3")
        }, sc);

        function eD(a, b) {
            if (b + 8 > a.length || 2935 !== (a[b] << 8 | a[b + 1] << 0)) return null;
            var c = new ej(a.subarray(b + 2));
            gj(c, 2);
            gj(c, 3);
            var d = hj(c, 11) + 1 << 1, e = hj(c, 2);
            if (3 == e) {
                e = hj(c, 2);
                e = [24E3, 22060, 16E3][e];
                var f = 3
            } else e = [48E3, 44100, 32E3][e], f = hj(c, 2);
            var g = hj(c, 3), h = hj(c, 1);
            c = hj(c, 5);
            if (b + d > a.byteLength) return null;
            a = Math.floor(d * e / (16 * [1, 2, 3, 6][f]));
            a = new Uint8Array([(a & 8160) >> 5, (a & 31) << 3, e << 6 | c << 1 | 0, 0 | g << 1 | h << 0, 0]);
            return {sampleRate: e, channelCount: [2, 1, 2, 3, 3, 4, 4, 5][g] + h, ma: a, ba: d}
        };

        function fD(a) {
            this.i = a;
            this.h = 0;
            this.g = new Map
        }

        r = fD.prototype;
        r.destroy = function () {
            this.g.clear()
        };
        r.isSupported = function (a) {
            return "audio/ec3" == a.toLowerCase().split(";")[0] ? nb(this.convertCodecs("audio", a)) : !1
        };
        r.convertCodecs = function (a, b) {
            return "audio/ec3" == b.toLowerCase().split(";")[0] ? 'audio/mp4; codecs="ec-3"' : b
        };
        r.getOriginalMimeType = function () {
            return this.i
        };
        r.transmux = function (a, b, c, d) {
            a = Ab(a);
            for (var e = Vi(a), f = e.length; f < a.length && 2935 !== (a[f] << 8 | a[f + 1] << 0); f++) ;
            var g = 1E3 * c.endTime;
            e = Ui(e);
            e.length && c && (e = e.find(function (m) {
                return "com.apple.streaming.transportStreamTimestamp" === m.description
            })) && (g = e.data);
            e = 0;
            for (var h = new Uint8Array([]), k = []; f < a.length;) {
                var l = eD(a, f);
                if (!l) return Promise.reject(new T(2, 3, 3018, c ? c.M()[0] : null));
                b.audioSamplingRate = l.sampleRate;
                b.channelsCount = l.channelCount;
                e = l.sampleRate;
                h = l.ma;
                k.push({
                    data: a.subarray(f, f + l.ba),
                    size: l.ba, duration: 1536, eb: 0, flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: 2, ib: 0}
                });
                f += l.ba
            }
            a = Math.floor(g * e / 1E3);
            d = {
                id: b.id,
                type: "audio",
                codecs: "ec-3",
                encrypted: b.encrypted && 0 < b.drmInfos.length,
                timescale: e,
                duration: d,
                ab: [],
                ma: h,
                wa: new Uint8Array([]),
                Ba: 0,
                Ca: 0,
                data: {sb: this.h, baseMediaDecodeTime: a, Za: k},
                stream: b
            };
            d = new nx([d]);
            c = b.id + "_" + c.i;
            this.g.has(c) ? b = this.g.get(c) : (b = tx(d), this.g.set(c, b));
            c = Kx(d);
            this.h++;
            b = Md(b, c);
            return Promise.resolve(b)
        };
        S("shaka.transmuxer.Ec3Transmuxer", fD);
        fD.prototype.transmux = fD.prototype.transmux;
        fD.prototype.getOriginalMimeType = fD.prototype.getOriginalMimeType;
        fD.prototype.convertCodecs = fD.prototype.convertCodecs;
        fD.prototype.isSupported = fD.prototype.isSupported;
        fD.prototype.destroy = fD.prototype.destroy;
        kc("audio/ec3", function () {
            return new fD("audio/ec3")
        }, sc);

        function gD(a) {
            if (!a.length) return null;
            var b = a.find(function (w) {
                return 7 == w.type
            });
            a = a.find(function (w) {
                return 8 == w.type
            });
            if (!b || !a) return null;
            var c = new ej(b.data), d = mj(c);
            mj(c);
            mj(c);
            jj(c);
            if (hD.includes(d) && (d = V(c), 3 === d && gj(c, 1), jj(c), jj(c), gj(c, 1), lj(c))) {
                d = 3 !== d ? 8 : 12;
                for (var e = 0; e < d; e++) lj(c) && (6 > e ? nj(c, 16) : nj(c, 64))
            }
            jj(c);
            d = V(c);
            if (0 === d) V(c); else if (1 === d) for (gj(c, 1), jj(c), jj(c), d = V(c), e = 0; e < d; e++) jj(c);
            jj(c);
            gj(c, 1);
            var f = V(c), g = V(c), h = hj(c, 1);
            0 === h && gj(c, 1);
            gj(c, 1);
            var k = 0, l = 0, m = 0, n = 0;
            lj(c) && (k = V(c), l = V(c), m = V(c), n = V(c));
            e = d = 1;
            if (lj(c) && lj(c)) {
                var p = mj(c), q = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2],
                    u = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
                0 < p && 16 >= p ? (d = q[p - 1], e = u[p - 1]) : 255 === p && (d = hj(c, 16), e = hj(c, 16))
            }
            c = (2 - h) * (g + 1) * 16 - 2 * m - 2 * n;
            f = 16 * (f + 1) - 2 * k - 2 * l;
            k = [];
            b = b.fullData;
            k.push(b.byteLength >>> 8 & 255);
            k.push(b.byteLength & 255);
            k = k.concat.apply(k, x(b));
            b = [];
            a = a.fullData;
            b.push(a.byteLength >>> 8 & 255);
            b.push(a.byteLength & 255);
            b = b.concat.apply(b, x(a));
            a = new Uint8Array([1, k[3], k[4],
                k[5], 255, 225].concat(k, [1], b));
            return {height: c, width: f, wa: a, Ba: d, Ca: e}
        }

        function iD(a) {
            var b = !1, c = [], d = a.find(function (k) {
                return 7 == k.type
            }), e = !1;
            a = t(a);
            for (var f = a.next(); !f.done; f = a.next()) {
                f = f.value;
                var g = !1;
                switch (f.type) {
                    case 1:
                        g = e = !0;
                        var h = f.data;
                        d && 4 < h.length && (h = oj(new ej(h)), 2 === h || 4 === h || 7 === h || 9 === h) && (b = !0);
                        break;
                    case 5:
                        b = g = e = !0;
                        break;
                    case 6:
                        g = !0;
                        break;
                    case 7:
                        g = !0;
                        break;
                    case 8:
                        g = !0;
                        break;
                    case 9:
                        e = g = !0;
                        break;
                    case 12:
                        g = !0;
                        break;
                    default:
                        g = !1
                }
                e && g && (g = f.fullData.byteLength, h = new Uint8Array(4), h[0] = g >> 24 & 255, h[1] = g >> 16 & 255, h[2] = g >> 8 & 255, h[3] = g & 255, c.push(h), c.push(f.fullData))
            }
            return c.length ?
                {data: Md.apply(Ed, x(c)), Cd: b} : null
        }

        var hD = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];

        function jD(a) {
            if (!a.length) return null;
            var b = a.find(function (g) {
                return 32 == g.type
            }), c = a.find(function (g) {
                return 33 == g.type
            }), d = a.find(function (g) {
                return 34 == g.type
            });
            if (!b || !c || !d) return null;
            var e = kD(b.fullData);
            a = lD(c.fullData);
            var f = mD(d.fullData);
            b = nD(b.fullData, c.fullData, d.fullData, {
                Qf: e.Qf,
                kg: e.kg,
                Bf: a.Bf,
                Cf: a.Cf,
                vf: a.vf,
                Af: a.Af,
                wf: a.wf,
                xf: a.xf,
                yf: a.yf,
                zf: a.zf,
                nf: a.nf,
                pf: a.pf,
                qf: a.qf,
                rf: a.rf,
                tf: a.tf,
                uf: a.uf,
                hf: a.hf,
                ve: a.ve,
                ff: a.ff,
                df: a.df,
                cf: a.cf,
                Tf: f.Tf
            });
            return {
                height: a.height, width: a.width,
                wa: b, Ba: a.Yi, Ca: a.Xi
            }
        }

        function kD(a) {
            var b = new ej(a, !0);
            mj(b);
            mj(b);
            hj(b, 4);
            hj(b, 2);
            hj(b, 6);
            a = hj(b, 3);
            b = lj(b);
            return {Qf: a + 1, kg: b}
        }

        function lD(a) {
            a = new ej(a, !0);
            mj(a);
            mj(a);
            var b = 0, c = 0, d = 0, e = 0;
            hj(a, 4);
            var f = hj(a, 3);
            lj(a);
            for (var g = hj(a, 2), h = hj(a, 1), k = hj(a, 5), l = mj(a), m = mj(a), n = mj(a), p = mj(a), q = mj(a), u = mj(a), w = mj(a), v = mj(a), A = mj(a), y = mj(a), D = mj(a), z = [], B = [], C = 0; C < f; C++) z.push(lj(a)), B.push(lj(a));
            if (0 < f) for (C = f; 8 > C; C++) hj(a, 2);
            for (C = 0; C < f; C++) z[C] && hj(a, 88), B[C] && mj(a);
            V(a);
            z = V(a);
            3 == z && hj(a, 1);
            B = V(a);
            C = V(a);
            lj(a) && (b += V(a), c += V(a), d += V(a), e += V(a));
            var F = V(a), I = V(a), L = V(a);
            if (lj(a)) for (var J = 0; J <= f; J++) V(a), V(a), V(a); else V(a),
                V(a), V(a);
            V(a);
            V(a);
            V(a);
            V(a);
            V(a);
            V(a);
            if (lj(a) && lj(a)) for (J = 0; 4 > J; J++) for (var E = 0; E < (3 === J ? 2 : 6); E++) if (lj(a)) {
                var K = Math.min(64, 1 << 4 + (J << 1));
                1 < J && kj(a);
                for (var N = 0; N < K; N++) kj(a)
            } else V(a);
            lj(a);
            lj(a);
            lj(a) && (mj(a), V(a), V(a), lj(a));
            J = V(a);
            for (K = E = 0; K < J; K++) if (N = !1, 0 !== K && (N = lj(a)), N) {
                K === J && V(a);
                lj(a);
                V(a);
                for (var M = N = 0; M <= E; M++) {
                    var P = lj(a), R = !1;
                    P || (R = lj(a));
                    (P || R) && N++
                }
                E = N
            } else {
                M = V(a);
                N = V(a);
                E = M + N;
                for (P = 0; P < M; P++) V(a), lj(a);
                for (M = 0; M < N; M++) V(a), lj(a)
            }
            if (lj(a)) for (J = V(a), E = 0; E < J; E++) {
                for (K = 0; K <
                L + 4; K++) hj(a, 1);
                hj(a, 1)
            }
            J = L = 1;
            E = 0;
            lj(a);
            lj(a);
            if (lj(a)) {
                lj(a) && (K = mj(a), N = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2], M = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1], 0 < K && 16 >= K ? (L = N[K - 1], J = M[K - 1]) : 255 === K && (L = hj(a, 16), J = hj(a, 16)));
                lj(a) && lj(a);
                lj(a) && (hj(a, 3), lj(a), lj(a) && (mj(a), mj(a), mj(a)));
                lj(a) && (V(a), V(a));
                lj(a);
                lj(a);
                lj(a);
                if (K = lj(a)) V(a), V(a), V(a), V(a);
                if (lj(a) && (hj(a, 32), hj(a, 32), lj(a) && V(a), lj(a))) {
                    M = !1;
                    K = lj(a);
                    N = lj(a);
                    if (K || N) {
                        if (M = lj(a)) mj(a), hj(a, 5), lj(a), hj(a, 5);
                        hj(a, 4);
                        hj(a, 4);
                        M &&
                        hj(a, 4);
                        hj(a, 5);
                        hj(a, 5);
                        hj(a, 5)
                    }
                    for (P = 0; P <= f; P++) {
                        var Q = !0;
                        R = 1;
                        lj(a) || (Q = lj(a));
                        var W = !1;
                        Q ? V(a) : W = lj(a);
                        W || (R = V(a) + 1);
                        if (K) {
                            for (Q = 0; Q < R; Q++) V(a), V(a), M && (V(a), V(a));
                            lj(a)
                        }
                        if (N) {
                            for (Q = 0; Q < R; Q++) V(a), V(a), M && (V(a), V(a));
                            lj(a)
                        }
                    }
                }
                lj(a) && (lj(a), lj(a), lj(a), E = V(a), V(a), V(a), V(a), V(a))
            }
            return {
                vf: D,
                Bf: g,
                Cf: h,
                Af: k,
                wf: l,
                xf: m,
                yf: n,
                zf: p,
                nf: q,
                pf: u,
                qf: w,
                rf: v,
                tf: A,
                uf: y,
                ve: E,
                hf: 0,
                ff: z,
                df: F,
                cf: I,
                width: B - (b + c) * (1 === z || 2 === z ? 2 : 1),
                height: C - (d + e) * (1 === z ? 2 : 1),
                Yi: L,
                Xi: J
            }
        }

        function mD(a) {
            var b = new ej(a, !0);
            mj(b);
            mj(b);
            V(b);
            V(b);
            lj(b);
            lj(b);
            hj(b, 3);
            lj(b);
            lj(b);
            V(b);
            V(b);
            kj(b);
            lj(b);
            lj(b);
            lj(b) && V(b);
            kj(b);
            kj(b);
            lj(b);
            lj(b);
            lj(b);
            lj(b);
            a = lj(b);
            b = lj(b);
            var c = 1;
            b && a ? c = 0 : b ? c = 3 : a && (c = 2);
            return {Tf: c}
        }

        function nD(a, b, c, d) {
            var e = new Uint8Array(23 + (5 + a.byteLength) + (5 + b.byteLength) + (5 + c.byteLength));
            e[0] = 1;
            e[1] = (d.Bf & 3) << 6 | (d.Cf ? 1 : 0) << 5 | d.Af & 31;
            e[2] = d.wf;
            e[3] = d.xf;
            e[4] = d.yf;
            e[5] = d.zf;
            e[6] = d.nf;
            e[7] = d.pf;
            e[8] = d.qf;
            e[9] = d.rf;
            e[10] = d.tf;
            e[11] = d.uf;
            e[12] = d.vf;
            e[13] = 240 | (d.ve & 3840) >> 8;
            e[14] = d.ve & 255;
            e[15] = 252 | d.Tf & 3;
            e[16] = 252 | d.ff & 3;
            e[17] = 248 | d.df & 7;
            e[18] = 248 | d.cf & 7;
            e[19] = 0;
            e[20] = 0;
            e[21] = (d.hf & 3) << 6 | (d.Qf & 7) << 3 | (d.kg ? 1 : 0) << 2 | 3;
            e[22] = 3;
            e[23] = 160;
            e[24] = 0;
            e[25] = 1;
            e[26] = (a.byteLength & 65280) >> 8;
            e[27] = (a.byteLength &
                255) >> 0;
            e.set(a, 28);
            e[23 + (5 + a.byteLength)] = 161;
            e[a.byteLength + 29] = 0;
            e[a.byteLength + 30] = 1;
            e[a.byteLength + 31] = (b.byteLength & 65280) >> 8;
            e[a.byteLength + 32] = (b.byteLength & 255) >> 0;
            e.set(b, a.byteLength + 33);
            e[23 + (a.byteLength + 10 + b.byteLength)] = 162;
            e[a.byteLength + 10 + b.byteLength + 24] = 0;
            e[a.byteLength + 10 + b.byteLength + 25] = 1;
            e[a.byteLength + 10 + b.byteLength + 26] = (c.byteLength & 65280) >> 8;
            e[a.byteLength + 10 + b.byteLength + 27] = (c.byteLength & 255) >> 0;
            e.set(c, a.byteLength + 10 + b.byteLength + 28);
            return e
        };

        function oD(a, b) {
            var c = a[b + 1] >> 3 & 3, d = a[b + 1] >> 1 & 3, e = a[b + 2] >> 4 & 15, f = a[b + 2] >> 2 & 3;
            if (1 !== c && 0 !== e && 15 !== e && 3 !== f) {
                var g = a[b + 3] >> 6;
                e = 1E3 * pD[14 * (3 === c ? 3 - d : 3 === d ? 3 : 4) + e - 1];
                f = qD[3 * (3 === c ? 0 : 2 === c ? 1 : 2) + f];
                c = rD[c][d];
                var h = sD[d], k = Math.floor(c * e / f + (a[b + 2] >> 1 & 1)) * h,
                    l = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
                (l = l ? parseInt(l[1], 10) : 0) && 87 >= l && 2 === d && 224E3 <= e && 0 === g && (a[b + 3] |= 128);
                return {sampleRate: f, channelCount: 3 === g ? 1 : 2, ba: k, Wi: 8 * c * h}
            }
            return null
        }

        function tD(a, b) {
            return 255 === a[b] && 224 === (a[b + 1] & 224) && 0 !== (a[b + 1] & 6)
        }

        function uD(a, b) {
            if (b + 1 < a.length && tD(a, b)) {
                var c = oD(a, b), d = 4;
                c && c.ba && (d = c.ba);
                b += d;
                return b === a.length || b + 1 < a.length && tD(a, b)
            }
            return !1
        }

        var pD = [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160],
            qD = [44100, 48E3, 32E3, 22050, 24E3, 16E3, 11025, 12E3, 8E3],
            rD = [[0, 72, 144, 12], [0, 0, 0, 0], [0, 72, 144, 12], [0, 144, 144, 12]], sD = [0, 1, 1, 4];

        function vD(a) {
            this.i = a;
            this.h = 0;
            this.g = new Map
        }

        r = vD.prototype;
        r.destroy = function () {
            this.g.clear()
        };
        r.isSupported = function (a) {
            return "audio/mpeg" == a.toLowerCase().split(";")[0] ? nb(this.convertCodecs("audio", a)) : !1
        };
        r.convertCodecs = function (a, b) {
            return "audio/mpeg" == b.toLowerCase().split(";")[0] ? 'audio/mp4; codecs="mp3"' : b
        };
        r.getOriginalMimeType = function () {
            return this.i
        };
        r.transmux = function (a, b, c, d) {
            for (var e = Ab(a), f = Vi(e).length; f < e.length && !uD(e, f); f++) ;
            var g;
            for (a = []; f < e.length;) {
                var h = oD(e, f);
                if (!h) return Promise.reject(new T(2, 3, 3018, c ? c.M()[0] : null));
                g || (g = h);
                f + h.ba <= e.length && a.push({
                    data: e.subarray(f, f + h.ba),
                    size: h.ba,
                    duration: 1152,
                    eb: 0,
                    flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: 2, ib: 0}
                });
                f += h.ba
            }
            if (!g) return Promise.reject(new T(2, 3, 3018, c ? c.M()[0] : null));
            e = 9E4 * g.Wi / g.sampleRate * this.h;
            d = {
                id: b.id,
                type: "audio",
                codecs: "mp3",
                encrypted: b.encrypted && 0 < b.drmInfos.length,
                timescale: g.sampleRate,
                duration: d,
                ab: [],
                ma: new Uint8Array([]),
                wa: new Uint8Array([]),
                Ba: 0,
                Ca: 0,
                data: {sb: this.h, baseMediaDecodeTime: e, Za: a},
                stream: b
            };
            d = new nx([d]);
            c = b.id + "_" + c.i;
            this.g.has(c) ? b = this.g.get(c) : (b = tx(d), this.g.set(c, b));
            c = Kx(d);
            this.h++;
            b = Md(b, c);
            return Promise.resolve(b)
        };
        S("shaka.transmuxer.Mp3Transmuxer", vD);
        vD.prototype.transmux = vD.prototype.transmux;
        vD.prototype.getOriginalMimeType = vD.prototype.getOriginalMimeType;
        vD.prototype.convertCodecs = vD.prototype.convertCodecs;
        vD.prototype.isSupported = vD.prototype.isSupported;
        vD.prototype.destroy = vD.prototype.destroy;
        kc("audio/mpeg", function () {
            return new vD("audio/mpeg")
        }, sc);

        function wD(a) {
            this.h = a;
            this.g = null
        }

        r = wD.prototype;
        r.destroy = function () {
        };
        r.isSupported = function (a) {
            if ("video/mp2t" != a.toLowerCase().split(";")[0]) return !1;
            var b = oe(a).split(","), c = Td("audio", b);
            b = Td("video", b);
            return !c || b || "mp3" != ge(c) ? !1 : nb(this.convertCodecs("audio", a))
        };
        r.convertCodecs = function (a, b) {
            return "video/mp2t" == b.toLowerCase().split(";")[0] ? "audio/mpeg" : b
        };
        r.getOriginalMimeType = function () {
            return this.h
        };
        r.transmux = function (a, b, c, d, e) {
            this.g ? this.g.clearData() : this.g = new pj;
            a = Ab(a);
            a = this.g.parse(a);
            if ("mp3" != a.sd().audio || "audio" != e) return Promise.reject(new T(2, 3, 3018, c ? c.M()[0] : null));
            c = new Uint8Array([]);
            e = t(a.Wb());
            for (a = e.next(); !a.done; a = e.next()) if (a = a.value.data) for (b = 0; b < a.length;) (d = oD(a, b)) ? (b + d.ba <= a.length && (c = Md(c, a.subarray(b, b + d.ba))), b += d.ba) : b++;
            return Promise.resolve(c)
        };
        S("shaka.transmuxer.MpegTsTransmuxer", wD);
        wD.prototype.transmux = wD.prototype.transmux;
        wD.prototype.getOriginalMimeType = wD.prototype.getOriginalMimeType;
        wD.prototype.convertCodecs = wD.prototype.convertCodecs;
        wD.prototype.isSupported = wD.prototype.isSupported;
        wD.prototype.destroy = wD.prototype.destroy;
        kc("video/mp2t", function () {
            return new wD("video/mp2t")
        }, rc);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/
        function xD(a) {
            this.h = a;
            (this.g = vv.get("ISOBoxer")()) && yD(this)
        }

        function yD(a) {
            function b() {
                this._procFullBox();
                this.flags & 1 && (this._procField("AlgorithmID", "uint", 24), this._procField("IV_size", "uint", 8), this._procFieldArray("KID", 16, "uint", 8));
                this._procField("sample_count", "uint", 32);
                this._procEntries("entry", this.sample_count, function (c) {
                    this._procEntryField(c, "InitializationVector", "data", 8);
                    this.flags & 2 && (this._procEntryField(c, "NumberOfEntries", "uint", 16), this._procSubEntries(c, "clearAndCryptedData", c.NumberOfEntries, function (d) {
                        this._procEntryField(d, "BytesOfClearData",
                            "uint", 16);
                        this._procEntryField(d, "BytesOfEncryptedData", "uint", 32)
                    }))
                })
            }

            a.g.addBoxProcessor("saio", function () {
                this._procFullBox();
                this.flags & 1 && (this._procField("aux_info_type", "uint", 32), this._procField("aux_info_type_parameter", "uint", 32));
                this._procField("entry_count", "uint", 32);
                this._procFieldArray("offset", this.entry_count, "uint", 1 === this.version ? 64 : 32)
            });
            a.g.addBoxProcessor("saiz", function () {
                this._procFullBox();
                this.flags & 1 && (this._procField("aux_info_type", "uint", 32), this._procField("aux_info_type_parameter",
                    "uint", 32));
                this._procField("default_sample_info_size", "uint", 8);
                this._procField("sample_count", "uint", 32);
                0 === this.default_sample_info_size && this._procFieldArray("sample_info_size", this.sample_count, "uint", 8)
            });
            a.g.addBoxProcessor("senc", b);
            a.g.addBoxProcessor("uuid", function () {
                for (var c = !0, d = 0; 16 > d; d++) this.usertype[d] !== zD[d] && (c = !1);
                c && (this._parsing && (this.type = "sepiff"), b.call(this))
            })
        }

        r = xD.prototype;
        r.destroy = function () {
        };
        r.isSupported = function (a, b) {
            var c = a.startsWith("mss/");
            if (!this.g || !c) return !1;
            if (b) return nb(this.convertCodecs(b, a));
            b = this.convertCodecs("audio", a);
            a = this.convertCodecs("video", a);
            return nb(b) || nb(a)
        };
        r.convertCodecs = function (a, b) {
            return b.replace("mss/", "")
        };
        r.getOriginalMimeType = function () {
            return this.h
        };
        r.transmux = function (a, b, c) {
            if (!c) return Promise.resolve(Ab(a));
            if (!b.mssPrivateData) return Promise.reject(new T(2, 3, 3020, c ? c.M()[0] : null));
            try {
                var d, e = this.g.parseBuffer(a), f = e.fetch("tfhd");
                f.track_ID = b.id + 1;
                var g = e.fetch("tfdt"), h = e.fetch("traf");
                null === g && (g = this.g.createFullBox("tfdt", h, f), g.version = 1, g.flags = 0, g.baseMediaDecodeTime = Math.floor(c.startTime * b.mssPrivateData.timescale));
                var k = e.fetch("trun"), l = e.fetch("tfxd");
                l && l._parent.boxes.splice(l._parent.boxes.indexOf(l), 1);
                var m = e.fetch("tfrf");
                m && m._parent.boxes.splice(m._parent.boxes.indexOf(m), 1);
                var n = e.fetch("sepiff");
                if (null !== n) {
                    n.type = "senc";
                    n.usertype = void 0;
                    var p = e.fetch("saio");
                    if (null === p) {
                        p = this.g.createFullBox("saio", h);
                        p.version = 0;
                        p.flags = 0;
                        p.entry_count = 1;
                        p.offset = [0];
                        var q = this.g.createFullBox("saiz", h);
                        q.version = 0;
                        q.flags = 0;
                        q.sample_count = n.sample_count;
                        q.default_sample_info_size = 0;
                        q.sample_info_size = [];
                        if (n.flags & 2) for (d = 0; d < n.sample_count; d += 1) q.sample_info_size[d] = 10 + 6 * n.entry[d].NumberOfEntries; else q.default_sample_info_size =
                            8
                    }
                }
                f.flags &= 16777214;
                f.flags |= 131072;
                k.flags |= 1;
                var u = e.fetch("moof");
                k.data_offset = u.getLength() + 8;
                var w = e.fetch("saio");
                null !== w && (w.offset[0] = AD(u, "traf") + AD(h, "senc") + 16);
                var v = Ab(e.write());
                return Promise.resolve(v)
            } catch (A) {
                return A instanceof T ? Promise.reject(A) : Promise.reject(new T(2, 3, 3022, c ? c.M()[0] : null))
            }
        };

        function AD(a, b) {
            for (var c = 8, d = 0; d < a.boxes.length && a.boxes[d].type !== b; d++) c += a.boxes[d].size;
            return c
        }

        S("shaka.transmuxer.MssTransmuxer", xD);
        xD.prototype.transmux = xD.prototype.transmux;
        xD.prototype.getOriginalMimeType = xD.prototype.getOriginalMimeType;
        xD.prototype.convertCodecs = xD.prototype.convertCodecs;
        xD.prototype.isSupported = xD.prototype.isSupported;
        xD.prototype.destroy = xD.prototype.destroy;
        var zD = new Uint8Array([162, 57, 79, 82, 90, 155, 79, 20, 162, 68, 108, 66, 124, 100, 141, 244]);
        kc("mss/audio/mp4", function () {
            return new xD("mss/audio/mp4")
        }, sc);
        kc("mss/video/mp4", function () {
            return new xD("mss/video/mp4")
        }, sc);

        function BD(a) {
            this.l = a;
            this.g = 0;
            this.i = new Map;
            this.h = this.j = null
        }

        r = BD.prototype;
        r.destroy = function () {
            this.i.clear();
            this.h && this.h.destroy()
        };
        r.isSupported = function (a, b) {
            if ("video/mp2t" != a.toLowerCase().split(";")[0]) return !1;
            var c = a;
            b && (c = this.convertCodecs(b, a));
            var d = oe(c).split(",");
            c = Td("audio", d);
            d = Td("video", d);
            if (c && (c = ge(c), !CD.includes(c)) || d && (c = ge(d), !DD.includes(c))) return !1;
            if (b) return nb(this.convertCodecs(b, a));
            b = this.convertCodecs("audio", a);
            a = this.convertCodecs("video", a);
            return nb(b) || nb(a)
        };
        r.convertCodecs = function (a, b) {
            return "video/mp2t" == b.toLowerCase().split(";")[0] ? (b = oe(b).replace("mp4a.40.34", "mp3").split(",").map(function (c) {
                return bf(c, "audio/mp4")
            }).map(af).join(","), "audio" == a ? 'audio/mp4; codecs="' + b + '"' : 'video/mp4; codecs="' + b + '"') : b
        };
        r.getOriginalMimeType = function () {
            return this.l
        };
        r.transmux = function (a, b, c, d, e) {
            var f = Ab(a);
            if ("audio" == e && !Dj(f)) {
                for (var g = Vi(f), h = g.length; h < f.length; h++) if (uD(f, h)) return Promise.reject(new T(2, 3, 3018, c ? c.M()[0] : null));
                for (h = g.length; h < f.length; h++) if (ZC(f, h)) return this.h || (this.h = new aD("audio/aac")), this.h.transmux(a, b, c, d, e);
                return Promise.reject(new T(2, 3, 3018, c ? c.M()[0] : null))
            }
            this.j ? this.j.clearData() : this.j = new pj;
            var k = this.j.parse(f), l = [], m = k.sd();
            try {
                var n = null;
                if ("video" == e) {
                    switch (m.video) {
                        case "avc":
                            var p = [], q = null, u = [], w = k.Ic();
                            if (!w.length) throw new T(2, 3, 3023, c ? c.M()[0] : null);
                            for (var v = 0; v < w.length; v++) {
                                var A = w[v], y = A.nalus;
                                u.push.apply(u, x(y));
                                var D = iD(y);
                                if (D) {
                                    null == q && (q = A.dts);
                                    var z = void 0;
                                    z = v + 1 < w.length ? (w[v + 1].dts || 0) - (A.dts || 0) : 1 < w.length ? (A.dts || 0) - (w[v - 1].dts || 0) : 9E4 * (c.endTime - c.startTime);
                                    p.push({
                                        data: D.data,
                                        size: D.data.byteLength,
                                        duration: z,
                                        eb: Math.round((A.pts || 0) - (A.dts || 0)),
                                        flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: D.Cd ? 2 : 1, ib: D.Cd ? 0 : 1}
                                    })
                                }
                            }
                            var B = gD(u);
                            if (!B || null == q) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                            b.height = B.height;
                            b.width = B.width;
                            n = {
                                id: b.id,
                                type: "video",
                                codecs: "avc1",
                                encrypted: b.encrypted && 0 < b.drmInfos.length,
                                timescale: 9E4,
                                duration: d,
                                ab: [],
                                ma: new Uint8Array([]),
                                wa: B.wa,
                                Ba: B.Ba,
                                Ca: B.Ca,
                                data: {sb: this.g, baseMediaDecodeTime: q, Za: p},
                                stream: b
                            };
                            break;
                        case "hvc":
                            var C = [], F = null, I = [], L = k.Ic();
                            if (!L.length) throw new T(2, 3, 3023, c ? c.M()[0] : null);
                            for (var J = 0; J < L.length; J++) {
                                var E = L[J], K = E.nalus;
                                I.push.apply(I, x(K));
                                for (var N = !1, M = [], P = !1, R = t(K), Q = R.next(); !Q.done; Q = R.next()) {
                                    var W = Q.value;
                                    switch (W.type) {
                                        case 1:
                                        case 0:
                                            var aa =
                                                P = !0;
                                            break;
                                        case 19:
                                        case 20:
                                        case 21:
                                            N = aa = P = !0;
                                            break;
                                        case 32:
                                            aa = !0;
                                            break;
                                        case 33:
                                            aa = !0;
                                            break;
                                        case 34:
                                            aa = !0;
                                            break;
                                        case 35:
                                            P = aa = !0;
                                            break;
                                        case 39:
                                        case 40:
                                            aa = !0;
                                            break;
                                        default:
                                            aa = !1
                                    }
                                    if (P && aa) {
                                        var Sa = W.fullData.byteLength, ta = new Uint8Array(4);
                                        ta[0] = Sa >> 24 & 255;
                                        ta[1] = Sa >> 16 & 255;
                                        ta[2] = Sa >> 8 & 255;
                                        ta[3] = Sa & 255;
                                        M.push(ta);
                                        M.push(W.fullData)
                                    }
                                }
                                var Ma = M.length ? {data: Md.apply(Ed, x(M)), Cd: N} : null;
                                if (Ma) {
                                    null == F && null != E.dts && (F = E.dts);
                                    var Ya = void 0;
                                    Ya = J + 1 < L.length ? (L[J + 1].dts || 0) - (E.dts || 0) : 1 < L.length ? (E.dts || 0) - (L[J -
                                    1].dts || 0) : 9E4 * (c.endTime - c.startTime);
                                    C.push({
                                        data: Ma.data,
                                        size: Ma.data.byteLength,
                                        duration: Ya,
                                        eb: Math.round((E.pts || 0) - (E.dts || 0)),
                                        flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: Ma.Cd ? 2 : 1, ib: Ma.Cd ? 0 : 1}
                                    })
                                }
                            }
                            var Ta = jD(I);
                            if (!Ta || null == F) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                            b.height = Ta.height;
                            b.width = Ta.width;
                            n = {
                                id: b.id,
                                type: "video",
                                codecs: "hvc1",
                                encrypted: b.encrypted && 0 < b.drmInfos.length,
                                timescale: 9E4,
                                duration: d,
                                ab: [],
                                ma: new Uint8Array([]),
                                wa: Ta.wa,
                                Ba: Ta.Ba,
                                Ca: Ta.Ca,
                                data: {sb: this.g, baseMediaDecodeTime: F, Za: C},
                                stream: b
                            }
                    }
                    n &&
                    (l.push(n), n = null)
                }
                if ("audio" == e) {
                    switch (m.audio) {
                        case "aac":
                            for (var hb = [], Wa, Ua = null, mc = t(k.Wb()), Oa = mc.next(); !Oa.done; Oa = mc.next()) {
                                var lb = Oa.value, Pb = lb.data;
                                if (Pb) {
                                    var Nc = 0;
                                    Wa = YC(Pb, Nc);
                                    if (!Wa) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                                    b.audioSamplingRate = Wa.sampleRate;
                                    b.channelsCount = Wa.channelCount;
                                    null == Ua && null !== lb.pts && (Ua = lb.pts);
                                    for (; Nc < Pb.length;) {
                                        var ke = XC(Pb, Nc);
                                        if (ke) {
                                            var le = ke.le + ke.ba;
                                            Nc + le <= Pb.length && hb.push({
                                                data: Pb.subarray(Nc + ke.le, Nc + le),
                                                size: ke.ba,
                                                duration: 1024,
                                                eb: 0,
                                                flags: {
                                                    hb: 0,
                                                    Xa: 0, Wa: 0, Ua: 0, Va: 2, ib: 0
                                                }
                                            });
                                            Nc += le
                                        } else Nc++
                                    }
                                }
                            }
                            if (!Wa || null == Ua) {
                                if (!k.Ic().length) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                                Ua = 9E4 * c.startTime;
                                var me = Td("audio", b.codecs.split(","));
                                if (!me || !b.channelsCount || !b.audioSamplingRate) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                                Wa = {sampleRate: b.audioSamplingRate, channelCount: b.channelsCount, Na: me};
                                var Kd = $C(me, b.channelsCount);
                                if (!Kd) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                                for (var Li = Ua + 9E4 * (c.endTime - c.startTime), Ld = Ua; Ld < Li;) hb.push({
                                    data: Kd, size: Kd.byteLength,
                                    duration: 1024, eb: 0, flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: 2, ib: 0}
                                }), Ld += 1024 / Wa.sampleRate * 9E4
                            }
                            var Mi = Wa.sampleRate, Ni = Ua / 9E4 * Mi;
                            n = {
                                id: b.id,
                                type: "audio",
                                codecs: Wa.Na,
                                encrypted: b.encrypted && 0 < b.drmInfos.length,
                                timescale: Mi,
                                duration: d,
                                ab: [],
                                ma: new Uint8Array([]),
                                wa: new Uint8Array([]),
                                Ba: 0,
                                Ca: 0,
                                data: {sb: this.g, baseMediaDecodeTime: Ni, Za: hb},
                                stream: b
                            };
                            break;
                        case "ac3":
                            for (var Eg = [], ne = 0, nc = new Uint8Array([]), vj = null, Su = t(k.Wb()), Wm = Su.next(); !Wm.done; Wm = Su.next()) {
                                var Xm = Wm.value, Ym = Xm.data;
                                null == vj && null !== Xm.pts &&
                                (vj = Xm.pts);
                                for (var wf = 0; wf < Ym.length;) {
                                    var Od = bD(Ym, wf);
                                    Od ? (b.audioSamplingRate = Od.sampleRate, b.channelsCount = Od.channelCount, ne = Od.sampleRate, nc = Od.ma, Eg.push({
                                        data: Ym.subarray(wf, wf + Od.ba),
                                        size: Od.ba,
                                        duration: 1536,
                                        eb: 0,
                                        flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: 2, ib: 0}
                                    }), wf += Od.ba) : wf++
                                }
                            }
                            if (0 == ne || 0 == nc.byteLength || null == vj) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                            var TD = vj / 9E4 * ne;
                            n = {
                                id: b.id,
                                type: "audio",
                                codecs: "ac-3",
                                encrypted: b.encrypted && 0 < b.drmInfos.length,
                                timescale: ne,
                                duration: d,
                                ab: [],
                                ma: nc,
                                wa: new Uint8Array([]),
                                Ba: 0,
                                Ca: 0,
                                data: {sb: this.g, baseMediaDecodeTime: TD, Za: Eg},
                                stream: b
                            };
                            break;
                        case "ec3":
                            for (var Tu = [], wj = 0, Zm = new Uint8Array([]), xj = null, Uu = t(k.Wb()), $m = Uu.next(); !$m.done; $m = Uu.next()) {
                                var an = $m.value, bn = an.data;
                                null == xj && null !== an.pts && (xj = an.pts);
                                for (var xf = 0; xf < bn.length;) {
                                    var Pd = eD(bn, xf);
                                    Pd ? (b.audioSamplingRate = Pd.sampleRate, b.channelsCount = Pd.channelCount, wj = Pd.sampleRate, Zm = Pd.ma, Tu.push({
                                            data: bn.subarray(xf, xf + Pd.ba),
                                            size: Pd.ba,
                                            duration: 1536,
                                            eb: 0,
                                            flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: 2, ib: 0}
                                        }), xf += Pd.ba) :
                                        xf++
                                }
                            }
                            if (0 == wj || 0 == Zm.byteLength || null == xj) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                            var UD = xj / 9E4 * wj;
                            n = {
                                id: b.id,
                                type: "audio",
                                codecs: "ec-3",
                                encrypted: b.encrypted && 0 < b.drmInfos.length,
                                timescale: wj,
                                duration: d,
                                ab: [],
                                ma: Zm,
                                wa: new Uint8Array([]),
                                Ba: 0,
                                Ca: 0,
                                data: {sb: this.g, baseMediaDecodeTime: UD, Za: Tu},
                                stream: b
                            };
                            break;
                        case "mp3":
                            for (var Vu = [], yj, zj = null, Wu = t(k.Wb()), cn = Wu.next(); !cn.done; cn = Wu.next()) {
                                var dn = cn.value, Sg = dn.data;
                                if (Sg) {
                                    null == zj && null !== dn.pts && (zj = dn.pts);
                                    for (var qe = 0; qe < Sg.length;) {
                                        var yf = oD(Sg,
                                            qe);
                                        yf ? (yj || (yj = yf), qe + yf.ba <= Sg.length && Vu.push({
                                            data: Sg.subarray(qe, qe + yf.ba),
                                            size: yf.ba,
                                            duration: 1152,
                                            eb: 0,
                                            flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: 2, ib: 0}
                                        }), qe += yf.ba) : qe++
                                    }
                                }
                            }
                            if (!yj || null == zj) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                            var Xu = yj.sampleRate, VD = zj / 9E4 * Xu;
                            n = {
                                id: b.id,
                                type: "audio",
                                codecs: "mp3",
                                encrypted: b.encrypted && 0 < b.drmInfos.length,
                                timescale: Xu,
                                duration: d,
                                ab: [],
                                ma: new Uint8Array([]),
                                wa: new Uint8Array([]),
                                Ba: 0,
                                Ca: 0,
                                data: {sb: this.g, baseMediaDecodeTime: VD, Za: Vu},
                                stream: b
                            };
                            break;
                        case "opus":
                            var Yu =
                                [], Aj = null, Xc = k.F;
                            if (!Xc) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                            var Bb = [];
                            switch (Xc.Jh) {
                                case 1:
                                case 2:
                                    Bb = [0];
                                    break;
                                case 0:
                                    Bb = [255, 1, 1, 0, 1];
                                    break;
                                case 128:
                                    Bb = [255, 2, 0, 0, 1];
                                    break;
                                case 3:
                                    Bb = [1, 2, 1, 0, 2, 1];
                                    break;
                                case 4:
                                    Bb = [1, 2, 2, 0, 1, 2, 3];
                                    break;
                                case 5:
                                    Bb = [1, 3, 2, 0, 4, 1, 2, 3];
                                    break;
                                case 6:
                                    Bb = [1, 4, 2, 0, 4, 1, 2, 3, 5];
                                    break;
                                case 7:
                                    Bb = [1, 4, 2, 0, 4, 1, 2, 3, 5, 6];
                                    break;
                                case 8:
                                    Bb = [1, 5, 3, 0, 6, 1, 2, 3, 4, 5, 7];
                                    break;
                                case 130:
                                    Bb = [1, 1, 2, 0, 1];
                                    break;
                                case 131:
                                    Bb = [1, 1, 3, 0, 1, 2];
                                    break;
                                case 132:
                                    Bb = [1, 1, 4, 0, 1, 2, 3];
                                    break;
                                case 133:
                                    Bb = [1, 1, 5,
                                        0, 1, 2, 3, 4];
                                    break;
                                case 134:
                                    Bb = [1, 1, 6, 0, 1, 2, 3, 4, 5];
                                    break;
                                case 135:
                                    Bb = [1, 1, 7, 0, 1, 2, 3, 4, 5, 6];
                                    break;
                                case 136:
                                    Bb = [1, 1, 8, 0, 1, 2, 3, 4, 5, 6, 7]
                            }
                            var Zu = new Uint8Array([0, Xc.channelCount, 0, 0, Xc.sampleRate >>> 24 & 255, Xc.sampleRate >>> 17 & 255, Xc.sampleRate >>> 8 & 255, Xc.sampleRate >>> 0 & 255, 0, 0].concat(x(Bb)));
                            for (var $u = Xc.sampleRate, av = t(k.Wb()), en = av.next(); !en.done; en = av.next()) {
                                var fn = en.value, zf = fn.data;
                                null == Aj && null !== fn.pts && (Aj = fn.pts);
                                for (var Tg = 0; Tg < zf.length;) {
                                    for (var WD = 0 !== (zf[Tg + 1] & 16), XD = 0 !== (zf[Tg + 1] & 8),
                                             wd = Tg + 2, Bj = 0; 255 === zf[wd];) Bj += 255, wd += 1;
                                    Bj += zf[wd];
                                    wd += 1;
                                    wd += WD ? 2 : 0;
                                    wd += XD ? 2 : 0;
                                    var bv = zf.slice(wd, wd + Bj);
                                    Yu.push({
                                        data: bv,
                                        size: bv.byteLength,
                                        duration: 960,
                                        eb: 0,
                                        flags: {hb: 0, Xa: 0, Wa: 0, Ua: 0, Va: 2, ib: 0}
                                    });
                                    Tg = wd + Bj
                                }
                            }
                            if (0 == Zu.byteLength || null == Aj) throw new T(2, 3, 3018, c ? c.M()[0] : null);
                            b.audioSamplingRate = Xc.sampleRate;
                            b.channelsCount = Xc.channelCount;
                            var YD = Aj / 9E4 * $u;
                            n = {
                                id: b.id,
                                type: "audio",
                                codecs: "opus",
                                encrypted: b.encrypted && 0 < b.drmInfos.length,
                                timescale: $u,
                                duration: d,
                                ab: [],
                                ma: Zu,
                                wa: new Uint8Array([]),
                                Ba: 0,
                                Ca: 0,
                                data: {sb: this.g, baseMediaDecodeTime: YD, Za: Yu},
                                stream: b
                            }
                    }
                    n && (l.push(n), n = null)
                }
            } catch (gn) {
                return gn && 3023 == gn.code ? Promise.resolve(new Uint8Array([])) : Promise.reject(gn)
            }
            if (!l.length) return Promise.reject(new T(2, 3, 3018, c ? c.M()[0] : null));
            var cv = new nx(l), hn = b.id + "_" + c.i;
            if (this.i.has(hn)) var jn = this.i.get(hn); else jn = tx(cv), this.i.set(hn, jn);
            var ZD = Kx(cv);
            this.g++;
            var $D = Md(jn, ZD);
            return Promise.resolve($D)
        };
        S("shaka.transmuxer.TsTransmuxer", BD);
        BD.prototype.transmux = BD.prototype.transmux;
        BD.prototype.getOriginalMimeType = BD.prototype.getOriginalMimeType;
        BD.prototype.convertCodecs = BD.prototype.convertCodecs;
        BD.prototype.isSupported = BD.prototype.isSupported;
        BD.prototype.destroy = BD.prototype.destroy;
        var CD = ["aac", "ac-3", "ec-3", "mp3", "opus"], DD = ["avc", "hevc"];
        kc("video/mp2t", function () {
            return new BD("video/mp2t")
        }, qc);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
        function ED() {
        }

        var FD;

        function GD() {
            FD || navigator.emeEncryptionSchemePolyfilled ? console.debug("EmeEncryptionSchemePolyfill: Already installed.") : navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration ? (FD = navigator.requestMediaKeySystemAccess, console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."), navigator.requestMediaKeySystemAccess = HD, navigator.emeEncryptionSchemePolyfilled = !0) : console.debug("EmeEncryptionSchemePolyfill: EME not found")
        }

        function HD(a, b) {
            var c = this, d;
            return O(function (e) {
                if (1 == e.g) return console.assert(c == navigator, 'bad "this" for requestMediaKeySystemAccess'), G(e, FD.call(c, a, b), 2);
                d = e.h;
                if (ID(d)) return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."), navigator.requestMediaKeySystemAccess = FD, e.return(d);
                console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");
                navigator.requestMediaKeySystemAccess = JD;
                return e.return(JD.call(c,
                    a, b))
            })
        }

        function JD(a, b) {
            var c = this, d, e, f, g, h, k, l, m, n, p, q, u;
            return O(function (w) {
                if (1 == w.g) {
                    console.assert(c == navigator, 'bad "this" for requestMediaKeySystemAccess');
                    d = KD(a);
                    e = [];
                    f = t(b);
                    for (g = f.next(); !g.done; g = f.next()) h = g.value, k = LD(h.videoCapabilities, d), l = LD(h.audioCapabilities, d), h.videoCapabilities && h.videoCapabilities.length && !k.length || h.audioCapabilities && h.audioCapabilities.length && !l.length || (m = Object.assign({}, h), m.videoCapabilities = k, m.audioCapabilities = l, e.push(m));
                    if (!e.length) throw n = Error("Unsupported keySystem or supportedConfigurations."),
                        n.name = "NotSupportedError", n.code = DOMException.NOT_SUPPORTED_ERR, n;
                    return G(w, FD.call(c, a, e), 2)
                }
                p = w.h;
                u = q = null;
                e[0] && (e[0].videoCapabilities && (q = e[0].videoCapabilities[0].encryptionScheme), e[0].audioCapabilities && (u = e[0].audioCapabilities[0].encryptionScheme));
                return w.return(new MD(p, q, u))
            })
        }

        function LD(a, b) {
            return a ? a.filter(function (c) {
                return ND(c.encryptionScheme, b)
            }) : a
        }

        S("EmeEncryptionSchemePolyfill", ED);
        ED.install = GD;

        function OD() {
        }

        var PD;

        function QD() {
            PD || navigator.mediaCapabilitiesEncryptionSchemePolyfilled ? console.debug("McEncryptionSchemePolyfill: Already installed.") : navigator.mediaCapabilities ? (PD = navigator.mediaCapabilities.decodingInfo, console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."), navigator.mediaCapabilities.decodingInfo = RD, navigator.mediaCapabilitiesEncryptionSchemePolyfilled = !0) : console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")
        }

        function RD(a) {
            var b = this, c, d, e;
            return O(function (f) {
                switch (f.g) {
                    case 1:
                        return console.assert(b == navigator.mediaCapabilities, 'bad "this" for decodingInfo'), G(f, PD.call(b, a), 2);
                    case 2:
                        c = f.h;
                        if (!a.keySystemConfiguration) return f.return(c);
                        if ((d = c.keySystemAccess) && ID(d)) return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."), navigator.mediaCapabilities.decodingInfo = PD, f.return(c);
                        console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");
                        navigator.mediaCapabilities.decodingInfo = SD;
                        if (d) {
                            f.u(3);
                            break
                        }
                        e = c;
                        return G(f, aE(a), 4);
                    case 4:
                        return e.keySystemAccess = f.h, f.return(c);
                    case 3:
                        return f.return(SD.call(b, a))
                }
            })
        }

        function SD(a) {
            var b = this, c, d, e, f, g, h, k, l;
            return O(function (m) {
                switch (m.g) {
                    case 1:
                        return console.assert(b == navigator.mediaCapabilities, 'bad "this" for decodingInfo'), d = c = null, !a.keySystemConfiguration || (e = a.keySystemConfiguration, f = e.keySystem, d = e.audio && e.audio.encryptionScheme, c = e.video && e.video.encryptionScheme, g = KD(f), h = {
                            powerEfficient: !1,
                            smooth: !1,
                            supported: !1,
                            keySystemAccess: null,
                            configuration: a
                        }, ND(d, g) && ND(c, g)) ? G(m, PD.call(b, a), 2) : m.return(h);
                    case 2:
                        k = m.h;
                        if (k.keySystemAccess) {
                            k.keySystemAccess =
                                new MD(k.keySystemAccess, c, d);
                            m.u(3);
                            break
                        }
                        if (!a.keySystemConfiguration) {
                            m.u(3);
                            break
                        }
                        l = k;
                        return G(m, aE(a), 5);
                    case 5:
                        l.keySystemAccess = m.h;
                    case 3:
                        return m.return(k)
                }
            })
        }

        function aE(a) {
            var b, c;
            return O(function (d) {
                if (1 == d.g) {
                    var e = a.keySystemConfiguration, f = [], g = [];
                    e.audio && f.push({
                        robustness: e.audio.robustness || "",
                        contentType: a.audio.contentType,
                        encryptionScheme: e.audio.encryptionScheme
                    });
                    e.video && g.push({
                        robustness: e.video.robustness || "",
                        contentType: a.video.contentType,
                        encryptionScheme: e.video.encryptionScheme
                    });
                    e = {
                        initDataTypes: e.initDataType ? [e.initDataType] : [],
                        distinctiveIdentifier: e.distinctiveIdentifier,
                        persistentState: e.persistentState,
                        sessionTypes: e.sessionTypes
                    };
                    f.length && (e.audioCapabilities = f);
                    g.length && (e.videoCapabilities = g);
                    b = e;
                    return G(d, navigator.requestMediaKeySystemAccess(a.keySystemConfiguration.keySystem, [b]), 2)
                }
                c = d.h;
                return d.return(c)
            })
        }

        S("McEncryptionSchemePolyfill", OD);
        OD.install = QD;

        function MD(a, b, c) {
            this.g = a;
            this.i = b || null;
            this.h = c || null;
            this.keySystem = a.keySystem
        }

        MD.prototype.getConfiguration = function () {
            var a = this.g.getConfiguration();
            if (a.videoCapabilities) for (var b = t(a.videoCapabilities), c = b.next(); !c.done; c = b.next()) c.value.encryptionScheme = this.i;
            if (a.audioCapabilities) for (b = t(a.audioCapabilities), c = b.next(); !c.done; c = b.next()) c.value.encryptionScheme = this.h;
            return a
        };
        MD.prototype.createMediaKeys = function () {
            return this.g.createMediaKeys()
        };

        function KD(a) {
            if (a.startsWith("com.widevine") || a.startsWith("com.microsoft") || a.startsWith("com.chromecast") || a.startsWith("com.adobe") || a.startsWith("org.w3")) return "cenc";
            if (a.startsWith("com.apple")) return "cbcs";
            console.warn("EmeEncryptionSchemePolyfill: Unknown key system:", a, "Please contribute!");
            return null
        }

        function ID(a) {
            a = a.getConfiguration();
            var b = a.audioCapabilities && a.audioCapabilities[0];
            return (a = a.videoCapabilities && a.videoCapabilities[0] || b) && void 0 !== a.encryptionScheme ? !0 : !1
        }

        function ND(a, b) {
            if (!a || a == b) return !0;
            if ("cbcs" == a || "cbcs-1-9" == a) if (bE || cE) return !0;
            return !1
        }

        function dE() {
        }

        function iA() {
            GD();
            QD()
        }

        S("EncryptionSchemePolyfills", dE);
        dE.install = iA;
        var cE = navigator.userAgent.includes("CrKey"),
            bE = 100 <= parseInt(navigator.userAgent.split("Firefox/").pop(), 10);
        "undefined" !== typeof module && module.exports && (module.exports = dE);
    }).call(exportTo, innerGlobal, innerGlobal, undefined);
    if (typeof exports != "undefined") for (var k in exportTo.shaka) exports[k] = exportTo.shaka[k]; else if (typeof define == "function" && define.amd) define(function () {
        return exportTo.shaka
    }); else innerGlobal.shaka = exportTo.shaka
})();

//# sourceMappingURL=shaka-player.compiled.map